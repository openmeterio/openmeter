-- create "app_custom_invoicings" table
CREATE TABLE "app_custom_invoicings" (
  "id" character(26) NOT NULL,
  "namespace" character varying NOT NULL,
  "created_at" timestamptz NOT NULL,
  "updated_at" timestamptz NOT NULL,
  "deleted_at" timestamptz NULL,
  "skip_draft_sync_hook" boolean NOT NULL DEFAULT false,
  "skip_issuing_sync_hook" boolean NOT NULL DEFAULT false,
  PRIMARY KEY ("id"),
  CONSTRAINT "app_custom_invoicings_apps_app" FOREIGN KEY ("id") REFERENCES "apps" ("id") ON UPDATE NO ACTION ON DELETE CASCADE
);
-- create index "appcustominvoicing_id" to table: "app_custom_invoicings"
CREATE UNIQUE INDEX "appcustominvoicing_id" ON "app_custom_invoicings" ("id");
-- create index "appcustominvoicing_namespace" to table: "app_custom_invoicings"
CREATE INDEX "appcustominvoicing_namespace" ON "app_custom_invoicings" ("namespace");
-- create "app_custom_invoicing_customers" table
CREATE TABLE "app_custom_invoicing_customers" (
  "id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY,
  "namespace" character varying NOT NULL,
  "created_at" timestamptz NOT NULL,
  "updated_at" timestamptz NOT NULL,
  "deleted_at" timestamptz NULL,
  "metadata" jsonb NULL,
  "app_id" character(26) NOT NULL,
  "customer_id" character(26) NOT NULL,
  PRIMARY KEY ("id"),
  CONSTRAINT "app_custom_invoicing_customers_app_custom_invoicings_customer_a" FOREIGN KEY ("app_id") REFERENCES "app_custom_invoicings" ("id") ON UPDATE NO ACTION ON DELETE CASCADE,
  CONSTRAINT "app_custom_invoicing_customers_customers_customer" FOREIGN KEY ("customer_id") REFERENCES "customers" ("id") ON UPDATE NO ACTION ON DELETE CASCADE
);
-- create index "appcustominvoicingcustomer_namespace" to table: "app_custom_invoicing_customers"
CREATE INDEX "appcustominvoicingcustomer_namespace" ON "app_custom_invoicing_customers" ("namespace");
-- create index "appcustominvoicingcustomer_namespace_app_id_customer_id" to table: "app_custom_invoicing_customers"
CREATE UNIQUE INDEX "appcustominvoicingcustomer_namespace_app_id_customer_id" ON "app_custom_invoicing_customers" ("namespace", "app_id", "customer_id");

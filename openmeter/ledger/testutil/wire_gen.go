// Code generated by Wire. DO NOT EDIT.

//go:generate go run -mod=mod github.com/google/wire/cmd/wire
//go:build !wireinject
// +build !wireinject

package testutil

import (
	"github.com/openmeterio/openmeter/app/common"
	"github.com/openmeterio/openmeter/openmeter/ent/db"
	"github.com/openmeterio/openmeter/openmeter/ledger/account"
	"github.com/openmeterio/openmeter/openmeter/ledger/historical"
	"github.com/openmeterio/openmeter/openmeter/ledger/resolvers"
	"log/slog"
)

// Injectors from wire.go:

// InitDeps builds the full ledger stack from an already-open ent client and logger.
func InitDeps(db2 *db.Client, logger *slog.Logger) (Deps, error) {
	repo := common.NewLedgerAccountRepo(db2)
	locker, err := common.NewLocker(logger)
	if err != nil {
		return Deps{}, err
	}
	accountLiveServices := common.NewLedgerAccountLiveServices(locker)
	service := common.NewLedgerAccountService(repo, accountLiveServices)
	resolversRepo := common.NewLedgerResolversRepo(db2)
	resolversService := common.NewLedgerResolversService(service, resolversRepo)
	historicalRepo := common.NewLedgerHistoricalRepo(db2)
	ledger := common.NewLedgerHistoricalLedger(historicalRepo, service, locker)
	deps := Deps{
		AccountService:   service,
		ResolversService: resolversService,
		HistoricalLedger: ledger,
	}
	return deps, nil
}

// wire.go:

// Deps holds the wired ledger components needed for integration tests.
type Deps struct {
	AccountService   account.Service
	ResolversService *resolvers.Service
	HistoricalLedger *historical.Ledger
}

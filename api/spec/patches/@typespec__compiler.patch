diff --git a/dist/manifest.js b/dist/manifest.js
index 556ea5e5760a5bf5ab2cd04200d7ea20a50079ab..c959715aaae520abc416dfae5fb44af462ab203b 100644
--- a/dist/manifest.js
+++ b/dist/manifest.js
@@ -1,4 +1,4 @@
 export default {
   "version": "1.6.0",
-  "commit": "d8ea328e72d19b863da1fd4d499ec2ff6e5b737c"
+  "commit": "7c6c41240e2649bbf072c9e5a57660100ead02c2"
 };
\ No newline at end of file
diff --git a/dist/src/core/compiler-code-fixes/model-to-object-literal.codefix.d.ts b/dist/src/core/compiler-code-fixes/model-to-object-literal.codefix.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..e896b82b5846d704e77f7b5e4b870be61a9d19d8
--- /dev/null
+++ b/dist/src/core/compiler-code-fixes/model-to-object-literal.codefix.d.ts
@@ -0,0 +1,6 @@
+import type { ModelExpressionNode } from "../types.js";
+/**
+ * Quick fix that convert a model expression to an object value.
+ */
+export declare function createModelToObjectValueCodeFix(node: ModelExpressionNode): import("../types.js").CodeFix;
+//# sourceMappingURL=model-to-object-literal.codefix.d.ts.map
\ No newline at end of file
diff --git a/dist/src/core/compiler-code-fixes/model-to-object-literal.codefix.d.ts.map b/dist/src/core/compiler-code-fixes/model-to-object-literal.codefix.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..d9597e316aa2726cb2862b4ce8c1b5fcd64e0019
--- /dev/null
+++ b/dist/src/core/compiler-code-fixes/model-to-object-literal.codefix.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"model-to-object-literal.codefix.d.ts","sourceRoot":"","sources":["../../../../src/core/compiler-code-fixes/model-to-object-literal.codefix.ts"],"names":[],"mappings":"AACA,OAAO,KAAK,EAAE,mBAAmB,EAAE,MAAM,aAAa,CAAC;AAEvD;;GAEG;AACH,wBAAgB,+BAA+B,CAAC,IAAI,EAAE,mBAAmB,iCASxE"}
\ No newline at end of file
diff --git a/dist/src/core/compiler-code-fixes/model-to-object-literal.codefix.js b/dist/src/core/compiler-code-fixes/model-to-object-literal.codefix.js
new file mode 100644
index 0000000000000000000000000000000000000000..a876db75824b651b22e9fe92f41b2ade8db6acfb
--- /dev/null
+++ b/dist/src/core/compiler-code-fixes/model-to-object-literal.codefix.js
@@ -0,0 +1,15 @@
+import { defineCodeFix, getSourceLocation } from "../diagnostics.js";
+/**
+ * Quick fix that convert a model expression to an object value.
+ */
+export function createModelToObjectValueCodeFix(node) {
+    return defineCodeFix({
+        id: "model-to-object-value",
+        label: `Convert to an object value \`#{}\``,
+        fix: (context) => {
+            const location = getSourceLocation(node);
+            return context.prependText(location, "#");
+        },
+    });
+}
+//# sourceMappingURL=model-to-object-literal.codefix.js.map
\ No newline at end of file
diff --git a/dist/src/core/compiler-code-fixes/model-to-object-literal.codefix.js.map b/dist/src/core/compiler-code-fixes/model-to-object-literal.codefix.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..e90542993c0c60eff1c10cbf3fc44bfb97da7962
--- /dev/null
+++ b/dist/src/core/compiler-code-fixes/model-to-object-literal.codefix.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"model-to-object-literal.codefix.js","sourceRoot":"","sources":["../../../../src/core/compiler-code-fixes/model-to-object-literal.codefix.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,aAAa,EAAE,iBAAiB,EAAE,MAAM,mBAAmB,CAAC;AAGrE;;GAEG;AACH,MAAM,UAAU,+BAA+B,CAAC,IAAyB;IACvE,OAAO,aAAa,CAAC;QACnB,EAAE,EAAE,uBAAuB;QAC3B,KAAK,EAAE,oCAAoC;QAC3C,GAAG,EAAE,CAAC,OAAO,EAAE,EAAE;YACf,MAAM,QAAQ,GAAG,iBAAiB,CAAC,IAAI,CAAC,CAAC;YACzC,OAAO,OAAO,CAAC,WAAW,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;QAC5C,CAAC;KACF,CAAC,CAAC;AACL,CAAC"}
\ No newline at end of file
diff --git a/dist/src/core/compiler-code-fixes/tuple-to-array-value.codefix.d.ts b/dist/src/core/compiler-code-fixes/tuple-to-array-value.codefix.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..3c3dc53b43c51ad0559a4860d399e975a06c939b
--- /dev/null
+++ b/dist/src/core/compiler-code-fixes/tuple-to-array-value.codefix.d.ts
@@ -0,0 +1,6 @@
+import type { TupleExpressionNode } from "../types.js";
+/**
+ * Quick fix that convert a tuple to an array value.
+ */
+export declare function createTupleToArrayValueCodeFix(node: TupleExpressionNode): import("../types.js").CodeFix;
+//# sourceMappingURL=tuple-to-array-value.codefix.d.ts.map
\ No newline at end of file
diff --git a/dist/src/core/compiler-code-fixes/tuple-to-array-value.codefix.d.ts.map b/dist/src/core/compiler-code-fixes/tuple-to-array-value.codefix.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..229cdcd9e1f22b6610e5da58a290d61ee94ebbde
--- /dev/null
+++ b/dist/src/core/compiler-code-fixes/tuple-to-array-value.codefix.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"tuple-to-array-value.codefix.d.ts","sourceRoot":"","sources":["../../../../src/core/compiler-code-fixes/tuple-to-array-value.codefix.ts"],"names":[],"mappings":"AACA,OAAO,KAAK,EAAE,mBAAmB,EAAE,MAAM,aAAa,CAAC;AAEvD;;GAEG;AACH,wBAAgB,8BAA8B,CAAC,IAAI,EAAE,mBAAmB,iCASvE"}
\ No newline at end of file
diff --git a/dist/src/core/compiler-code-fixes/tuple-to-array-value.codefix.js b/dist/src/core/compiler-code-fixes/tuple-to-array-value.codefix.js
new file mode 100644
index 0000000000000000000000000000000000000000..9c97e265855af65d2757cd8e46f10cee8c02a989
--- /dev/null
+++ b/dist/src/core/compiler-code-fixes/tuple-to-array-value.codefix.js
@@ -0,0 +1,15 @@
+import { defineCodeFix, getSourceLocation } from "../diagnostics.js";
+/**
+ * Quick fix that convert a tuple to an array value.
+ */
+export function createTupleToArrayValueCodeFix(node) {
+    return defineCodeFix({
+        id: "tuple-to-array-value",
+        label: `Convert to an array value \`#[]\``,
+        fix: (context) => {
+            const location = getSourceLocation(node);
+            return context.prependText(location, "#");
+        },
+    });
+}
+//# sourceMappingURL=tuple-to-array-value.codefix.js.map
\ No newline at end of file
diff --git a/dist/src/core/compiler-code-fixes/tuple-to-array-value.codefix.js.map b/dist/src/core/compiler-code-fixes/tuple-to-array-value.codefix.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..b50e1977d588b165e6ce04ba0643839d8a3d53e6
--- /dev/null
+++ b/dist/src/core/compiler-code-fixes/tuple-to-array-value.codefix.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"tuple-to-array-value.codefix.js","sourceRoot":"","sources":["../../../../src/core/compiler-code-fixes/tuple-to-array-value.codefix.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,aAAa,EAAE,iBAAiB,EAAE,MAAM,mBAAmB,CAAC;AAGrE;;GAEG;AACH,MAAM,UAAU,8BAA8B,CAAC,IAAyB;IACtE,OAAO,aAAa,CAAC;QACnB,EAAE,EAAE,sBAAsB;QAC1B,KAAK,EAAE,mCAAmC;QAC1C,GAAG,EAAE,CAAC,OAAO,EAAE,EAAE;YACf,MAAM,QAAQ,GAAG,iBAAiB,CAAC,IAAI,CAAC,CAAC;YACzC,OAAO,OAAO,CAAC,WAAW,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;QAC5C,CAAC;KACF,CAAC,CAAC;AACL,CAAC"}
\ No newline at end of file
diff --git a/dist/src/core/helpers/projected-names-utils.d.ts b/dist/src/core/helpers/projected-names-utils.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..30e547398087930a0bf3059a08c0d72abe7aa99e
--- /dev/null
+++ b/dist/src/core/helpers/projected-names-utils.d.ts
@@ -0,0 +1,20 @@
+import type { Program, ProjectedProgram } from "../program.js";
+import type { Type } from "../types.js";
+export interface ProjectedNameView {
+    program: ProjectedProgram;
+    /**
+     * Get the name of the given entity in that scope.
+     * If there is a projected name it returns that one otherwise return the original name.
+     */
+    getProjectedName(target: Type & {
+        name: string;
+    }): string;
+}
+/**
+ * Create an helper to manager project names.
+ * @param program Program
+ * @param target Name of the projected name target(e.g. json, csharp, etc.)
+ * @returns ProjectedNameView
+ */
+export declare function createProjectedNameProgram(program: Program, target: string): ProjectedNameView;
+//# sourceMappingURL=projected-names-utils.d.ts.map
\ No newline at end of file
diff --git a/dist/src/core/helpers/projected-names-utils.d.ts.map b/dist/src/core/helpers/projected-names-utils.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..ff1f5a2fcb09a2067b1ae6a8b756d690611a09db
--- /dev/null
+++ b/dist/src/core/helpers/projected-names-utils.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"projected-names-utils.d.ts","sourceRoot":"","sources":["../../../../src/core/helpers/projected-names-utils.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,OAAO,EAAE,gBAAgB,EAAE,MAAM,eAAe,CAAC;AAE/D,OAAO,KAAK,EAAa,IAAI,EAAE,MAAM,aAAa,CAAC;AAEnD,MAAM,WAAW,iBAAiB;IAChC,OAAO,EAAE,gBAAgB,CAAC;IAE1B;;;OAGG;IACH,gBAAgB,CAAC,MAAM,EAAE,IAAI,GAAG;QAAE,IAAI,EAAE,MAAM,CAAA;KAAE,GAAG,MAAM,CAAC;CAC3D;AAED;;;;;GAKG;AACH,wBAAgB,0BAA0B,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,GAAG,iBAAiB,CAyB9F"}
\ No newline at end of file
diff --git a/dist/src/core/helpers/projected-names-utils.js b/dist/src/core/helpers/projected-names-utils.js
new file mode 100644
index 0000000000000000000000000000000000000000..1adbc3bc4110ee6e384db8a41a2a93afabd9c5f1
--- /dev/null
+++ b/dist/src/core/helpers/projected-names-utils.js
@@ -0,0 +1,42 @@
+import { projectProgram } from "../program.js";
+/**
+ * Create an helper to manager project names.
+ * @param program Program
+ * @param target Name of the projected name target(e.g. json, csharp, etc.)
+ * @returns ProjectedNameView
+ */
+export function createProjectedNameProgram(program, target) {
+    const projectedProgram = projectProgram(program, [
+        {
+            projectionName: "target",
+            arguments: [target],
+        },
+    ]);
+    return {
+        program: projectedProgram,
+        getProjectedName,
+    };
+    function getProjectedName(type) {
+        const baseType = findTypeInProjector(projectedProgram.projector, type);
+        const projectedType = projectedProgram.projector.projectedTypes.get(baseType);
+        if (projectedType === undefined ||
+            !("name" in projectedType) ||
+            projectedType.name === baseType.name) {
+            return type.name;
+        }
+        return projectedType.name;
+    }
+}
+// TODO will REALM help here?
+function findTypeInProjector(projector, type) {
+    if (type.projectionSource === undefined) {
+        return type;
+    }
+    else if (type.projector === projector) {
+        return type;
+    }
+    else {
+        return findTypeInProjector(projector, type.projectionSource);
+    }
+}
+//# sourceMappingURL=projected-names-utils.js.map
\ No newline at end of file
diff --git a/dist/src/core/helpers/projected-names-utils.js.map b/dist/src/core/helpers/projected-names-utils.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..c834bfc480733ff645a28b12c0c5b7f821c6171e
--- /dev/null
+++ b/dist/src/core/helpers/projected-names-utils.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"projected-names-utils.js","sourceRoot":"","sources":["../../../../src/core/helpers/projected-names-utils.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,cAAc,EAAE,MAAM,eAAe,CAAC;AAa/C;;;;;GAKG;AACH,MAAM,UAAU,0BAA0B,CAAC,OAAgB,EAAE,MAAc;IACzE,MAAM,gBAAgB,GAAG,cAAc,CAAC,OAAO,EAAE;QAC/C;YACE,cAAc,EAAE,QAAQ;YACxB,SAAS,EAAE,CAAC,MAAM,CAAC;SACpB;KACF,CAAC,CAAC;IAEH,OAAO;QACL,OAAO,EAAE,gBAAgB;QACzB,gBAAgB;KACjB,CAAC;IAEF,SAAS,gBAAgB,CAAC,IAA6B;QACrD,MAAM,QAAQ,GAAG,mBAAmB,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;QACvE,MAAM,aAAa,GAAG,gBAAgB,CAAC,SAAS,CAAC,cAAc,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAC9E,IACE,aAAa,KAAK,SAAS;YAC3B,CAAC,CAAC,MAAM,IAAI,aAAa,CAAC;YAC1B,aAAa,CAAC,IAAI,KAAK,QAAQ,CAAC,IAAI,EACpC,CAAC;YACD,OAAO,IAAI,CAAC,IAAI,CAAC;QACnB,CAAC;QACD,OAAO,aAAa,CAAC,IAAc,CAAC;IACtC,CAAC;AACH,CAAC;AAED,6BAA6B;AAC7B,SAAS,mBAAmB,CAAiB,SAAgC,EAAE,IAAO;IACpF,IAAI,IAAI,CAAC,gBAAgB,KAAK,SAAS,EAAE,CAAC;QACxC,OAAO,IAAI,CAAC;IACd,CAAC;SAAM,IAAI,IAAI,CAAC,SAAS,KAAK,SAAS,EAAE,CAAC;QACxC,OAAO,IAAI,CAAC;IACd,CAAC;SAAM,CAAC;QACN,OAAO,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,gBAAgB,CAAQ,CAAC;IACtE,CAAC;AACH,CAAC"}
\ No newline at end of file
diff --git a/dist/src/core/index.d.ts b/dist/src/core/index.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..e26a57a8ca84c682b2b77b57b9d6e340ffd33436
--- /dev/null
+++ b/dist/src/core/index.d.ts
@@ -0,0 +1,2 @@
+export {};
+//# sourceMappingURL=index.d.ts.map
\ No newline at end of file
diff --git a/dist/src/core/index.d.ts.map b/dist/src/core/index.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..33498c611c4586fcbb2da09347e7a5638ed298a1
--- /dev/null
+++ b/dist/src/core/index.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.d.ts","sourceRoot":"","sources":["../../../src/core/index.ts"],"names":[],"mappings":""}
\ No newline at end of file
diff --git a/dist/src/core/index.js b/dist/src/core/index.js
new file mode 100644
index 0000000000000000000000000000000000000000..f8a711af8c0098cea04acd117a3294818a14a7e8
--- /dev/null
+++ b/dist/src/core/index.js
@@ -0,0 +1,2 @@
+export {};
+//# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/dist/src/core/index.js.map b/dist/src/core/index.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..38b0ffc5f65d20efd64ad564b51cb28fdc5eee3d
--- /dev/null
+++ b/dist/src/core/index.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/core/index.ts"],"names":[],"mappings":""}
\ No newline at end of file
diff --git a/dist/src/core/install.d.ts b/dist/src/core/install.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0485c2c41f35550214d2597d9341e58177fed20
--- /dev/null
+++ b/dist/src/core/install.d.ts
@@ -0,0 +1,3 @@
+import { CliCompilerHost } from "./cli/types.js";
+export declare function installTypeSpecDependencies(host: CliCompilerHost, directory: string): Promise<void>;
+//# sourceMappingURL=install.d.ts.map
\ No newline at end of file
diff --git a/dist/src/core/install.d.ts.map b/dist/src/core/install.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..dc16719230e8e6bfa10ac449dc343df05871d8d9
--- /dev/null
+++ b/dist/src/core/install.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"install.d.ts","sourceRoot":"","sources":["../../../src/core/install.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,eAAe,EAAE,MAAM,gBAAgB,CAAC;AAUjD,wBAAsB,2BAA2B,CAC/C,IAAI,EAAE,eAAe,EACrB,SAAS,EAAE,MAAM,GAChB,OAAO,CAAC,IAAI,CAAC,CAuBf"}
\ No newline at end of file
diff --git a/dist/src/core/install.js b/dist/src/core/install.js
new file mode 100644
index 0000000000000000000000000000000000000000..859673c5a21eafdb14106afc9f672b6ff61a0dde
--- /dev/null
+++ b/dist/src/core/install.js
@@ -0,0 +1,24 @@
+import { spawn } from "child_process";
+export async function installTypeSpecDependencies(host, directory) {
+    const child = spawn("npm", ["install"], {
+        shell: process.platform === "win32",
+        stdio: "inherit",
+        cwd: directory,
+        env: process.env,
+    });
+    return new Promise(() => {
+        child.on("error", (error) => {
+            if (error.code === "ENOENT") {
+                host.logger.error("Cannot find `npm` executable. Make sure to have npm installed in your path.");
+            }
+            else {
+                host.logger.error(error.toString());
+            }
+            process.exit(error.errno);
+        });
+        child.on("exit", (exitCode) => {
+            process.exit(exitCode ?? -1);
+        });
+    });
+}
+//# sourceMappingURL=install.js.map
\ No newline at end of file
diff --git a/dist/src/core/install.js.map b/dist/src/core/install.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..f571f2d85b95a59669f5af87c1dafdfdcc1a19c1
--- /dev/null
+++ b/dist/src/core/install.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"install.js","sourceRoot":"","sources":["../../../src/core/install.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,KAAK,EAAE,MAAM,eAAe,CAAC;AAWtC,MAAM,CAAC,KAAK,UAAU,2BAA2B,CAC/C,IAAqB,EACrB,SAAiB;IAEjB,MAAM,KAAK,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC,SAAS,CAAC,EAAE;QACtC,KAAK,EAAE,OAAO,CAAC,QAAQ,KAAK,OAAO;QACnC,KAAK,EAAE,SAAS;QAChB,GAAG,EAAE,SAAS;QACd,GAAG,EAAE,OAAO,CAAC,GAAG;KACjB,CAAC,CAAC;IAEH,OAAO,IAAI,OAAO,CAAC,GAAG,EAAE;QACtB,KAAK,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,KAAiB,EAAE,EAAE;YACtC,IAAI,KAAK,CAAC,IAAI,KAAK,QAAQ,EAAE,CAAC;gBAC5B,IAAI,CAAC,MAAM,CAAC,KAAK,CACf,6EAA6E,CAC9E,CAAC;YACJ,CAAC;iBAAM,CAAC;gBACN,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;YACtC,CAAC;YACD,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC;QACH,KAAK,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE,EAAE;YAC5B,OAAO,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,CAAC,CAAC,CAAC;QAC/B,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC"}
\ No newline at end of file
diff --git a/dist/src/core/linter.d.ts b/dist/src/core/linter.d.ts
index f8f2956b2058853a03cbc292d30b6b7c1440af00..03c0045a2adcaa22fb9f7eefcaf764227ed2635b 100644
--- a/dist/src/core/linter.d.ts
+++ b/dist/src/core/linter.d.ts
@@ -7,7 +7,7 @@ type LinterLibraryInstance = {
 export interface Linter {
     extendRuleSet(ruleSet: LinterRuleSet): Promise<readonly Diagnostic[]>;
     registerLinterLibrary(name: string, lib?: LinterLibraryInstance): void;
-    lint(): LinterResult;
+    lint(): Promise<LinterResult>;
 }
 export interface LinterStats {
     runtime: {
diff --git a/dist/src/core/linter.d.ts.map b/dist/src/core/linter.d.ts.map
index d964d75f3a0ba6802a48e6f3f96d07a86998b3df..7e74fdaee7d2baa7b03b93501585c6395a473ccb 100644
--- a/dist/src/core/linter.d.ts.map
+++ b/dist/src/core/linter.d.ts.map
@@ -1 +1 @@
-{"version":3,"file":"linter.d.ts","sourceRoot":"","sources":["../../../src/core/linter.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,mBAAmB,EAA6C,MAAM,kBAAkB,CAAC;AAMlG,OAAO,KAAK,EAAE,OAAO,EAAE,MAAM,cAAc,CAAC;AAG5C,OAAO,EACL,UAAU,EACV,kBAAkB,EAClB,gBAAgB,EAChB,wBAAwB,EACxB,UAAU,EACV,iBAAiB,EAEjB,aAAa,EAId,MAAM,YAAY,CAAC;AAEpB,KAAK,qBAAqB,GAAG;IAAE,MAAM,EAAE,wBAAwB,CAAA;CAAE,CAAC;AAElE,MAAM,WAAW,MAAM;IACrB,aAAa,CAAC,OAAO,EAAE,aAAa,GAAG,OAAO,CAAC,SAAS,UAAU,EAAE,CAAC,CAAC;IACtE,qBAAqB,CAAC,IAAI,EAAE,MAAM,EAAE,GAAG,CAAC,EAAE,qBAAqB,GAAG,IAAI,CAAC;IACvE,IAAI,IAAI,YAAY,CAAC;CACtB;AAED,MAAM,WAAW,WAAW;IAC1B,OAAO,EAAE;QACP,KAAK,EAAE,MAAM,CAAC;QACd,KAAK,EAAE,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;KAC/B,CAAC;CACH;AACD,MAAM,WAAW,YAAY;IAC3B,QAAQ,CAAC,WAAW,EAAE,SAAS,UAAU,EAAE,CAAC;IAC5C,QAAQ,CAAC,KAAK,EAAE,WAAW,CAAC;CAC7B;AAED;;GAEG;AACH,wBAAgB,uBAAuB,CACrC,OAAO,EAAE,MAAM,EACf,MAAM,EAAE,gBAAgB,GACvB,wBAAwB,CAoB1B;AAED,wBAAgB,YAAY,CAC1B,OAAO,EAAE,OAAO,EAChB,WAAW,EAAE,CAAC,IAAI,EAAE,MAAM,KAAK,OAAO,CAAC,qBAAqB,GAAG,SAAS,CAAC,GACxE,MAAM,CAuKR;AAED,wBAAgB,uBAAuB,CAAC,CAAC,SAAS,MAAM,EAAE,EAAE,SAAS,kBAAkB,EACrF,OAAO,EAAE,OAAO,EAChB,IAAI,EAAE,UAAU,CAAC,CAAC,EAAE,EAAE,CAAC,EACvB,mBAAmB,EAAE,mBAAmB,GACvC,iBAAiB,CAAC,EAAE,CAAC,CA2CvB;AAED,eAAO,MAAM,wBAAwB,uBAAuB,CAAC;AAC7D,wBAAgB,0BAA0B,IAAI,qBAAqB,CAMlE"}
\ No newline at end of file
+{"version":3,"file":"linter.d.ts","sourceRoot":"","sources":["../../../src/core/linter.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,mBAAmB,EAA6C,MAAM,kBAAkB,CAAC;AAMlG,OAAO,KAAK,EAAE,OAAO,EAAE,MAAM,cAAc,CAAC;AAG5C,OAAO,EACL,UAAU,EACV,kBAAkB,EAClB,gBAAgB,EAChB,wBAAwB,EACxB,UAAU,EACV,iBAAiB,EAEjB,aAAa,EAId,MAAM,YAAY,CAAC;AAEpB,KAAK,qBAAqB,GAAG;IAAE,MAAM,EAAE,wBAAwB,CAAA;CAAE,CAAC;AAElE,MAAM,WAAW,MAAM;IACrB,aAAa,CAAC,OAAO,EAAE,aAAa,GAAG,OAAO,CAAC,SAAS,UAAU,EAAE,CAAC,CAAC;IACtE,qBAAqB,CAAC,IAAI,EAAE,MAAM,EAAE,GAAG,CAAC,EAAE,qBAAqB,GAAG,IAAI,CAAC;IACvE,IAAI,IAAI,OAAO,CAAC,YAAY,CAAC,CAAC;CAC/B;AAED,MAAM,WAAW,WAAW;IAC1B,OAAO,EAAE;QACP,KAAK,EAAE,MAAM,CAAC;QACd,KAAK,EAAE,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;KAC/B,CAAC;CACH;AACD,MAAM,WAAW,YAAY;IAC3B,QAAQ,CAAC,WAAW,EAAE,SAAS,UAAU,EAAE,CAAC;IAC5C,QAAQ,CAAC,KAAK,EAAE,WAAW,CAAC;CAC7B;AAED;;GAEG;AACH,wBAAgB,uBAAuB,CACrC,OAAO,EAAE,MAAM,EACf,MAAM,EAAE,gBAAgB,GACvB,wBAAwB,CAoB1B;AAED,wBAAgB,YAAY,CAC1B,OAAO,EAAE,OAAO,EAChB,WAAW,EAAE,CAAC,IAAI,EAAE,MAAM,KAAK,OAAO,CAAC,qBAAqB,GAAG,SAAS,CAAC,GACxE,MAAM,CA4NR;AAED,wBAAgB,uBAAuB,CAAC,CAAC,SAAS,MAAM,EAAE,EAAE,SAAS,kBAAkB,EACrF,OAAO,EAAE,OAAO,EAChB,IAAI,EAAE,UAAU,CAAC,CAAC,EAAE,EAAE,CAAC,EACvB,mBAAmB,EAAE,mBAAmB,GACvC,iBAAiB,CAAC,EAAE,CAAC,CA2CvB;AAED,eAAO,MAAM,wBAAwB,uBAAuB,CAAC;AAC7D,wBAAgB,0BAA0B,IAAI,qBAAqB,CAMlE"}
\ No newline at end of file
diff --git a/dist/src/core/linter.js b/dist/src/core/linter.js
index f4d741e295f8f4d3fbf62fda8be4cfd9c8efc600..a0e7ab7f94c011f3d2192e6e7ff858e291589bd2 100644
--- a/dist/src/core/linter.js
+++ b/dist/src/core/linter.js
@@ -1,3 +1,4 @@
+import { isPromise } from "../utils/misc.js";
 import { compilerAssert, createDiagnosticCollector } from "./diagnostics.js";
 import { getLocationContext } from "./helpers/location-context.js";
 import { defineLinter } from "./library.js";
@@ -5,7 +6,7 @@ import { createUnusedTemplateParameterLinterRule } from "./linter-rules/unused-t
 import { createUnusedUsingLinterRule } from "./linter-rules/unused-using.rule.js";
 import { createDiagnostic } from "./messages.js";
 import { EventEmitter, mapEventEmitterToNodeListener, navigateProgram } from "./semantic-walker.js";
-import { startTimer, time } from "./stats.js";
+import { startTimer } from "./stats.js";
 import { NoTarget, } from "./types.js";
 /**
  * Resolve the linter definition
@@ -104,7 +105,23 @@ export function createLinter(program, loadLibrary) {
         tracer.trace("extend-rule-set.end", "Rules enabled: \n" + [...enabledRules.keys()].map((x) => ` - ${x}`).join("\n"));
         return diagnostics.diagnostics;
     }
-    function lint() {
+    async function lint() {
+        const syncLintResult = await lintInternal(false /* asyncRules */);
+        const asyncLintResult = await lintInternal(true /* asyncRules */);
+        return {
+            diagnostics: [...syncLintResult.diagnostics, ...asyncLintResult.diagnostics],
+            stats: {
+                runtime: {
+                    total: syncLintResult.stats.runtime.total + asyncLintResult.stats.runtime.total,
+                    rules: {
+                        ...syncLintResult.stats.runtime.rules,
+                        ...asyncLintResult.stats.runtime.rules,
+                    },
+                },
+            },
+        };
+    }
+    async function lintInternal(asyncRules) {
         const diagnostics = createDiagnosticCollector();
         const eventEmitter = new EventEmitter();
         const stats = {
@@ -113,22 +130,55 @@ export function createLinter(program, loadLibrary) {
                 rules: {},
             },
         };
-        tracer.trace("lint", `Running linter with following rules:\n` +
-            [...enabledRules.keys()].map((x) => ` - ${x}`).join("\n"));
+        const filteredRules = new Map();
+        for (const [ruleId, rule] of enabledRules) {
+            if ((rule.async ?? false) === asyncRules) {
+                filteredRules.set(ruleId, rule);
+            }
+        }
+        tracer.trace("lint", `Running ${asyncRules ? "async" : "sync"} linter with following rules:\n` +
+            [...filteredRules.keys()].map((x) => ` - ${x}`).join("\n"));
         const timer = startTimer();
-        for (const rule of enabledRules.values()) {
+        const exitCallbacks = [];
+        const EXIT_EVENT_NAME = "exit";
+        const allPromises = [];
+        for (const rule of filteredRules.values()) {
             const createTiming = startTimer();
             const listener = rule.create(createLinterRuleContext(program, rule, diagnostics));
             stats.runtime.rules[rule.id] = createTiming.end();
             for (const [name, cb] of Object.entries(listener)) {
                 const timedCb = (...args) => {
-                    const duration = time(() => cb(...args));
-                    stats.runtime.rules[rule.id] += duration;
+                    const timer = startTimer();
+                    const result = cb(...args);
+                    if (name === EXIT_EVENT_NAME && isPromise(result)) {
+                        compilerAssert(rule.async, `Linter rule "${rule.id}" is not marked as async but returned a promise from the "${name}" callback.`);
+                        const rr = result.finally(() => {
+                            const duration = timer.end();
+                            stats.runtime.rules[rule.id] += duration;
+                        });
+                        allPromises.push(rr);
+                    }
+                    else {
+                        const duration = timer.end();
+                        stats.runtime.rules[rule.id] += duration;
+                    }
                 };
-                eventEmitter.on(name, timedCb);
+                if (name === EXIT_EVENT_NAME) {
+                    // we need to trigger 'exit' callbacks explicitly after semantic walker is done
+                    exitCallbacks.push(timedCb);
+                }
+                else {
+                    eventEmitter.on(name, timedCb);
+                }
             }
         }
         navigateProgram(program, mapEventEmitterToNodeListener(eventEmitter));
+        for (const cb of exitCallbacks) {
+            cb(program);
+        }
+        if (allPromises.length > 0) {
+            await Promise.all(allPromises);
+        }
         stats.runtime.total = timer.end();
         return { diagnostics: diagnostics.diagnostics, stats };
     }
diff --git a/dist/src/core/linter.js.map b/dist/src/core/linter.js.map
index 753cbba963969184dbf8854ad5a69762ea0d14e2..ea7d6f741ee03d073388511c55257c2bf431be6e 100644
--- a/dist/src/core/linter.js.map
+++ b/dist/src/core/linter.js.map
@@ -1 +1 @@
-{"version":3,"file":"linter.js","sourceRoot":"","sources":["../../../src/core/linter.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"linter.js","sourceRoot":"","sources":["../../../src/core/linter.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/core/program.js b/dist/src/core/program.js
index e908ec9c6e13169a484110850bae7a90ef6878d9..e434d958c23a8dfd752e50b4580da6cb4b91d7ca 100644
--- a/dist/src/core/program.js
+++ b/dist/src/core/program.js
@@ -156,7 +156,7 @@ async function createProgram(host, mainFile, options = {}, oldProgram) {
         return { program, shouldAbort: true };
     }
     // Linter stage
-    const lintResult = linter.lint();
+    const lintResult = await linter.lint();
     runtimeStats.linter = lintResult.stats.runtime;
     program.reportDiagnostics(lintResult.diagnostics);
     return { program, shouldAbort: false };
diff --git a/dist/src/core/program.js.map b/dist/src/core/program.js.map
index bbd8bff0b1a949ebab929922c74432d9fe97c758..df1ce45f386217c879844b23525d1403901cc2ff 100644
--- a/dist/src/core/program.js.map
+++ b/dist/src/core/program.js.map
@@ -1 +1 @@
-{"version":3,"file":"program.js","sourceRoot":"","sources":["../../../src/core/program.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"program.js","sourceRoot":"","sources":["../../../src/core/program.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/core/projected-program.d.ts b/dist/src/core/projected-program.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..c46fcf89f5293d4ad1865a7289b6da5ccc6aaaae
--- /dev/null
+++ b/dist/src/core/projected-program.d.ts
@@ -0,0 +1,3 @@
+import type { Program, ProjectedProgram } from "./index.js";
+export declare function isProjectedProgram(program: Program | ProjectedProgram): program is ProjectedProgram;
+//# sourceMappingURL=projected-program.d.ts.map
\ No newline at end of file
diff --git a/dist/src/core/projected-program.d.ts.map b/dist/src/core/projected-program.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..46bb5cde89b441d73b10177679001bd6f9e1aca8
--- /dev/null
+++ b/dist/src/core/projected-program.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"projected-program.d.ts","sourceRoot":"","sources":["../../../src/core/projected-program.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,OAAO,EAAE,gBAAgB,EAAE,MAAM,YAAY,CAAC;AAE5D,wBAAgB,kBAAkB,CAChC,OAAO,EAAE,OAAO,GAAG,gBAAgB,GAClC,OAAO,IAAI,gBAAgB,CAE7B"}
\ No newline at end of file
diff --git a/dist/src/core/projected-program.js b/dist/src/core/projected-program.js
new file mode 100644
index 0000000000000000000000000000000000000000..f1b8aa72f1b532d56a7f41d1f21e822948f9d4f0
--- /dev/null
+++ b/dist/src/core/projected-program.js
@@ -0,0 +1,4 @@
+export function isProjectedProgram(program) {
+    return "projector" in program;
+}
+//# sourceMappingURL=projected-program.js.map
\ No newline at end of file
diff --git a/dist/src/core/projected-program.js.map b/dist/src/core/projected-program.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..021947e6c3f4ed664c930d986179fa313fa71ad2
--- /dev/null
+++ b/dist/src/core/projected-program.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"projected-program.js","sourceRoot":"","sources":["../../../src/core/projected-program.ts"],"names":[],"mappings":"AAEA,MAAM,UAAU,kBAAkB,CAChC,OAAmC;IAEnC,OAAO,WAAW,IAAI,OAAO,CAAC;AAChC,CAAC"}
\ No newline at end of file
diff --git a/dist/src/core/projection-members.d.ts b/dist/src/core/projection-members.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..068dbf5adbe62d2bae345d5b15b4aa75d2ee49b4
--- /dev/null
+++ b/dist/src/core/projection-members.d.ts
@@ -0,0 +1,8 @@
+import type { Checker } from "./checker.js";
+import type { Type } from "./types.js";
+export declare function createProjectionMembers(checker: Checker): {
+    [TKind in Type["kind"]]?: Record<string, (base: Type & {
+        kind: TKind;
+    }) => Type>;
+};
+//# sourceMappingURL=projection-members.d.ts.map
\ No newline at end of file
diff --git a/dist/src/core/projection-members.d.ts.map b/dist/src/core/projection-members.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..08be42f5a7af380a120020b112e91af7272e9c1e
--- /dev/null
+++ b/dist/src/core/projection-members.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"projection-members.d.ts","sourceRoot":"","sources":["../../../src/core/projection-members.ts"],"names":[],"mappings":"AACA,OAAO,KAAK,EAAE,OAAO,EAAE,MAAM,cAAc,CAAC;AAE5C,OAAO,KAAK,EAAc,IAAI,EAAgB,MAAM,YAAY,CAAC;AAEjE,wBAAgB,uBAAuB,CAAC,OAAO,EAAE,OAAO,GAAG;KACxD,KAAK,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,GAAG;QAAE,IAAI,EAAE,KAAK,CAAA;KAAE,KAAK,IAAI,CAAC;CACjF,CAyZA"}
\ No newline at end of file
diff --git a/dist/src/core/projection-members.js b/dist/src/core/projection-members.js
new file mode 100644
index 0000000000000000000000000000000000000000..abd9ee299f47a187e197ac3838507ce93c6832bd
--- /dev/null
+++ b/dist/src/core/projection-members.js
@@ -0,0 +1,381 @@
+import { camelCase, kebabCase, pascalCase, snakeCase } from "change-case";
+import { ProjectionError, assertType } from "./diagnostics.js";
+export function createProjectionMembers(checker) {
+    const { voidType, neverType, createType, createFunctionType, createLiteralType } = checker;
+    function createBaseMembers() {
+        return {
+            projectionSource: (base) => base.projectionSource ?? voidType,
+            projectionBase: (base) => base.projectionBase ?? voidType,
+        };
+    }
+    function createNameableMembers() {
+        return {
+            name: (base) => (base.name ? createLiteralType(base.name) : voidType),
+            rename: (base) => {
+                return createFunctionType((newName) => {
+                    assertType("new name", newName, "String");
+                    base.name = newName.value;
+                    return voidType;
+                });
+            },
+        };
+    }
+    return {
+        Model: {
+            ...createBaseMembers(),
+            ...createNameableMembers(),
+            properties(base) {
+                return createType({
+                    kind: "Object",
+                    properties: {
+                        forEach: createFunctionType((block) => {
+                            assertType("block", block, "Function");
+                            const props = Array.from(base.properties.values());
+                            props.forEach((p) => block.implementation(p));
+                            return voidType;
+                        }),
+                    },
+                });
+            },
+            renameProperty(base) {
+                return createFunctionType((oldNameT, newNameT) => {
+                    assertType("current property name", oldNameT, "String");
+                    assertType("new property name", newNameT, "String");
+                    const oldName = oldNameT.value;
+                    const newName = newNameT.value;
+                    const prop = base.properties.get(oldName);
+                    if (!prop) {
+                        throw new ProjectionError(`Property ${oldName} not found`);
+                    }
+                    prop.name = newName;
+                    base.properties.rekey(oldName, newName);
+                    return voidType;
+                });
+            },
+            changePropertyType(base) {
+                return createFunctionType((nameT, newType) => {
+                    assertType("property name", nameT, "String");
+                    const propertyName = nameT.value;
+                    const prop = base.properties.get(propertyName);
+                    if (!prop) {
+                        throw new ProjectionError(`Property ${propertyName} not found`);
+                    }
+                    prop.type = newType;
+                    return voidType;
+                });
+            },
+            addProperty(base) {
+                return createFunctionType((nameT, type, defaultT) => {
+                    assertType("property", nameT, "String");
+                    const name = nameT.value;
+                    const prop = base.properties.get(name);
+                    if (prop) {
+                        throw new ProjectionError(`Property ${name} already exists`);
+                    }
+                    base.properties.set(name, createType({
+                        kind: "ModelProperty",
+                        name,
+                        optional: false,
+                        decorators: [],
+                        node: undefined,
+                        default: defaultT,
+                        type,
+                    }));
+                    return voidType;
+                });
+            },
+            deleteProperty(base) {
+                return createFunctionType((nameT) => {
+                    assertType("property", nameT, "String");
+                    const name = nameT.value;
+                    const prop = base.properties.get(name);
+                    if (!prop) {
+                        return voidType;
+                    }
+                    base.properties.delete(name);
+                    return voidType;
+                });
+            },
+        },
+        ModelProperty: {
+            ...createBaseMembers(),
+            name(base) {
+                return createLiteralType(base.name);
+            },
+            type(base) {
+                return base.type;
+            },
+            setType(base) {
+                return createFunctionType((t) => {
+                    base.type = t;
+                    return voidType;
+                });
+            },
+            setOptional(base) {
+                return createFunctionType((optional) => {
+                    assertType("Optional", optional, "Boolean");
+                    base.optional = optional.value;
+                    return voidType;
+                });
+            },
+        },
+        Scalar: {
+            ...createBaseMembers(),
+            ...createNameableMembers(),
+        },
+        Union: {
+            ...createBaseMembers(),
+            ...createNameableMembers(),
+            variants(base) {
+                return createType({
+                    kind: "Object",
+                    properties: {
+                        forEach: createFunctionType((block) => {
+                            assertType("block", block, "Function");
+                            const variants = Array.from(base.variants.values());
+                            variants.forEach((p) => block.implementation(p));
+                            return voidType;
+                        }),
+                    },
+                });
+            },
+            renameVariant(base) {
+                return createFunctionType((oldNameT, newNameT) => {
+                    assertType("old variant name", oldNameT, "String");
+                    assertType("new variant name", newNameT, "String");
+                    const oldName = oldNameT.value;
+                    const newName = newNameT.value;
+                    const variant = base.variants.get(oldName);
+                    if (!variant) {
+                        throw new ProjectionError(`Couldn't find variant ${variant}`);
+                    }
+                    base.variants.rekey(oldName, newName);
+                    variant.name = newName;
+                    return voidType;
+                });
+            },
+            addVariant(base) {
+                return createFunctionType((nameT, type) => {
+                    assertType("Variant name", nameT, "String");
+                    const name = nameT.value;
+                    const variantType = createType({
+                        kind: "UnionVariant",
+                        decorators: [],
+                        name,
+                        node: undefined,
+                        type,
+                        union: base,
+                    });
+                    base.variants.set(name, variantType);
+                    return voidType;
+                });
+            },
+            deleteVariant(base) {
+                return createFunctionType((nameT) => {
+                    assertType("Name", nameT, "String");
+                    const name = nameT.value;
+                    base.variants.delete(name);
+                    return voidType;
+                });
+            },
+        },
+        UnionVariant: {
+            ...createBaseMembers(),
+            name(base) {
+                if (typeof base.name === "string") {
+                    return createLiteralType(base.name);
+                }
+                else {
+                    throw new ProjectionError("Can't refer to name of anonymous union variant");
+                }
+            },
+            setType(base) {
+                return createFunctionType((type) => {
+                    base.type = type;
+                    return voidType;
+                });
+            },
+            type(base) {
+                return base.type;
+            },
+        },
+        Operation: {
+            ...createBaseMembers(),
+            ...createNameableMembers(),
+            parameters(base) {
+                return base.parameters;
+            },
+            returnType(base) {
+                return base.returnType;
+            },
+            changeReturnType(base) {
+                return createFunctionType((newType) => {
+                    base.returnType = newType;
+                    return voidType;
+                });
+            },
+        },
+        Interface: {
+            ...createBaseMembers(),
+            ...createNameableMembers(),
+            operations(base) {
+                return createType({
+                    kind: "Object",
+                    properties: {
+                        forEach: createFunctionType((block) => {
+                            assertType("block", block, "Function");
+                            const props = Array.from(base.operations.values());
+                            props.forEach((p) => block.implementation(p));
+                            return voidType;
+                        }),
+                    },
+                });
+            },
+            renameOperation(base) {
+                return createFunctionType((oldNameT, newNameT) => {
+                    assertType("operation name", oldNameT, "String");
+                    assertType("operation name", newNameT, "String");
+                    const oldName = oldNameT.value;
+                    const newName = newNameT.value;
+                    const op = base.operations.get(oldName);
+                    if (!op) {
+                        throw new ProjectionError(`Couldn't find operation named ${oldName}`);
+                    }
+                    op.name = newName;
+                    base.operations.rekey(oldName, newName);
+                    return voidType;
+                });
+            },
+            addOperation(base) {
+                return createFunctionType((nameT, parameters, returnType) => {
+                    assertType("operation name", nameT, "String");
+                    assertType("parameters", parameters, "Model");
+                    const name = nameT.value;
+                    const prop = base.operations.get(name);
+                    if (prop) {
+                        throw new ProjectionError(`Operation named ${name} already exists`);
+                    }
+                    base.operations.set(name, createType({
+                        kind: "Operation",
+                        name,
+                        node: undefined,
+                        parameters,
+                        returnType,
+                        decorators: [],
+                    }));
+                    return voidType;
+                });
+            },
+            deleteOperation(base) {
+                return createFunctionType((nameT) => {
+                    assertType("operation name", nameT, "String");
+                    const name = nameT.value;
+                    const prop = base.operations.get(name);
+                    if (!prop) {
+                        return voidType;
+                    }
+                    base.operations.delete(name);
+                    return voidType;
+                });
+            },
+        },
+        Enum: {
+            ...createBaseMembers(),
+            ...createNameableMembers(),
+            members(base) {
+                return createType({
+                    kind: "Object",
+                    properties: {
+                        forEach: createFunctionType((block) => {
+                            assertType("parameter", block, "Function");
+                            const props = Array.from(base.members.values());
+                            props.forEach((p) => block.implementation(p));
+                            return voidType;
+                        }),
+                    },
+                });
+            },
+            name(base) {
+                return createLiteralType(base.name);
+            },
+            addMember(base) {
+                return createFunctionType((nameT, type) => {
+                    assertType("enum member", nameT, "String");
+                    type && assertType("enum type", type, "String", "Number");
+                    const name = nameT.value;
+                    const member = base.members.get(name);
+                    if (member) {
+                        throw new ProjectionError(`Enum already has a member named ${name}`);
+                    }
+                    if (type !== undefined && type.kind !== "Number" && type.kind !== "String") {
+                        throw new ProjectionError(`Enum member types must be string or number`);
+                    }
+                    base.members.set(name, createType({
+                        kind: "EnumMember",
+                        enum: base,
+                        name,
+                        decorators: [],
+                        node: undefined,
+                        value: type ? type.value : undefined,
+                    }));
+                    return voidType;
+                });
+            },
+            deleteMember(base) {
+                return createFunctionType((nameT) => {
+                    assertType("enum member", nameT, "String");
+                    const name = nameT.value;
+                    base.members.delete(name);
+                    return voidType;
+                });
+            },
+            renameMember(base) {
+                return createFunctionType((oldNameT, newNameT) => {
+                    assertType("enum member", oldNameT, "String");
+                    assertType("enum member", newNameT, "String");
+                    const oldName = oldNameT.value;
+                    const newName = newNameT.value;
+                    const member = base.members.get(oldName);
+                    if (!member) {
+                        throw new ProjectionError(`Enum doesn't have member ${oldName}`);
+                    }
+                    member.name = newName;
+                    base.members.rekey(oldName, newName);
+                    return voidType;
+                });
+            },
+        },
+        EnumMember: {
+            ...createBaseMembers(),
+            name(base) {
+                return createLiteralType(base.name);
+            },
+            type(base) {
+                return base.value ? createLiteralType(base.value) : neverType;
+            },
+        },
+        String: {
+            toCamelCase(base) {
+                return createFunctionType(() => {
+                    return createLiteralType(camelCase(base.value));
+                });
+            },
+            toPascalCase(base) {
+                return createFunctionType(() => {
+                    return createLiteralType(pascalCase(base.value));
+                });
+            },
+            toSnakeCase(base) {
+                return createFunctionType(() => {
+                    return createLiteralType(snakeCase(base.value));
+                });
+            },
+            toKebabCase(base) {
+                return createFunctionType(() => {
+                    return createLiteralType(kebabCase(base.value));
+                });
+            },
+        },
+    };
+}
+//# sourceMappingURL=projection-members.js.map
\ No newline at end of file
diff --git a/dist/src/core/projection-members.js.map b/dist/src/core/projection-members.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..f6f5f09fac2149c0a2a27b11f719a201043e7f52
--- /dev/null
+++ b/dist/src/core/projection-members.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"projection-members.js","sourceRoot":"","sources":["../../../src/core/projection-members.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/core/projector.d.ts b/dist/src/core/projector.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..34a3446a29e2235748583c55cd2d70b157366718
--- /dev/null
+++ b/dist/src/core/projector.d.ts
@@ -0,0 +1,26 @@
+import type { Program, ProjectedProgram } from "./program.js";
+import type { ProjectionApplication, Type } from "./types.js";
+/**
+ * Creates a projector which returns a projected view of either the global namespace or the
+ * start node provided. Projecting a type effectively clones every type referenced underneath
+ * it. This is accomplished by doing a semantic walk of each type, cloning each type we find,
+ * and running projection code on the clone.
+ *
+ * Projectors can run multiple projections at once. In such cases, each projection is run
+ * on the same clone of the unprojected type. It is up to projections and the user to ensure
+ * that projections which depend on a particular shape are run when that shape is present (or
+ * else to ensure that their projections are tolerant to shape changes).
+ *
+ * The projector maintains its own state maps and sets. If a projection is active (i.e.
+ * program.currentProjector is set), then the projector's state will be returned instead
+ * of the program's state. This ensures that there is no overlap between projected and
+ * unprojected state. It also means that you cannot get state for nodes that are not
+ * part of the active projection.
+ *
+ * Note that decorators are run on namespaces prior to cloning any child types to align
+ * with the checker semantics, while projections are run after everything under the namespace
+ * is cloned. All other run decorators and projections after all child types are cloned and
+ * have their decorators run.
+ */
+export declare function createProjector(program: Program, projections: ProjectionApplication[], startNode?: Type): ProjectedProgram;
+//# sourceMappingURL=projector.d.ts.map
\ No newline at end of file
diff --git a/dist/src/core/projector.d.ts.map b/dist/src/core/projector.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..348dc1bfdda1459d09b75bf570a5db948e4e67d1
--- /dev/null
+++ b/dist/src/core/projector.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"projector.d.ts","sourceRoot":"","sources":["../../../src/core/projector.ts"],"names":[],"mappings":"AAGA,OAAO,KAAK,EAAE,OAAO,EAAE,gBAAgB,EAAE,MAAM,cAAc,CAAC;AAI9D,OAAO,KAAK,EAWV,qBAAqB,EAIrB,IAAI,EAKL,MAAM,YAAY,CAAC;AAEpB;;;;;;;;;;;;;;;;;;;;;GAqBG;AACH,wBAAgB,eAAe,CAC7B,OAAO,EAAE,OAAO,EAChB,WAAW,EAAE,qBAAqB,EAAE,EACpC,SAAS,CAAC,EAAE,IAAI,GACf,gBAAgB,CAqpBlB"}
\ No newline at end of file
diff --git a/dist/src/core/projector.js b/dist/src/core/projector.js
new file mode 100644
index 0000000000000000000000000000000000000000..d022951c3895ac2e91686840d821cc01cd72e761
--- /dev/null
+++ b/dist/src/core/projector.js
@@ -0,0 +1,581 @@
+import { createRekeyableMap, mutate } from "../utils/misc.js";
+import { finishTypeForProgram } from "./checker.js";
+import { compilerAssert } from "./diagnostics.js";
+import { isProjectedProgram } from "./projected-program.js";
+import { createStateAccessors } from "./state-accessors.js";
+import { getParentTemplateNode, isNeverType, isTemplateInstance, isValue } from "./type-utils.js";
+/**
+ * Creates a projector which returns a projected view of either the global namespace or the
+ * start node provided. Projecting a type effectively clones every type referenced underneath
+ * it. This is accomplished by doing a semantic walk of each type, cloning each type we find,
+ * and running projection code on the clone.
+ *
+ * Projectors can run multiple projections at once. In such cases, each projection is run
+ * on the same clone of the unprojected type. It is up to projections and the user to ensure
+ * that projections which depend on a particular shape are run when that shape is present (or
+ * else to ensure that their projections are tolerant to shape changes).
+ *
+ * The projector maintains its own state maps and sets. If a projection is active (i.e.
+ * program.currentProjector is set), then the projector's state will be returned instead
+ * of the program's state. This ensures that there is no overlap between projected and
+ * unprojected state. It also means that you cannot get state for nodes that are not
+ * part of the active projection.
+ *
+ * Note that decorators are run on namespaces prior to cloning any child types to align
+ * with the checker semantics, while projections are run after everything under the namespace
+ * is cloned. All other run decorators and projections after all child types are cloned and
+ * have their decorators run.
+ */
+export function createProjector(program, projections, startNode) {
+    const projectedTypes = new Map();
+    const checker = program.checker;
+    const neverType = checker.neverType;
+    const scope = [];
+    const projector = {
+        projectedTypes,
+        projections,
+        projectType,
+        parentProjector: isProjectedProgram(program) ? program.projector : undefined,
+    };
+    const projectedNamespaces = [];
+    let projectingNamespaces = false;
+    const projectedProgram = {
+        ...program,
+        getGlobalNamespaceType: () => projector.projectedGlobalNamespace,
+        projector,
+        ...createStateAccessors(program.stateMaps, program.stateSets, projector),
+    };
+    const targetGlobalNs = startNode
+        ? startNode.projector
+            ? startNode.projector.projectedGlobalNamespace
+            : program.checker.getGlobalNamespaceType()
+        : program.checker.getGlobalNamespaceType();
+    projectingNamespaces = true;
+    // Project the global namespace to get a reference.
+    projector.projectedGlobalNamespace = projectNamespace(targetGlobalNs, false);
+    // Then project the content
+    projectSubNamespaces(targetGlobalNs, projector.projectedGlobalNamespace);
+    projectingNamespaces = false;
+    // then project all the types
+    for (const ns of projectedNamespaces) {
+        projectNamespaceContents(ns);
+    }
+    projectType(targetGlobalNs);
+    projector.projectedStartNode = startNode
+        ? projectedTypes.get(startNode)
+        : projector.projectedGlobalNamespace;
+    return projectedProgram;
+    function projectType(type) {
+        if (isValue(type)) {
+            if (type.valueKind === "EnumValue") {
+                // This is a hack. We project the enum itself, so we need to project enum values in order to prevent incoherence
+                // between projections that reference enum values and the enum/members themselves. If we project the enummember
+                // in the value and it results in something other than an enum member, we will give up and just return the value
+                // as is. Otherwise we'll return the projected member.
+                const projectedType = projectType(type.type);
+                const projectedMember = projectType(type.value);
+                if (projectedMember.kind === "EnumMember") {
+                    return {
+                        entityKind: "Value",
+                        valueKind: "EnumValue",
+                        type: projectedType,
+                        value: projectedMember,
+                    };
+                }
+                else {
+                    return type;
+                }
+            }
+            else {
+                return type;
+            }
+        }
+        if (type.entityKind === "Indeterminate") {
+            return { entityKind: "Indeterminate", type: projectType(type.type) };
+        }
+        if (projectedTypes.has(type)) {
+            return projectedTypes.get(type);
+        }
+        scope.push(type);
+        const preProjected = applyPreProjection(type);
+        if (preProjected !== type) {
+            projectedTypes.set(type, preProjected);
+            scope.pop();
+            return preProjected;
+        }
+        let projected;
+        switch (type.kind) {
+            case "Namespace":
+                compilerAssert(projectingNamespaces, `Namespace ${type.name} should have already been projected.`);
+                projected = projectNamespace(type, false);
+                break;
+            case "Scalar":
+                projected = projectScalar(type);
+                break;
+            case "Model":
+                projected = projectModel(type);
+                break;
+            case "ModelProperty":
+                projected = projectModelProperty(type);
+                break;
+            case "Operation":
+                projected = projectOperation(type);
+                break;
+            case "Interface":
+                projected = projectInterface(type);
+                break;
+            case "Union":
+                projected = projectUnion(type);
+                break;
+            case "UnionVariant":
+                projected = projectUnionVariant(type);
+                break;
+            case "Tuple":
+                projected = projectTuple(type);
+                break;
+            case "Enum":
+                projected = projectEnum(type);
+                break;
+            case "EnumMember":
+                projected = projectEnumMember(type);
+                break;
+            default:
+                projected = type;
+        }
+        scope.pop();
+        return projected;
+    }
+    function projectSubNamespaces(ns, projectedNs) {
+        if (ns.namespaces.size === projectedNs.namespaces.size) {
+            // Sub namespace should already have been projected.
+            return;
+        }
+        for (const [key, childNs] of ns.namespaces) {
+            const projected = projectNamespace(childNs);
+            if (projected.kind === "Namespace") {
+                // todo: check for never?
+                projectedNs.namespaces.set(key, projected);
+            }
+        }
+    }
+    function projectNamespace(ns, projectSubNamespace = true) {
+        const alreadyProjected = projectedTypes.get(ns);
+        if (alreadyProjected) {
+            if (projectSubNamespace) {
+                projectSubNamespaces(ns, alreadyProjected);
+            }
+            return alreadyProjected;
+        }
+        const projectedNs = shallowClone(ns, {
+            namespaces: new Map(),
+            scalars: new Map(),
+            models: new Map(),
+            operations: new Map(),
+            interfaces: new Map(),
+            unions: new Map(),
+            enums: new Map(),
+            decorators: [],
+        });
+        projectedNs.decorators = projectDecorators(ns.decorators);
+        if (ns.namespace) {
+            projectedNs.namespace = projectNamespace(ns.namespace, false);
+        }
+        // ns run decorators before projecting anything inside them
+        finishTypeForProgram(projectedProgram, projectedNs);
+        if (projectSubNamespace) {
+            projectSubNamespaces(ns, projectedNs);
+        }
+        projectedNamespaces.push(ns);
+        return applyProjection(ns, projectedNs);
+    }
+    /**
+     * Projects the contents of a namespace, but not the namespace itself. The namespace itself
+     * is projected in an earlier phase.
+     */
+    function projectNamespaceContents(ns) {
+        const projectedNs = projectedTypes.get(ns);
+        compilerAssert(projectedNs, "Should have projected namespace by now");
+        if (projectedNs.kind !== "Namespace") {
+            // we projected the namespace to something else so don't do any more work.
+            // this might happen if a namespace itself was added/removed/etc. and is
+            // projected to never.
+            return neverType;
+        }
+        for (const childModel of ns.models.values()) {
+            const projected = projectType(childModel);
+            if (projected.kind === "Model") {
+                projectedNs.models.set(projected.name, projected);
+            }
+        }
+        for (const scalar of ns.scalars.values()) {
+            const projected = projectType(scalar);
+            if (projected.kind === "Scalar") {
+                projectedNs.scalars.set(projected.name, projected);
+            }
+        }
+        for (const childOperation of ns.operations.values()) {
+            const projected = projectType(childOperation);
+            if (projected.kind === "Operation") {
+                projectedNs.operations.set(projected.name, projected);
+            }
+        }
+        for (const childInterface of ns.interfaces.values()) {
+            const projected = projectType(childInterface);
+            if (projected.kind === "Interface") {
+                projectedNs.interfaces.set(projected.name, projected);
+            }
+        }
+        for (const childUnion of ns.unions.values()) {
+            const projected = projectType(childUnion);
+            if (projected.kind === "Union") {
+                projectedNs.unions.set(projected.name, projected);
+            }
+        }
+        for (const childEnum of ns.enums.values()) {
+            const projected = projectType(childEnum);
+            if (projected.kind === "Enum") {
+                projectedNs.enums.set(projected.name, projected);
+            }
+        }
+        return projectedNs;
+    }
+    function projectModel(model) {
+        const properties = createRekeyableMap();
+        const projectedModel = shallowClone(model, {
+            properties,
+            derivedModels: [],
+        });
+        if (model.templateMapper) {
+            projectedModel.templateMapper = projectTemplateMapper(model.templateMapper);
+            // eslint-disable-next-line @typescript-eslint/no-deprecated
+            projectedModel.templateArguments = mutate(projectedModel.templateMapper.args);
+        }
+        if (model.baseModel) {
+            projectedModel.baseModel = projectType(model.baseModel);
+        }
+        if (model.sourceModel) {
+            projectedModel.sourceModel = projectType(model.sourceModel);
+        }
+        projectedModel.sourceModels = model.sourceModels.map((source) => {
+            return { ...source, model: projectType(source.model) };
+        });
+        if (model.indexer) {
+            const projectedValue = projectType(model.indexer.value);
+            projectedModel.indexer = {
+                key: projectType(model.indexer.key),
+                value: projectedValue,
+            };
+        }
+        projectedTypes.set(model, projectedModel);
+        for (const prop of model.properties.values()) {
+            const projectedProp = projectType(prop);
+            if (projectedProp.kind === "ModelProperty") {
+                properties.set(projectedProp.name, projectedProp);
+            }
+        }
+        projectedModel.decorators = projectDecorators(model.decorators);
+        if (shouldFinishType(model)) {
+            finishTypeForProgram(projectedProgram, projectedModel);
+        }
+        const projectedResult = applyProjection(model, projectedModel);
+        if (!isNeverType(projectedResult) &&
+            projectedResult.kind === "Model" &&
+            projectedResult.baseModel) {
+            projectedResult.baseModel.derivedModels ??= [];
+            projectedResult.baseModel.derivedModels.push(projectedModel);
+        }
+        return projectedResult;
+    }
+    function projectTemplateMapper(mapper) {
+        const projectedMapper = {
+            ...mapper,
+            args: [],
+            map: new Map(),
+        };
+        for (const arg of mapper.args) {
+            mutate(projectedMapper.args).push(projectType(arg));
+        }
+        for (const [param, type] of mapper.map) {
+            projectedMapper.map.set(param, projectType(type));
+        }
+        return projectedMapper;
+    }
+    function projectScalar(scalar) {
+        const projectedScalar = shallowClone(scalar, {
+            derivedScalars: [],
+        });
+        if (scalar.templateMapper) {
+            projectedScalar.templateMapper = projectTemplateMapper(scalar.templateMapper);
+            // eslint-disable-next-line @typescript-eslint/no-deprecated
+            projectedScalar.templateArguments = mutate(projectedScalar.templateMapper.args);
+        }
+        if (scalar.baseScalar) {
+            projectedScalar.baseScalar = projectType(scalar.baseScalar);
+        }
+        projectedTypes.set(scalar, projectedScalar);
+        projectedScalar.decorators = projectDecorators(scalar.decorators);
+        if (shouldFinishType(scalar)) {
+            finishTypeForProgram(projectedProgram, projectedScalar);
+        }
+        const projectedResult = applyProjection(scalar, projectedScalar);
+        if (!isNeverType(projectedResult) &&
+            projectedResult.kind === "Scalar" &&
+            projectedResult.baseScalar) {
+            projectedResult.baseScalar.derivedScalars ??= [];
+            projectedResult.baseScalar.derivedScalars.push(projectedScalar);
+        }
+        return projectedResult;
+    }
+    /**
+     * Returns true if we should finish a type. The only time we don't finish is when it's
+     * a template type, because we don't want to run decorators for templates.
+     */
+    function shouldFinishType(type) {
+        const parentTemplate = type.node && getParentTemplateNode(type.node);
+        return !parentTemplate || isTemplateInstance(type);
+    }
+    function projectModelProperty(prop) {
+        const projectedType = projectType(prop.type);
+        const projectedDecs = projectDecorators(prop.decorators);
+        const projectedProp = shallowClone(prop, {
+            type: projectedType,
+            decorators: projectedDecs,
+        });
+        if (prop.sourceProperty) {
+            const sourceProperty = projectType(prop.sourceProperty);
+            projectedProp.sourceProperty = sourceProperty;
+        }
+        if (shouldFinishType(prop)) {
+            finishTypeForProgram(projectedProgram, projectedProp);
+        }
+        if (prop.model) {
+            projectedProp.model = projectType(prop.model);
+        }
+        return applyProjection(prop, projectedProp);
+    }
+    function projectOperation(op) {
+        const projectedOp = shallowClone(op, {});
+        projectedOp.parameters = projectType(op.parameters);
+        projectedOp.returnType = projectType(op.returnType);
+        projectedOp.decorators = projectDecorators(op.decorators);
+        if (op.templateMapper) {
+            projectedOp.templateMapper = projectTemplateMapper(op.templateMapper);
+            // eslint-disable-next-line @typescript-eslint/no-deprecated
+            projectedOp.templateArguments = mutate(projectedOp.templateMapper.args);
+        }
+        if (op.sourceOperation) {
+            projectedOp.sourceOperation = projectType(op.sourceOperation);
+        }
+        if (op.namespace) {
+            projectedOp.namespace = projectedNamespaceScope();
+        }
+        if (op.isFinished) {
+            finishTypeForProgram(projectedProgram, projectedOp);
+        }
+        if (op.interface) {
+            projectedOp.interface = projectType(op.interface);
+        }
+        return applyProjection(op, projectedOp);
+    }
+    function projectInterface(iface) {
+        const operations = createRekeyableMap();
+        const sourceInterfaces = [];
+        const projectedIface = shallowClone(iface, {
+            operations,
+            sourceInterfaces,
+        });
+        projectedIface.decorators = projectDecorators(iface.decorators);
+        if (iface.templateMapper) {
+            projectedIface.templateMapper = projectTemplateMapper(iface.templateMapper);
+            // eslint-disable-next-line @typescript-eslint/no-deprecated
+            projectedIface.templateArguments = mutate(projectedIface.templateMapper.args);
+        }
+        for (const op of iface.operations.values()) {
+            const projectedOp = projectType(op);
+            if (projectedOp.kind === "Operation") {
+                operations.set(projectedOp.name, projectedOp);
+            }
+        }
+        for (const source of iface.sourceInterfaces) {
+            sourceInterfaces.push(projectType(source));
+        }
+        if (shouldFinishType(iface)) {
+            finishTypeForProgram(projectedProgram, projectedIface);
+        }
+        return applyProjection(iface, projectedIface);
+    }
+    function projectUnion(union) {
+        const variants = createRekeyableMap();
+        const projectedUnion = shallowClone(union, {
+            variants,
+        });
+        projectedUnion.decorators = projectDecorators(union.decorators);
+        if (union.templateMapper) {
+            projectedUnion.templateMapper = projectTemplateMapper(union.templateMapper);
+            // eslint-disable-next-line @typescript-eslint/no-deprecated
+            projectedUnion.templateArguments = mutate(projectedUnion.templateMapper.args);
+        }
+        for (const variant of union.variants.values()) {
+            const projectedVariant = projectType(variant);
+            if (projectedVariant.kind === "UnionVariant" && projectedVariant.type !== neverType) {
+                variants.set(projectedVariant.name, projectedVariant);
+            }
+        }
+        if (shouldFinishType(union)) {
+            finishTypeForProgram(projectedProgram, projectedUnion);
+        }
+        return applyProjection(union, projectedUnion);
+    }
+    function projectUnionVariant(variant) {
+        const projectedType = projectType(variant.type);
+        const projectedDecs = projectDecorators(variant.decorators);
+        const projectedVariant = shallowClone(variant, {
+            type: projectedType,
+            decorators: projectedDecs,
+        });
+        finishTypeForProgram(projectedProgram, projectedVariant);
+        projectedVariant.union = projectType(variant.union);
+        return applyProjection(variant, projectedVariant);
+    }
+    function projectTuple(tuple) {
+        const values = [];
+        const projectedTuple = shallowClone(tuple, {
+            values,
+        });
+        for (const item of tuple.values) {
+            values.push(projectType(item));
+        }
+        return projectedTuple;
+    }
+    function projectEnum(e) {
+        const members = createRekeyableMap();
+        const projectedEnum = shallowClone(e, {
+            members,
+        });
+        projectedEnum.decorators = projectDecorators(e.decorators);
+        projectedTypes.set(e, projectedEnum);
+        for (const member of e.members.values()) {
+            const projectedMember = projectType(member);
+            if (projectedMember.kind === "EnumMember") {
+                members.set(projectedMember.name, projectedMember);
+            }
+        }
+        finishTypeForProgram(projectedProgram, projectedEnum);
+        return applyProjection(e, projectedEnum);
+    }
+    function projectEnumMember(e) {
+        const decorators = projectDecorators(e.decorators);
+        const projectedMember = shallowClone(e, {
+            decorators,
+        });
+        finishTypeForProgram(projectedProgram, projectedMember);
+        projectedMember.enum = projectType(e.enum);
+        return applyProjection(e, projectedMember);
+    }
+    function projectDecorators(decs) {
+        const decorators = [];
+        for (const dec of decs) {
+            const args = [];
+            for (const arg of dec.args) {
+                const jsValue = typeof arg.jsValue === "object" && arg.jsValue !== null && "entityKind" in arg.jsValue
+                    ? projectType(arg.jsValue)
+                    : arg.jsValue;
+                args.push({ ...arg, value: projectType(arg.value), jsValue });
+            }
+            decorators.push({ ...dec, args });
+        }
+        return decorators;
+    }
+    function getInScopeProjections() {
+        const candidates = new Set(projections);
+        const inScope = [];
+        let currentScope = namespaceScope();
+        outer: while (currentScope) {
+            for (const candidate of candidates) {
+                if (!candidate.scope || candidate.scope === currentScope) {
+                    candidates.delete(candidate);
+                    inScope.push(candidate);
+                    if (candidates.size === 0) {
+                        break outer;
+                    }
+                }
+            }
+            currentScope = currentScope.namespace;
+        }
+        return inScope;
+    }
+    function namespaceScope() {
+        for (let i = scope.length - 1; i >= 0; i--) {
+            if (scope[i].namespace !== undefined) {
+                return scope[i].namespace;
+            }
+        }
+        return undefined;
+    }
+    function projectedNamespaceScope() {
+        const ns = namespaceScope();
+        if (!ns)
+            return ns;
+        return projectType(ns);
+    }
+    function applyProjection(baseType, projectedType) {
+        const inScopeProjections = getInScopeProjections();
+        for (const projectionApplication of inScopeProjections) {
+            const projectionsByName = baseType.projectionsByName(projectionApplication.projectionName);
+            if (projectionsByName.length === 0)
+                continue;
+            const targetNode = projectionApplication.direction === "from"
+                ? projectionsByName[0].from
+                : projectionsByName[0].to;
+            if (targetNode) {
+                const projected = checker.project(projectedType, targetNode, projectionApplication.arguments);
+                if (projected !== projectedType) {
+                    // override the projected type cache with the returned type
+                    projectedTypes.set(baseType, projected);
+                    return projected;
+                }
+            }
+        }
+        return projectedType;
+    }
+    function applyPreProjection(type) {
+        const inScopeProjections = getInScopeProjections();
+        for (const projectionApplication of inScopeProjections) {
+            const projectionsByName = type.projectionsByName(projectionApplication.projectionName);
+            if (projectionsByName.length === 0)
+                continue;
+            const targetNode = projectionApplication.direction === "from"
+                ? projectionsByName[0].preFrom
+                : projectionsByName[0].preTo;
+            if (targetNode) {
+                return checker.project(type, targetNode, projectionApplication.arguments);
+            }
+        }
+        return type;
+    }
+    function shallowClone(type, additionalProps) {
+        const scopeProps = {};
+        if ("namespace" in type && type.namespace !== undefined) {
+            scopeProps.namespace = projectedNamespaceScope();
+        }
+        const clone = checker.createType({
+            ...type,
+            ...additionalProps,
+            ...scopeProps,
+            projectionSource: type,
+            projectionBase: type.projectionBase ?? type,
+            projector,
+        });
+        if (type.kind === "Union") {
+            // create the options getter
+            Object.defineProperty(clone, "options", {
+                get() {
+                    return Array.from(this.variants.values()).map((v) => v.type);
+                },
+            });
+        }
+        projectedTypes.set(type, clone);
+        return clone;
+    }
+}
+//# sourceMappingURL=projector.js.map
\ No newline at end of file
diff --git a/dist/src/core/projector.js.map b/dist/src/core/projector.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..49754bd661a51e606d5f43deaabe5d003ab7f257
--- /dev/null
+++ b/dist/src/core/projector.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"projector.js","sourceRoot":"","sources":["../../../src/core/projector.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/core/types.d.ts b/dist/src/core/types.d.ts
index 867d33d4c47ec9bb271a8d24c70561c439a2b057..fefc8fbf265d846042e5c6775256bc0e942acd7b 100644
--- a/dist/src/core/types.d.ts
+++ b/dist/src/core/types.d.ts
@@ -1688,7 +1688,7 @@ export interface LinterResolvedDefinition {
         [name: string]: LinterRuleSet;
     };
 }
-export interface LinterRuleDefinition<N extends string, DM extends DiagnosticMessages> {
+interface LinterRuleDefinitionBase<N extends string, DM extends DiagnosticMessages> {
     /** Rule name (without the library name) */
     name: N;
     /** Rule default severity. */
@@ -1699,14 +1699,29 @@ export interface LinterRuleDefinition<N extends string, DM extends DiagnosticMes
     url?: string;
     /** Messages that can be reported with the diagnostic. */
     messages: DM;
+}
+interface LinterRuleDefinitionSync<N extends string, DM extends DiagnosticMessages> extends LinterRuleDefinitionBase<N, DM> {
+    /** Whether this is an async rule. Default is false */
+    async?: false;
     /** Creator */
-    create(context: LinterRuleContext<DM>): SemanticNodeListener;
+    create(context: LinterRuleContext<DM>): SemanticNodeListener & {
+        exit?: (context: Program) => void | undefined;
+    };
 }
+interface LinterRuleDefinitionAsync<N extends string, DM extends DiagnosticMessages> extends LinterRuleDefinitionBase<N, DM> {
+    /** Whether this is an async rule. Default is false */
+    async: true;
+    /** Creator */
+    create(context: LinterRuleContext<DM>): SemanticNodeListener & {
+        exit?: (context: Program) => Promise<void | undefined>;
+    };
+}
+export type LinterRuleDefinition<N extends string, DM extends DiagnosticMessages> = LinterRuleDefinitionSync<N, DM> | LinterRuleDefinitionAsync<N, DM>;
 /** Resolved instance of a linter rule that will run. */
-export interface LinterRule<N extends string, DM extends DiagnosticMessages> extends LinterRuleDefinition<N, DM> {
+export type LinterRule<N extends string, DM extends DiagnosticMessages> = LinterRuleDefinition<N, DM> & {
     /** Expanded rule id in format `<library-name>:<rule-name>` */
     id: string;
-}
+};
 /** Reference to a rule. In this format `<library name>:<rule/ruleset name>` */
 export type RuleRef = `${string}/${string}`;
 export interface LinterRuleSet {
diff --git a/dist/src/core/types.d.ts.map b/dist/src/core/types.d.ts.map
index ec0cd979871bd965e1fb53d818030597cd591056..675ba65f97de4d7307abb29c71d57574e05b1e88 100644
--- a/dist/src/core/types.d.ts.map
+++ b/dist/src/core/types.d.ts.map
@@ -1 +1 @@
-{"version":3,"file":"types.d.ts","sourceRoot":"","sources":["../../../src/core/types.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"types.d.ts","sourceRoot":"","sources":["../../../src/core/types.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/asset-emitter.d.ts b/dist/src/emitter-framework/asset-emitter.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..f0859699abeb2c688df59a89d2afdbe7f33fab59
--- /dev/null
+++ b/dist/src/emitter-framework/asset-emitter.d.ts
@@ -0,0 +1,5 @@
+import type { EmitContext, Program } from "../core/index.js";
+import { TypeEmitter } from "./type-emitter.js";
+import { AssetEmitter } from "./types.js";
+export declare function createAssetEmitter<T, TOptions extends object>(program: Program, TypeEmitterClass: typeof TypeEmitter<T, TOptions>, emitContext: EmitContext<TOptions>): AssetEmitter<T, TOptions>;
+//# sourceMappingURL=asset-emitter.d.ts.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/asset-emitter.d.ts.map b/dist/src/emitter-framework/asset-emitter.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..0ea5db92a7abc2385669fe8c19855e72f943fceb
--- /dev/null
+++ b/dist/src/emitter-framework/asset-emitter.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"asset-emitter.d.ts","sourceRoot":"","sources":["../../../src/emitter-framework/asset-emitter.ts"],"names":[],"mappings":"AAEA,OAAO,KAAK,EAAE,WAAW,EAAoB,OAAO,EAAQ,MAAM,kBAAkB,CAAC;AAOrF,OAAO,EAAE,WAAW,EAAE,MAAM,mBAAmB,CAAC;AAChD,OAAO,EACL,YAAY,EAiBb,MAAM,YAAY,CAAC;AAWpB,wBAAgB,kBAAkB,CAAC,CAAC,EAAE,QAAQ,SAAS,MAAM,EAC3D,OAAO,EAAE,OAAO,EAChB,gBAAgB,EAAE,OAAO,WAAW,CAAC,CAAC,EAAE,QAAQ,CAAC,EACjD,WAAW,EAAE,WAAW,CAAC,QAAQ,CAAC,GACjC,YAAY,CAAC,CAAC,EAAE,QAAQ,CAAC,CA2wB3B"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/asset-emitter.js b/dist/src/emitter-framework/asset-emitter.js
new file mode 100644
index 0000000000000000000000000000000000000000..174b2ad52ec151fdad4aec9ae49dcbbc910d4129
--- /dev/null
+++ b/dist/src/emitter-framework/asset-emitter.js
@@ -0,0 +1,720 @@
+import { compilerAssert } from "../core/diagnostics.js";
+import { getTypeName } from "../core/helpers/type-name-utils.js";
+import { joinPaths } from "../core/path-utils.js";
+import { isTemplateDeclaration } from "../core/type-utils.js";
+import { CustomKeyMap } from "./custom-key-map.js";
+import { Placeholder } from "./placeholder.js";
+import { resolveDeclarationReferenceScope } from "./ref-scope.js";
+import { ReferenceCycle } from "./reference-cycle.js";
+import { CircularEmit, Declaration, EmitterResult, NoEmit, RawCode, } from "./types.js";
+export function createAssetEmitter(program, TypeEmitterClass, emitContext) {
+    const sourceFiles = [];
+    const options = {
+        noEmit: program.compilerOptions.noEmit ?? false,
+        emitterOutputDir: emitContext.emitterOutputDir,
+        ...emitContext.options,
+    };
+    const typeId = CustomKeyMap.objectKeyer();
+    const contextId = CustomKeyMap.objectKeyer();
+    const entryId = CustomKeyMap.objectKeyer();
+    // This is effectively a seen set, ensuring that we don't emit the same
+    // type with the same context twice. So the map stores a triple of:
+    //
+    // 1. the method of TypeEmitter we would call
+    // 2. the tsp type we're emitting.
+    // 3. the current context.
+    //
+    // Note that in order for this to work, context needs to be interned so
+    // contexts with the same values inside are treated as identical in the
+    // map. See createInterner for more details.
+    const typeToEmitEntity = new CustomKeyMap(([method, type, context]) => {
+        return `${method}-${typeId.getKey(type)}-${contextId.getKey(context)}`;
+    });
+    // When we encounter a circular reference, this map will hold a callback
+    // that should be called when the circularly referenced type has completed
+    // its emit.
+    const waitingCircularRefs = new CustomKeyMap(([method, type, context]) => {
+        return `${method}-${typeId.getKey(type)}-${contextId.getKey(context)}`;
+    });
+    // Similar to `typeToEmitEntity`, this ensures we don't recompute context
+    // for types that we already have context for. Note that context is
+    // dependent on the context of the context call, e.g. if a model is
+    // referenced with reference context set we need to get its declaration
+    // context again. So we use the context's context as a key. Context must
+    // be interned, see createInterner for more details.
+    const knownContexts = new CustomKeyMap(([entry, context]) => {
+        return `${entryId.getKey(entry)}-${contextId.getKey(context)}`;
+    });
+    // The stack of types that the currently emitted type is lexically
+    // contained in. This gets pushed to when we visit a type that is
+    // lexically contained in the current type, and is reset when we jump via
+    // reference to another type in a different lexical context. Note that
+    // this does not correspond to tsp's lexical nesting, e.g. in the case of
+    // an alias to a model expression, the alias is lexically outside the
+    // model, but in the type graph we will consider it to be lexically inside
+    // whatever references the alias.
+    let lexicalTypeStack = [];
+    let referenceTypeChain = [];
+    // Internally, context is is split between lexicalContext and
+    // referenceContext because when a reference is made, we carry over
+    // referenceContext but leave lexical context behind. When context is
+    // accessed by the user, they are merged by getContext().
+    let context = {
+        lexicalContext: {},
+        referenceContext: {},
+    };
+    let programContext = null;
+    // Incoming reference context is reference context that comes from emitting a
+    // type reference. Incoming reference context is only set on the
+    // incomingReferenceContextTarget and types lexically contained within it. For
+    // example, when referencing a model with reference context set, we may need
+    // to get context from the referenced model's namespaces, and such namespaces
+    // will not see the reference context. However, the reference context will be
+    // available for the model, its properties, and any types nested within it
+    // (e.g. anonymous models).
+    let incomingReferenceContext = null;
+    let incomingReferenceContextTarget = null;
+    const stateInterner = createInterner();
+    const stackEntryInterner = createInterner();
+    const assetEmitter = {
+        getContext() {
+            return {
+                ...context.lexicalContext,
+                ...context.referenceContext,
+            };
+        },
+        getOptions() {
+            return options;
+        },
+        getProgram() {
+            return program;
+        },
+        result: {
+            declaration(name, value) {
+                const scope = currentScope();
+                compilerAssert(scope, "Emit context must have a scope set in order to create declarations. Consider setting scope to a new source file's global scope in the `programContext` method of `TypeEmitter`.");
+                return new Declaration(name, scope, value);
+            },
+            rawCode(value) {
+                return new RawCode(value);
+            },
+            none() {
+                return new NoEmit();
+            },
+        },
+        createScope(block, name, parentScope = null) {
+            let newScope;
+            if (!parentScope) {
+                // create source file scope
+                newScope = {
+                    kind: "sourceFile",
+                    name,
+                    sourceFile: block,
+                    parentScope,
+                    childScopes: [],
+                    declarations: [],
+                };
+            }
+            else {
+                newScope = {
+                    kind: "namespace",
+                    name,
+                    namespace: block,
+                    childScopes: [],
+                    declarations: [],
+                    parentScope,
+                };
+            }
+            parentScope?.childScopes.push(newScope);
+            return newScope; // the overload of createScope causes type weirdness
+        },
+        createSourceFile(path) {
+            const basePath = options.emitterOutputDir;
+            const sourceFile = {
+                globalScope: undefined,
+                path: joinPaths(basePath, path),
+                imports: new Map(),
+                meta: {},
+            };
+            sourceFile.globalScope = this.createScope(sourceFile, "");
+            sourceFiles.push(sourceFile);
+            return sourceFile;
+        },
+        emitTypeReference(target, options) {
+            return withPatchedReferenceContext(options?.referenceContext, () => {
+                const oldIncomingReferenceContext = incomingReferenceContext;
+                const oldIncomingReferenceContextTarget = incomingReferenceContextTarget;
+                incomingReferenceContext = context.referenceContext ?? null;
+                incomingReferenceContextTarget = incomingReferenceContext ? target : null;
+                let result;
+                if (target.kind === "ModelProperty") {
+                    result = invokeTypeEmitter("modelPropertyReference", target);
+                }
+                else if (target.kind === "EnumMember") {
+                    result = invokeTypeEmitter("enumMemberReference", target);
+                }
+                if (result) {
+                    incomingReferenceContext = oldIncomingReferenceContext;
+                    incomingReferenceContextTarget = oldIncomingReferenceContextTarget;
+                    return result;
+                }
+                const entity = this.emitType(target);
+                incomingReferenceContext = oldIncomingReferenceContext;
+                incomingReferenceContextTarget = oldIncomingReferenceContextTarget;
+                let placeholder = null;
+                if (entity.kind === "circular") {
+                    let waiting = waitingCircularRefs.get(entity.emitEntityKey);
+                    if (!waiting) {
+                        waiting = [];
+                        waitingCircularRefs.set(entity.emitEntityKey, waiting);
+                    }
+                    const typeChainSnapshot = referenceTypeChain;
+                    waiting.push({
+                        state: {
+                            lexicalTypeStack,
+                            context,
+                        },
+                        cb: (resolvedEntity) => invokeReference(this, resolvedEntity, true, resolveReferenceCycle(typeChainSnapshot, entity, typeToEmitEntity)),
+                    });
+                    placeholder = new Placeholder();
+                    return this.result.rawCode(placeholder);
+                }
+                else {
+                    return invokeReference(this, entity, false);
+                }
+                function invokeReference(assetEmitter, entity, circular, cycle) {
+                    let ref;
+                    const scope = currentScope();
+                    if (circular) {
+                        ref = typeEmitter.circularReference(entity, scope, cycle);
+                    }
+                    else {
+                        if (entity.kind !== "declaration") {
+                            return entity;
+                        }
+                        compilerAssert(scope, "Emit context must have a scope set in order to create references to declarations.");
+                        const { pathUp, pathDown, commonScope } = resolveDeclarationReferenceScope(entity, scope);
+                        ref = typeEmitter.reference(entity, pathUp, pathDown, commonScope);
+                    }
+                    if (!(ref instanceof EmitterResult)) {
+                        ref = assetEmitter.result.rawCode(ref);
+                    }
+                    if (placeholder) {
+                        // this should never happen as this function shouldn't be called until
+                        // the target declaration is finished being emitted.
+                        compilerAssert(ref.kind !== "circular", "TypeEmitter `reference` returned circular emit");
+                        // this could presumably be allowed if we want.
+                        compilerAssert(ref.kind === "none" || !(ref.value instanceof Placeholder), "TypeEmitter's `reference` method cannot return a placeholder.");
+                        switch (ref.kind) {
+                            case "code":
+                            case "declaration":
+                                placeholder.setValue(ref.value);
+                                break;
+                            case "none":
+                                // this cast is incorrect, think about what should happen
+                                // if reference returns noEmit...
+                                placeholder.setValue("");
+                                break;
+                        }
+                    }
+                    return ref;
+                }
+            });
+        },
+        emitDeclarationName(type) {
+            return typeEmitter.declarationName(type);
+        },
+        async writeOutput() {
+            return typeEmitter.writeOutput(sourceFiles);
+        },
+        getSourceFiles() {
+            return sourceFiles;
+        },
+        emitType(type, context) {
+            if (context?.referenceContext) {
+                incomingReferenceContext = context?.referenceContext ?? incomingReferenceContext;
+                incomingReferenceContextTarget = type ?? incomingReferenceContextTarget;
+            }
+            const declName = isDeclaration(type) && type.kind !== "Namespace" ? typeEmitter.declarationName(type) : null;
+            const key = typeEmitterKey(type);
+            let args;
+            switch (key) {
+                case "scalarDeclaration":
+                case "scalarInstantiation":
+                case "modelDeclaration":
+                case "modelInstantiation":
+                case "operationDeclaration":
+                case "interfaceDeclaration":
+                case "interfaceOperationDeclaration":
+                case "enumDeclaration":
+                case "unionDeclaration":
+                case "unionInstantiation":
+                    args = [declName];
+                    break;
+                case "arrayDeclaration":
+                    const arrayDeclElement = type.indexer.value;
+                    args = [declName, arrayDeclElement];
+                    break;
+                case "arrayLiteral":
+                    const arrayLiteralElement = type.indexer.value;
+                    args = [arrayLiteralElement];
+                    break;
+                case "intrinsic":
+                    args = [declName];
+                    break;
+                default:
+                    args = [];
+            }
+            const result = invokeTypeEmitter(key, type, ...args);
+            return result;
+        },
+        emitProgram(options) {
+            const namespace = program.getGlobalNamespaceType();
+            if (options?.emitGlobalNamespace) {
+                this.emitType(namespace);
+                return;
+            }
+            for (const ns of namespace.namespaces.values()) {
+                if (ns.name === "TypeSpec" && !options?.emitTypeSpecNamespace)
+                    continue;
+                this.emitType(ns);
+            }
+            for (const model of namespace.models.values()) {
+                if (!isTemplateDeclaration(model)) {
+                    this.emitType(model);
+                }
+            }
+            for (const operation of namespace.operations.values()) {
+                if (!isTemplateDeclaration(operation)) {
+                    this.emitType(operation);
+                }
+            }
+            for (const enumeration of namespace.enums.values()) {
+                this.emitType(enumeration);
+            }
+            for (const union of namespace.unions.values()) {
+                if (!isTemplateDeclaration(union)) {
+                    this.emitType(union);
+                }
+            }
+            for (const iface of namespace.interfaces.values()) {
+                if (!isTemplateDeclaration(iface)) {
+                    this.emitType(iface);
+                }
+            }
+            for (const scalar of namespace.scalars.values()) {
+                this.emitType(scalar);
+            }
+        },
+        emitModelProperties(model) {
+            const res = invokeTypeEmitter("modelProperties", model);
+            if (res instanceof EmitterResult) {
+                return res;
+            }
+            else {
+                return this.result.rawCode(res);
+            }
+        },
+        emitModelProperty(property) {
+            return invokeTypeEmitter("modelPropertyLiteral", property);
+        },
+        emitOperationParameters(operation) {
+            return invokeTypeEmitter("operationParameters", operation, operation.parameters);
+        },
+        emitOperationReturnType(operation) {
+            return invokeTypeEmitter("operationReturnType", operation, operation.returnType);
+        },
+        emitInterfaceOperations(iface) {
+            return invokeTypeEmitter("interfaceDeclarationOperations", iface);
+        },
+        emitInterfaceOperation(operation) {
+            const name = typeEmitter.declarationName(operation);
+            if (name === undefined) {
+                // the general approach of invoking the expression form doesn't work here
+                // because TypeSpec doesn't have operation expressions.
+                compilerAssert(false, "Unnamed operations are not supported");
+            }
+            return invokeTypeEmitter("interfaceOperationDeclaration", operation, name);
+        },
+        emitEnumMembers(en) {
+            return invokeTypeEmitter("enumMembers", en);
+        },
+        emitUnionVariants(union) {
+            return invokeTypeEmitter("unionVariants", union);
+        },
+        emitTupleLiteralValues(tuple) {
+            return invokeTypeEmitter("tupleLiteralValues", tuple);
+        },
+        async emitSourceFile(sourceFile) {
+            return await typeEmitter.sourceFile(sourceFile);
+        },
+    };
+    const typeEmitter = new TypeEmitterClass(assetEmitter);
+    return assetEmitter;
+    /**
+     * This function takes care of calling a method on the TypeEmitter to
+     * convert it to some emitted output. It will return a cached type if we
+     * have seen it before (and the context is the same). It will establish
+     * the emit context by calling the appropriate methods before getting the
+     * emit result. Also if a type emitter returns just a T or a
+     * Placeholder<T>, it will convert that to a RawCode result.
+     */
+    function invokeTypeEmitter(method, ...args) {
+        const type = args[0];
+        let entity;
+        let emitEntityKey;
+        let cached = false;
+        withTypeContext(method, args, () => {
+            emitEntityKey = [method, type, context];
+            const seenEmitEntity = typeToEmitEntity.get(emitEntityKey);
+            if (seenEmitEntity) {
+                entity = seenEmitEntity;
+                cached = true;
+                return;
+            }
+            typeToEmitEntity.set(emitEntityKey, new CircularEmit(emitEntityKey));
+            compilerAssert(typeEmitter[method], `TypeEmitter doesn't have a method named ${method}.`);
+            entity = liftToRawCode(typeEmitter[method](...args));
+        });
+        if (cached) {
+            return entity;
+        }
+        if (entity instanceof Placeholder) {
+            entity.onValue((v) => handleCompletedEntity(v));
+            return entity;
+        }
+        handleCompletedEntity(entity);
+        return entity;
+        function handleCompletedEntity(entity) {
+            typeToEmitEntity.set(emitEntityKey, entity);
+            const waitingRefCbs = waitingCircularRefs.get(emitEntityKey);
+            if (waitingRefCbs) {
+                for (const record of waitingRefCbs) {
+                    withContext(record.state, () => {
+                        record.cb(entity);
+                    });
+                }
+                waitingCircularRefs.set(emitEntityKey, []);
+            }
+            if (entity.kind === "declaration") {
+                entity.scope.declarations.push(entity);
+            }
+        }
+        function liftToRawCode(value) {
+            if (value instanceof EmitterResult) {
+                return value;
+            }
+            return assetEmitter.result.rawCode(value);
+        }
+    }
+    function isInternalMethod(method) {
+        return (method === "interfaceDeclarationOperations" ||
+            method === "interfaceOperationDeclaration" ||
+            method === "operationParameters" ||
+            method === "operationReturnType" ||
+            method === "modelProperties" ||
+            method === "enumMembers" ||
+            method === "tupleLiteralValues" ||
+            method === "unionVariants");
+    }
+    /**
+     * This helper takes a type and sets the `context` state to what it should
+     * be in order to invoke the type emitter method for that type. This needs
+     * to take into account the current context and any incoming reference
+     * context.
+     */
+    function setContextForType(method, args) {
+        const type = args[0];
+        let newTypeStack;
+        // if we've walked into a new declaration, reset the lexical type stack
+        // to the lexical containers of the current type.
+        if (isDeclaration(type) && type.kind !== "Intrinsic" && !isInternalMethod(method)) {
+            newTypeStack = [stackEntryInterner.intern({ method, args: stackEntryInterner.intern(args) })];
+            let ns = type.namespace;
+            while (ns) {
+                if (ns.name === "")
+                    break;
+                newTypeStack.unshift(stackEntryInterner.intern({ method: "namespace", args: stackEntryInterner.intern([ns]) }));
+                ns = ns.namespace;
+            }
+        }
+        else {
+            newTypeStack = [
+                ...lexicalTypeStack,
+                stackEntryInterner.intern({ method, args: stackEntryInterner.intern(args) }),
+            ];
+        }
+        lexicalTypeStack = newTypeStack;
+        if (!programContext) {
+            programContext = stateInterner.intern({
+                lexicalContext: typeEmitter.programContext(program),
+                referenceContext: stateInterner.intern({}),
+            });
+        }
+        // Establish our context by starting from program and walking up the type stack
+        // and merging in context for each of the lexical containers.
+        context = programContext;
+        for (const entry of lexicalTypeStack) {
+            if (incomingReferenceContext && entry.args[0] === incomingReferenceContextTarget) {
+                // bring in any reference context so it is available for any types nested beneath this type.
+                context = stateInterner.intern({
+                    lexicalContext: context.lexicalContext,
+                    referenceContext: stateInterner.intern({
+                        ...context.referenceContext,
+                        ...incomingReferenceContext,
+                    }),
+                });
+            }
+            const seenContext = knownContexts.get([entry, context]);
+            if (seenContext) {
+                context = seenContext;
+                continue;
+            }
+            const lexicalKey = entry.method + "Context";
+            const referenceKey = entry.method + "ReferenceContext";
+            if (keyHasContext(entry.method)) {
+                compilerAssert(typeEmitter[lexicalKey], `TypeEmitter doesn't have a method named ${lexicalKey}`);
+            }
+            if (keyHasReferenceContext(entry.method)) {
+                compilerAssert(typeEmitter[referenceKey], `TypeEmitter doesn't have a method named ${referenceKey}`);
+            }
+            const newContext = keyHasContext(entry.method)
+                ? typeEmitter[lexicalKey](...entry.args)
+                : {};
+            const newReferenceContext = keyHasReferenceContext(entry.method)
+                ? typeEmitter[referenceKey](...entry.args)
+                : {};
+            // assemble our new reference and lexical contexts.
+            const newContextState = stateInterner.intern({
+                lexicalContext: stateInterner.intern({
+                    ...context.lexicalContext,
+                    ...newContext,
+                }),
+                referenceContext: stateInterner.intern({
+                    ...context.referenceContext,
+                    ...newReferenceContext,
+                }),
+            });
+            knownContexts.set([entry, context], newContextState);
+            context = newContextState;
+        }
+        if (!isInternalMethod(method)) {
+            referenceTypeChain = [
+                ...referenceTypeChain,
+                stackEntryInterner.intern({
+                    method,
+                    type,
+                    context,
+                }),
+            ];
+        }
+    }
+    /**
+     * Invoke the callback with the proper context for a given type.
+     */
+    function withTypeContext(method, args, cb) {
+        const oldContext = context;
+        const oldTypeStack = lexicalTypeStack;
+        const oldRefTypeStack = referenceTypeChain;
+        setContextForType(method, args);
+        cb();
+        context = oldContext;
+        lexicalTypeStack = oldTypeStack;
+        referenceTypeChain = oldRefTypeStack;
+    }
+    function withPatchedReferenceContext(referenceContext, cb) {
+        if (referenceContext !== undefined) {
+            const oldContext = context;
+            context = stateInterner.intern({
+                lexicalContext: context.lexicalContext,
+                referenceContext: stateInterner.intern({
+                    ...context.referenceContext,
+                    ...referenceContext,
+                }),
+            });
+            const result = cb();
+            context = oldContext;
+            return result;
+        }
+        else {
+            return cb();
+        }
+    }
+    /**
+     * Invoke the callback with the given context.
+     */
+    function withContext(newContext, cb) {
+        const oldContext = context;
+        const oldTypeStack = lexicalTypeStack;
+        context = newContext.context;
+        lexicalTypeStack = newContext.lexicalTypeStack;
+        cb();
+        context = oldContext;
+        lexicalTypeStack = oldTypeStack;
+    }
+    function typeEmitterKey(type) {
+        switch (type.kind) {
+            case "Model":
+                if (program.checker.isStdType(type) && type.name === "Array") {
+                    // likely an array literal, though could be a bare reference to Array maybe?
+                    return "arrayLiteral";
+                }
+                if (type.name === "") {
+                    return "modelLiteral";
+                }
+                if (type.templateMapper) {
+                    return "modelInstantiation";
+                }
+                if (type.indexer && type.indexer.key.name === "integer") {
+                    return "arrayDeclaration";
+                }
+                return "modelDeclaration";
+            case "Namespace":
+                return "namespace";
+            case "ModelProperty":
+                return "modelPropertyLiteral";
+            case "StringTemplate":
+                return "stringTemplate";
+            case "Boolean":
+                return "booleanLiteral";
+            case "String":
+                return "stringLiteral";
+            case "Number":
+                return "numericLiteral";
+            case "Operation":
+                if (type.interface) {
+                    return "interfaceOperationDeclaration";
+                }
+                else {
+                    return "operationDeclaration";
+                }
+            case "Interface":
+                return "interfaceDeclaration";
+            case "Enum":
+                return "enumDeclaration";
+            case "EnumMember":
+                return "enumMember";
+            case "Union":
+                if (!type.name) {
+                    return "unionLiteral";
+                }
+                if (type.templateMapper) {
+                    return "unionInstantiation";
+                }
+                return "unionDeclaration";
+            case "UnionVariant":
+                return "unionVariant";
+            case "Tuple":
+                return "tupleLiteral";
+            case "Scalar":
+                if (type.templateMapper) {
+                    return "scalarInstantiation";
+                }
+                else {
+                    return "scalarDeclaration";
+                }
+            case "Intrinsic":
+                return "intrinsic";
+            default:
+                compilerAssert(false, `Encountered type ${type.kind} which we don't know how to emit.`);
+        }
+    }
+    function currentScope() {
+        return context.referenceContext?.scope ?? context.lexicalContext?.scope ?? null;
+    }
+}
+/**
+ * Returns true if the given type is a declaration or an instantiation of a declaration.
+ * @param type
+ * @returns
+ */
+function isDeclaration(type) {
+    switch (type.kind) {
+        case "Namespace":
+        case "Interface":
+        case "Enum":
+        case "Operation":
+        case "Scalar":
+        case "Intrinsic":
+            return true;
+        case "Model":
+            return type.name ? type.name !== "" && type.name !== "Array" : false;
+        case "Union":
+            return type.name ? type.name !== "" : false;
+        default:
+            return false;
+    }
+}
+/**
+ * An interner takes an object and returns either that same object, or a
+ * previously seen object that has the identical shape.
+ *
+ * This implementation is EXTREMELY non-optimal (O(n*m) where n = number of unique
+ * state objects and m = the number of properties a state object contains). This
+ * will very quickly be a bottleneck. That said, the common case is no state at
+ * all, and also this is essentially implementing records and tuples, so could
+ * probably adopt those when they are released. That that said, the records and
+ * tuples are presently facing headwinds due to implementations facing exactly
+ * these performance characteristics. Regardless, there are optimizations we
+ * could consider.
+ */
+function createInterner() {
+    const emptyObject = {};
+    const knownObjects = new Set();
+    return {
+        intern(object) {
+            const keyLen = Object.keys(object).length;
+            if (keyLen === 0)
+                return emptyObject;
+            for (const ko of knownObjects) {
+                const entries = Object.entries(ko);
+                if (entries.length !== keyLen)
+                    continue;
+                let found = true;
+                for (const [key, value] of entries) {
+                    if (object[key] !== value) {
+                        found = false;
+                        break;
+                    }
+                }
+                if (found) {
+                    return ko;
+                }
+            }
+            knownObjects.add(object);
+            return object;
+        },
+    };
+}
+const noContext = new Set(["modelPropertyReference", "enumMemberReference"]);
+function keyHasContext(key) {
+    return !noContext.has(key);
+}
+const noReferenceContext = new Set([
+    ...noContext,
+    "booleanLiteral",
+    "stringTemplate",
+    "stringLiteral",
+    "numericLiteral",
+    "scalarInstantiation",
+    "enumMember",
+    "enumMembers",
+    "intrinsic",
+]);
+function keyHasReferenceContext(key) {
+    return !noReferenceContext.has(key);
+}
+function resolveReferenceCycle(stack, entity, typeToEmitEntity) {
+    for (let i = stack.length - 1; i >= 0; i--) {
+        if (stack[i].type === entity.emitEntityKey[1]) {
+            return new ReferenceCycle(stack.slice(i).map((x) => {
+                return {
+                    type: x.type,
+                    entity: typeToEmitEntity.get([x.method, x.type, x.context]),
+                };
+            }));
+        }
+    }
+    throw new Error(`Couldn't resolve the circular reference stack for ${getTypeName(entity.emitEntityKey[1])}`);
+}
+//# sourceMappingURL=asset-emitter.js.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/asset-emitter.js.map b/dist/src/emitter-framework/asset-emitter.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..4ed40e7e3803e0d26eeac280000fcc565cfe9b2a
--- /dev/null
+++ b/dist/src/emitter-framework/asset-emitter.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"asset-emitter.js","sourceRoot":"","sources":["../../../src/emitter-framework/asset-emitter.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,cAAc,EAAE,MAAM,wBAAwB,CAAC;AACxD,OAAO,EAAE,WAAW,EAAE,MAAM,oCAAoC,CAAC;AAEjE,OAAO,EAAE,SAAS,EAAE,MAAM,uBAAuB,CAAC;AAClD,OAAO,EAAE,qBAAqB,EAAE,MAAM,uBAAuB,CAAC;AAC9D,OAAO,EAAE,YAAY,EAAE,MAAM,qBAAqB,CAAC;AACnD,OAAO,EAAE,WAAW,EAAE,MAAM,kBAAkB,CAAC;AAC/C,OAAO,EAAE,gCAAgC,EAAE,MAAM,gBAAgB,CAAC;AAClE,OAAO,EAAE,cAAc,EAAE,MAAM,sBAAsB,CAAC;AAEtD,OAAO,EAEL,YAAY,EAEZ,WAAW,EAGX,aAAa,EAIb,MAAM,EACN,OAAO,GAMR,MAAM,YAAY,CAAC;AAWpB,MAAM,UAAU,kBAAkB,CAChC,OAAgB,EAChB,gBAAiD,EACjD,WAAkC;IAElC,MAAM,WAAW,GAAoB,EAAE,CAAC;IAExC,MAAM,OAAO,GAAG;QACd,MAAM,EAAE,OAAO,CAAC,eAAe,CAAC,MAAM,IAAI,KAAK;QAC/C,gBAAgB,EAAE,WAAW,CAAC,gBAAgB;QAC9C,GAAG,WAAW,CAAC,OAAO;KACvB,CAAC;IACF,MAAM,MAAM,GAAG,YAAY,CAAC,WAAW,EAAE,CAAC;IAC1C,MAAM,SAAS,GAAG,YAAY,CAAC,WAAW,EAAE,CAAC;IAC7C,MAAM,OAAO,GAAG,YAAY,CAAC,WAAW,EAAE,CAAC;IAE3C,uEAAuE;IACvE,mEAAmE;IACnE,EAAE;IACF,6CAA6C;IAC7C,kCAAkC;IAClC,0BAA0B;IAC1B,EAAE;IACF,uEAAuE;IACvE,uEAAuE;IACvE,4CAA4C;IAC5C,MAAM,gBAAgB,GAAG,IAAI,YAAY,CACvC,CAAC,CAAC,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC,EAAE,EAAE;QAC1B,OAAO,GAAG,MAAM,IAAI,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,CAAC;IACzE,CAAC,CACF,CAAC;IAEF,wEAAwE;IACxE,0EAA0E;IAC1E,YAAY;IACZ,MAAM,mBAAmB,GAAG,IAAI,YAAY,CAM1C,CAAC,CAAC,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC,EAAE,EAAE;QAC5B,OAAO,GAAG,MAAM,IAAI,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,CAAC;IACzE,CAAC,CAAC,CAAC;IAEH,yEAAyE;IACzE,mEAAmE;IACnE,mEAAmE;IACnE,uEAAuE;IACvE,wEAAwE;IACxE,oDAAoD;IACpD,MAAM,aAAa,GAAG,IAAI,YAAY,CACpC,CAAC,CAAC,KAAK,EAAE,OAAO,CAAC,EAAE,EAAE;QACnB,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,CAAC;IACjE,CAAC,CACF,CAAC;IAEF,kEAAkE;IAClE,iEAAiE;IACjE,yEAAyE;IACzE,sEAAsE;IACtE,yEAAyE;IACzE,qEAAqE;IACrE,0EAA0E;IAC1E,iCAAiC;IACjC,IAAI,gBAAgB,GAA4B,EAAE,CAAC;IACnD,IAAI,kBAAkB,GAA0B,EAAE,CAAC;IAEnD,6DAA6D;IAC7D,mEAAmE;IACnE,qEAAqE;IACrE,yDAAyD;IACzD,IAAI,OAAO,GAAiB;QAC1B,cAAc,EAAE,EAAE;QAClB,gBAAgB,EAAE,EAAE;KACrB,CAAC;IACF,IAAI,cAAc,GAAwB,IAAI,CAAC;IAE/C,6EAA6E;IAC7E,gEAAgE;IAChE,8EAA8E;IAC9E,4EAA4E;IAC5E,6EAA6E;IAC7E,6EAA6E;IAC7E,0EAA0E;IAC1E,2BAA2B;IAC3B,IAAI,wBAAwB,GAAkC,IAAI,CAAC;IACnE,IAAI,8BAA8B,GAAgB,IAAI,CAAC;IACvD,MAAM,aAAa,GAAG,cAAc,EAAE,CAAC;IACvC,MAAM,kBAAkB,GAAG,cAAc,EAAE,CAAC;IAE5C,MAAM,YAAY,GAA8B;QAC9C,UAAU;YACR,OAAO;gBACL,GAAG,OAAO,CAAC,cAAc;gBACzB,GAAG,OAAO,CAAC,gBAAgB;aAC5B,CAAC;QACJ,CAAC;QAED,UAAU;YACR,OAAO,OAAO,CAAC;QACjB,CAAC;QAED,UAAU;YACR,OAAO,OAAO,CAAC;QACjB,CAAC;QAED,MAAM,EAAE;YACN,WAAW,CAAC,IAAI,EAAE,KAAK;gBACrB,MAAM,KAAK,GAAG,YAAY,EAAE,CAAC;gBAC7B,cAAc,CACZ,KAAK,EACL,iLAAiL,CAClL,CAAC;gBACF,OAAO,IAAI,WAAW,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;YAC7C,CAAC;YACD,OAAO,CAAC,KAAK;gBACX,OAAO,IAAI,OAAO,CAAC,KAAK,CAAC,CAAC;YAC5B,CAAC;YACD,IAAI;gBACF,OAAO,IAAI,MAAM,EAAE,CAAC;YACtB,CAAC;SACF;QACD,WAAW,CAAC,KAAK,EAAE,IAAI,EAAE,cAA+B,IAAI;YAC1D,IAAI,QAAkB,CAAC;YACvB,IAAI,CAAC,WAAW,EAAE,CAAC;gBACjB,2BAA2B;gBAC3B,QAAQ,GAAG;oBACT,IAAI,EAAE,YAAY;oBAClB,IAAI;oBACJ,UAAU,EAAE,KAAK;oBACjB,WAAW;oBACX,WAAW,EAAE,EAAE;oBACf,YAAY,EAAE,EAAE;iBACK,CAAC;YAC1B,CAAC;iBAAM,CAAC;gBACN,QAAQ,GAAG;oBACT,IAAI,EAAE,WAAW;oBACjB,IAAI;oBACJ,SAAS,EAAE,KAAK;oBAChB,WAAW,EAAE,EAAE;oBACf,YAAY,EAAE,EAAE;oBAChB,WAAW;iBACS,CAAC;YACzB,CAAC;YAED,WAAW,EAAE,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACxC,OAAO,QAAe,CAAC,CAAC,oDAAoD;QAC9E,CAAC;QAED,gBAAgB,CAAC,IAAI;YACnB,MAAM,QAAQ,GAAG,OAAO,CAAC,gBAAgB,CAAC;YAC1C,MAAM,UAAU,GAAG;gBACjB,WAAW,EAAE,SAAgB;gBAC7B,IAAI,EAAE,SAAS,CAAC,QAAQ,EAAE,IAAI,CAAC;gBAC/B,OAAO,EAAE,IAAI,GAAG,EAAE;gBAClB,IAAI,EAAE,EAAE;aACT,CAAC;YACF,UAAU,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;YAC1D,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YAC7B,OAAO,UAAU,CAAC;QACpB,CAAC;QAED,iBAAiB,CAAC,MAAM,EAAE,OAAkC;YAC1D,OAAO,2BAA2B,CAAC,OAAO,EAAE,gBAAgB,EAAE,GAAG,EAAE;gBACjE,MAAM,2BAA2B,GAAG,wBAAwB,CAAC;gBAC7D,MAAM,iCAAiC,GAAG,8BAA8B,CAAC;gBAEzE,wBAAwB,GAAG,OAAO,CAAC,gBAAgB,IAAI,IAAI,CAAC;gBAC5D,8BAA8B,GAAG,wBAAwB,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC;gBAE1E,IAAI,MAAM,CAAC;gBACX,IAAI,MAAM,CAAC,IAAI,KAAK,eAAe,EAAE,CAAC;oBACpC,MAAM,GAAG,iBAAiB,CAAC,wBAAwB,EAAE,MAAM,CAAC,CAAC;gBAC/D,CAAC;qBAAM,IAAI,MAAM,CAAC,IAAI,KAAK,YAAY,EAAE,CAAC;oBACxC,MAAM,GAAG,iBAAiB,CAAC,qBAAqB,EAAE,MAAM,CAAC,CAAC;gBAC5D,CAAC;gBAED,IAAI,MAAM,EAAE,CAAC;oBACX,wBAAwB,GAAG,2BAA2B,CAAC;oBACvD,8BAA8B,GAAG,iCAAiC,CAAC;oBACnE,OAAO,MAAM,CAAC;gBAChB,CAAC;gBAED,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;gBAErC,wBAAwB,GAAG,2BAA2B,CAAC;gBACvD,8BAA8B,GAAG,iCAAiC,CAAC;gBAEnE,IAAI,WAAW,GAA0B,IAAI,CAAC;gBAE9C,IAAI,MAAM,CAAC,IAAI,KAAK,UAAU,EAAE,CAAC;oBAC/B,IAAI,OAAO,GAAG,mBAAmB,CAAC,GAAG,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;oBAC5D,IAAI,CAAC,OAAO,EAAE,CAAC;wBACb,OAAO,GAAG,EAAE,CAAC;wBACb,mBAAmB,CAAC,GAAG,CAAC,MAAM,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC;oBACzD,CAAC;oBAED,MAAM,iBAAiB,GAAG,kBAAkB,CAAC;oBAC7C,OAAO,CAAC,IAAI,CAAC;wBACX,KAAK,EAAE;4BACL,gBAAgB;4BAChB,OAAO;yBACR;wBACD,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,CACrB,eAAe,CACb,IAAI,EACJ,cAAc,EACd,IAAI,EACJ,qBAAqB,CAAC,iBAAiB,EAAE,MAAM,EAAE,gBAAuB,CAAC,CAC1E;qBACJ,CAAC,CAAC;oBAEH,WAAW,GAAG,IAAI,WAAW,EAAE,CAAC;oBAChC,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;gBAC1C,CAAC;qBAAM,CAAC;oBACN,OAAO,eAAe,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;gBAC9C,CAAC;gBAED,SAAS,eAAe,CACtB,YAAuC,EACvC,MAAqB,EACrB,QAAiB,EACjB,KAAsB;oBAEtB,IAAI,GAAG,CAAC;oBACR,MAAM,KAAK,GAAG,YAAY,EAAE,CAAC;oBAE7B,IAAI,QAAQ,EAAE,CAAC;wBACb,GAAG,GAAG,WAAW,CAAC,iBAAiB,CAAC,MAAM,EAAE,KAAK,EAAE,KAAM,CAAC,CAAC;oBAC7D,CAAC;yBAAM,CAAC;wBACN,IAAI,MAAM,CAAC,IAAI,KAAK,aAAa,EAAE,CAAC;4BAClC,OAAO,MAAM,CAAC;wBAChB,CAAC;wBACD,cAAc,CACZ,KAAK,EACL,mFAAmF,CACpF,CAAC;wBACF,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,GAAG,gCAAgC,CACxE,MAAM,EACN,KAAK,CACN,CAAC;wBACF,GAAG,GAAG,WAAW,CAAC,SAAS,CAAC,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,WAAW,CAAC,CAAC;oBACrE,CAAC;oBAED,IAAI,CAAC,CAAC,GAAG,YAAY,aAAa,CAAC,EAAE,CAAC;wBACpC,GAAG,GAAG,YAAY,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAe,CAAC;oBACvD,CAAC;oBAED,IAAI,WAAW,EAAE,CAAC;wBAChB,sEAAsE;wBACtE,oDAAoD;wBACpD,cAAc,CACZ,GAAG,CAAC,IAAI,KAAK,UAAU,EACvB,gDAAgD,CACjD,CAAC;wBAEF,+CAA+C;wBAC/C,cAAc,CACZ,GAAG,CAAC,IAAI,KAAK,MAAM,IAAI,CAAC,CAAC,GAAG,CAAC,KAAK,YAAY,WAAW,CAAC,EAC1D,+DAA+D,CAChE,CAAC;wBAEF,QAAQ,GAAG,CAAC,IAAI,EAAE,CAAC;4BACjB,KAAK,MAAM,CAAC;4BACZ,KAAK,aAAa;gCAChB,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAU,CAAC,CAAC;gCACrC,MAAM;4BACR,KAAK,MAAM;gCACT,yDAAyD;gCACzD,iCAAiC;gCACjC,WAAW,CAAC,QAAQ,CAAC,EAAO,CAAC,CAAC;gCAC9B,MAAM;wBACV,CAAC;oBACH,CAAC;oBAED,OAAO,GAAG,CAAC;gBACb,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC;QAED,mBAAmB,CAAC,IAAI;YACtB,OAAO,WAAW,CAAC,eAAgB,CAAC,IAAI,CAAC,CAAC;QAC5C,CAAC;QAED,KAAK,CAAC,WAAW;YACf,OAAO,WAAW,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;QAC9C,CAAC;QAED,cAAc;YACZ,OAAO,WAAW,CAAC;QACrB,CAAC;QAED,QAAQ,CAAC,IAAI,EAAE,OAAsB;YACnC,IAAI,OAAO,EAAE,gBAAgB,EAAE,CAAC;gBAC9B,wBAAwB,GAAG,OAAO,EAAE,gBAAgB,IAAI,wBAAwB,CAAC;gBACjF,8BAA8B,GAAG,IAAI,IAAI,8BAA8B,CAAC;YAC1E,CAAC;YAED,MAAM,QAAQ,GACZ,aAAa,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,KAAK,WAAW,CAAC,CAAC,CAAC,WAAW,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAC9F,MAAM,GAAG,GAAG,cAAc,CAAC,IAAI,CAAC,CAAC;YACjC,IAAI,IAAW,CAAC;YAChB,QAAQ,GAAG,EAAE,CAAC;gBACZ,KAAK,mBAAmB,CAAC;gBACzB,KAAK,qBAAqB,CAAC;gBAC3B,KAAK,kBAAkB,CAAC;gBACxB,KAAK,oBAAoB,CAAC;gBAC1B,KAAK,sBAAsB,CAAC;gBAC5B,KAAK,sBAAsB,CAAC;gBAC5B,KAAK,+BAA+B,CAAC;gBACrC,KAAK,iBAAiB,CAAC;gBACvB,KAAK,kBAAkB,CAAC;gBACxB,KAAK,oBAAoB;oBACvB,IAAI,GAAG,CAAC,QAAQ,CAAC,CAAC;oBAClB,MAAM;gBAER,KAAK,kBAAkB;oBACrB,MAAM,gBAAgB,GAAI,IAAc,CAAC,OAAQ,CAAC,KAAK,CAAC;oBACxD,IAAI,GAAG,CAAC,QAAQ,EAAE,gBAAgB,CAAC,CAAC;oBACpC,MAAM;gBACR,KAAK,cAAc;oBACjB,MAAM,mBAAmB,GAAI,IAAc,CAAC,OAAQ,CAAC,KAAK,CAAC;oBAC3D,IAAI,GAAG,CAAC,mBAAmB,CAAC,CAAC;oBAC7B,MAAM;gBACR,KAAK,WAAW;oBACd,IAAI,GAAG,CAAC,QAAQ,CAAC,CAAC;oBAClB,MAAM;gBACR;oBACE,IAAI,GAAG,EAAE,CAAC;YACd,CAAC;YAED,MAAM,MAAM,GAAI,iBAAyB,CAAC,GAAG,EAAE,IAAI,EAAE,GAAG,IAAI,CAAC,CAAC;YAE9D,OAAO,MAAM,CAAC;QAChB,CAAC;QAED,WAAW,CAAC,OAAO;YACjB,MAAM,SAAS,GAAG,OAAO,CAAC,sBAAsB,EAAE,CAAC;YACnD,IAAI,OAAO,EAAE,mBAAmB,EAAE,CAAC;gBACjC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;gBACzB,OAAO;YACT,CAAC;YAED,KAAK,MAAM,EAAE,IAAI,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,CAAC;gBAC/C,IAAI,EAAE,CAAC,IAAI,KAAK,UAAU,IAAI,CAAC,OAAO,EAAE,qBAAqB;oBAAE,SAAS;gBACxE,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;YACpB,CAAC;YAED,KAAK,MAAM,KAAK,IAAI,SAAS,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,CAAC;gBAC9C,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,EAAE,CAAC;oBAClC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;gBACvB,CAAC;YACH,CAAC;YAED,KAAK,MAAM,SAAS,IAAI,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,CAAC;gBACtD,IAAI,CAAC,qBAAqB,CAAC,SAAS,CAAC,EAAE,CAAC;oBACtC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;gBAC3B,CAAC;YACH,CAAC;YAED,KAAK,MAAM,WAAW,IAAI,SAAS,CAAC,KAAK,CAAC,MAAM,EAAE,EAAE,CAAC;gBACnD,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YAC7B,CAAC;YAED,KAAK,MAAM,KAAK,IAAI,SAAS,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,CAAC;gBAC9C,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,EAAE,CAAC;oBAClC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;gBACvB,CAAC;YACH,CAAC;YAED,KAAK,MAAM,KAAK,IAAI,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,CAAC;gBAClD,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,EAAE,CAAC;oBAClC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;gBACvB,CAAC;YACH,CAAC;YAED,KAAK,MAAM,MAAM,IAAI,SAAS,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC;gBAChD,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACxB,CAAC;QACH,CAAC;QAED,mBAAmB,CAAC,KAAK;YACvB,MAAM,GAAG,GAAG,iBAAiB,CAAC,iBAAiB,EAAE,KAAK,CAAC,CAAC;YACxD,IAAI,GAAG,YAAY,aAAa,EAAE,CAAC;gBACjC,OAAO,GAAU,CAAC;YACpB,CAAC;iBAAM,CAAC;gBACN,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;YAClC,CAAC;QACH,CAAC;QAED,iBAAiB,CAAC,QAAQ;YACxB,OAAO,iBAAiB,CAAC,sBAAsB,EAAE,QAAQ,CAAC,CAAC;QAC7D,CAAC;QAED,uBAAuB,CAAC,SAAS;YAC/B,OAAO,iBAAiB,CAAC,qBAAqB,EAAE,SAAS,EAAE,SAAS,CAAC,UAAU,CAAC,CAAC;QACnF,CAAC;QAED,uBAAuB,CAAC,SAAS;YAC/B,OAAO,iBAAiB,CAAC,qBAAqB,EAAE,SAAS,EAAE,SAAS,CAAC,UAAU,CAAC,CAAC;QACnF,CAAC;QAED,uBAAuB,CAAC,KAAK;YAC3B,OAAO,iBAAiB,CAAC,gCAAgC,EAAE,KAAK,CAAC,CAAC;QACpE,CAAC;QAED,sBAAsB,CAAC,SAAS;YAC9B,MAAM,IAAI,GAAG,WAAW,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;YACpD,IAAI,IAAI,KAAK,SAAS,EAAE,CAAC;gBACvB,yEAAyE;gBACzE,uDAAuD;gBACvD,cAAc,CAAC,KAAK,EAAE,sCAAsC,CAAC,CAAC;YAChE,CAAC;YACD,OAAO,iBAAiB,CAAC,+BAA+B,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;QAC7E,CAAC;QAED,eAAe,CAAC,EAAE;YAChB,OAAO,iBAAiB,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC;QAC9C,CAAC;QAED,iBAAiB,CAAC,KAAK;YACrB,OAAO,iBAAiB,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;QACnD,CAAC;QAED,sBAAsB,CAAC,KAAK;YAC1B,OAAO,iBAAiB,CAAC,oBAAoB,EAAE,KAAK,CAAC,CAAC;QACxD,CAAC;QAED,KAAK,CAAC,cAAc,CAAC,UAAU;YAC7B,OAAO,MAAM,WAAW,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;QAClD,CAAC;KACF,CAAC;IAEF,MAAM,WAAW,GAAG,IAAI,gBAAgB,CAAC,YAAY,CAAC,CAAC;IACvD,OAAO,YAAY,CAAC;IAEpB;;;;;;;OAOG;IACH,SAAS,iBAAiB,CACxB,MAAe,EACf,GAAG,IAAmD;QAEtD,MAAM,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;QACrB,IAAI,MAAqB,CAAC;QAC1B,IAAI,aAA2C,CAAC;QAChD,IAAI,MAAM,GAAG,KAAK,CAAC;QAEnB,eAAe,CAAC,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE;YACjC,aAAa,GAAG,CAAC,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;YACxC,MAAM,cAAc,GAAG,gBAAgB,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;YAE3D,IAAI,cAAc,EAAE,CAAC;gBACnB,MAAM,GAAG,cAAc,CAAC;gBACxB,MAAM,GAAG,IAAI,CAAC;gBACd,OAAO;YACT,CAAC;YAED,gBAAgB,CAAC,GAAG,CAAC,aAAa,EAAE,IAAI,YAAY,CAAC,aAAa,CAAC,CAAC,CAAC;YACrE,cAAc,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,2CAA2C,MAAM,GAAG,CAAC,CAAC;YAC1F,MAAM,GAAG,aAAa,CAAE,WAAW,CAAC,MAAM,CAAS,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;QAChE,CAAC,CAAC,CAAC;QAEH,IAAI,MAAM,EAAE,CAAC;YACX,OAAO,MAAO,CAAC;QACjB,CAAC;QAED,IAAI,MAAO,YAAY,WAAW,EAAE,CAAC;YACnC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAAC;YAChD,OAAO,MAAM,CAAC;QAChB,CAAC;QAED,qBAAqB,CAAC,MAAO,CAAC,CAAC;QAE/B,OAAO,MAAO,CAAC;QAEf,SAAS,qBAAqB,CAAC,MAAqB;YAClD,gBAAgB,CAAC,GAAG,CAAC,aAAc,EAAE,MAAO,CAAC,CAAC;YAC9C,MAAM,aAAa,GAAG,mBAAmB,CAAC,GAAG,CAAC,aAAc,CAAC,CAAC;YAC9D,IAAI,aAAa,EAAE,CAAC;gBAClB,KAAK,MAAM,MAAM,IAAI,aAAa,EAAE,CAAC;oBACnC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,GAAG,EAAE;wBAC7B,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;oBACpB,CAAC,CAAC,CAAC;gBACL,CAAC;gBACD,mBAAmB,CAAC,GAAG,CAAC,aAAc,EAAE,EAAE,CAAC,CAAC;YAC9C,CAAC;YAED,IAAI,MAAO,CAAC,IAAI,KAAK,aAAa,EAAE,CAAC;gBACnC,MAAO,CAAC,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,MAAO,CAAC,CAAC;YAC3C,CAAC;QACH,CAAC;QAED,SAAS,aAAa,CAAC,KAAyC;YAC9D,IAAI,KAAK,YAAY,aAAa,EAAE,CAAC;gBACnC,OAAO,KAAK,CAAC;YACf,CAAC;YAED,OAAO,YAAY,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAC5C,CAAC;IACH,CAAC;IAED,SAAS,gBAAgB,CACvB,MAAyB;QAYzB,OAAO,CACL,MAAM,KAAK,gCAAgC;YAC3C,MAAM,KAAK,+BAA+B;YAC1C,MAAM,KAAK,qBAAqB;YAChC,MAAM,KAAK,qBAAqB;YAChC,MAAM,KAAK,iBAAiB;YAC5B,MAAM,KAAK,aAAa;YACxB,MAAM,KAAK,oBAAoB;YAC/B,MAAM,KAAK,eAAe,CAC3B,CAAC;IACJ,CAAC;IACD;;;;;OAKG;IACH,SAAS,iBAAiB,CACxB,MAAe,EACf,IAAmD;QAEnD,MAAM,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;QACrB,IAAI,YAAqC,CAAC;QAE1C,uEAAuE;QACvE,iDAAiD;QACjD,IAAI,aAAa,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,KAAK,WAAW,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC;YAClF,YAAY,GAAG,CAAC,kBAAkB,CAAC,MAAM,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,kBAAkB,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;YAC9F,IAAI,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC;YACxB,OAAO,EAAE,EAAE,CAAC;gBACV,IAAI,EAAE,CAAC,IAAI,KAAK,EAAE;oBAAE,MAAM;gBAC1B,YAAY,CAAC,OAAO,CAClB,kBAAkB,CAAC,MAAM,CAAC,EAAE,MAAM,EAAE,WAAW,EAAE,IAAI,EAAE,kBAAkB,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAC1F,CAAC;gBACF,EAAE,GAAG,EAAE,CAAC,SAAS,CAAC;YACpB,CAAC;QACH,CAAC;aAAM,CAAC;YACN,YAAY,GAAG;gBACb,GAAG,gBAAgB;gBACnB,kBAAkB,CAAC,MAAM,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,kBAAkB,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC;aAC7E,CAAC;QACJ,CAAC;QAED,gBAAgB,GAAG,YAAY,CAAC;QAEhC,IAAI,CAAC,cAAc,EAAE,CAAC;YACpB,cAAc,GAAG,aAAa,CAAC,MAAM,CAAC;gBACpC,cAAc,EAAE,WAAW,CAAC,cAAc,CAAC,OAAO,CAAC;gBACnD,gBAAgB,EAAE,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC;aAC3C,CAAC,CAAC;QACL,CAAC;QAED,+EAA+E;QAC/E,6DAA6D;QAC7D,OAAO,GAAG,cAAc,CAAC;QAEzB,KAAK,MAAM,KAAK,IAAI,gBAAgB,EAAE,CAAC;YACrC,IAAI,wBAAwB,IAAI,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,8BAA8B,EAAE,CAAC;gBACjF,4FAA4F;gBAC5F,OAAO,GAAG,aAAa,CAAC,MAAM,CAAC;oBAC7B,cAAc,EAAE,OAAO,CAAC,cAAc;oBACtC,gBAAgB,EAAE,aAAa,CAAC,MAAM,CAAC;wBACrC,GAAG,OAAO,CAAC,gBAAgB;wBAC3B,GAAG,wBAAwB;qBAC5B,CAAC;iBACH,CAAC,CAAC;YACL,CAAC;YAED,MAAM,WAAW,GAAG,aAAa,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC,CAAC;YACxD,IAAI,WAAW,EAAE,CAAC;gBAChB,OAAO,GAAG,WAAW,CAAC;gBACtB,SAAS;YACX,CAAC;YAED,MAAM,UAAU,GAAG,KAAK,CAAC,MAAM,GAAG,SAAS,CAAC;YAC5C,MAAM,YAAY,GAAG,KAAK,CAAC,MAAM,GAAG,kBAAkB,CAAC;YAEvD,IAAI,aAAa,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC;gBAChC,cAAc,CACX,WAAmB,CAAC,UAAU,CAAC,EAChC,2CAA2C,UAAU,EAAE,CACxD,CAAC;YACJ,CAAC;YAED,IAAI,sBAAsB,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC;gBACzC,cAAc,CACX,WAAmB,CAAC,YAAY,CAAC,EAClC,2CAA2C,YAAY,EAAE,CAC1D,CAAC;YACJ,CAAC;YAED,MAAM,UAAU,GAAG,aAAa,CAAC,KAAK,CAAC,MAAM,CAAC;gBAC5C,CAAC,CAAE,WAAmB,CAAC,UAAU,CAAC,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC;gBACjD,CAAC,CAAC,EAAE,CAAC;YAEP,MAAM,mBAAmB,GAAG,sBAAsB,CAAC,KAAK,CAAC,MAAM,CAAC;gBAC9D,CAAC,CAAE,WAAmB,CAAC,YAAY,CAAC,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC;gBACnD,CAAC,CAAC,EAAE,CAAC;YAEP,mDAAmD;YACnD,MAAM,eAAe,GAAG,aAAa,CAAC,MAAM,CAAC;gBAC3C,cAAc,EAAE,aAAa,CAAC,MAAM,CAAC;oBACnC,GAAG,OAAO,CAAC,cAAc;oBACzB,GAAG,UAAU;iBACd,CAAC;gBACF,gBAAgB,EAAE,aAAa,CAAC,MAAM,CAAC;oBACrC,GAAG,OAAO,CAAC,gBAAgB;oBAC3B,GAAG,mBAAmB;iBACvB,CAAC;aACH,CAAC,CAAC;YAEH,aAAa,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,OAAO,CAAC,EAAE,eAAe,CAAC,CAAC;YACrD,OAAO,GAAG,eAAe,CAAC;QAC5B,CAAC;QAED,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC;YAC9B,kBAAkB,GAAG;gBACnB,GAAG,kBAAkB;gBACrB,kBAAkB,CAAC,MAAM,CAAC;oBACxB,MAAM;oBACN,IAAI;oBACJ,OAAO;iBACR,CAAC;aACH,CAAC;QACJ,CAAC;IACH,CAAC;IAED;;OAEG;IACH,SAAS,eAAe,CACtB,MAAe,EACf,IAAmD,EACnD,EAAc;QAEd,MAAM,UAAU,GAAG,OAAO,CAAC;QAC3B,MAAM,YAAY,GAAG,gBAAgB,CAAC;QACtC,MAAM,eAAe,GAAG,kBAAkB,CAAC;QAE3C,iBAAiB,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QAEhC,EAAE,EAAE,CAAC;QAEL,OAAO,GAAG,UAAU,CAAC;QACrB,gBAAgB,GAAG,YAAY,CAAC;QAChC,kBAAkB,GAAG,eAAe,CAAC;IACvC,CAAC;IAED,SAAS,2BAA2B,CAClC,gBAAiD,EACjD,EAAW;QAEX,IAAI,gBAAgB,KAAK,SAAS,EAAE,CAAC;YACnC,MAAM,UAAU,GAAG,OAAO,CAAC;YAE3B,OAAO,GAAG,aAAa,CAAC,MAAM,CAAC;gBAC7B,cAAc,EAAE,OAAO,CAAC,cAAc;gBACtC,gBAAgB,EAAE,aAAa,CAAC,MAAM,CAAC;oBACrC,GAAG,OAAO,CAAC,gBAAgB;oBAC3B,GAAG,gBAAgB;iBACpB,CAAC;aACH,CAAC,CAAC;YAEH,MAAM,MAAM,GAAG,EAAE,EAAE,CAAC;YACpB,OAAO,GAAG,UAAU,CAAC;YACrB,OAAO,MAAM,CAAC;QAChB,CAAC;aAAM,CAAC;YACN,OAAO,EAAE,EAAE,CAAC;QACd,CAAC;IACH,CAAC;IAED;;OAEG;IACH,SAAS,WAAW,CAAC,UAAwB,EAAE,EAAc;QAC3D,MAAM,UAAU,GAAG,OAAO,CAAC;QAC3B,MAAM,YAAY,GAAG,gBAAgB,CAAC;QACtC,OAAO,GAAG,UAAU,CAAC,OAAO,CAAC;QAC7B,gBAAgB,GAAG,UAAU,CAAC,gBAAgB,CAAC;QAE/C,EAAE,EAAE,CAAC;QAEL,OAAO,GAAG,UAAU,CAAC;QACrB,gBAAgB,GAAG,YAAY,CAAC;IAClC,CAAC;IAED,SAAS,cAAc,CAAC,IAAU;QAChC,QAAQ,IAAI,CAAC,IAAI,EAAE,CAAC;YAClB,KAAK,OAAO;gBACV,IAAI,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,KAAK,OAAO,EAAE,CAAC;oBAC7D,4EAA4E;oBAC5E,OAAO,cAAc,CAAC;gBACxB,CAAC;gBAED,IAAI,IAAI,CAAC,IAAI,KAAK,EAAE,EAAE,CAAC;oBACrB,OAAO,cAAc,CAAC;gBACxB,CAAC;gBAED,IAAI,IAAI,CAAC,cAAc,EAAE,CAAC;oBACxB,OAAO,oBAAoB,CAAC;gBAC9B,CAAC;gBAED,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,GAAI,CAAC,IAAI,KAAK,SAAS,EAAE,CAAC;oBACzD,OAAO,kBAAkB,CAAC;gBAC5B,CAAC;gBAED,OAAO,kBAAkB,CAAC;YAE5B,KAAK,WAAW;gBACd,OAAO,WAAW,CAAC;YACrB,KAAK,eAAe;gBAClB,OAAO,sBAAsB,CAAC;YAChC,KAAK,gBAAgB;gBACnB,OAAO,gBAAgB,CAAC;YAC1B,KAAK,SAAS;gBACZ,OAAO,gBAAgB,CAAC;YAC1B,KAAK,QAAQ;gBACX,OAAO,eAAe,CAAC;YACzB,KAAK,QAAQ;gBACX,OAAO,gBAAgB,CAAC;YAC1B,KAAK,WAAW;gBACd,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;oBACnB,OAAO,+BAA+B,CAAC;gBACzC,CAAC;qBAAM,CAAC;oBACN,OAAO,sBAAsB,CAAC;gBAChC,CAAC;YACH,KAAK,WAAW;gBACd,OAAO,sBAAsB,CAAC;YAChC,KAAK,MAAM;gBACT,OAAO,iBAAiB,CAAC;YAC3B,KAAK,YAAY;gBACf,OAAO,YAAY,CAAC;YACtB,KAAK,OAAO;gBACV,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;oBACf,OAAO,cAAc,CAAC;gBACxB,CAAC;gBAED,IAAI,IAAI,CAAC,cAAc,EAAE,CAAC;oBACxB,OAAO,oBAAoB,CAAC;gBAC9B,CAAC;gBAED,OAAO,kBAAkB,CAAC;YAC5B,KAAK,cAAc;gBACjB,OAAO,cAAc,CAAC;YACxB,KAAK,OAAO;gBACV,OAAO,cAAc,CAAC;YACxB,KAAK,QAAQ;gBACX,IAAI,IAAI,CAAC,cAAc,EAAE,CAAC;oBACxB,OAAO,qBAAqB,CAAC;gBAC/B,CAAC;qBAAM,CAAC;oBACN,OAAO,mBAAmB,CAAC;gBAC7B,CAAC;YAEH,KAAK,WAAW;gBACd,OAAO,WAAW,CAAC;YACrB;gBACE,cAAc,CAAC,KAAK,EAAE,oBAAoB,IAAI,CAAC,IAAI,mCAAmC,CAAC,CAAC;QAC5F,CAAC;IACH,CAAC;IACD,SAAS,YAAY;QACnB,OAAO,OAAO,CAAC,gBAAgB,EAAE,KAAK,IAAI,OAAO,CAAC,cAAc,EAAE,KAAK,IAAI,IAAI,CAAC;IAClF,CAAC;AACH,CAAC;AAED;;;;GAIG;AACH,SAAS,aAAa,CAAC,IAAU;IAC/B,QAAQ,IAAI,CAAC,IAAI,EAAE,CAAC;QAClB,KAAK,WAAW,CAAC;QACjB,KAAK,WAAW,CAAC;QACjB,KAAK,MAAM,CAAC;QACZ,KAAK,WAAW,CAAC;QACjB,KAAK,QAAQ,CAAC;QACd,KAAK,WAAW;YACd,OAAO,IAAI,CAAC;QAEd,KAAK,OAAO;YACV,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,EAAE,IAAI,IAAI,CAAC,IAAI,KAAK,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC;QACvE,KAAK,OAAO;YACV,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC;QAC9C;YACE,OAAO,KAAK,CAAC;IACjB,CAAC;AACH,CAAC;AAED;;;;;;;;;;;;GAYG;AACH,SAAS,cAAc;IACrB,MAAM,WAAW,GAAG,EAAE,CAAC;IACvB,MAAM,YAAY,GAA6B,IAAI,GAAG,EAAE,CAAC;IAEzD,OAAO;QACL,MAAM,CAAgC,MAAS;YAC7C,MAAM,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC;YAC1C,IAAI,MAAM,KAAK,CAAC;gBAAE,OAAO,WAAkB,CAAC;YAE5C,KAAK,MAAM,EAAE,IAAI,YAAY,EAAE,CAAC;gBAC9B,MAAM,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;gBACnC,IAAI,OAAO,CAAC,MAAM,KAAK,MAAM;oBAAE,SAAS;gBAExC,IAAI,KAAK,GAAG,IAAI,CAAC;gBACjB,KAAK,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,OAAO,EAAE,CAAC;oBACnC,IAAI,MAAM,CAAC,GAAG,CAAC,KAAK,KAAK,EAAE,CAAC;wBAC1B,KAAK,GAAG,KAAK,CAAC;wBACd,MAAM;oBACR,CAAC;gBACH,CAAC;gBAED,IAAI,KAAK,EAAE,CAAC;oBACV,OAAO,EAAS,CAAC;gBACnB,CAAC;YACH,CAAC;YAED,YAAY,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YACzB,OAAO,MAAM,CAAC;QAChB,CAAC;KACF,CAAC;AACJ,CAAC;AAED,MAAM,SAAS,GAAG,IAAI,GAAG,CAAS,CAAC,wBAAwB,EAAE,qBAAqB,CAAC,CAAC,CAAC;AAErF,SAAS,aAAa,CAAC,GAAgC;IACrD,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAC7B,CAAC;AACD,MAAM,kBAAkB,GAAG,IAAI,GAAG,CAAS;IACzC,GAAG,SAAS;IACZ,gBAAgB;IAChB,gBAAgB;IAChB,eAAe;IACf,gBAAgB;IAChB,qBAAqB;IACrB,YAAY;IACZ,aAAa;IACb,WAAW;CACZ,CAAC,CAAC;AAEH,SAAS,sBAAsB,CAAC,GAAgC;IAC9D,OAAO,CAAC,kBAAkB,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AACtC,CAAC;AAED,SAAS,qBAAqB,CAC5B,KAA4B,EAC5B,MAAoB,EACpB,gBAAiF;IAEjF,KAAK,IAAI,CAAC,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;QAC3C,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,CAAC;YAC9C,OAAO,IAAI,cAAc,CACvB,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE;gBACvB,OAAO;oBACL,IAAI,EAAE,CAAC,CAAC,IAAI;oBACZ,MAAM,EAAE,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,OAAO,CAAC,CAAE;iBAC7D,CAAC;YACJ,CAAC,CAAC,CACH,CAAC;QACJ,CAAC;IACH,CAAC;IACD,MAAM,IAAI,KAAK,CACb,qDAAqD,WAAW,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,EAAE,CAC5F,CAAC;AACJ,CAAC"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/builders/array-builder.d.ts b/dist/src/emitter-framework/builders/array-builder.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..35dfd315837f23ebfb1df3e30e7fa4a77b49908c
--- /dev/null
+++ b/dist/src/emitter-framework/builders/array-builder.d.ts
@@ -0,0 +1,7 @@
+import { Placeholder } from "../placeholder.js";
+import { EmitEntity } from "../types.js";
+export declare class ArrayBuilder<T> extends Array {
+    #private;
+    push(...values: (EmitEntity<T> | Placeholder<T> | T)[]): number;
+}
+//# sourceMappingURL=array-builder.d.ts.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/builders/array-builder.d.ts.map b/dist/src/emitter-framework/builders/array-builder.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..117bdee88f25dda48bb970834a68019763a93ddd
--- /dev/null
+++ b/dist/src/emitter-framework/builders/array-builder.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"array-builder.d.ts","sourceRoot":"","sources":["../../../../src/emitter-framework/builders/array-builder.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,WAAW,EAAE,MAAM,mBAAmB,CAAC;AAChD,OAAO,EAAE,UAAU,EAAiB,MAAM,aAAa,CAAC;AAExD,qBAAa,YAAY,CAAC,CAAC,CAAE,SAAQ,KAAK;;IASxC,IAAI,CAAC,GAAG,MAAM,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,MAAM;CAwBhE"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/builders/array-builder.js b/dist/src/emitter-framework/builders/array-builder.js
new file mode 100644
index 0000000000000000000000000000000000000000..80b78582befaf01a844ed1c1e2a9602c15c5e0ce
--- /dev/null
+++ b/dist/src/emitter-framework/builders/array-builder.js
@@ -0,0 +1,35 @@
+import { compilerAssert } from "../../core/index.js";
+import { Placeholder } from "../placeholder.js";
+import { EmitterResult } from "../types.js";
+export class ArrayBuilder extends Array {
+    #setPlaceholderValue(p, value) {
+        for (const [i, item] of this.entries()) {
+            if (item === p) {
+                this[i] = value;
+            }
+        }
+    }
+    push(...values) {
+        for (const v of values) {
+            let toPush;
+            if (v instanceof EmitterResult) {
+                compilerAssert(v.kind !== "circular", "Can't push a circular emit result.");
+                if (v.kind === "none") {
+                    toPush = undefined;
+                }
+                else {
+                    toPush = v.value;
+                }
+            }
+            else {
+                toPush = v;
+            }
+            if (toPush instanceof Placeholder) {
+                toPush.onValue((v) => this.#setPlaceholderValue(toPush, v));
+            }
+            super.push(toPush);
+        }
+        return values.length;
+    }
+}
+//# sourceMappingURL=array-builder.js.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/builders/array-builder.js.map b/dist/src/emitter-framework/builders/array-builder.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..6e13b1875193c951bf7002b1365c28a007ddf249
--- /dev/null
+++ b/dist/src/emitter-framework/builders/array-builder.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"array-builder.js","sourceRoot":"","sources":["../../../../src/emitter-framework/builders/array-builder.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,cAAc,EAAE,MAAM,qBAAqB,CAAC;AACrD,OAAO,EAAE,WAAW,EAAE,MAAM,mBAAmB,CAAC;AAChD,OAAO,EAAc,aAAa,EAAE,MAAM,aAAa,CAAC;AAExD,MAAM,OAAO,YAAgB,SAAQ,KAAK;IACxC,oBAAoB,CAAC,CAAiB,EAAE,KAAQ;QAC9C,KAAK,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC;YACvC,IAAI,IAAI,KAAK,CAAC,EAAE,CAAC;gBACf,IAAI,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;YAClB,CAAC;QACH,CAAC;IACH,CAAC;IAED,IAAI,CAAC,GAAG,MAA8C;QACpD,KAAK,MAAM,CAAC,IAAI,MAAM,EAAE,CAAC;YACvB,IAAI,MAAsC,CAAC;YAC3C,IAAI,CAAC,YAAY,aAAa,EAAE,CAAC;gBAC/B,cAAc,CAAC,CAAC,CAAC,IAAI,KAAK,UAAU,EAAE,oCAAoC,CAAC,CAAC;gBAE5E,IAAI,CAAC,CAAC,IAAI,KAAK,MAAM,EAAE,CAAC;oBACtB,MAAM,GAAG,SAAS,CAAC;gBACrB,CAAC;qBAAM,CAAC;oBACN,MAAM,GAAG,CAAC,CAAC,KAAK,CAAC;gBACnB,CAAC;YACH,CAAC;iBAAM,CAAC;gBACN,MAAM,GAAG,CAAC,CAAC;YACb,CAAC;YAED,IAAI,MAAM,YAAY,WAAW,EAAE,CAAC;gBAClC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,oBAAoB,CAAC,MAAwB,EAAE,CAAC,CAAC,CAAC,CAAC;YAChF,CAAC;YAED,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACrB,CAAC;QAED,OAAO,MAAM,CAAC,MAAM,CAAC;IACvB,CAAC;CACF"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/builders/object-builder.d.ts b/dist/src/emitter-framework/builders/object-builder.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..6ee04fcf1298788c98651c593ddd77149dfa5766
--- /dev/null
+++ b/dist/src/emitter-framework/builders/object-builder.d.ts
@@ -0,0 +1,12 @@
+import { Placeholder } from "../placeholder.js";
+import { EmitEntity } from "../types.js";
+declare const placeholderSym: unique symbol;
+export interface ObjectBuilder<T> extends Record<string, any> {
+}
+export declare class ObjectBuilder<T> {
+    private readonly [placeholderSym];
+    constructor(initializer?: Record<string, unknown> | Placeholder<Record<string, unknown>> | ObjectBuilder<T>);
+    set(key: string, v: EmitEntity<T> | Placeholder<T> | T): void;
+}
+export {};
+//# sourceMappingURL=object-builder.d.ts.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/builders/object-builder.d.ts.map b/dist/src/emitter-framework/builders/object-builder.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..723fecab45820439f802837abd32aa9f398583e5
--- /dev/null
+++ b/dist/src/emitter-framework/builders/object-builder.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"object-builder.d.ts","sourceRoot":"","sources":["../../../../src/emitter-framework/builders/object-builder.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,WAAW,EAAE,MAAM,mBAAmB,CAAC;AAChD,OAAO,EAAE,UAAU,EAAiB,MAAM,aAAa,CAAC;AAExD,QAAA,MAAM,cAAc,eAAwB,CAAC;AAG7C,MAAM,WAAW,aAAa,CAAC,CAAC,CAAE,SAAQ,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC;CAAG;AAEhE,qBAAa,aAAa,CAAC,CAAC;IAC1B,OAAO,CAAC,QAAQ,CAAC,CAAC,cAAc,CAAC,CAA+B;gBAG9D,WAAW,GACP,MAAM,CAAC,MAAM,EAAE,OAAO,CAAC,GACvB,WAAW,CAAC,MAAM,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC,GACpC,aAAa,CAAC,CAAC,CAAM;IA0B3B,GAAG,CAAC,GAAG,EAAE,MAAM,EAAE,CAAC,EAAE,UAAU,CAAC,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC,GAAG,CAAC;CAqBvD"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/builders/object-builder.js b/dist/src/emitter-framework/builders/object-builder.js
new file mode 100644
index 0000000000000000000000000000000000000000..700e4928a597130ebb01a28ebb93f4b6e121084b
--- /dev/null
+++ b/dist/src/emitter-framework/builders/object-builder.js
@@ -0,0 +1,52 @@
+import { compilerAssert } from "../../core/index.js";
+import { Placeholder } from "../placeholder.js";
+import { EmitterResult } from "../types.js";
+const placeholderSym = Symbol("placeholder");
+// eslint-disable-next-line @typescript-eslint/no-unsafe-declaration-merging
+export class ObjectBuilder {
+    [placeholderSym];
+    constructor(initializer = {}) {
+        const copyProperties = (source) => {
+            for (const [key, value] of Object.entries(source)) {
+                this.set(key, value);
+            }
+        };
+        const registerPlaceholder = (placeholder) => {
+            placeholder.onValue(copyProperties);
+        };
+        if (initializer instanceof ObjectBuilder) {
+            if (initializer[placeholderSym]) {
+                this[placeholderSym] = initializer[placeholderSym];
+                registerPlaceholder(initializer[placeholderSym]);
+            }
+            copyProperties(initializer);
+        }
+        else if (initializer instanceof Placeholder) {
+            this[placeholderSym] = initializer;
+            registerPlaceholder(initializer);
+        }
+        else {
+            copyProperties(initializer);
+        }
+    }
+    set(key, v) {
+        let value = v;
+        if (v instanceof EmitterResult) {
+            compilerAssert(v.kind !== "circular", "Can't set a circular emit result.");
+            if (v.kind === "none") {
+                this[key] = undefined;
+                return;
+            }
+            else {
+                value = v.value;
+            }
+        }
+        if (value instanceof Placeholder) {
+            value.onValue((v) => {
+                this[key] = v;
+            });
+        }
+        this[key] = value;
+    }
+}
+//# sourceMappingURL=object-builder.js.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/builders/object-builder.js.map b/dist/src/emitter-framework/builders/object-builder.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..3edc10c3766a1113a13ab36064fd65b780847dca
--- /dev/null
+++ b/dist/src/emitter-framework/builders/object-builder.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"object-builder.js","sourceRoot":"","sources":["../../../../src/emitter-framework/builders/object-builder.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,cAAc,EAAE,MAAM,qBAAqB,CAAC;AACrD,OAAO,EAAE,WAAW,EAAE,MAAM,mBAAmB,CAAC;AAChD,OAAO,EAAc,aAAa,EAAE,MAAM,aAAa,CAAC;AAExD,MAAM,cAAc,GAAG,MAAM,CAAC,aAAa,CAAC,CAAC;AAI7C,4EAA4E;AAC5E,MAAM,OAAO,aAAa;IACP,CAAC,cAAc,CAAC,CAA+B;IAEhE,YACE,cAGuB,EAAE;QAEzB,MAAM,cAAc,GAAG,CAAC,MAA+B,EAAE,EAAE;YACzD,KAAK,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC;gBAClD,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,KAAY,CAAC,CAAC;YAC9B,CAAC;QACH,CAAC,CAAC;QACF,MAAM,mBAAmB,GAAG,CAAC,WAAiD,EAAE,EAAE;YAChF,WAAW,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;QACtC,CAAC,CAAC;QAEF,IAAI,WAAW,YAAY,aAAa,EAAE,CAAC;YACzC,IAAI,WAAW,CAAC,cAAc,CAAC,EAAE,CAAC;gBAChC,IAAI,CAAC,cAAc,CAAC,GAAG,WAAW,CAAC,cAAc,CAAC,CAAC;gBACnD,mBAAmB,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC,CAAC;YACnD,CAAC;YACD,cAAc,CAAC,WAAW,CAAC,CAAC;QAC9B,CAAC;aAAM,IAAI,WAAW,YAAY,WAAW,EAAE,CAAC;YAC9C,IAAI,CAAC,cAAc,CAAC,GAAG,WAAW,CAAC;YAEnC,mBAAmB,CAAC,WAAW,CAAC,CAAC;QACnC,CAAC;aAAM,CAAC;YACN,cAAc,CAAC,WAAW,CAAC,CAAC;QAC9B,CAAC;IACH,CAAC;IAED,GAAG,CAAC,GAAW,EAAE,CAAqC;QACpD,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,IAAI,CAAC,YAAY,aAAa,EAAE,CAAC;YAC/B,cAAc,CAAC,CAAC,CAAC,IAAI,KAAK,UAAU,EAAE,mCAAmC,CAAC,CAAC;YAE3E,IAAI,CAAC,CAAC,IAAI,KAAK,MAAM,EAAE,CAAC;gBACtB,IAAI,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC;gBACtB,OAAO;YACT,CAAC;iBAAM,CAAC;gBACN,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC;YAClB,CAAC;QACH,CAAC;QAED,IAAI,KAAK,YAAY,WAAW,EAAE,CAAC;YACjC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE;gBAClB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YAChB,CAAC,CAAC,CAAC;QACL,CAAC;QAED,IAAI,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;IACpB,CAAC;CACF"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/builders/string-builder.d.ts b/dist/src/emitter-framework/builders/string-builder.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..470d2ec1ff6d9d18855ec91d50fddaabe3067801
--- /dev/null
+++ b/dist/src/emitter-framework/builders/string-builder.d.ts
@@ -0,0 +1,13 @@
+import { Placeholder } from "../placeholder.js";
+import { EmitEntity } from "../types.js";
+export declare class StringBuilder extends Placeholder<string> {
+    #private;
+    segments: (string | Placeholder<string>)[];
+    pushLiteralSegment(segment: string): void;
+    pushPlaceholder(ph: Placeholder<string>): void;
+    pushStringBuilder(builder: StringBuilder): void;
+    push(segment: StringBuilder | Placeholder<string> | string): void;
+    reduce(): string | this;
+}
+export declare function code(parts: TemplateStringsArray, ...substitutions: (EmitEntity<string> | string | Placeholder<string> | StringBuilder)[]): StringBuilder | string;
+//# sourceMappingURL=string-builder.d.ts.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/builders/string-builder.d.ts.map b/dist/src/emitter-framework/builders/string-builder.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..b69514e96f8476fd38ce12e9bb9d159c8282131a
--- /dev/null
+++ b/dist/src/emitter-framework/builders/string-builder.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"string-builder.d.ts","sourceRoot":"","sources":["../../../../src/emitter-framework/builders/string-builder.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,WAAW,EAAE,MAAM,mBAAmB,CAAC;AAChD,OAAO,EAAE,UAAU,EAAE,MAAM,aAAa,CAAC;AAEzC,qBAAa,aAAc,SAAQ,WAAW,CAAC,MAAM,CAAC;;IAC7C,QAAQ,EAAE,CAAC,MAAM,GAAG,WAAW,CAAC,MAAM,CAAC,CAAC,EAAE,CAAM;IAoBvD,kBAAkB,CAAC,OAAO,EAAE,MAAM;IAQlC,eAAe,CAAC,EAAE,EAAE,WAAW,CAAC,MAAM,CAAC;IAUvC,iBAAiB,CAAC,OAAO,EAAE,aAAa;IAMxC,IAAI,CAAC,OAAO,EAAE,aAAa,GAAG,WAAW,CAAC,MAAM,CAAC,GAAG,MAAM;IAU1D,MAAM;CAWP;AAED,wBAAgB,IAAI,CAClB,KAAK,EAAE,oBAAoB,EAC3B,GAAG,aAAa,EAAE,CAAC,UAAU,CAAC,MAAM,CAAC,GAAG,MAAM,GAAG,WAAW,CAAC,MAAM,CAAC,GAAG,aAAa,CAAC,EAAE,GACtF,aAAa,GAAG,MAAM,CA2BxB"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/builders/string-builder.js b/dist/src/emitter-framework/builders/string-builder.js
new file mode 100644
index 0000000000000000000000000000000000000000..ca1e86309e6d4256837987b40065e4164403eec1
--- /dev/null
+++ b/dist/src/emitter-framework/builders/string-builder.js
@@ -0,0 +1,90 @@
+import { Placeholder } from "../placeholder.js";
+export class StringBuilder extends Placeholder {
+    segments = [];
+    #placeholders = new Set();
+    #notifyComplete() {
+        const value = this.segments.join("");
+        this.setValue(value);
+    }
+    #setPlaceholderValue(ph, value) {
+        for (const [i, segment] of this.segments.entries()) {
+            if (segment === ph) {
+                this.segments[i] = value;
+            }
+        }
+        this.#placeholders.delete(ph);
+        if (this.#placeholders.size === 0) {
+            this.#notifyComplete();
+        }
+    }
+    pushLiteralSegment(segment) {
+        if (this.#shouldConcatLiteral()) {
+            this.segments[this.segments.length - 1] += segment;
+        }
+        else {
+            this.segments.push(segment);
+        }
+    }
+    pushPlaceholder(ph) {
+        this.#placeholders.add(ph);
+        ph.onValue((value) => {
+            this.#setPlaceholderValue(ph, value);
+        });
+        this.segments.push(ph);
+    }
+    pushStringBuilder(builder) {
+        for (const segment of builder.segments) {
+            this.push(segment);
+        }
+    }
+    push(segment) {
+        if (typeof segment === "string") {
+            this.pushLiteralSegment(segment);
+        }
+        else if (segment instanceof StringBuilder) {
+            this.pushStringBuilder(segment);
+        }
+        else {
+            this.pushPlaceholder(segment);
+        }
+    }
+    reduce() {
+        if (this.#placeholders.size === 0) {
+            return this.segments.join("");
+        }
+        return this;
+    }
+    #shouldConcatLiteral() {
+        return this.segments.length > 0 && typeof this.segments[this.segments.length - 1] === "string";
+    }
+}
+export function code(parts, ...substitutions) {
+    const builder = new StringBuilder();
+    for (const [i, literalPart] of parts.entries()) {
+        builder.push(literalPart);
+        if (i < substitutions.length) {
+            const sub = substitutions[i];
+            if (typeof sub === "string") {
+                builder.push(sub);
+            }
+            else if (sub instanceof StringBuilder) {
+                builder.pushStringBuilder(sub);
+            }
+            else if (sub instanceof Placeholder) {
+                builder.pushPlaceholder(sub);
+            }
+            else {
+                switch (sub.kind) {
+                    case "circular":
+                    case "none":
+                        builder.pushLiteralSegment("");
+                        break;
+                    default:
+                        builder.push(sub.value);
+                }
+            }
+        }
+    }
+    return builder.reduce();
+}
+//# sourceMappingURL=string-builder.js.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/builders/string-builder.js.map b/dist/src/emitter-framework/builders/string-builder.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..afca9ba155a6d62d4d66a52bc2829b32a355fbf4
--- /dev/null
+++ b/dist/src/emitter-framework/builders/string-builder.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"string-builder.js","sourceRoot":"","sources":["../../../../src/emitter-framework/builders/string-builder.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/custom-key-map.d.ts b/dist/src/emitter-framework/custom-key-map.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..923c14e6bbb178e24baea5b8cb480f0631375329
--- /dev/null
+++ b/dist/src/emitter-framework/custom-key-map.d.ts
@@ -0,0 +1,29 @@
+/**
+ * This is a map type that allows providing a custom keyer function. The keyer
+ * function returns a string that is used to look up in the map. This is useful
+ * for implementing maps that look up based on an arbitrary number of keys.
+ *
+ * For example, to look up in a map with a [ObjA, ObjB)] tuple, such that tuples
+ * with identical values (but not necessarily identical tuples!) create an
+ * object keyer for each of the objects:
+ *
+ *     const aKeyer = CustomKeyMap.objectKeyer();
+ *     const bKeyer = CUstomKeyMap.objectKeyer();
+ *
+ * And compose these into a tuple keyer to use when instantiating the custom key
+ * map:
+ *
+ *     const tupleKeyer = ([a, b]) => `${aKeyer.getKey(a)}-${bKeyer.getKey(b)}`;
+ *     const map = new CustomKeyMap(tupleKeyer);
+ *
+ */
+export declare class CustomKeyMap<K extends readonly any[], V> {
+    #private;
+    constructor(keyer: (args: K) => string);
+    get(items: K): V | undefined;
+    set(items: K, value: V): void;
+    static objectKeyer(): {
+        getKey(o: object): number | undefined;
+    };
+}
+//# sourceMappingURL=custom-key-map.d.ts.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/custom-key-map.d.ts.map b/dist/src/emitter-framework/custom-key-map.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..ad34e72f3d895fba8b116f462718e9f86b5bb33d
--- /dev/null
+++ b/dist/src/emitter-framework/custom-key-map.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"custom-key-map.d.ts","sourceRoot":"","sources":["../../../src/emitter-framework/custom-key-map.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;GAkBG;AACH,qBAAa,YAAY,CAAC,CAAC,SAAS,SAAS,GAAG,EAAE,EAAE,CAAC;;gBAIvC,KAAK,EAAE,CAAC,IAAI,EAAE,CAAC,KAAK,MAAM;IAItC,GAAG,CAAC,KAAK,EAAE,CAAC,GAAG,CAAC,GAAG,SAAS;IAI5B,GAAG,CAAC,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,GAAG,IAAI;IAK7B,MAAM,CAAC,WAAW;kBAIJ,MAAM;;CAYrB"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/custom-key-map.js b/dist/src/emitter-framework/custom-key-map.js
new file mode 100644
index 0000000000000000000000000000000000000000..2ccbd6b7a20cd9ef21f6ff81b464001e99509522
--- /dev/null
+++ b/dist/src/emitter-framework/custom-key-map.js
@@ -0,0 +1,49 @@
+/**
+ * This is a map type that allows providing a custom keyer function. The keyer
+ * function returns a string that is used to look up in the map. This is useful
+ * for implementing maps that look up based on an arbitrary number of keys.
+ *
+ * For example, to look up in a map with a [ObjA, ObjB)] tuple, such that tuples
+ * with identical values (but not necessarily identical tuples!) create an
+ * object keyer for each of the objects:
+ *
+ *     const aKeyer = CustomKeyMap.objectKeyer();
+ *     const bKeyer = CUstomKeyMap.objectKeyer();
+ *
+ * And compose these into a tuple keyer to use when instantiating the custom key
+ * map:
+ *
+ *     const tupleKeyer = ([a, b]) => `${aKeyer.getKey(a)}-${bKeyer.getKey(b)}`;
+ *     const map = new CustomKeyMap(tupleKeyer);
+ *
+ */
+export class CustomKeyMap {
+    #items = new Map();
+    #keyer;
+    constructor(keyer) {
+        this.#keyer = keyer;
+    }
+    get(items) {
+        return this.#items.get(this.#keyer(items));
+    }
+    set(items, value) {
+        const key = this.#keyer(items);
+        this.#items.set(key, value);
+    }
+    static objectKeyer() {
+        const knownKeys = new WeakMap();
+        let count = 0;
+        return {
+            getKey(o) {
+                if (knownKeys.has(o)) {
+                    return knownKeys.get(o);
+                }
+                const key = count;
+                count++;
+                knownKeys.set(o, key);
+                return key;
+            },
+        };
+    }
+}
+//# sourceMappingURL=custom-key-map.js.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/custom-key-map.js.map b/dist/src/emitter-framework/custom-key-map.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..7f6cad3ac396e2952b89dae044700e2ba1e77136
--- /dev/null
+++ b/dist/src/emitter-framework/custom-key-map.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"custom-key-map.js","sourceRoot":"","sources":["../../../src/emitter-framework/custom-key-map.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;GAkBG;AACH,MAAM,OAAO,YAAY;IACvB,MAAM,GAAG,IAAI,GAAG,EAAa,CAAC;IAC9B,MAAM,CAAC;IAEP,YAAY,KAA0B;QACpC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;IACtB,CAAC;IAED,GAAG,CAAC,KAAQ;QACV,OAAO,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;IAC7C,CAAC;IAED,GAAG,CAAC,KAAQ,EAAE,KAAQ;QACpB,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QAC/B,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;IAC9B,CAAC;IAED,MAAM,CAAC,WAAW;QAChB,MAAM,SAAS,GAAG,IAAI,OAAO,EAAkB,CAAC;QAChD,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,OAAO;YACL,MAAM,CAAC,CAAS;gBACd,IAAI,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC;oBACrB,OAAO,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBAC1B,CAAC;gBAED,MAAM,GAAG,GAAG,KAAK,CAAC;gBAClB,KAAK,EAAE,CAAC;gBACR,SAAS,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;gBACtB,OAAO,GAAG,CAAC;YACb,CAAC;SACF,CAAC;IACJ,CAAC;CACF"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/index.d.ts b/dist/src/emitter-framework/index.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..439d7661e9379adea134d4c98c09e84e962963d3
--- /dev/null
+++ b/dist/src/emitter-framework/index.d.ts
@@ -0,0 +1,9 @@
+export * from "./asset-emitter.js";
+export * from "./builders/array-builder.js";
+export * from "./builders/object-builder.js";
+export * from "./builders/string-builder.js";
+export * from "./placeholder.js";
+export { ReferenceCycle } from "./reference-cycle.js";
+export * from "./type-emitter.js";
+export * from "./types.js";
+//# sourceMappingURL=index.d.ts.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/index.d.ts.map b/dist/src/emitter-framework/index.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..e549eed231778f76151380d7ebab35f51b99a10a
--- /dev/null
+++ b/dist/src/emitter-framework/index.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.d.ts","sourceRoot":"","sources":["../../../src/emitter-framework/index.ts"],"names":[],"mappings":"AAAA,cAAc,oBAAoB,CAAC;AACnC,cAAc,6BAA6B,CAAC;AAC5C,cAAc,8BAA8B,CAAC;AAC7C,cAAc,8BAA8B,CAAC;AAC7C,cAAc,kBAAkB,CAAC;AACjC,OAAO,EAAE,cAAc,EAAE,MAAM,sBAAsB,CAAC;AACtD,cAAc,mBAAmB,CAAC;AAClC,cAAc,YAAY,CAAC"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/index.js b/dist/src/emitter-framework/index.js
new file mode 100644
index 0000000000000000000000000000000000000000..27b1a124b15b159bab2a27c7f7784aef51c65f1b
--- /dev/null
+++ b/dist/src/emitter-framework/index.js
@@ -0,0 +1,9 @@
+export * from "./asset-emitter.js";
+export * from "./builders/array-builder.js";
+export * from "./builders/object-builder.js";
+export * from "./builders/string-builder.js";
+export * from "./placeholder.js";
+export { ReferenceCycle } from "./reference-cycle.js";
+export * from "./type-emitter.js";
+export * from "./types.js";
+//# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/index.js.map b/dist/src/emitter-framework/index.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..fe76e4f1e17acae15940c26d630c7327463fb427
--- /dev/null
+++ b/dist/src/emitter-framework/index.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/emitter-framework/index.ts"],"names":[],"mappings":"AAAA,cAAc,oBAAoB,CAAC;AACnC,cAAc,6BAA6B,CAAC;AAC5C,cAAc,8BAA8B,CAAC;AAC7C,cAAc,8BAA8B,CAAC;AAC7C,cAAc,kBAAkB,CAAC;AACjC,OAAO,EAAE,cAAc,EAAE,MAAM,sBAAsB,CAAC;AACtD,cAAc,mBAAmB,CAAC;AAClC,cAAc,YAAY,CAAC"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/placeholder.d.ts b/dist/src/emitter-framework/placeholder.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..654d526978be94a7a4690969a957d98e68ae78af
--- /dev/null
+++ b/dist/src/emitter-framework/placeholder.d.ts
@@ -0,0 +1,12 @@
+/**
+ * Keeps track of a value we don't know yet because of a circular reference. Use
+ * the `onValue` method to provide a callback with how to handle the
+ * placeholder's value becoming available. Generally the callback will replace
+ * this placeholder with the value in whatever references the placeholder.
+ */
+export declare class Placeholder<T> {
+    #private;
+    setValue(value: T): void;
+    onValue(cb: (value: T) => void): void;
+}
+//# sourceMappingURL=placeholder.d.ts.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/placeholder.d.ts.map b/dist/src/emitter-framework/placeholder.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..2c6a98b00064b4fa03a9ffbc0866133f69bb4631
--- /dev/null
+++ b/dist/src/emitter-framework/placeholder.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"placeholder.d.ts","sourceRoot":"","sources":["../../../src/emitter-framework/placeholder.ts"],"names":[],"mappings":"AAAA;;;;;GAKG;AACH,qBAAa,WAAW,CAAC,CAAC;;IAExB,QAAQ,CAAC,KAAK,EAAE,CAAC;IAMjB,OAAO,CAAC,EAAE,EAAE,CAAC,KAAK,EAAE,CAAC,KAAK,IAAI;CAG/B"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/placeholder.js b/dist/src/emitter-framework/placeholder.js
new file mode 100644
index 0000000000000000000000000000000000000000..afdbfdbd8e070e23d5e289b8d1e8231abb35557e
--- /dev/null
+++ b/dist/src/emitter-framework/placeholder.js
@@ -0,0 +1,18 @@
+/**
+ * Keeps track of a value we don't know yet because of a circular reference. Use
+ * the `onValue` method to provide a callback with how to handle the
+ * placeholder's value becoming available. Generally the callback will replace
+ * this placeholder with the value in whatever references the placeholder.
+ */
+export class Placeholder {
+    #listeners = [];
+    setValue(value) {
+        for (const listener of this.#listeners) {
+            listener(value);
+        }
+    }
+    onValue(cb) {
+        this.#listeners.push(cb);
+    }
+}
+//# sourceMappingURL=placeholder.js.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/placeholder.js.map b/dist/src/emitter-framework/placeholder.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..43a489833511764469d1cbe3cfe488cff8feee03
--- /dev/null
+++ b/dist/src/emitter-framework/placeholder.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"placeholder.js","sourceRoot":"","sources":["../../../src/emitter-framework/placeholder.ts"],"names":[],"mappings":"AAAA;;;;;GAKG;AACH,MAAM,OAAO,WAAW;IACtB,UAAU,GAA2B,EAAE,CAAC;IACxC,QAAQ,CAAC,KAAQ;QACf,KAAK,MAAM,QAAQ,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC;YACvC,QAAQ,CAAC,KAAK,CAAC,CAAC;QAClB,CAAC;IACH,CAAC;IAED,OAAO,CAAC,EAAsB;QAC5B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAC3B,CAAC;CACF"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/ref-scope.d.ts b/dist/src/emitter-framework/ref-scope.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..87f311708756f6f3bfa39621154487da9fd0cf93
--- /dev/null
+++ b/dist/src/emitter-framework/ref-scope.d.ts
@@ -0,0 +1,14 @@
+import type { Declaration, Scope } from "./types.js";
+export declare function scopeChain<T>(scope: Scope<T> | null): (import("./types.js").SourceFileScope<T> | import("./types.js").NamespaceScope<T>)[];
+/**
+ * Resolve relative scopes between the current scope and the target declaration.
+ * @param target The target declaration
+ * @param currentScope Current scope
+ * @returns
+ */
+export declare function resolveDeclarationReferenceScope<T>(target: Declaration<T>, currentScope: Scope<T>): {
+    pathUp: Scope<T>[];
+    pathDown: Scope<T>[];
+    commonScope: import("./types.js").SourceFileScope<T> | import("./types.js").NamespaceScope<T>;
+};
+//# sourceMappingURL=ref-scope.d.ts.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/ref-scope.d.ts.map b/dist/src/emitter-framework/ref-scope.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..0f755ca549300fad39c5036707a6ce8409a5d905
--- /dev/null
+++ b/dist/src/emitter-framework/ref-scope.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"ref-scope.d.ts","sourceRoot":"","sources":["../../../src/emitter-framework/ref-scope.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,WAAW,EAAE,KAAK,EAAE,MAAM,YAAY,CAAC;AAErD,wBAAgB,UAAU,CAAC,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,wFAQnD;AAED;;;;;GAKG;AACH,wBAAgB,gCAAgC,CAAC,CAAC,EAChD,MAAM,EAAE,WAAW,CAAC,CAAC,CAAC,EACtB,YAAY,EAAE,KAAK,CAAC,CAAC,CAAC;;;;EAmBvB"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/ref-scope.js b/dist/src/emitter-framework/ref-scope.js
new file mode 100644
index 0000000000000000000000000000000000000000..610fad2463813e389e82c05cbb1062a2b3de9b98
--- /dev/null
+++ b/dist/src/emitter-framework/ref-scope.js
@@ -0,0 +1,30 @@
+export function scopeChain(scope) {
+    const chain = [];
+    while (scope) {
+        chain.unshift(scope);
+        scope = scope.parentScope;
+    }
+    return chain;
+}
+/**
+ * Resolve relative scopes between the current scope and the target declaration.
+ * @param target The target declaration
+ * @param currentScope Current scope
+ * @returns
+ */
+export function resolveDeclarationReferenceScope(target, currentScope) {
+    const targetScope = target.scope;
+    const targetChain = scopeChain(targetScope);
+    const currentChain = scopeChain(currentScope);
+    let diffStart = 0;
+    while (targetChain[diffStart] &&
+        currentChain[diffStart] &&
+        targetChain[diffStart] === currentChain[diffStart]) {
+        diffStart++;
+    }
+    const pathUp = currentChain.slice(diffStart);
+    const pathDown = targetChain.slice(diffStart);
+    const commonScope = targetChain[diffStart - 1] ?? null;
+    return { pathUp, pathDown, commonScope };
+}
+//# sourceMappingURL=ref-scope.js.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/ref-scope.js.map b/dist/src/emitter-framework/ref-scope.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..a76a846b4808582db1a8d8a324b0f87a5e55626c
--- /dev/null
+++ b/dist/src/emitter-framework/ref-scope.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"ref-scope.js","sourceRoot":"","sources":["../../../src/emitter-framework/ref-scope.ts"],"names":[],"mappings":"AAEA,MAAM,UAAU,UAAU,CAAI,KAAsB;IAClD,MAAM,KAAK,GAAG,EAAE,CAAC;IACjB,OAAO,KAAK,EAAE,CAAC;QACb,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QACrB,KAAK,GAAG,KAAK,CAAC,WAAW,CAAC;IAC5B,CAAC;IAED,OAAO,KAAK,CAAC;AACf,CAAC;AAED;;;;;GAKG;AACH,MAAM,UAAU,gCAAgC,CAC9C,MAAsB,EACtB,YAAsB;IAEtB,MAAM,WAAW,GAAG,MAAM,CAAC,KAAK,CAAC;IACjC,MAAM,WAAW,GAAG,UAAU,CAAC,WAAW,CAAC,CAAC;IAC5C,MAAM,YAAY,GAAG,UAAU,CAAC,YAAY,CAAC,CAAC;IAC9C,IAAI,SAAS,GAAG,CAAC,CAAC;IAClB,OACE,WAAW,CAAC,SAAS,CAAC;QACtB,YAAY,CAAC,SAAS,CAAC;QACvB,WAAW,CAAC,SAAS,CAAC,KAAK,YAAY,CAAC,SAAS,CAAC,EAClD,CAAC;QACD,SAAS,EAAE,CAAC;IACd,CAAC;IAED,MAAM,MAAM,GAAe,YAAY,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;IACzD,MAAM,QAAQ,GAAe,WAAW,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;IAE1D,MAAM,WAAW,GAAG,WAAW,CAAC,SAAS,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC;IACvD,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,CAAC;AAC3C,CAAC"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/reference-cycle.d.ts b/dist/src/emitter-framework/reference-cycle.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..7e993e3c92a69ab8052a092cbd683e01623b4a48
--- /dev/null
+++ b/dist/src/emitter-framework/reference-cycle.d.ts
@@ -0,0 +1,23 @@
+import type { Type } from "../core/index.js";
+import type { EmitEntity } from "./types.js";
+export interface ReferenceCycleEntry {
+    type: Type;
+    entity: EmitEntity<unknown>;
+}
+/**
+ * Represent a reference cycle.
+ * The cycle entries will always start with a declaration if there is one in the cycle.
+ */
+export declare class ReferenceCycle implements Iterable<ReferenceCycleEntry> {
+    #private;
+    /**
+     * If this cycle contains a declaration.
+     */
+    readonly containsDeclaration: boolean;
+    constructor(entries: ReferenceCycleEntry[]);
+    get first(): ReferenceCycleEntry;
+    [Symbol.iterator](): Iterator<ReferenceCycleEntry>;
+    [Symbol.toStringTag](): string;
+    toString(): string;
+}
+//# sourceMappingURL=reference-cycle.d.ts.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/reference-cycle.d.ts.map b/dist/src/emitter-framework/reference-cycle.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..85035eb89dba9114dbd5c8ea0b250de8e48bdc45
--- /dev/null
+++ b/dist/src/emitter-framework/reference-cycle.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"reference-cycle.d.ts","sourceRoot":"","sources":["../../../src/emitter-framework/reference-cycle.ts"],"names":[],"mappings":"AACA,OAAO,KAAK,EAAE,IAAI,EAAE,MAAM,kBAAkB,CAAC;AAC7C,OAAO,KAAK,EAAE,UAAU,EAAE,MAAM,YAAY,CAAC;AAE7C,MAAM,WAAW,mBAAmB;IAClC,IAAI,EAAE,IAAI,CAAC;IACX,MAAM,EAAE,UAAU,CAAC,OAAO,CAAC,CAAC;CAC7B;AAED;;;GAGG;AACH,qBAAa,cAAe,YAAW,QAAQ,CAAC,mBAAmB,CAAC;;IAClE;;OAEG;IACH,QAAQ,CAAC,mBAAmB,EAAE,OAAO,CAAC;gBAI1B,OAAO,EAAE,mBAAmB,EAAE;IAQ1C,IAAI,KAAK,IAAI,mBAAmB,CAE/B;IAED,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,QAAQ,CAAC,mBAAmB,CAAC;IAIlD,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,MAAM;IAI9B,QAAQ,IAAI,MAAM;CAGnB"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/reference-cycle.js b/dist/src/emitter-framework/reference-cycle.js
new file mode 100644
index 0000000000000000000000000000000000000000..b3b40ba488a682a1dbcf325fc7cdf498091c9613
--- /dev/null
+++ b/dist/src/emitter-framework/reference-cycle.js
@@ -0,0 +1,32 @@
+import { getTypeName } from "../core/helpers/type-name-utils.js";
+/**
+ * Represent a reference cycle.
+ * The cycle entries will always start with a declaration if there is one in the cycle.
+ */
+export class ReferenceCycle {
+    /**
+     * If this cycle contains a declaration.
+     */
+    containsDeclaration;
+    #entries;
+    constructor(entries) {
+        const firstDeclarationIndex = entries.findIndex((entry) => entry.entity.kind === "declaration");
+        this.containsDeclaration = firstDeclarationIndex !== -1;
+        this.#entries = this.containsDeclaration
+            ? [...entries.slice(firstDeclarationIndex), ...entries.slice(0, firstDeclarationIndex)]
+            : entries;
+    }
+    get first() {
+        return this.#entries[0];
+    }
+    [Symbol.iterator]() {
+        return this.#entries[Symbol.iterator]();
+    }
+    [Symbol.toStringTag]() {
+        return [...this.#entries, this.#entries[0]].map((x) => getTypeName(x.type)).join(" -> ");
+    }
+    toString() {
+        return this[Symbol.toStringTag]();
+    }
+}
+//# sourceMappingURL=reference-cycle.js.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/reference-cycle.js.map b/dist/src/emitter-framework/reference-cycle.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..d2be6f823836093c6ffc2630112ee3656b76e46a
--- /dev/null
+++ b/dist/src/emitter-framework/reference-cycle.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"reference-cycle.js","sourceRoot":"","sources":["../../../src/emitter-framework/reference-cycle.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,WAAW,EAAE,MAAM,oCAAoC,CAAC;AASjE;;;GAGG;AACH,MAAM,OAAO,cAAc;IACzB;;OAEG;IACM,mBAAmB,CAAU;IAEtC,QAAQ,CAAwB;IAEhC,YAAY,OAA8B;QACxC,MAAM,qBAAqB,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,KAAK,aAAa,CAAC,CAAC;QAChG,IAAI,CAAC,mBAAmB,GAAG,qBAAqB,KAAK,CAAC,CAAC,CAAC;QACxD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,mBAAmB;YACtC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC,qBAAqB,CAAC,EAAE,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,qBAAqB,CAAC,CAAC;YACvF,CAAC,CAAC,OAAO,CAAC;IACd,CAAC;IAED,IAAI,KAAK;QACP,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC1B,CAAC;IAED,CAAC,MAAM,CAAC,QAAQ,CAAC;QACf,OAAO,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC;IAC1C,CAAC;IAED,CAAC,MAAM,CAAC,WAAW,CAAC;QAClB,OAAO,CAAC,GAAG,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAC3F,CAAC;IAED,QAAQ;QACN,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC;IACpC,CAAC;CACF"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/type-emitter.d.ts b/dist/src/emitter-framework/type-emitter.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..1a2e0227e11ee97669e7e78921c1ddc9a3bd362c
--- /dev/null
+++ b/dist/src/emitter-framework/type-emitter.d.ts
@@ -0,0 +1,349 @@
+import type { Program } from "../core/program.js";
+import type { BooleanLiteral, Enum, EnumMember, Interface, IntrinsicType, Model, ModelProperty, Namespace, NumericLiteral, Operation, Scalar, StringLiteral, StringTemplate, Tuple, Type, Union, UnionVariant } from "../core/types.js";
+import { Placeholder } from "./placeholder.js";
+import { ReferenceCycle } from "./reference-cycle.js";
+import { AssetEmitter, Context, Declaration, EmitEntity, EmittedSourceFile, Scope, SourceFile, TypeSpecDeclaration } from "./types.js";
+export type EmitterOutput<T> = EmitEntity<T> | Placeholder<T> | T;
+/**
+ * Implement emitter logic by extending this class and passing it to
+ * `emitContext.createAssetEmitter`. This class should not be constructed
+ * directly.
+ *
+ * TypeEmitters serve two primary purposes:
+ *
+ * 1. Handle emitting TypeSpec types into other languages
+ * 2. Set emitter context
+ *
+ * The generic type parameter `T` is the type you expect to produce for each TypeSpec type.
+ * In the case of generating source code for a programming language, this is probably `string`
+ * (in which case, consider using the `CodeTypeEmitter`) but might also be an AST node. If you
+ * are emitting JSON or similar, `T` would likely be `object`.
+ *
+ * ## Emitting types
+ *
+ * Emitting TypeSpec types into other languages is accomplished by implementing
+ * the AssetEmitter method that corresponds with the TypeSpec type you are
+ * emitting. For example, to emit a TypeSpec model declaration, implement the
+ * `modelDeclaration` method.
+ *
+ * TypeSpec types that have both declaration and literal forms like models or
+ * unions will have separate methods. For example, models have both
+ * `modelDeclaration` and `modelLiteral` methods that can be implemented
+ * separately.
+ *
+ * Also, types which can be instantiated like models or operations have a
+ * separate method for the instantiated type. For example, models have a
+ * `modelInstantiation` method that gets called with such types. Generally these
+ * will be treated either as if they were declarations or literals depending on
+ * preference, but may also be treated specially.
+ *
+ * ## Emitter results
+ * There are three kinds of results your methods might return - declarations,
+ * raw code, or nothing.
+ *
+ * ### Declarations
+ *
+ * Create declarations by calling `this.emitter.result.declaration` passing it a
+ * name and the emit output for the declaration. Note that you must have scope
+ * in your context or you will get an error. If you want all declarations to be
+ * emitted to the same source file, you can create a single scope in
+ * `programContext` via something like:
+ *
+ * ```typescript
+ * programContext(program: Program): Context {
+ *   const sourceFile = this.emitter.createSourceFile("test.txt");
+ *   return {
+ *     scope: sourceFile.globalScope,
+ *   };
+ * }
+ * ```
+ *
+ * ### Raw Code
+ *
+ * Create raw code, or emitter output that doesn't contribute to a declaration,
+ * by calling `this.emitter.result.rawCode` passing it a value. Returning just a
+ * value is considered raw code and so you often don't need to call this
+ * directly.
+ *
+ * ### No Emit
+ *
+ * When a type doesn't contribute anything to the emitted output, return
+ * `this.emitter.result.none()`.
+ *
+ * ## Context
+ *
+ * The TypeEmitter will often want to keep track of what context a type is found
+ * in. There are two kinds of context - lexical context, and reference context.
+ *
+ * * Lexical context is context that applies to the type and every type
+ *   contained inside of it. For example, lexical context for a model will apply
+ *   to the model, its properties, and any nested model literals.
+ * * Reference context is context that applies to types contained inside of the
+ *   type and referenced anywhere inside of it. For example, reference context
+ *   set on a model will apply to the model, its properties, any nested model
+ *   literals, and any type referenced inside anywhere inside the model and any
+ *   of the referenced types' references.
+ *
+ * In both cases, context is an object. It's strongly recommended that the context
+ * object either contain only primitive types, or else only reference immutable
+ * objects.
+ *
+ * Set lexical by implementing the `*Context` methods of the TypeEmitter and
+ * returning the context, for example `modelDeclarationContext` sets the context
+ * for model declarations and the types contained inside of it.
+ *
+ * Set reference context by implementing the `*ReferenceContext` methods of the
+ * TypeEmitter and returning the context. Note that not all types have reference
+ * context methods, because not all types can actually reference anything.
+ *
+ * When a context method returns some context, it is merged with the current
+ * context. It is not possible to remove previous context, but it can be
+ * overridden with `undefined`.
+ *
+ * When emitting types with context, the same type might be emitted multiple
+ * times if we come across that type with different contexts. For example, if we
+ * have a TypeSpec program like
+ *
+ * ```typespec
+ * model Pet { }
+ * model Person {
+ *   pet: Pet;
+ * }
+ * ```
+ *
+ * And we set reference context for the Person model, Pet will be emitted twice,
+ * once without context and once with the reference context.
+ */
+export declare class TypeEmitter<T, TOptions extends object = Record<string, never>> {
+    protected emitter: AssetEmitter<T, TOptions>;
+    /**
+     * @private
+     *
+     * Constructs a TypeEmitter. Do not use this constructor directly, instead
+     * call `createAssetEmitter` on the emitter context object.
+     * @param emitter The asset emitter
+     */
+    constructor(emitter: AssetEmitter<T, TOptions>);
+    /**
+     * Context shared by the entire program. In cases where you are emitting to a
+     * single file, use this method to establish your main source file and set the
+     * `scope` property to that source file's `globalScope`.
+     * @param program
+     * @returns Context
+     */
+    programContext(program: Program): Context;
+    /**
+     * Emit a namespace
+     *
+     * @param namespace
+     * @returns Emitter output
+     */
+    namespace(namespace: Namespace): EmitterOutput<T>;
+    /**
+     * Set lexical context for a namespace
+     *
+     * @param namespace
+     */
+    namespaceContext(namespace: Namespace): Context;
+    /**
+     * Set reference context for a namespace.
+     *
+     * @param namespace
+     */
+    namespaceReferenceContext(namespace: Namespace): Context;
+    /**
+     * Emit a model literal (e.g. as created by `{}` syntax in TypeSpec).
+     *
+     * @param model
+     */
+    modelLiteral(model: Model): EmitterOutput<T>;
+    /**
+     * Set lexical context for a model literal.
+     * @param model
+     */
+    modelLiteralContext(model: Model): Context;
+    /**
+     * Set reference context for a model literal.
+     * @param model
+     */
+    modelLiteralReferenceContext(model: Model): Context;
+    /**
+     * Emit a model declaration (e.g. as created by `model Foo { }` syntax in
+     * TypeSpec).
+     *
+     * @param model
+     */
+    modelDeclaration(model: Model, name: string): EmitterOutput<T>;
+    /**
+     * Set lexical context for a model declaration.
+     *
+     * @param model
+     * @param name the model's declaration name as retrieved from the
+     * `declarationName` method.
+     */
+    modelDeclarationContext(model: Model, name: string): Context;
+    /**
+     * Set reference context for a model declaration.
+     * @param model
+     */
+    modelDeclarationReferenceContext(model: Model, name: string): Context;
+    /**
+     * Emit a model instantiation (e.g. as created by `Box<string>` syntax in
+     * TypeSpec). In some cases, `name` is undefined because a good name could
+     * not be found for the instantiation. This often occurs with for instantiations
+     * involving type expressions like `Box<string | int32>`.
+     *
+     * @param model
+     * @param name The name of the instantiation as retrieved from the
+     * `declarationName` method.
+     */
+    modelInstantiation(model: Model, name: string | undefined): EmitterOutput<T>;
+    /**
+     * Set lexical context for a model instantiation.
+     * @param model
+     */
+    modelInstantiationContext(model: Model, name: string | undefined): Context;
+    /**
+     * Set reference context for a model declaration.
+     * @param model
+     */
+    modelInstantiationReferenceContext(model: Model, name: string | undefined): Context;
+    /**
+     * Emit a model's properties. Unless overridden, this method will emit each of
+     * the model's properties and return a no emit result.
+     *
+     * @param model
+     */
+    modelProperties(model: Model): EmitterOutput<T>;
+    modelPropertiesContext(model: Model): Context;
+    modelPropertiesReferenceContext(model: Model): Context;
+    /**
+     * Emit a property of a model.
+     *
+     * @param property
+     */
+    modelPropertyLiteral(property: ModelProperty): EmitterOutput<T>;
+    /**
+     * Set lexical context for a property of a model.
+     *
+     * @param property
+     */
+    modelPropertyLiteralContext(property: ModelProperty): Context;
+    /**
+     * Set reference context for a property of a model.
+     *
+     * @param property
+     */
+    modelPropertyLiteralReferenceContext(property: ModelProperty): Context;
+    /**
+     * Emit a model property reference (e.g. as created by the `SomeModel.prop`
+     * syntax in TypeSpec). By default, this will emit the type of the referenced
+     * property and return that result. In other words, the emit will look as if
+     * `SomeModel.prop` were replaced with the type of `prop`.
+     *
+     * @param property
+     */
+    modelPropertyReference(property: ModelProperty): EmitterOutput<T>;
+    /**
+     * Emit an enum member reference (e.g. as created by the `SomeEnum.member` syntax
+     * in TypeSpec). By default, this will emit nothing.
+     *
+     * @param property the enum member
+     */
+    enumMemberReference(member: EnumMember): EmitterOutput<T>;
+    arrayDeclaration(array: Model, name: string, elementType: Type): EmitterOutput<T>;
+    arrayDeclarationContext(array: Model, name: string, elementType: Type): Context;
+    arrayDeclarationReferenceContext(array: Model, name: string, elementType: Type): Context;
+    arrayLiteral(array: Model, elementType: Type): EmitterOutput<T>;
+    arrayLiteralContext(array: Model, elementType: Type): Context;
+    arrayLiteralReferenceContext(array: Model, elementType: Type): Context;
+    scalarDeclaration(scalar: Scalar, name: string): EmitterOutput<T>;
+    scalarDeclarationContext(scalar: Scalar, name: string): Context;
+    scalarDeclarationReferenceContext(scalar: Scalar, name: string): Context;
+    scalarInstantiation(scalar: Scalar, name: string | undefined): EmitterOutput<T>;
+    scalarInstantiationContext(scalar: Scalar, name: string | undefined): Context;
+    intrinsic(intrinsic: IntrinsicType, name: string): EmitterOutput<T>;
+    intrinsicContext(intrinsic: IntrinsicType, name: string): Context;
+    booleanLiteralContext(boolean: BooleanLiteral): Context;
+    booleanLiteral(boolean: BooleanLiteral): EmitterOutput<T>;
+    stringTemplateContext(string: StringTemplate): Context;
+    stringTemplate(stringTemplate: StringTemplate): EmitterOutput<T>;
+    stringLiteralContext(string: StringLiteral): Context;
+    stringLiteral(string: StringLiteral): EmitterOutput<T>;
+    numericLiteralContext(number: NumericLiteral): Context;
+    numericLiteral(number: NumericLiteral): EmitterOutput<T>;
+    operationDeclaration(operation: Operation, name: string): EmitterOutput<T>;
+    operationDeclarationContext(operation: Operation, name: string): Context;
+    operationDeclarationReferenceContext(operation: Operation, name: string): Context;
+    interfaceDeclarationOperationsContext(iface: Interface): Context;
+    interfaceDeclarationOperationsReferenceContext(iface: Interface): Context;
+    interfaceOperationDeclarationContext(operation: Operation, name: string): Context;
+    interfaceOperationDeclarationReferenceContext(operation: Operation, name: string): Context;
+    operationParameters(operation: Operation, parameters: Model): EmitterOutput<T>;
+    operationParametersContext(operation: Operation, parameters: Model): Context;
+    operationParametersReferenceContext(operation: Operation, parameters: Model): Context;
+    operationReturnType(operation: Operation, returnType: Type): EmitterOutput<T>;
+    operationReturnTypeContext(operation: Operation, returnType: Type): Context;
+    operationReturnTypeReferenceContext(operation: Operation, returnType: Type): Context;
+    interfaceDeclaration(iface: Interface, name: string): EmitterOutput<T>;
+    interfaceDeclarationContext(iface: Interface, name: string): Context;
+    interfaceDeclarationReferenceContext(iface: Interface, name: string): Context;
+    interfaceDeclarationOperations(iface: Interface): EmitterOutput<T>;
+    interfaceOperationDeclaration(operation: Operation, name: string): EmitterOutput<T>;
+    enumDeclaration(en: Enum, name: string): EmitterOutput<T>;
+    enumDeclarationContext(en: Enum, name: string): Context;
+    enumDeclarationReferenceContext(en: Enum, name: string): Context;
+    enumMembers(en: Enum): EmitterOutput<T>;
+    enumMembersContext(en: Enum): Context;
+    enumMember(member: EnumMember): EmitterOutput<T>;
+    enumMemberContext(member: EnumMember): {};
+    unionDeclaration(union: Union, name: string): EmitterOutput<T>;
+    unionDeclarationContext(union: Union): Context;
+    unionDeclarationReferenceContext(union: Union): Context;
+    unionInstantiation(union: Union, name: string): EmitterOutput<T>;
+    unionInstantiationContext(union: Union, name: string): Context;
+    unionInstantiationReferenceContext(union: Union, name: string): Context;
+    unionLiteral(union: Union): EmitterOutput<T>;
+    unionLiteralContext(union: Union): Context;
+    unionLiteralReferenceContext(union: Union): Context;
+    unionVariants(union: Union): EmitterOutput<T>;
+    unionVariantsContext(): Context;
+    unionVariantsReferenceContext(): Context;
+    unionVariant(variant: UnionVariant): EmitterOutput<T>;
+    unionVariantContext(union: Union): Context;
+    unionVariantReferenceContext(union: Union): Context;
+    tupleLiteral(tuple: Tuple): EmitterOutput<T>;
+    tupleLiteralContext(tuple: Tuple): Context;
+    tupleLiteralValues(tuple: Tuple): EmitterOutput<T>;
+    tupleLiteralValuesContext(tuple: Tuple): Context;
+    tupleLiteralValuesReferenceContext(tuple: Tuple): Context;
+    tupleLiteralReferenceContext(tuple: Tuple): Context;
+    sourceFile(sourceFile: SourceFile<T>): Promise<EmittedSourceFile> | EmittedSourceFile;
+    writeOutput(sourceFiles: SourceFile<T>[]): Promise<void>;
+    reference(targetDeclaration: Declaration<T>, pathUp: Scope<T>[], pathDown: Scope<T>[], commonScope: Scope<T> | null): EmitEntity<T> | T;
+    /**
+     * Handle circular references. When this method is called it means we are resolving a circular reference.
+     * By default if the target is a declaration it will call to {@link reference} otherwise it means we have an inline reference
+     * @param target Reference target.
+     * @param scope Current scope.
+     * @returns Resolved reference entity.
+     */
+    circularReference(target: EmitEntity<T>, scope: Scope<T> | undefined, cycle: ReferenceCycle): EmitEntity<T> | T;
+    declarationName(declarationType: TypeSpecDeclaration): string | undefined;
+}
+/**
+ * A subclass of `TypeEmitter<string>` that makes working with strings a bit easier.
+ * In particular, when emitting members of a type (`modelProperties`, `enumMembers`, etc.),
+ * instead of returning no result, it returns the value of each of the members concatenated
+ * by commas. It will also construct references by concatenating namespace elements together
+ * with `.` which should work nicely in many object oriented languages.
+ */
+export declare class CodeTypeEmitter<TOptions extends object = Record<string, never>> extends TypeEmitter<string, TOptions> {
+    modelProperties(model: Model): EmitterOutput<string>;
+    interfaceDeclarationOperations(iface: Interface): EmitterOutput<string>;
+    enumMembers(en: Enum): EmitterOutput<string>;
+    unionVariants(union: Union): EmitterOutput<string>;
+    tupleLiteralValues(tuple: Tuple): EmitterOutput<string>;
+    reference(targetDeclaration: Declaration<string>, pathUp: Scope<string>[], pathDown: Scope<string>[], commonScope: Scope<string> | null): string | EmitEntity<string>;
+}
+//# sourceMappingURL=type-emitter.d.ts.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/type-emitter.d.ts.map b/dist/src/emitter-framework/type-emitter.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..2d730d65f3356673be506ac5d1777a614531c22f
--- /dev/null
+++ b/dist/src/emitter-framework/type-emitter.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"type-emitter.d.ts","sourceRoot":"","sources":["../../../src/emitter-framework/type-emitter.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/type-emitter.js b/dist/src/emitter-framework/type-emitter.js
new file mode 100644
index 0000000000000000000000000000000000000000..66cb38349f1034f5bbdf7e0ef107d042227c03ed
--- /dev/null
+++ b/dist/src/emitter-framework/type-emitter.js
@@ -0,0 +1,721 @@
+import { compilerAssert } from "../core/diagnostics.js";
+import { emitFile } from "../core/emitter-utils.js";
+import { isTemplateDeclaration } from "../core/type-utils.js";
+import { StringBuilder, code } from "./builders/string-builder.js";
+import { resolveDeclarationReferenceScope } from "./ref-scope.js";
+/**
+ * Implement emitter logic by extending this class and passing it to
+ * `emitContext.createAssetEmitter`. This class should not be constructed
+ * directly.
+ *
+ * TypeEmitters serve two primary purposes:
+ *
+ * 1. Handle emitting TypeSpec types into other languages
+ * 2. Set emitter context
+ *
+ * The generic type parameter `T` is the type you expect to produce for each TypeSpec type.
+ * In the case of generating source code for a programming language, this is probably `string`
+ * (in which case, consider using the `CodeTypeEmitter`) but might also be an AST node. If you
+ * are emitting JSON or similar, `T` would likely be `object`.
+ *
+ * ## Emitting types
+ *
+ * Emitting TypeSpec types into other languages is accomplished by implementing
+ * the AssetEmitter method that corresponds with the TypeSpec type you are
+ * emitting. For example, to emit a TypeSpec model declaration, implement the
+ * `modelDeclaration` method.
+ *
+ * TypeSpec types that have both declaration and literal forms like models or
+ * unions will have separate methods. For example, models have both
+ * `modelDeclaration` and `modelLiteral` methods that can be implemented
+ * separately.
+ *
+ * Also, types which can be instantiated like models or operations have a
+ * separate method for the instantiated type. For example, models have a
+ * `modelInstantiation` method that gets called with such types. Generally these
+ * will be treated either as if they were declarations or literals depending on
+ * preference, but may also be treated specially.
+ *
+ * ## Emitter results
+ * There are three kinds of results your methods might return - declarations,
+ * raw code, or nothing.
+ *
+ * ### Declarations
+ *
+ * Create declarations by calling `this.emitter.result.declaration` passing it a
+ * name and the emit output for the declaration. Note that you must have scope
+ * in your context or you will get an error. If you want all declarations to be
+ * emitted to the same source file, you can create a single scope in
+ * `programContext` via something like:
+ *
+ * ```typescript
+ * programContext(program: Program): Context {
+ *   const sourceFile = this.emitter.createSourceFile("test.txt");
+ *   return {
+ *     scope: sourceFile.globalScope,
+ *   };
+ * }
+ * ```
+ *
+ * ### Raw Code
+ *
+ * Create raw code, or emitter output that doesn't contribute to a declaration,
+ * by calling `this.emitter.result.rawCode` passing it a value. Returning just a
+ * value is considered raw code and so you often don't need to call this
+ * directly.
+ *
+ * ### No Emit
+ *
+ * When a type doesn't contribute anything to the emitted output, return
+ * `this.emitter.result.none()`.
+ *
+ * ## Context
+ *
+ * The TypeEmitter will often want to keep track of what context a type is found
+ * in. There are two kinds of context - lexical context, and reference context.
+ *
+ * * Lexical context is context that applies to the type and every type
+ *   contained inside of it. For example, lexical context for a model will apply
+ *   to the model, its properties, and any nested model literals.
+ * * Reference context is context that applies to types contained inside of the
+ *   type and referenced anywhere inside of it. For example, reference context
+ *   set on a model will apply to the model, its properties, any nested model
+ *   literals, and any type referenced inside anywhere inside the model and any
+ *   of the referenced types' references.
+ *
+ * In both cases, context is an object. It's strongly recommended that the context
+ * object either contain only primitive types, or else only reference immutable
+ * objects.
+ *
+ * Set lexical by implementing the `*Context` methods of the TypeEmitter and
+ * returning the context, for example `modelDeclarationContext` sets the context
+ * for model declarations and the types contained inside of it.
+ *
+ * Set reference context by implementing the `*ReferenceContext` methods of the
+ * TypeEmitter and returning the context. Note that not all types have reference
+ * context methods, because not all types can actually reference anything.
+ *
+ * When a context method returns some context, it is merged with the current
+ * context. It is not possible to remove previous context, but it can be
+ * overridden with `undefined`.
+ *
+ * When emitting types with context, the same type might be emitted multiple
+ * times if we come across that type with different contexts. For example, if we
+ * have a TypeSpec program like
+ *
+ * ```typespec
+ * model Pet { }
+ * model Person {
+ *   pet: Pet;
+ * }
+ * ```
+ *
+ * And we set reference context for the Person model, Pet will be emitted twice,
+ * once without context and once with the reference context.
+ */
+export class TypeEmitter {
+    emitter;
+    /**
+     * @private
+     *
+     * Constructs a TypeEmitter. Do not use this constructor directly, instead
+     * call `createAssetEmitter` on the emitter context object.
+     * @param emitter The asset emitter
+     */
+    constructor(emitter) {
+        this.emitter = emitter;
+    }
+    /**
+     * Context shared by the entire program. In cases where you are emitting to a
+     * single file, use this method to establish your main source file and set the
+     * `scope` property to that source file's `globalScope`.
+     * @param program
+     * @returns Context
+     */
+    programContext(program) {
+        return {};
+    }
+    /**
+     * Emit a namespace
+     *
+     * @param namespace
+     * @returns Emitter output
+     */
+    namespace(namespace) {
+        for (const ns of namespace.namespaces.values()) {
+            this.emitter.emitType(ns);
+        }
+        for (const model of namespace.models.values()) {
+            if (!isTemplateDeclaration(model)) {
+                this.emitter.emitType(model);
+            }
+        }
+        for (const operation of namespace.operations.values()) {
+            if (!isTemplateDeclaration(operation)) {
+                this.emitter.emitType(operation);
+            }
+        }
+        for (const enumeration of namespace.enums.values()) {
+            this.emitter.emitType(enumeration);
+        }
+        for (const union of namespace.unions.values()) {
+            if (!isTemplateDeclaration(union)) {
+                this.emitter.emitType(union);
+            }
+        }
+        for (const iface of namespace.interfaces.values()) {
+            if (!isTemplateDeclaration(iface)) {
+                this.emitter.emitType(iface);
+            }
+        }
+        for (const scalar of namespace.scalars.values()) {
+            this.emitter.emitType(scalar);
+        }
+        return this.emitter.result.none();
+    }
+    /**
+     * Set lexical context for a namespace
+     *
+     * @param namespace
+     */
+    namespaceContext(namespace) {
+        return {};
+    }
+    /**
+     * Set reference context for a namespace.
+     *
+     * @param namespace
+     */
+    namespaceReferenceContext(namespace) {
+        return {};
+    }
+    /**
+     * Emit a model literal (e.g. as created by `{}` syntax in TypeSpec).
+     *
+     * @param model
+     */
+    modelLiteral(model) {
+        if (model.baseModel) {
+            this.emitter.emitType(model.baseModel);
+        }
+        this.emitter.emitModelProperties(model);
+        return this.emitter.result.none();
+    }
+    /**
+     * Set lexical context for a model literal.
+     * @param model
+     */
+    modelLiteralContext(model) {
+        return {};
+    }
+    /**
+     * Set reference context for a model literal.
+     * @param model
+     */
+    modelLiteralReferenceContext(model) {
+        return {};
+    }
+    /**
+     * Emit a model declaration (e.g. as created by `model Foo { }` syntax in
+     * TypeSpec).
+     *
+     * @param model
+     */
+    modelDeclaration(model, name) {
+        if (model.baseModel) {
+            this.emitter.emitType(model.baseModel);
+        }
+        this.emitter.emitModelProperties(model);
+        return this.emitter.result.none();
+    }
+    /**
+     * Set lexical context for a model declaration.
+     *
+     * @param model
+     * @param name the model's declaration name as retrieved from the
+     * `declarationName` method.
+     */
+    modelDeclarationContext(model, name) {
+        return {};
+    }
+    /**
+     * Set reference context for a model declaration.
+     * @param model
+     */
+    modelDeclarationReferenceContext(model, name) {
+        return {};
+    }
+    /**
+     * Emit a model instantiation (e.g. as created by `Box<string>` syntax in
+     * TypeSpec). In some cases, `name` is undefined because a good name could
+     * not be found for the instantiation. This often occurs with for instantiations
+     * involving type expressions like `Box<string | int32>`.
+     *
+     * @param model
+     * @param name The name of the instantiation as retrieved from the
+     * `declarationName` method.
+     */
+    modelInstantiation(model, name) {
+        if (model.baseModel) {
+            this.emitter.emitType(model.baseModel);
+        }
+        this.emitter.emitModelProperties(model);
+        return this.emitter.result.none();
+    }
+    /**
+     * Set lexical context for a model instantiation.
+     * @param model
+     */
+    modelInstantiationContext(model, name) {
+        return {};
+    }
+    /**
+     * Set reference context for a model declaration.
+     * @param model
+     */
+    modelInstantiationReferenceContext(model, name) {
+        return {};
+    }
+    /**
+     * Emit a model's properties. Unless overridden, this method will emit each of
+     * the model's properties and return a no emit result.
+     *
+     * @param model
+     */
+    modelProperties(model) {
+        for (const prop of model.properties.values()) {
+            this.emitter.emitModelProperty(prop);
+        }
+        return this.emitter.result.none();
+    }
+    modelPropertiesContext(model) {
+        return {};
+    }
+    modelPropertiesReferenceContext(model) {
+        return {};
+    }
+    /**
+     * Emit a property of a model.
+     *
+     * @param property
+     */
+    modelPropertyLiteral(property) {
+        this.emitter.emitTypeReference(property.type);
+        return this.emitter.result.none();
+    }
+    /**
+     * Set lexical context for a property of a model.
+     *
+     * @param property
+     */
+    modelPropertyLiteralContext(property) {
+        return {};
+    }
+    /**
+     * Set reference context for a property of a model.
+     *
+     * @param property
+     */
+    modelPropertyLiteralReferenceContext(property) {
+        return {};
+    }
+    /**
+     * Emit a model property reference (e.g. as created by the `SomeModel.prop`
+     * syntax in TypeSpec). By default, this will emit the type of the referenced
+     * property and return that result. In other words, the emit will look as if
+     * `SomeModel.prop` were replaced with the type of `prop`.
+     *
+     * @param property
+     */
+    modelPropertyReference(property) {
+        return this.emitter.emitTypeReference(property.type);
+    }
+    /**
+     * Emit an enum member reference (e.g. as created by the `SomeEnum.member` syntax
+     * in TypeSpec). By default, this will emit nothing.
+     *
+     * @param property the enum member
+     */
+    enumMemberReference(member) {
+        return this.emitter.result.none();
+    }
+    arrayDeclaration(array, name, elementType) {
+        this.emitter.emitType(array.indexer.value);
+        return this.emitter.result.none();
+    }
+    arrayDeclarationContext(array, name, elementType) {
+        return {};
+    }
+    arrayDeclarationReferenceContext(array, name, elementType) {
+        return {};
+    }
+    arrayLiteral(array, elementType) {
+        return this.emitter.result.none();
+    }
+    arrayLiteralContext(array, elementType) {
+        return {};
+    }
+    arrayLiteralReferenceContext(array, elementType) {
+        return {};
+    }
+    scalarDeclaration(scalar, name) {
+        if (scalar.baseScalar) {
+            this.emitter.emitType(scalar.baseScalar);
+        }
+        return this.emitter.result.none();
+    }
+    scalarDeclarationContext(scalar, name) {
+        return {};
+    }
+    scalarDeclarationReferenceContext(scalar, name) {
+        return {};
+    }
+    scalarInstantiation(scalar, name) {
+        return this.emitter.result.none();
+    }
+    scalarInstantiationContext(scalar, name) {
+        return {};
+    }
+    intrinsic(intrinsic, name) {
+        return this.emitter.result.none();
+    }
+    intrinsicContext(intrinsic, name) {
+        return {};
+    }
+    booleanLiteralContext(boolean) {
+        return {};
+    }
+    booleanLiteral(boolean) {
+        return this.emitter.result.none();
+    }
+    stringTemplateContext(string) {
+        return {};
+    }
+    stringTemplate(stringTemplate) {
+        return this.emitter.result.none();
+    }
+    stringLiteralContext(string) {
+        return {};
+    }
+    stringLiteral(string) {
+        return this.emitter.result.none();
+    }
+    numericLiteralContext(number) {
+        return {};
+    }
+    numericLiteral(number) {
+        return this.emitter.result.none();
+    }
+    operationDeclaration(operation, name) {
+        this.emitter.emitOperationParameters(operation);
+        this.emitter.emitOperationReturnType(operation);
+        return this.emitter.result.none();
+    }
+    operationDeclarationContext(operation, name) {
+        return {};
+    }
+    operationDeclarationReferenceContext(operation, name) {
+        return {};
+    }
+    interfaceDeclarationOperationsContext(iface) {
+        return {};
+    }
+    interfaceDeclarationOperationsReferenceContext(iface) {
+        return {};
+    }
+    interfaceOperationDeclarationContext(operation, name) {
+        return {};
+    }
+    interfaceOperationDeclarationReferenceContext(operation, name) {
+        return {};
+    }
+    operationParameters(operation, parameters) {
+        return this.emitter.result.none();
+    }
+    operationParametersContext(operation, parameters) {
+        return {};
+    }
+    operationParametersReferenceContext(operation, parameters) {
+        return {};
+    }
+    operationReturnType(operation, returnType) {
+        return this.emitter.result.none();
+    }
+    operationReturnTypeContext(operation, returnType) {
+        return {};
+    }
+    operationReturnTypeReferenceContext(operation, returnType) {
+        return {};
+    }
+    interfaceDeclaration(iface, name) {
+        this.emitter.emitInterfaceOperations(iface);
+        return this.emitter.result.none();
+    }
+    interfaceDeclarationContext(iface, name) {
+        return {};
+    }
+    interfaceDeclarationReferenceContext(iface, name) {
+        return {};
+    }
+    interfaceDeclarationOperations(iface) {
+        for (const op of iface.operations.values()) {
+            this.emitter.emitInterfaceOperation(op);
+        }
+        return this.emitter.result.none();
+    }
+    interfaceOperationDeclaration(operation, name) {
+        this.emitter.emitOperationParameters(operation);
+        this.emitter.emitOperationReturnType(operation);
+        return this.emitter.result.none();
+    }
+    enumDeclaration(en, name) {
+        this.emitter.emitEnumMembers(en);
+        return this.emitter.result.none();
+    }
+    enumDeclarationContext(en, name) {
+        return {};
+    }
+    enumDeclarationReferenceContext(en, name) {
+        return {};
+    }
+    enumMembers(en) {
+        for (const member of en.members.values()) {
+            this.emitter.emitType(member);
+        }
+        return this.emitter.result.none();
+    }
+    enumMembersContext(en) {
+        return {};
+    }
+    enumMember(member) {
+        return this.emitter.result.none();
+    }
+    enumMemberContext(member) {
+        return {};
+    }
+    unionDeclaration(union, name) {
+        this.emitter.emitUnionVariants(union);
+        return this.emitter.result.none();
+    }
+    unionDeclarationContext(union) {
+        return {};
+    }
+    unionDeclarationReferenceContext(union) {
+        return {};
+    }
+    unionInstantiation(union, name) {
+        this.emitter.emitUnionVariants(union);
+        return this.emitter.result.none();
+    }
+    unionInstantiationContext(union, name) {
+        return {};
+    }
+    unionInstantiationReferenceContext(union, name) {
+        return {};
+    }
+    unionLiteral(union) {
+        this.emitter.emitUnionVariants(union);
+        return this.emitter.result.none();
+    }
+    unionLiteralContext(union) {
+        return {};
+    }
+    unionLiteralReferenceContext(union) {
+        return {};
+    }
+    unionVariants(union) {
+        for (const variant of union.variants.values()) {
+            this.emitter.emitType(variant);
+        }
+        return this.emitter.result.none();
+    }
+    unionVariantsContext() {
+        return {};
+    }
+    unionVariantsReferenceContext() {
+        return {};
+    }
+    unionVariant(variant) {
+        this.emitter.emitTypeReference(variant.type);
+        return this.emitter.result.none();
+    }
+    unionVariantContext(union) {
+        return {};
+    }
+    unionVariantReferenceContext(union) {
+        return {};
+    }
+    tupleLiteral(tuple) {
+        this.emitter.emitTupleLiteralValues(tuple);
+        return this.emitter.result.none();
+    }
+    tupleLiteralContext(tuple) {
+        return {};
+    }
+    tupleLiteralValues(tuple) {
+        for (const value of tuple.values.values()) {
+            this.emitter.emitType(value);
+        }
+        return this.emitter.result.none();
+    }
+    tupleLiteralValuesContext(tuple) {
+        return {};
+    }
+    tupleLiteralValuesReferenceContext(tuple) {
+        return {};
+    }
+    tupleLiteralReferenceContext(tuple) {
+        return {};
+    }
+    sourceFile(sourceFile) {
+        const emittedSourceFile = {
+            path: sourceFile.path,
+            contents: "",
+        };
+        for (const decl of sourceFile.globalScope.declarations) {
+            emittedSourceFile.contents += decl.value + "\n";
+        }
+        return emittedSourceFile;
+    }
+    async writeOutput(sourceFiles) {
+        for (const file of sourceFiles) {
+            const outputFile = await this.emitter.emitSourceFile(file);
+            await emitFile(this.emitter.getProgram(), {
+                path: outputFile.path,
+                content: outputFile.contents,
+            });
+        }
+    }
+    reference(targetDeclaration, pathUp, pathDown, commonScope) {
+        return this.emitter.result.none();
+    }
+    /**
+     * Handle circular references. When this method is called it means we are resolving a circular reference.
+     * By default if the target is a declaration it will call to {@link reference} otherwise it means we have an inline reference
+     * @param target Reference target.
+     * @param scope Current scope.
+     * @returns Resolved reference entity.
+     */
+    circularReference(target, scope, cycle) {
+        if (!cycle.containsDeclaration) {
+            throw new Error(`Circular references to non-declarations are not supported by this emitter. Cycle:\n${cycle}`);
+        }
+        if (target.kind !== "declaration") {
+            return target;
+        }
+        compilerAssert(scope, "Emit context must have a scope set in order to create references to declarations.");
+        const { pathUp, pathDown, commonScope } = resolveDeclarationReferenceScope(target, scope);
+        return this.reference(target, pathUp, pathDown, commonScope);
+    }
+    declarationName(declarationType) {
+        compilerAssert(declarationType.name !== undefined, "Can't emit a declaration that doesn't have a name.");
+        if (declarationType.kind === "Enum" || declarationType.kind === "Intrinsic") {
+            return declarationType.name;
+        }
+        // for operations inside interfaces, we don't want to do the fancy thing because it will make
+        // operations inside instantiated interfaces get weird names
+        if (declarationType.kind === "Operation" && declarationType.interface) {
+            return declarationType.name;
+        }
+        if (!declarationType.templateMapper) {
+            return declarationType.name;
+        }
+        let unspeakable = false;
+        const parameterNames = declarationType.templateMapper.args.map((t) => {
+            if (t.entityKind === "Indeterminate") {
+                t = t.type;
+            }
+            if (!("kind" in t)) {
+                return undefined;
+            }
+            switch (t.kind) {
+                case "Model":
+                case "Scalar":
+                case "Interface":
+                case "Operation":
+                case "Enum":
+                case "Union":
+                case "Intrinsic":
+                    if (!t.name) {
+                        unspeakable = true;
+                        return undefined;
+                    }
+                    const declName = this.emitter.emitDeclarationName(t);
+                    if (declName === undefined) {
+                        unspeakable = true;
+                        return undefined;
+                    }
+                    return declName[0].toUpperCase() + declName.slice(1);
+                default:
+                    unspeakable = true;
+                    return undefined;
+            }
+        });
+        if (unspeakable) {
+            return undefined;
+        }
+        return declarationType.name + parameterNames.join("");
+    }
+}
+/**
+ * A subclass of `TypeEmitter<string>` that makes working with strings a bit easier.
+ * In particular, when emitting members of a type (`modelProperties`, `enumMembers`, etc.),
+ * instead of returning no result, it returns the value of each of the members concatenated
+ * by commas. It will also construct references by concatenating namespace elements together
+ * with `.` which should work nicely in many object oriented languages.
+ */
+export class CodeTypeEmitter extends TypeEmitter {
+    modelProperties(model) {
+        const builder = new StringBuilder();
+        let i = 0;
+        for (const prop of model.properties.values()) {
+            i++;
+            const propVal = this.emitter.emitModelProperty(prop);
+            builder.push(code `${propVal}${i < model.properties.size ? "," : ""}`);
+        }
+        return this.emitter.result.rawCode(builder.reduce());
+    }
+    interfaceDeclarationOperations(iface) {
+        const builder = new StringBuilder();
+        let i = 0;
+        for (const op of iface.operations.values()) {
+            i++;
+            builder.push(code `${this.emitter.emitInterfaceOperation(op)}${i < iface.operations.size ? "," : ""}`);
+        }
+        return builder.reduce();
+    }
+    enumMembers(en) {
+        const builder = new StringBuilder();
+        let i = 0;
+        for (const enumMember of en.members.values()) {
+            i++;
+            builder.push(code `${this.emitter.emitType(enumMember)}${i < en.members.size ? "," : ""}`);
+        }
+        return builder.reduce();
+    }
+    unionVariants(union) {
+        const builder = new StringBuilder();
+        let i = 0;
+        for (const v of union.variants.values()) {
+            i++;
+            builder.push(code `${this.emitter.emitType(v)}${i < union.variants.size ? "," : ""}`);
+        }
+        return builder.reduce();
+    }
+    tupleLiteralValues(tuple) {
+        const builder = new StringBuilder();
+        let i = 0;
+        for (const v of tuple.values) {
+            i++;
+            builder.push(code `${this.emitter.emitTypeReference(v)}${i < tuple.values.length ? "," : ""}`);
+        }
+        return builder.reduce();
+    }
+    reference(targetDeclaration, pathUp, pathDown, commonScope) {
+        const basePath = pathDown.map((s) => s.name).join(".");
+        return basePath
+            ? this.emitter.result.rawCode(basePath + "." + targetDeclaration.name)
+            : this.emitter.result.rawCode(targetDeclaration.name);
+    }
+}
+//# sourceMappingURL=type-emitter.js.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/type-emitter.js.map b/dist/src/emitter-framework/type-emitter.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..7bf99afb88d45a79ede486fd12d57a84d9742e57
--- /dev/null
+++ b/dist/src/emitter-framework/type-emitter.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"type-emitter.js","sourceRoot":"","sources":["../../../src/emitter-framework/type-emitter.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/types.d.ts b/dist/src/emitter-framework/types.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..0d7916a77e5cbee6fea4bf0df24752a9300b65c3
--- /dev/null
+++ b/dist/src/emitter-framework/types.d.ts
@@ -0,0 +1,139 @@
+import type { Enum, Interface, IntrinsicType, Model, ModelProperty, Operation, Program, Scalar, Tuple, Type, Union } from "../core/index.js";
+import { Placeholder } from "./placeholder.js";
+import type { TypeEmitter } from "./type-emitter.js";
+type AssetEmitterOptions<TOptions extends object> = {
+    noEmit: boolean;
+    emitterOutputDir: string;
+} & TOptions;
+export interface EmitTypeReferenceOptions {
+    readonly referenceContext?: Record<string, any>;
+}
+export interface AssetEmitter<T, TOptions extends object = Record<string, unknown>> {
+    /**
+     * Get the current emitter context as set by the TypeEmitter's various
+     * context methods.
+     *
+     * @returns The current emitter context
+     */
+    getContext(): Context;
+    getOptions(): AssetEmitterOptions<TOptions>;
+    getProgram(): Program;
+    emitTypeReference(type: Type, context?: EmitTypeReferenceOptions): EmitEntity<T>;
+    emitDeclarationName(type: TypeSpecDeclaration): string | undefined;
+    emitType(type: Type, context?: Partial<ContextState>): EmitEntity<T>;
+    emitProgram(options?: {
+        emitGlobalNamespace?: boolean;
+        emitTypeSpecNamespace?: boolean;
+    }): void;
+    emitModelProperties(model: Model): EmitEntity<T>;
+    emitModelProperty(prop: ModelProperty): EmitEntity<T>;
+    emitOperationParameters(operation: Operation): EmitEntity<T>;
+    emitOperationReturnType(operation: Operation): EmitEntity<T>;
+    emitInterfaceOperations(iface: Interface): EmitEntity<T>;
+    emitInterfaceOperation(operation: Operation): EmitEntity<T>;
+    emitEnumMembers(en: Enum): EmitEntity<T>;
+    emitUnionVariants(union: Union): EmitEntity<T>;
+    emitTupleLiteralValues(tuple: Tuple): EmitEntity<T>;
+    emitSourceFile(sourceFile: SourceFile<T>): Promise<EmittedSourceFile>;
+    /**
+     * Create a source file.
+     *
+     * @param name the path of the file, resolved relative to the emitter's output directory.
+     */
+    createSourceFile(name: string): SourceFile<T>;
+    createScope(sourceFile: SourceFile<T>, name: string): SourceFileScope<T>;
+    createScope(namespace: any, name: string, parentScope: Scope<T>): NamespaceScope<T>;
+    createScope(block: any, name: string, parentScope?: Scope<T> | null): Scope<T>;
+    result: {
+        declaration(name: string, value: T | Placeholder<T>): Declaration<T>;
+        rawCode(value: T | Placeholder<T>): RawCode<T>;
+        none(): NoEmit;
+    };
+    writeOutput(): Promise<void>;
+    /** Get source files that have been scoped. */
+    getSourceFiles(): SourceFile<T>[];
+}
+export interface ScopeBase<T> {
+    kind: string;
+    name: string;
+    parentScope: Scope<T> | null;
+    childScopes: Scope<T>[];
+    declarations: Declaration<T>[];
+}
+export interface SourceFileScope<T> extends ScopeBase<T> {
+    kind: "sourceFile";
+    sourceFile: SourceFile<T>;
+}
+export interface NamespaceScope<T> extends ScopeBase<T> {
+    kind: "namespace";
+    parentScope: Scope<T>;
+    namespace: any;
+}
+export type Scope<T> = SourceFileScope<T> | NamespaceScope<T>;
+export interface TypeReference {
+    expression: string;
+}
+export interface SourceFile<T> {
+    path: string;
+    globalScope: Scope<T>;
+    imports: Map<string, string[]>;
+    meta: Record<string, any>;
+}
+export interface EmittedSourceFile {
+    contents: string;
+    path: string;
+}
+export type EmitEntity<T> = Declaration<T> | RawCode<T> | NoEmit | CircularEmit;
+export declare class EmitterResult {
+}
+export declare class Declaration<T> extends EmitterResult {
+    name: string;
+    scope: Scope<T>;
+    value: T | Placeholder<T>;
+    kind: "declaration";
+    meta: Record<string, any>;
+    constructor(name: string, scope: Scope<T>, value: T | Placeholder<T>);
+}
+export declare class RawCode<T> extends EmitterResult {
+    value: T | Placeholder<T>;
+    kind: "code";
+    constructor(value: T | Placeholder<T>);
+}
+export declare class NoEmit extends EmitterResult {
+    kind: "none";
+}
+export declare class CircularEmit extends EmitterResult {
+    emitEntityKey: [string, Type, ContextState];
+    kind: "circular";
+    constructor(emitEntityKey: [string, Type, ContextState]);
+}
+export interface AssetTag {
+    language: AssetTagFactory;
+    create(key: string): AssetTagFactory;
+}
+export interface AssetTagInstance {
+}
+export type AssetTagFactory = {
+    (value: string): AssetTagInstance;
+};
+export type TypeSpecDeclaration = Model | Interface | Union | Operation | Enum | Scalar | IntrinsicType;
+export interface ContextState {
+    lexicalContext: Record<string, any>;
+    referenceContext: Record<string, any>;
+}
+export type Context = Record<string, any>;
+export type ESRecord = Record<string, any> & {
+    _record: true;
+};
+type EndingWith<Names, Name extends string> = Names extends `${infer _X}${Name}` ? Names : never;
+export type TypeEmitterMethod = keyof Omit<TypeEmitter<any, any>, "sourceFile" | "declarationName" | "reference" | "circularReference" | "emitValue" | "writeOutput" | EndingWith<keyof TypeEmitter<any, any>, "Context">>;
+export interface LexicalTypeStackEntry {
+    method: TypeEmitterMethod;
+    args: any[];
+}
+export interface EmitterState {
+    lexicalTypeStack: LexicalTypeStackEntry[];
+    context: ContextState;
+}
+export {};
+//# sourceMappingURL=types.d.ts.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/types.d.ts.map b/dist/src/emitter-framework/types.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..6d163ae4748a5a5cbcae6961818076599386cb2a
--- /dev/null
+++ b/dist/src/emitter-framework/types.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"types.d.ts","sourceRoot":"","sources":["../../../src/emitter-framework/types.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/types.js b/dist/src/emitter-framework/types.js
new file mode 100644
index 0000000000000000000000000000000000000000..bee61293e799a1827d2b7baa141254f9bf63c3c7
--- /dev/null
+++ b/dist/src/emitter-framework/types.js
@@ -0,0 +1,42 @@
+import { Placeholder } from "./placeholder.js";
+export class EmitterResult {
+}
+export class Declaration extends EmitterResult {
+    name;
+    scope;
+    value;
+    kind = "declaration";
+    meta = {};
+    constructor(name, scope, value) {
+        if (value instanceof Placeholder) {
+            value.onValue((v) => (this.value = v));
+        }
+        super();
+        this.name = name;
+        this.scope = scope;
+        this.value = value;
+    }
+}
+export class RawCode extends EmitterResult {
+    value;
+    kind = "code";
+    constructor(value) {
+        if (value instanceof Placeholder) {
+            value.onValue((v) => (this.value = v));
+        }
+        super();
+        this.value = value;
+    }
+}
+export class NoEmit extends EmitterResult {
+    kind = "none";
+}
+export class CircularEmit extends EmitterResult {
+    emitEntityKey;
+    kind = "circular";
+    constructor(emitEntityKey) {
+        super();
+        this.emitEntityKey = emitEntityKey;
+    }
+}
+//# sourceMappingURL=types.js.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/types.js.map b/dist/src/emitter-framework/types.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..141d93840f7b47ce168f5d3a874f7813d23a673f
--- /dev/null
+++ b/dist/src/emitter-framework/types.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"types.js","sourceRoot":"","sources":["../../../src/emitter-framework/types.ts"],"names":[],"mappings":"AAaA,OAAO,EAAE,WAAW,EAAE,MAAM,kBAAkB,CAAC;AA+F/C,MAAM,OAAO,aAAa;CAAG;AAC7B,MAAM,OAAO,WAAe,SAAQ,aAAa;IAKtC;IACA;IACA;IANF,IAAI,GAAG,aAAsB,CAAC;IAC9B,IAAI,GAAwB,EAAE,CAAC;IAEtC,YACS,IAAY,EACZ,KAAe,EACf,KAAyB;QAEhC,IAAI,KAAK,YAAY,WAAW,EAAE,CAAC;YACjC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC;QACzC,CAAC;QAED,KAAK,EAAE,CAAC;QARD,SAAI,GAAJ,IAAI,CAAQ;QACZ,UAAK,GAAL,KAAK,CAAU;QACf,UAAK,GAAL,KAAK,CAAoB;IAOlC,CAAC;CACF;AAED,MAAM,OAAO,OAAW,SAAQ,aAAa;IAGxB;IAFZ,IAAI,GAAG,MAAe,CAAC;IAE9B,YAAmB,KAAyB;QAC1C,IAAI,KAAK,YAAY,WAAW,EAAE,CAAC;YACjC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC;QACzC,CAAC;QAED,KAAK,EAAE,CAAC;QALS,UAAK,GAAL,KAAK,CAAoB;IAM5C,CAAC;CACF;AAED,MAAM,OAAO,MAAO,SAAQ,aAAa;IAChC,IAAI,GAAG,MAAe,CAAC;CAC/B;AAED,MAAM,OAAO,YAAa,SAAQ,aAAa;IAE1B;IADZ,IAAI,GAAG,UAAmB,CAAC;IAClC,YAAmB,aAA2C;QAC5D,KAAK,EAAE,CAAC;QADS,kBAAa,GAAb,aAAa,CAA8B;IAE9D,CAAC;CACF"}
\ No newline at end of file
diff --git a/dist/src/experimental/state-accessor.d.ts b/dist/src/experimental/state-accessor.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..e2c20f6b5a41559233aea8f98fe49d1861f7a840
--- /dev/null
+++ b/dist/src/experimental/state-accessor.d.ts
@@ -0,0 +1,13 @@
+import type { Program } from "../core/program.js";
+import type { Type } from "../core/types.js";
+type StateMapGetter<K extends Type, V> = (program: Program, type: K) => V | undefined;
+type StateMapSetter<K extends Type, V> = (program: Program, type: K, value: V) => void;
+type StateMapMapGetter<K extends Type, V> = (program: Program) => Map<K, V>;
+/** @experimental */
+export declare function unsafe_useStateMap<K extends Type, V>(key: symbol): [StateMapGetter<K, V>, StateMapSetter<K, V>, StateMapMapGetter<K, V>];
+type StateSetGetter<K extends Type> = (program: Program, type: K) => boolean;
+type StateSetSetter<K extends Type> = (program: Program, type: K) => void;
+/** @experimental */
+export declare function unsafe_useStateSet<K extends Type>(key: symbol): [StateSetGetter<K>, StateSetSetter<K>];
+export {};
+//# sourceMappingURL=state-accessor.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/state-accessor.d.ts.map b/dist/src/experimental/state-accessor.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..dde1611aedc3b8fdaa2ee81c823b28902b6eca63
--- /dev/null
+++ b/dist/src/experimental/state-accessor.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"state-accessor.d.ts","sourceRoot":"","sources":["../../../src/experimental/state-accessor.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,OAAO,EAAE,MAAM,oBAAoB,CAAC;AAClD,OAAO,KAAK,EAAE,IAAI,EAAE,MAAM,kBAAkB,CAAC;AAE7C,KAAK,cAAc,CAAC,CAAC,SAAS,IAAI,EAAE,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,KAAK,CAAC,GAAG,SAAS,CAAC;AACtF,KAAK,cAAc,CAAC,CAAC,SAAS,IAAI,EAAE,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,KAAK,IAAI,CAAC;AACvF,KAAK,iBAAiB,CAAC,CAAC,SAAS,IAAI,EAAE,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,KAAK,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AAE5E,oBAAoB;AACpB,wBAAgB,kBAAkB,CAAC,CAAC,SAAS,IAAI,EAAE,CAAC,EAClD,GAAG,EAAE,MAAM,GACV,CAAC,cAAc,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,cAAc,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,iBAAiB,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAMvE;AAED,KAAK,cAAc,CAAC,CAAC,SAAS,IAAI,IAAI,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,KAAK,OAAO,CAAC;AAC7E,KAAK,cAAc,CAAC,CAAC,SAAS,IAAI,IAAI,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,KAAK,IAAI,CAAC;AAE1E,oBAAoB;AACpB,wBAAgB,kBAAkB,CAAC,CAAC,SAAS,IAAI,EAC/C,GAAG,EAAE,MAAM,GACV,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,cAAc,CAAC,CAAC,CAAC,CAAC,CAKxC"}
\ No newline at end of file
diff --git a/dist/src/experimental/state-accessor.js b/dist/src/experimental/state-accessor.js
new file mode 100644
index 0000000000000000000000000000000000000000..29809586f0458198c6b711ebf4b598ce07b804cf
--- /dev/null
+++ b/dist/src/experimental/state-accessor.js
@@ -0,0 +1,14 @@
+/** @experimental */
+export function unsafe_useStateMap(key) {
+    const getter = (program, target) => program.stateMap(key).get(target);
+    const setter = (program, target, value) => program.stateMap(key).set(target, value);
+    const mapGetter = (program) => program.stateMap(key);
+    return [getter, setter, mapGetter];
+}
+/** @experimental */
+export function unsafe_useStateSet(key) {
+    const getter = (program, target) => program.stateSet(key).has(target);
+    const setter = (program, target) => program.stateSet(key).add(target);
+    return [getter, setter];
+}
+//# sourceMappingURL=state-accessor.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/state-accessor.js.map b/dist/src/experimental/state-accessor.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..85bdaf1868739c749591b33323065e4287b11b2b
--- /dev/null
+++ b/dist/src/experimental/state-accessor.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"state-accessor.js","sourceRoot":"","sources":["../../../src/experimental/state-accessor.ts"],"names":[],"mappings":"AAOA,oBAAoB;AACpB,MAAM,UAAU,kBAAkB,CAChC,GAAW;IAEX,MAAM,MAAM,GAAG,CAAC,OAAgB,EAAE,MAAS,EAAE,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAClF,MAAM,MAAM,GAAG,CAAC,OAAgB,EAAE,MAAS,EAAE,KAAQ,EAAE,EAAE,CACvD,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;IAC3C,MAAM,SAAS,GAAG,CAAC,OAAgB,EAAE,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;IAC9D,OAAO,CAAC,MAAM,EAAE,MAAM,EAAE,SAAgB,CAAC,CAAC;AAC5C,CAAC;AAKD,oBAAoB;AACpB,MAAM,UAAU,kBAAkB,CAChC,GAAW;IAEX,MAAM,MAAM,GAAG,CAAC,OAAgB,EAAE,MAAS,EAAE,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAClF,MAAM,MAAM,GAAG,CAAC,OAAgB,EAAE,MAAS,EAAE,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAElF,OAAO,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;AAC1B,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/define-kit.d.ts b/dist/src/experimental/typekit/define-kit.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..4099510f788296516701751afa2b6afa8ed970c7
--- /dev/null
+++ b/dist/src/experimental/typekit/define-kit.d.ts
@@ -0,0 +1,29 @@
+import { type Program } from "../../core/program.js";
+import { Realm } from "../realm.js";
+/**
+ * A Typekit is a collection of utility functions and namespaces that allow you to work with TypeSpec types.
+ *
+ * @experimental
+ */
+export interface Typekit {
+    readonly program: Program;
+    readonly realm: Realm;
+}
+/**
+ * contextual typing to type guards is annoying (often have to restate the signature),
+ * so this helper will remove the type assertions from the interface you are currently defining.
+ * @experimental
+ */
+export type StripGuards<T> = {
+    [K in keyof T]: T[K] extends (...args: infer P) => infer R ? (...args: P) => R : T[K] extends Record<string, any> ? StripGuards<T[K]> : T[K];
+};
+export declare const TypekitNamespaceSymbol: unique symbol;
+/**
+ * Defines an extension to the Typekit interface.
+ *
+ * All Typekit instances will inherit the functionality defined by calls to this function.
+ *
+ * @experimental
+ */
+export declare function defineKit<T extends Record<string, any>>(source: StripGuards<T> & ThisType<Typekit>): void;
+//# sourceMappingURL=define-kit.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/define-kit.d.ts.map b/dist/src/experimental/typekit/define-kit.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..d739828685cbb3369d8b2066b30320df7ffa8f82
--- /dev/null
+++ b/dist/src/experimental/typekit/define-kit.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"define-kit.d.ts","sourceRoot":"","sources":["../../../../src/experimental/typekit/define-kit.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,KAAK,OAAO,EAAE,MAAM,uBAAuB,CAAC;AACrD,OAAO,EAAE,KAAK,EAAE,MAAM,aAAa,CAAC;AAEpC;;;;GAIG;AACH,MAAM,WAAW,OAAO;IACtB,QAAQ,CAAC,OAAO,EAAE,OAAO,CAAC;IAC1B,QAAQ,CAAC,KAAK,EAAE,KAAK,CAAC;CACvB;AAYD;;;;GAIG;AACH,MAAM,MAAM,WAAW,CAAC,CAAC,IAAI;KAC1B,CAAC,IAAI,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,IAAI,EAAE,MAAM,CAAC,KAAK,MAAM,CAAC,GACtD,CAAC,GAAG,IAAI,EAAE,CAAC,KAAK,CAAC,GACjB,CAAC,CAAC,CAAC,CAAC,SAAS,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC,GAC9B,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GACjB,CAAC,CAAC,CAAC,CAAC;CACX,CAAC;AAEF,eAAO,MAAM,sBAAsB,eAAiC,CAAC;AAErE;;;;;;GAMG;AACH,wBAAgB,SAAS,CAAC,CAAC,SAAS,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC,EACrD,MAAM,EAAE,WAAW,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,OAAO,CAAC,GACzC,IAAI,CAmBN"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/define-kit.js b/dist/src/experimental/typekit/define-kit.js
new file mode 100644
index 0000000000000000000000000000000000000000..35458c939ff118e98d7a8e1eeaba1b9ebac03b62
--- /dev/null
+++ b/dist/src/experimental/typekit/define-kit.js
@@ -0,0 +1,35 @@
+/**
+ * The prototype object for Typekit instances.
+ *
+ * @see {@link defineKit}
+ *
+ * @experimental
+ * @internal
+ */
+export const TypekitPrototype = {};
+export const TypekitNamespaceSymbol = Symbol.for("TypekitNamespace");
+/**
+ * Defines an extension to the Typekit interface.
+ *
+ * All Typekit instances will inherit the functionality defined by calls to this function.
+ *
+ * @experimental
+ */
+export function defineKit(source) {
+    for (const [name, fnOrNs] of Object.entries(source)) {
+        let kits = fnOrNs;
+        if (TypekitPrototype[name] !== undefined) {
+            kits = { ...TypekitPrototype[name], ...fnOrNs };
+        }
+        // Tag top-level namespace objects with the symbol
+        if (typeof kits === "object" && kits !== null) {
+            Object.defineProperty(kits, TypekitNamespaceSymbol, {
+                value: true,
+                enumerable: false, // Keep the symbol non-enumerable
+                configurable: false,
+            });
+        }
+        TypekitPrototype[name] = kits;
+    }
+}
+//# sourceMappingURL=define-kit.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/define-kit.js.map b/dist/src/experimental/typekit/define-kit.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..439b7361e922c7afeae72b5f4847009e6152e9cd
--- /dev/null
+++ b/dist/src/experimental/typekit/define-kit.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"define-kit.js","sourceRoot":"","sources":["../../../../src/experimental/typekit/define-kit.ts"],"names":[],"mappings":"AAaA;;;;;;;GAOG;AACH,MAAM,CAAC,MAAM,gBAAgB,GAA4B,EAAE,CAAC;AAe5D,MAAM,CAAC,MAAM,sBAAsB,GAAG,MAAM,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;AAErE;;;;;;GAMG;AACH,MAAM,UAAU,SAAS,CACvB,MAA0C;IAE1C,KAAK,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC;QACpD,IAAI,IAAI,GAAG,MAAM,CAAC;QAElB,IAAI,gBAAgB,CAAC,IAAI,CAAC,KAAK,SAAS,EAAE,CAAC;YACzC,IAAI,GAAG,EAAE,GAAG,gBAAgB,CAAC,IAAI,CAAC,EAAE,GAAG,MAAM,EAAE,CAAC;QAClD,CAAC;QAED,kDAAkD;QAClD,IAAI,OAAO,IAAI,KAAK,QAAQ,IAAI,IAAI,KAAK,IAAI,EAAE,CAAC;YAC9C,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,sBAAsB,EAAE;gBAClD,KAAK,EAAE,IAAI;gBACX,UAAU,EAAE,KAAK,EAAE,iCAAiC;gBACpD,YAAY,EAAE,KAAK;aACpB,CAAC,CAAC;QACL,CAAC;QAED,gBAAgB,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;IAChC,CAAC;AACH,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/array.d.ts b/dist/src/experimental/typekit/kits/array.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d4f74542f127d8abb163cb85f60e0f700a1b4501
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/array.d.ts
@@ -0,0 +1,28 @@
+import { Model, Type } from "../../../core/types.js";
+/**
+ * @experimental
+ */
+export interface ArrayKit {
+    /**
+     * Check if a type is an array.
+     */
+    is(type: Type): boolean;
+    /**
+     * Get the element type of an array.
+     */
+    getElementType(type: Model): Type;
+    /**
+     * Create an array type.
+     */
+    create(elementType: Type): Model;
+}
+interface TypekitExtension {
+    /** @experimental */
+    array: ArrayKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=array.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/array.d.ts.map b/dist/src/experimental/typekit/kits/array.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..f92f1705000a76125b8177808df2f5fd16a1983c
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/array.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"array.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/array.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,wBAAwB,CAAC;AAGrD;;GAEG;AACH,MAAM,WAAW,QAAQ;IACvB;;OAEG;IACH,EAAE,CAAC,IAAI,EAAE,IAAI,GAAG,OAAO,CAAC;IACxB;;OAEG;IACH,cAAc,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI,CAAC;IAClC;;OAEG;IACH,MAAM,CAAC,WAAW,EAAE,IAAI,GAAG,KAAK,CAAC;CAClC;AAED,UAAU,gBAAgB;IACxB,oBAAoB;IACpB,KAAK,EAAE,QAAQ,CAAC;CACjB;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/array.js b/dist/src/experimental/typekit/kits/array.js
new file mode 100644
index 0000000000000000000000000000000000000000..fd05710a1e1fb231eda80c66e421cbfc6b6571a1
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/array.js
@@ -0,0 +1,26 @@
+import { isArrayModelType } from "../../../core/type-utils.js";
+import { defineKit } from "../define-kit.js";
+defineKit({
+    array: {
+        is(type) {
+            return (type.kind === "Model" && isArrayModelType(this.program, type) && type.properties.size === 0);
+        },
+        getElementType(type) {
+            if (!this.array.is(type)) {
+                throw new Error("Type is not an array.");
+            }
+            return type.indexer.value;
+        },
+        create(elementType) {
+            return this.model.create({
+                name: "Array",
+                properties: {},
+                indexer: {
+                    key: this.builtin.integer,
+                    value: elementType,
+                },
+            });
+        },
+    },
+});
+//# sourceMappingURL=array.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/array.js.map b/dist/src/experimental/typekit/kits/array.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..25669809a221c85a3be5d8b05fc527f29346b233
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/array.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"array.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/array.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,gBAAgB,EAAE,MAAM,6BAA6B,CAAC;AAE/D,OAAO,EAAE,SAAS,EAAE,MAAM,kBAAkB,CAAC;AA6B7C,SAAS,CAAmB;IAC1B,KAAK,EAAE;QACL,EAAE,CAAC,IAAI;YACL,OAAO,CACL,IAAI,CAAC,IAAI,KAAK,OAAO,IAAI,gBAAgB,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,KAAK,CAAC,CAC5F,CAAC;QACJ,CAAC;QACD,cAAc,CAAC,IAAI;YACjB,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;gBACzB,MAAM,IAAI,KAAK,CAAC,uBAAuB,CAAC,CAAC;YAC3C,CAAC;YACD,OAAO,IAAI,CAAC,OAAQ,CAAC,KAAK,CAAC;QAC7B,CAAC;QACD,MAAM,CAAC,WAAW;YAChB,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;gBACvB,IAAI,EAAE,OAAO;gBACb,UAAU,EAAE,EAAE;gBACd,OAAO,EAAE;oBACP,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO;oBACzB,KAAK,EAAE,WAAW;iBACnB;aACF,CAAC,CAAC;QACL,CAAC;KACF;CACF,CAAC,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/builtin.d.ts b/dist/src/experimental/typekit/kits/builtin.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..15d06c0e27442104c10b155e897474dd85c323e4
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/builtin.d.ts
@@ -0,0 +1,117 @@
+import type { Scalar } from "../../../core/types.js";
+/**
+ * A kit of built-in types.
+ * @experimental
+ */
+export interface BuiltinKit {
+    /**
+     * Accessor for the string builtin type.
+     */
+    get string(): Scalar;
+    /**
+     * Accessor for the boolean builtin type.
+     */
+    get boolean(): Scalar;
+    /**
+     * Accessor for the bytes builtin type, representing binary data.
+     */
+    get bytes(): Scalar;
+    /**
+     * Accessor for the decimal builtin type for high-precision decimal values.
+     */
+    get decimal(): Scalar;
+    /**
+     * Accessor for the decimal128 builtin type, a 128-bit decimal value.
+     */
+    get decimal128(): Scalar;
+    /**
+     * Accessor for the duration builtin type, representing a span of time.
+     */
+    get duration(): Scalar;
+    /**
+     * Accessor for the float builtin type, representing a double-precision floating-point number.
+     */
+    get float(): Scalar;
+    /**
+     * Accessor for the float32 builtin type, representing a single-precision floating-point number.
+     */
+    get float32(): Scalar;
+    /**
+     * Accessor for the float64 builtin type, representing a double-precision floating-point number.
+     */
+    get float64(): Scalar;
+    /**
+     * Accessor for the int8 builtin type, representing an 8-bit signed integer.
+     */
+    get int8(): Scalar;
+    /**
+     * Accessor for the int16 builtin type, representing a 16-bit signed integer.
+     */
+    get int16(): Scalar;
+    /**
+     * Accessor for the int32 builtin type, representing a 32-bit signed integer.
+     */
+    get int32(): Scalar;
+    /**
+     * Accessor for the int64 builtin type, representing a 64-bit signed integer.
+     */
+    get int64(): Scalar;
+    /**
+     * Accessor for the integer builtin type, representing an arbitrary-precision integer.
+     */
+    get integer(): Scalar;
+    /**
+     * Accessor for the offsetDateTime builtin type, representing a date and time with an offset.
+     */
+    get offsetDateTime(): Scalar;
+    /**
+     * Accessor for the plainDate builtin type, representing a date without time or offset.
+     */
+    get plainDate(): Scalar;
+    /**
+     * Accessor for the plainTime builtin type, representing a time without date or offset.
+     */
+    get plainTime(): Scalar;
+    /**
+     * Accessor for the safeInt builtin type, representing an integer within the safe range for JavaScript.
+     */
+    get safeInt(): Scalar;
+    /**
+     * Accessor for the uint8 builtin type, representing an 8-bit unsigned integer.
+     */
+    get uint8(): Scalar;
+    /**
+     * Accessor for the uint16 builtin type, representing a 16-bit unsigned integer.
+     */
+    get uint16(): Scalar;
+    /**
+     * Accessor for the uint32 builtin type, representing a 32-bit unsigned integer.
+     */
+    get uint32(): Scalar;
+    /**
+     * Accessor for the uint64 builtin type, representing a 64-bit unsigned integer.
+     */
+    get uint64(): Scalar;
+    /**
+     * Accessor for the url builtin type, representing a valid URL string.
+     */
+    get url(): Scalar;
+    /**
+     * Accessor for the utcDateTime builtin type, representing a date and time in UTC.
+     */
+    get utcDateTime(): Scalar;
+    /**
+     * Accessor for the numeric builtin type, representing a numeric value.
+     */
+    get numeric(): Scalar;
+}
+interface TypekitExtension {
+    /** @experimental */
+    builtin: BuiltinKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=builtin.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/builtin.d.ts.map b/dist/src/experimental/typekit/kits/builtin.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..8219c5f68a39801aaf10560d7190bca911b1a4ef
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/builtin.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"builtin.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/builtin.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,MAAM,EAAE,MAAM,wBAAwB,CAAC;AAGrD;;;GAGG;AACH,MAAM,WAAW,UAAU;IACzB;;OAEG;IACH,IAAI,MAAM,IAAI,MAAM,CAAC;IAErB;;OAEG;IACH,IAAI,OAAO,IAAI,MAAM,CAAC;IAEtB;;OAEG;IACH,IAAI,KAAK,IAAI,MAAM,CAAC;IAEpB;;OAEG;IACH,IAAI,OAAO,IAAI,MAAM,CAAC;IAEtB;;OAEG;IACH,IAAI,UAAU,IAAI,MAAM,CAAC;IAEzB;;OAEG;IACH,IAAI,QAAQ,IAAI,MAAM,CAAC;IAEvB;;OAEG;IACH,IAAI,KAAK,IAAI,MAAM,CAAC;IAEpB;;OAEG;IACH,IAAI,OAAO,IAAI,MAAM,CAAC;IAEtB;;OAEG;IACH,IAAI,OAAO,IAAI,MAAM,CAAC;IAEtB;;OAEG;IACH,IAAI,IAAI,IAAI,MAAM,CAAC;IAEnB;;OAEG;IACH,IAAI,KAAK,IAAI,MAAM,CAAC;IAEpB;;OAEG;IACH,IAAI,KAAK,IAAI,MAAM,CAAC;IAEpB;;OAEG;IACH,IAAI,KAAK,IAAI,MAAM,CAAC;IAEpB;;OAEG;IACH,IAAI,OAAO,IAAI,MAAM,CAAC;IAEtB;;OAEG;IACH,IAAI,cAAc,IAAI,MAAM,CAAC;IAE7B;;OAEG;IACH,IAAI,SAAS,IAAI,MAAM,CAAC;IAExB;;OAEG;IACH,IAAI,SAAS,IAAI,MAAM,CAAC;IAExB;;OAEG;IACH,IAAI,OAAO,IAAI,MAAM,CAAC;IAEtB;;OAEG;IACH,IAAI,KAAK,IAAI,MAAM,CAAC;IAEpB;;OAEG;IACH,IAAI,MAAM,IAAI,MAAM,CAAC;IAErB;;OAEG;IACH,IAAI,MAAM,IAAI,MAAM,CAAC;IAErB;;OAEG;IACH,IAAI,MAAM,IAAI,MAAM,CAAC;IAErB;;OAEG;IACH,IAAI,GAAG,IAAI,MAAM,CAAC;IAElB;;OAEG;IACH,IAAI,WAAW,IAAI,MAAM,CAAC;IAE1B;;OAEG;IACH,IAAI,OAAO,IAAI,MAAM,CAAC;CACvB;AAED,UAAU,gBAAgB;IACxB,oBAAoB;IACpB,OAAO,EAAE,UAAU,CAAC;CACrB;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/builtin.js b/dist/src/experimental/typekit/kits/builtin.js
new file mode 100644
index 0000000000000000000000000000000000000000..31d527ff3d12ee63ac51b217889b5c2d9a000443
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/builtin.js
@@ -0,0 +1,81 @@
+import { defineKit } from "../define-kit.js";
+defineKit({
+    builtin: {
+        get string() {
+            return this.program.checker.getStdType("string");
+        },
+        get boolean() {
+            return this.program.checker.getStdType("boolean");
+        },
+        get bytes() {
+            return this.program.checker.getStdType("bytes");
+        },
+        get decimal() {
+            return this.program.checker.getStdType("decimal");
+        },
+        get decimal128() {
+            return this.program.checker.getStdType("decimal128");
+        },
+        get duration() {
+            return this.program.checker.getStdType("duration");
+        },
+        get float() {
+            return this.program.checker.getStdType("float");
+        },
+        get float32() {
+            return this.program.checker.getStdType("float32");
+        },
+        get float64() {
+            return this.program.checker.getStdType("float64");
+        },
+        get int8() {
+            return this.program.checker.getStdType("int8");
+        },
+        get int16() {
+            return this.program.checker.getStdType("int16");
+        },
+        get int32() {
+            return this.program.checker.getStdType("int32");
+        },
+        get int64() {
+            return this.program.checker.getStdType("int64");
+        },
+        get integer() {
+            return this.program.checker.getStdType("integer");
+        },
+        get offsetDateTime() {
+            return this.program.checker.getStdType("offsetDateTime");
+        },
+        get plainDate() {
+            return this.program.checker.getStdType("plainDate");
+        },
+        get plainTime() {
+            return this.program.checker.getStdType("plainTime");
+        },
+        get safeInt() {
+            return this.program.checker.getStdType("safeint");
+        },
+        get uint8() {
+            return this.program.checker.getStdType("uint8");
+        },
+        get uint16() {
+            return this.program.checker.getStdType("uint16");
+        },
+        get uint32() {
+            return this.program.checker.getStdType("uint32");
+        },
+        get uint64() {
+            return this.program.checker.getStdType("uint64");
+        },
+        get url() {
+            return this.program.checker.getStdType("url");
+        },
+        get utcDateTime() {
+            return this.program.checker.getStdType("utcDateTime");
+        },
+        get numeric() {
+            return this.program.checker.getStdType("numeric");
+        },
+    },
+});
+//# sourceMappingURL=builtin.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/builtin.js.map b/dist/src/experimental/typekit/kits/builtin.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..d53ea2568ef371c03b6660f88fa18049b15b749f
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/builtin.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"builtin.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/builtin.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,SAAS,EAAE,MAAM,kBAAkB,CAAC;AA8I7C,SAAS,CAAmB;IAC1B,OAAO,EAAE;QACP,IAAI,MAAM;YACR,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;QACnD,CAAC;QACD,IAAI,OAAO;YACT,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QACpD,CAAC;QACD,IAAI,KAAK;YACP,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QAClD,CAAC;QACD,IAAI,OAAO;YACT,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QACpD,CAAC;QACD,IAAI,UAAU;YACZ,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;QACvD,CAAC;QACD,IAAI,QAAQ;YACV,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;QACrD,CAAC;QACD,IAAI,KAAK;YACP,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QAClD,CAAC;QACD,IAAI,OAAO;YACT,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QACpD,CAAC;QACD,IAAI,OAAO;YACT,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QACpD,CAAC;QACD,IAAI,IAAI;YACN,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;QACjD,CAAC;QACD,IAAI,KAAK;YACP,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QAClD,CAAC;QACD,IAAI,KAAK;YACP,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QAClD,CAAC;QACD,IAAI,KAAK;YACP,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QAClD,CAAC;QACD,IAAI,OAAO;YACT,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QACpD,CAAC;QACD,IAAI,cAAc;YAChB,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,gBAAgB,CAAC,CAAC;QAC3D,CAAC;QACD,IAAI,SAAS;YACX,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;QACtD,CAAC;QACD,IAAI,SAAS;YACX,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;QACtD,CAAC;QACD,IAAI,OAAO;YACT,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QACpD,CAAC;QACD,IAAI,KAAK;YACP,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QAClD,CAAC;QACD,IAAI,MAAM;YACR,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;QACnD,CAAC;QACD,IAAI,MAAM;YACR,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;QACnD,CAAC;QACD,IAAI,MAAM;YACR,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;QACnD,CAAC;QACD,IAAI,GAAG;YACL,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QAChD,CAAC;QACD,IAAI,WAAW;YACb,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;QACxD,CAAC;QACD,IAAI,OAAO;YACT,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QACpD,CAAC;KACF;CACF,CAAC,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/enum-member.d.ts b/dist/src/experimental/typekit/kits/enum-member.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..b2196aa96e7fe2a8ba3efa8054fe0635932ad69e
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/enum-member.d.ts
@@ -0,0 +1,52 @@
+import type { Enum, EnumMember, Type } from "../../../core/types.js";
+import { DecoratorArgs } from "../utils.js";
+/**
+ * A descriptor for creating an enum member.
+ * @experimental
+ */
+export interface EnumMemberDescriptor {
+    /**
+     * The name of the enum member.
+     */
+    name: string;
+    /**
+     * Decorators to apply to the enum member.
+     */
+    decorators?: DecoratorArgs[];
+    /**
+     * The value of the enum member. If not supplied, the value will be the same
+     * as the name.
+     */
+    value?: string | number;
+    /**
+     * The enum that the member belongs to. If not provided here, it is assumed
+     * that it will be set in `enum.build`.
+     */
+    enum?: Enum;
+}
+/**
+ * A kit for working with enum members.
+ * @experimental
+ */
+export interface EnumMemberKit {
+    /**
+     * Create an enum member. The enum member will be finished (i.e. decorators are run).
+     */
+    create(desc: EnumMemberDescriptor): EnumMember;
+    /**
+     * Check if `type` is an enum member type.
+     *
+     * @param type the type to check.
+     */
+    is(type: Type): type is EnumMember;
+}
+interface TypekitExtension {
+    /** @experimental */
+    enumMember: EnumMemberKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=enum-member.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/enum-member.d.ts.map b/dist/src/experimental/typekit/kits/enum-member.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..c57509b9793f9fa7ead777ed699e3e318726d869
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/enum-member.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"enum-member.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/enum-member.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE,MAAM,wBAAwB,CAAC;AAGrE,OAAO,EAAwB,aAAa,EAAE,MAAM,aAAa,CAAC;AAElE;;;GAGG;AACH,MAAM,WAAW,oBAAoB;IACnC;;OAEG;IACH,IAAI,EAAE,MAAM,CAAC;IACb;;OAEG;IACH,UAAU,CAAC,EAAE,aAAa,EAAE,CAAC;IAE7B;;;OAGG;IACH,KAAK,CAAC,EAAE,MAAM,GAAG,MAAM,CAAC;IAExB;;;OAGG;IACH,IAAI,CAAC,EAAE,IAAI,CAAC;CACb;AAED;;;GAGG;AACH,MAAM,WAAW,aAAa;IAC5B;;OAEG;IACH,MAAM,CAAC,IAAI,EAAE,oBAAoB,GAAG,UAAU,CAAC;IAE/C;;;;OAIG;IACH,EAAE,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,IAAI,UAAU,CAAC;CACpC;AAED,UAAU,gBAAgB;IACxB,oBAAoB;IACpB,UAAU,EAAE,aAAa,CAAC;CAC3B;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/enum-member.js b/dist/src/experimental/typekit/kits/enum-member.js
new file mode 100644
index 0000000000000000000000000000000000000000..94642e58ae0f7f8c21a22f53fa3d0a14046de9b5
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/enum-member.js
@@ -0,0 +1,22 @@
+import { defineKit } from "../define-kit.js";
+import { decoratorApplication } from "../utils.js";
+defineKit({
+    enumMember: {
+        create(desc) {
+            const member = this.program.checker.createType({
+                kind: "EnumMember",
+                name: desc.name,
+                value: desc.value,
+                decorators: decoratorApplication(this, desc.decorators),
+                node: undefined,
+                enum: desc.enum, // initialized in enum.build if not provided here
+            });
+            this.program.checker.finishType(member);
+            return member;
+        },
+        is(type) {
+            return type.kind === "EnumMember";
+        },
+    },
+});
+//# sourceMappingURL=enum-member.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/enum-member.js.map b/dist/src/experimental/typekit/kits/enum-member.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..ce9d402a0e9b6594084db0ae5df311423b6e5fd6
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/enum-member.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"enum-member.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/enum-member.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,SAAS,EAAE,MAAM,kBAAkB,CAAC;AAC7C,OAAO,EAAE,oBAAoB,EAAiB,MAAM,aAAa,CAAC;AAwDlE,SAAS,CAAmB;IAC1B,UAAU,EAAE;QACV,MAAM,CAAC,IAAI;YACT,MAAM,MAAM,GAAe,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC;gBACzD,IAAI,EAAE,YAAY;gBAClB,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,KAAK,EAAE,IAAI,CAAC,KAAK;gBACjB,UAAU,EAAE,oBAAoB,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC;gBACvD,IAAI,EAAE,SAAgB;gBACtB,IAAI,EAAE,IAAI,CAAC,IAAW,EAAE,iDAAiD;aAC1E,CAAC,CAAC;YACH,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;YACxC,OAAO,MAAM,CAAC;QAChB,CAAC;QAED,EAAE,CAAC,IAAI;YACL,OAAO,IAAI,CAAC,IAAI,KAAK,YAAY,CAAC;QACpC,CAAC;KACF;CACF,CAAC,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/enum.d.ts b/dist/src/experimental/typekit/kits/enum.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..6b38c389066bc736ea2df7f6bf91ccd68d7b2496
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/enum.d.ts
@@ -0,0 +1,54 @@
+import type { Enum, EnumMember, Type, Union } from "../../../core/types.js";
+import { DecoratorArgs } from "../utils.js";
+/**
+ * Describes an enum type for creation.
+ * @experimental
+ */
+interface EnumDescriptor {
+    /**
+     * The name of the enum declaration.
+     */
+    name: string;
+    /**
+     * Decorators to apply to the enum.
+     */
+    decorators?: DecoratorArgs[];
+    /**
+     * The members of the enum. If a member is an object, each property will be
+     * converted to an EnumMember with the same name and value.
+     */
+    members?: Record<string, string | number> | EnumMember[];
+}
+/**
+ * A kit for working with enum types.
+ * @experimental
+ */
+export interface EnumKit {
+    /**
+     * Build an enum type. The enum type will be finished (i.e. decorators are
+     * run).
+     */
+    create(desc: EnumDescriptor): Enum;
+    /**
+     * Build an equivalent enum from the given union. Union variants which are
+     * not valid enum members are skipped. You can check if a union is a valid
+     * enum with {@link UnionKit.union}'s `isEnumValue`.
+     */
+    createFromUnion(type: Union): Enum;
+    /**
+     * Check if `type` is an enum type.
+     *
+     * @param type the type to check.
+     */
+    is(type: Type): type is Enum;
+}
+interface TypekitExtension {
+    /** @experimental */
+    enum: EnumKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=enum.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/enum.d.ts.map b/dist/src/experimental/typekit/kits/enum.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..9abb4a60e78877820f433e0f7f61b32a37bbe14f
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/enum.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"enum.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/enum.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,wBAAwB,CAAC;AAM5E,OAAO,EAAwB,aAAa,EAAE,MAAM,aAAa,CAAC;AAElE;;;GAGG;AACH,UAAU,cAAc;IACtB;;OAEG;IACH,IAAI,EAAE,MAAM,CAAC;IAEb;;OAEG;IACH,UAAU,CAAC,EAAE,aAAa,EAAE,CAAC;IAE7B;;;OAGG;IACH,OAAO,CAAC,EAAE,MAAM,CAAC,MAAM,EAAE,MAAM,GAAG,MAAM,CAAC,GAAG,UAAU,EAAE,CAAC;CAC1D;AAED;;;GAGG;AACH,MAAM,WAAW,OAAO;IACtB;;;OAGG;IACH,MAAM,CAAC,IAAI,EAAE,cAAc,GAAG,IAAI,CAAC;IAEnC;;;;OAIG;IACH,eAAe,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI,CAAC;IAEnC;;;;OAIG;IACH,EAAE,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,IAAI,IAAI,CAAC;CAC9B;AAED,UAAU,gBAAgB;IACxB,oBAAoB;IACpB,IAAI,EAAE,OAAO,CAAC;CACf;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/enum.js b/dist/src/experimental/typekit/kits/enum.js
new file mode 100644
index 0000000000000000000000000000000000000000..fa22332bf8e8e9962e002b21e1abf736f184a9a3
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/enum.js
@@ -0,0 +1,47 @@
+import { createRekeyableMap } from "../../../utils/misc.js";
+import { defineKit } from "../define-kit.js";
+import { decoratorApplication } from "../utils.js";
+defineKit({
+    enum: {
+        create(desc) {
+            const en = this.program.checker.createType({
+                kind: "Enum",
+                name: desc.name,
+                decorators: decoratorApplication(this, desc.decorators),
+                members: createRekeyableMap(),
+                node: undefined,
+            });
+            if (Array.isArray(desc.members)) {
+                for (const member of desc.members) {
+                    member.enum = en;
+                    en.members.set(member.name, member);
+                }
+            }
+            else {
+                for (const [name, member] of Object.entries(desc.members ?? {})) {
+                    en.members.set(name, this.enumMember.create({ name, value: member, enum: en }));
+                }
+            }
+            this.program.checker.finishType(en);
+            return en;
+        },
+        is(type) {
+            return type.kind === "Enum";
+        },
+        createFromUnion(type) {
+            if (!type.name) {
+                throw new Error("Cannot create an enum from an anonymous union.");
+            }
+            const enumMembers = [];
+            for (const variant of type.variants.values()) {
+                if ((variant.name && typeof variant.name === "symbol") ||
+                    (!this.literal.isString(variant.type) && !this.literal.isNumeric(variant.type))) {
+                    continue;
+                }
+                enumMembers.push(this.enumMember.create({ name: variant.name, value: variant.type.value }));
+            }
+            return this.enum.create({ name: type.name, members: enumMembers });
+        },
+    },
+});
+//# sourceMappingURL=enum.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/enum.js.map b/dist/src/experimental/typekit/kits/enum.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..b99d0939c78a2e170acf1ff7527b6608ac6ab475
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/enum.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"enum.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/enum.ts"],"names":[],"mappings":"AAIA,OAAO,EAAE,kBAAkB,EAAE,MAAM,wBAAwB,CAAC;AAC5D,OAAO,EAAE,SAAS,EAAE,MAAM,kBAAkB,CAAC;AAC7C,OAAO,EAAE,oBAAoB,EAAiB,MAAM,aAAa,CAAC;AA2DlE,SAAS,CAAmB;IAC1B,IAAI,EAAE;QACJ,MAAM,CAAC,IAAI;YACT,MAAM,EAAE,GAAS,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC;gBAC/C,IAAI,EAAE,MAAM;gBACZ,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,UAAU,EAAE,oBAAoB,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC;gBACvD,OAAO,EAAE,kBAAkB,EAAE;gBAC7B,IAAI,EAAE,SAAgB;aACvB,CAAC,CAAC;YAEH,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC;gBAChC,KAAK,MAAM,MAAM,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC;oBAClC,MAAM,CAAC,IAAI,GAAG,EAAE,CAAC;oBACjB,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;gBACtC,CAAC;YACH,CAAC;iBAAM,CAAC;gBACN,KAAK,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,IAAI,EAAE,CAAC,EAAE,CAAC;oBAChE,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;gBAClF,CAAC;YACH,CAAC;YAED,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;YACpC,OAAO,EAAE,CAAC;QACZ,CAAC;QAED,EAAE,CAAC,IAAI;YACL,OAAO,IAAI,CAAC,IAAI,KAAK,MAAM,CAAC;QAC9B,CAAC;QAED,eAAe,CAAC,IAAI;YAClB,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;gBACf,MAAM,IAAI,KAAK,CAAC,gDAAgD,CAAC,CAAC;YACpE,CAAC;YAED,MAAM,WAAW,GAAiB,EAAE,CAAC;YACrC,KAAK,MAAM,OAAO,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,EAAE,CAAC;gBAC7C,IACE,CAAC,OAAO,CAAC,IAAI,IAAI,OAAO,OAAO,CAAC,IAAI,KAAK,QAAQ,CAAC;oBAClD,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,EAC/E,CAAC;oBACD,SAAS;gBACX,CAAC;gBACD,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,EAAE,KAAK,EAAE,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YAC9F,CAAC;YAED,OAAO,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,OAAO,EAAE,WAAW,EAAE,CAAC,CAAC;QACrE,CAAC;KACF;CACF,CAAC,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/index.d.ts b/dist/src/experimental/typekit/kits/index.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..be67f3513a336d8ffbe779716cd4a029126bb764
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/index.d.ts
@@ -0,0 +1,15 @@
+export * from "./array.js";
+export * from "./builtin.js";
+export * from "./enum-member.js";
+export * from "./enum.js";
+export * from "./literal.js";
+export * from "./model-property.js";
+export * from "./model.js";
+export * from "./operation.js";
+export * from "./record.js";
+export * from "./scalar.js";
+export * from "./type.js";
+export * from "./union-variant.js";
+export * from "./union.js";
+export * from "./value.js";
+//# sourceMappingURL=index.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/index.d.ts.map b/dist/src/experimental/typekit/kits/index.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..4439e526ac841b20646ab9c8ca0d7d7fc483bb9b
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/index.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/index.ts"],"names":[],"mappings":"AAAA,cAAc,YAAY,CAAC;AAC3B,cAAc,cAAc,CAAC;AAC7B,cAAc,kBAAkB,CAAC;AACjC,cAAc,WAAW,CAAC;AAC1B,cAAc,cAAc,CAAC;AAC7B,cAAc,qBAAqB,CAAC;AACpC,cAAc,YAAY,CAAC;AAC3B,cAAc,gBAAgB,CAAC;AAC/B,cAAc,aAAa,CAAC;AAC5B,cAAc,aAAa,CAAC;AAC5B,cAAc,WAAW,CAAC;AAC1B,cAAc,oBAAoB,CAAC;AACnC,cAAc,YAAY,CAAC;AAC3B,cAAc,YAAY,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/index.js b/dist/src/experimental/typekit/kits/index.js
new file mode 100644
index 0000000000000000000000000000000000000000..7b57fc035454670416fdcb69fe5db4b2c757b2cc
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/index.js
@@ -0,0 +1,15 @@
+export * from "./array.js";
+export * from "./builtin.js";
+export * from "./enum-member.js";
+export * from "./enum.js";
+export * from "./literal.js";
+export * from "./model-property.js";
+export * from "./model.js";
+export * from "./operation.js";
+export * from "./record.js";
+export * from "./scalar.js";
+export * from "./type.js";
+export * from "./union-variant.js";
+export * from "./union.js";
+export * from "./value.js";
+//# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/index.js.map b/dist/src/experimental/typekit/kits/index.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..496cc301eaf6c4556fb3557f79a7f797bf77c836
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/index.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/index.ts"],"names":[],"mappings":"AAAA,cAAc,YAAY,CAAC;AAC3B,cAAc,cAAc,CAAC;AAC7B,cAAc,kBAAkB,CAAC;AACjC,cAAc,WAAW,CAAC;AAC1B,cAAc,cAAc,CAAC;AAC7B,cAAc,qBAAqB,CAAC;AACpC,cAAc,YAAY,CAAC;AAC3B,cAAc,gBAAgB,CAAC;AAC/B,cAAc,aAAa,CAAC;AAC5B,cAAc,aAAa,CAAC;AAC5B,cAAc,WAAW,CAAC;AAC1B,cAAc,oBAAoB,CAAC;AACnC,cAAc,YAAY,CAAC;AAC3B,cAAc,YAAY,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/literal.d.ts b/dist/src/experimental/typekit/kits/literal.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..91e8d832795a7bb14738e9d6a8f3a2ce5a1e2df9
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/literal.d.ts
@@ -0,0 +1,69 @@
+import type { BooleanLiteral, NumericLiteral, StringLiteral, Type } from "../../../core/types.js";
+/** @experimental */
+export interface LiteralKit {
+    /**
+     * Create a literal type from a JavaScript value.
+     *
+     * @param value The JavaScript value to turn into a TypeSpec literal type.
+     */
+    create(value: string | number | boolean): StringLiteral | NumericLiteral | BooleanLiteral;
+    /**
+     * Create a string literal type from a JavaScript string value.
+     *
+     * @param value The string value.
+     */
+    createString(value: string): StringLiteral;
+    /**
+     * Create a numeric literal type from a JavaScript number value.
+     *
+     * @param value The numeric value.
+     */
+    createNumeric(value: number): NumericLiteral;
+    /**
+     * Create a boolean literal type from a JavaScript boolean value.
+     *
+     * @param value The boolean value.
+     */
+    createBoolean(value: boolean): BooleanLiteral;
+    /**
+     * Check if `type` is a literal type.
+     *
+     * @param type The type to check.
+     */
+    is(type: Type): type is StringLiteral | NumericLiteral | BooleanLiteral;
+    /**
+     * Check if `type` is a string literal type.
+     *
+     * @param type The type to check.
+     */
+    isString(type: Type): type is StringLiteral;
+    /**
+     * Check if `type` is a numeric literal type.
+     *
+     * @param type The type to check.
+     */
+    isNumeric(type: Type): type is NumericLiteral;
+    /**
+     * Check if `type` is a boolean literal type.
+     *
+     * @param type The type to check.
+     */
+    isBoolean(type: Type): type is BooleanLiteral;
+}
+interface TypekitExtension {
+    /**
+     * Utilities for working with literal types.
+     *
+     * Literal types are types that represent a single value, such as a string,
+     * number, or boolean.
+     *
+     * @experimental
+     */
+    literal: LiteralKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=literal.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/literal.d.ts.map b/dist/src/experimental/typekit/kits/literal.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..489516e7e40b844429177a124a0e5bc3198a68d4
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/literal.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"literal.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/literal.ts"],"names":[],"mappings":"AACA,OAAO,KAAK,EAAE,cAAc,EAAE,cAAc,EAAE,aAAa,EAAE,IAAI,EAAE,MAAM,wBAAwB,CAAC;AAGlG,oBAAoB;AACpB,MAAM,WAAW,UAAU;IACzB;;;;OAIG;IACH,MAAM,CAAC,KAAK,EAAE,MAAM,GAAG,MAAM,GAAG,OAAO,GAAG,aAAa,GAAG,cAAc,GAAG,cAAc,CAAC;IAE1F;;;;OAIG;IACH,YAAY,CAAC,KAAK,EAAE,MAAM,GAAG,aAAa,CAAC;IAE3C;;;;OAIG;IACH,aAAa,CAAC,KAAK,EAAE,MAAM,GAAG,cAAc,CAAC;IAE7C;;;;OAIG;IACH,aAAa,CAAC,KAAK,EAAE,OAAO,GAAG,cAAc,CAAC;IAE9C;;;;OAIG;IACH,EAAE,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,IAAI,aAAa,GAAG,cAAc,GAAG,cAAc,CAAC;IAExE;;;;OAIG;IACH,QAAQ,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,IAAI,aAAa,CAAC;IAE5C;;;;OAIG;IACH,SAAS,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,IAAI,cAAc,CAAC;IAE9C;;;;OAIG;IACH,SAAS,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,IAAI,cAAc,CAAC;CAC/C;AAED,UAAU,gBAAgB;IACxB;;;;;;;OAOG;IACH,OAAO,EAAE,UAAU,CAAC;CACrB;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/literal.js b/dist/src/experimental/typekit/kits/literal.js
new file mode 100644
index 0000000000000000000000000000000000000000..9634061df2dbe2a396087ffde4af68a8664b516e
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/literal.js
@@ -0,0 +1,51 @@
+import { Numeric } from "../../../core/numeric.js";
+import { defineKit } from "../define-kit.js";
+defineKit({
+    literal: {
+        create(value) {
+            if (typeof value === "string") {
+                return this.literal.createString(value);
+            }
+            else if (typeof value === "number") {
+                return this.literal.createNumeric(value);
+            }
+            else {
+                return this.literal.createBoolean(value);
+            }
+        },
+        createString(value) {
+            return this.program.checker.createType({
+                kind: "String",
+                value,
+            });
+        },
+        createNumeric(value) {
+            const valueAsString = String(value);
+            return this.program.checker.createType({
+                kind: "Number",
+                value,
+                valueAsString,
+                numericValue: Numeric(valueAsString),
+            });
+        },
+        createBoolean(value) {
+            return this.program.checker.createType({
+                kind: "Boolean",
+                value,
+            });
+        },
+        isBoolean(type) {
+            return type.kind === "Boolean";
+        },
+        isString(type) {
+            return type.kind === "String";
+        },
+        isNumeric(type) {
+            return type.kind === "Number";
+        },
+        is(type) {
+            return (this.literal.isBoolean(type) || this.literal.isNumeric(type) || this.literal.isString(type));
+        },
+    },
+});
+//# sourceMappingURL=literal.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/literal.js.map b/dist/src/experimental/typekit/kits/literal.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..47a3c4f7f0d87a54b726d249ba11a3d443d8717c
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/literal.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"literal.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/literal.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,OAAO,EAAE,MAAM,0BAA0B,CAAC;AAEnD,OAAO,EAAE,SAAS,EAAE,MAAM,kBAAkB,CAAC;AA6E7C,SAAS,CAAmB;IAC1B,OAAO,EAAE;QACP,MAAM,CAAC,KAAK;YACV,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE,CAAC;gBAC9B,OAAO,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;YAC1C,CAAC;iBAAM,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE,CAAC;gBACrC,OAAO,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAC3C,CAAC;iBAAM,CAAC;gBACN,OAAO,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAC3C,CAAC;QACH,CAAC;QACD,YAAY,CAAC,KAAK;YAChB,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC;gBACrC,IAAI,EAAE,QAAQ;gBACd,KAAK;aACN,CAAC,CAAC;QACL,CAAC;QAED,aAAa,CAAC,KAAK;YACjB,MAAM,aAAa,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;YAEpC,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC;gBACrC,IAAI,EAAE,QAAQ;gBACd,KAAK;gBACL,aAAa;gBACb,YAAY,EAAE,OAAO,CAAC,aAAa,CAAC;aACrC,CAAC,CAAC;QACL,CAAC;QAED,aAAa,CAAC,KAAK;YACjB,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC;gBACrC,IAAI,EAAE,SAAS;gBACf,KAAK;aACN,CAAC,CAAC;QACL,CAAC;QAED,SAAS,CAAC,IAAI;YACZ,OAAO,IAAI,CAAC,IAAI,KAAK,SAAS,CAAC;QACjC,CAAC;QACD,QAAQ,CAAC,IAAI;YACX,OAAO,IAAI,CAAC,IAAI,KAAK,QAAQ,CAAC;QAChC,CAAC;QACD,SAAS,CAAC,IAAI;YACZ,OAAO,IAAI,CAAC,IAAI,KAAK,QAAQ,CAAC;QAChC,CAAC;QACD,EAAE,CAAC,IAAI;YACL,OAAO,CACL,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAC5F,CAAC;QACJ,CAAC;KACF;CACF,CAAC,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/model-property.d.ts b/dist/src/experimental/typekit/kits/model-property.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..f304b0147478505fa6da4004051cbe2de6cba5f6
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/model-property.d.ts
@@ -0,0 +1,82 @@
+import type { Enum, EnumMember, ModelProperty, Type, Value } from "../../../core/types.js";
+import { EncodeData } from "../../../lib/decorators.js";
+/**
+ * A descriptor for a model property.
+ * @experimental
+ */
+export interface ModelPropertyDescriptor {
+    /**
+     * The name of the model property.
+     */
+    name: string;
+    /**
+     * The type of the model property.
+     */
+    type: Type;
+    /**
+     * Whether the model property is optional.
+     */
+    optional?: boolean;
+    /**
+     * Default value
+     */
+    defaultValue?: Value | undefined;
+}
+/**
+ * Utilities for working with model properties.
+ *
+ * For many reflection operations, the metadata being asked for may be found
+ * on the model property or the type of the model property. In such cases,
+ * these operations will return the metadata from the model property if it
+ * exists, or the type of the model property if it exists.
+ * @experimental
+ */
+export interface ModelPropertyKit {
+    /**
+     * Creates a modelProperty type.
+     * @param desc The descriptor of the model property.
+     */
+    create(desc: ModelPropertyDescriptor): ModelProperty;
+    /**
+     * Check if the given `type` is a model property.
+     *
+     * @param type The type to check.
+     */
+    is(type: Type): type is ModelProperty;
+    /**
+     * Get the encoding of the model property or its type. The property's type
+     * must be a scalar.
+     *
+     * @param property The model property to get the encoding for.
+     */
+    getEncoding(property: ModelProperty): EncodeData | undefined;
+    /**
+     * Get the format of the model property or its type. The property's type must
+     * be a string.
+     *
+     * @param property The model property to get the format for.
+     */
+    getFormat(property: ModelProperty): string | undefined;
+    /**
+     * Get the visibility of the model property.
+     */
+    getVisibilityForClass(property: ModelProperty, visibilityClass: Enum): Set<EnumMember>;
+}
+interface TypekitExtension {
+    /**
+     * Utilities for working with model properties.
+     *
+     * For many reflection operations, the metadata being asked for may be found
+     * on the model property or the type of the model property. In such cases,
+     * these operations will return the metadata from the model property if it
+     * exists, or the type of the model property if it exists.
+     * @experimental
+     */
+    modelProperty: ModelPropertyKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=model-property.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/model-property.d.ts.map b/dist/src/experimental/typekit/kits/model-property.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..5d56dab2694cfb4abbd84a99faa956e1600e2137
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/model-property.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"model-property.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/model-property.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,IAAI,EAAE,UAAU,EAAE,aAAa,EAAU,IAAI,EAAE,KAAK,EAAE,MAAM,wBAAwB,CAAC;AAEnG,OAAO,EAAE,UAAU,EAAwB,MAAM,4BAA4B,CAAC;AAG9E;;;GAGG;AACH,MAAM,WAAW,uBAAuB;IACtC;;OAEG;IACH,IAAI,EAAE,MAAM,CAAC;IAEb;;OAEG;IACH,IAAI,EAAE,IAAI,CAAC;IAEX;;OAEG;IACH,QAAQ,CAAC,EAAE,OAAO,CAAC;IAEnB;;OAEG;IACH,YAAY,CAAC,EAAE,KAAK,GAAG,SAAS,CAAC;CAClC;AAED;;;;;;;;GAQG;AACH,MAAM,WAAW,gBAAgB;IAC/B;;;OAGG;IACH,MAAM,CAAC,IAAI,EAAE,uBAAuB,GAAG,aAAa,CAAC;IACrD;;;;OAIG;IACH,EAAE,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,IAAI,aAAa,CAAC;IAEtC;;;;;OAKG;IACH,WAAW,CAAC,QAAQ,EAAE,aAAa,GAAG,UAAU,GAAG,SAAS,CAAC;IAE7D;;;;;OAKG;IACH,SAAS,CAAC,QAAQ,EAAE,aAAa,GAAG,MAAM,GAAG,SAAS,CAAC;IAEvD;;OAEG;IACH,qBAAqB,CAAC,QAAQ,EAAE,aAAa,EAAE,eAAe,EAAE,IAAI,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC;CACxF;AAED,UAAU,gBAAgB;IACxB;;;;;;;;OAQG;IACH,aAAa,EAAE,gBAAgB,CAAC;CACjC;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/model-property.js b/dist/src/experimental/typekit/kits/model-property.js
new file mode 100644
index 0000000000000000000000000000000000000000..2365ec407642e9c672668769bd14f779eabe7f75
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/model-property.js
@@ -0,0 +1,31 @@
+import { getVisibilityForClass } from "../../../core/visibility/core.js";
+import { getEncode, getFormat } from "../../../lib/decorators.js";
+import { defineKit } from "../define-kit.js";
+defineKit({
+    modelProperty: {
+        is(type) {
+            return type.kind === "ModelProperty";
+        },
+        getEncoding(type) {
+            return getEncode(this.program, type) ?? getEncode(this.program, type.type);
+        },
+        getFormat(type) {
+            return getFormat(this.program, type) ?? getFormat(this.program, type.type);
+        },
+        getVisibilityForClass(property, visibilityClass) {
+            return getVisibilityForClass(this.program, property, visibilityClass);
+        },
+        create(desc) {
+            return this.program.checker.createType({
+                kind: "ModelProperty",
+                name: desc.name,
+                node: undefined,
+                type: desc.type,
+                optional: desc.optional ?? false,
+                decorators: [],
+                defaultValue: desc.defaultValue,
+            });
+        },
+    },
+});
+//# sourceMappingURL=model-property.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/model-property.js.map b/dist/src/experimental/typekit/kits/model-property.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..4175d8eeca92173d43c737523e9d88bb644a1ef0
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/model-property.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"model-property.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/model-property.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,qBAAqB,EAAE,MAAM,kCAAkC,CAAC;AACzE,OAAO,EAAc,SAAS,EAAE,SAAS,EAAE,MAAM,4BAA4B,CAAC;AAC9E,OAAO,EAAE,SAAS,EAAE,MAAM,kBAAkB,CAAC;AAyF7C,SAAS,CAAmB;IAC1B,aAAa,EAAE;QACb,EAAE,CAAC,IAAI;YACL,OAAO,IAAI,CAAC,IAAI,KAAK,eAAe,CAAC;QACvC,CAAC;QAED,WAAW,CAAC,IAAI;YACd,OAAO,SAAS,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,SAAS,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,IAAc,CAAC,CAAC;QACvF,CAAC;QAED,SAAS,CAAC,IAAI;YACZ,OAAO,SAAS,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,SAAS,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,IAAc,CAAC,CAAC;QACvF,CAAC;QAED,qBAAqB,CAAC,QAAQ,EAAE,eAAe;YAC7C,OAAO,qBAAqB,CAAC,IAAI,CAAC,OAAO,EAAE,QAAQ,EAAE,eAAe,CAAC,CAAC;QACxE,CAAC;QACD,MAAM,CAAC,IAAI;YACT,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC;gBACrC,IAAI,EAAE,eAAe;gBACrB,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,IAAI,EAAE,SAAgB;gBACtB,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,QAAQ,EAAE,IAAI,CAAC,QAAQ,IAAI,KAAK;gBAChC,UAAU,EAAE,EAAE;gBACd,YAAY,EAAE,IAAI,CAAC,YAAY;aAChC,CAAC,CAAC;QACL,CAAC;KACF;CACF,CAAC,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/model.d.ts b/dist/src/experimental/typekit/kits/model.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..4bb00ec255f185a3373d377288c0bd5131913744
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/model.d.ts
@@ -0,0 +1,117 @@
+import { DiscriminatedUnionLegacy } from "../../../core/helpers/discriminator-utils.js";
+import type { Model, ModelIndexer, ModelProperty, RekeyableMap, SourceModel, Type } from "../../../core/types.js";
+import { DecoratorArgs } from "../utils.js";
+/**
+ * A descriptor for creating a model.
+ * @experimental
+ */
+export interface ModelDescriptor {
+    /**
+     * The name of the Model. If name is provided, it is a Model  declaration.
+     * Otherwise, it is a Model expression.
+     */
+    name?: string;
+    /**
+     * Decorators to apply to the Model.
+     */
+    decorators?: DecoratorArgs[];
+    /**
+     * Properties of the model.
+     */
+    properties: Record<string, ModelProperty>;
+    /**
+     * Models that extend this model.
+     */
+    derivedModels?: Model[];
+    /**
+     * Models that this model extends.
+     */
+    sourceModels?: SourceModel[];
+    /**
+     * The indexer property of the model.
+     */
+    indexer?: ModelIndexer;
+}
+/**
+ * Utilities for working with models.
+ * @experimental
+ */
+export interface ModelKit {
+    /**
+     * Create a model type.
+     *
+     * @param desc The descriptor of the model.
+     */
+    create(desc: ModelDescriptor): Model;
+    /**
+     * Check if the given `type` is a model..
+     *
+     * @param type The type to check.
+     */
+    is(type: Type): type is Model;
+    /**
+     * Check this is an anonyous model. Specifically, this checks if the
+     * model has a name.
+     *
+     * @param type The model to check.
+     */
+    isExpresion(type: Model): boolean;
+    /**
+     * If the input is anonymous (or the provided filter removes properties)
+     * and there exists a named model with the same set of properties
+     * (ignoring filtered properties), then return that named model.
+     * Otherwise, return the input unchanged.
+     *
+     * This can be used by emitters to find a better name for a set of
+     * properties after filtering. For example, given `{ @metadata prop:
+     * string} & SomeName`, and an emitter that wishes to discard properties
+     * marked with `@metadata`, the emitter can use this to recover that the
+     * best name for the remaining properties is `SomeName`.
+     *
+     * @param model The input model
+     * @param filter An optional filter to apply to the input model's
+     * properties.
+     */
+    getEffectiveModel(model: Model, filter?: (property: ModelProperty) => boolean): Model;
+    /**
+     * Given a model, return the type that is spread
+     * @returns the type that is spread or undefined if no spread
+     */
+    getSpreadType: (model: Model) => Type | undefined;
+    /**
+     * Gets all properties from a model, explicitly defined and implicitly defined.
+     * @param model model to get the properties from
+     */
+    getProperties(model: Model, options?: {
+        includeExtended?: boolean;
+    }): RekeyableMap<string, ModelProperty>;
+    /**
+     * Get the record representing additional properties, if there are additional properties.
+     * This method checks for additional properties in the following cases:
+     * 1. If the model is a Record type.
+     * 2. If the model extends a Record type.
+     * 3. If the model spreads a Record type.
+     *
+     * @param model The model to get the additional properties type of.
+     * @returns The record representing additional properties, or undefined if there are none.
+     */
+    getAdditionalPropertiesRecord(model: Model): Model | undefined;
+    /**
+     * Resolves a discriminated union for the given model from inheritance.
+     * @param type Model to resolve the discriminated union for.
+     */
+    getDiscriminatedUnion(model: Model): DiscriminatedUnionLegacy | undefined;
+}
+interface TypekitExtension {
+    /**
+     * Utilities for working with models.
+     * @experimental
+     */
+    model: ModelKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=model.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/model.d.ts.map b/dist/src/experimental/typekit/kits/model.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..962ca13a9b5eb644cdaa94cb1601aa7ec88591b1
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/model.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"model.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/model.ts"],"names":[],"mappings":"AAEA,OAAO,EACL,wBAAwB,EAEzB,MAAM,8CAA8C,CAAC;AAEtD,OAAO,KAAK,EACV,KAAK,EACL,YAAY,EACZ,aAAa,EACb,YAAY,EACZ,WAAW,EACX,IAAI,EACL,MAAM,wBAAwB,CAAC;AAGhC,OAAO,EAAiC,aAAa,EAAE,MAAM,aAAa,CAAC;AAE3E;;;GAGG;AACH,MAAM,WAAW,eAAe;IAC9B;;;OAGG;IACH,IAAI,CAAC,EAAE,MAAM,CAAC;IAEd;;OAEG;IACH,UAAU,CAAC,EAAE,aAAa,EAAE,CAAC;IAE7B;;OAEG;IACH,UAAU,EAAE,MAAM,CAAC,MAAM,EAAE,aAAa,CAAC,CAAC;IAE1C;;OAEG;IACH,aAAa,CAAC,EAAE,KAAK,EAAE,CAAC;IAExB;;OAEG;IACH,YAAY,CAAC,EAAE,WAAW,EAAE,CAAC;IAC7B;;OAEG;IACH,OAAO,CAAC,EAAE,YAAY,CAAC;CACxB;AAED;;;GAGG;AACH,MAAM,WAAW,QAAQ;IACvB;;;;OAIG;IACH,MAAM,CAAC,IAAI,EAAE,eAAe,GAAG,KAAK,CAAC;IAErC;;;;OAIG;IACH,EAAE,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,IAAI,KAAK,CAAC;IAE9B;;;;;OAKG;IACH,WAAW,CAAC,IAAI,EAAE,KAAK,GAAG,OAAO,CAAC;IAElC;;;;;;;;;;;;;;;OAeG;IACH,iBAAiB,CAAC,KAAK,EAAE,KAAK,EAAE,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,aAAa,KAAK,OAAO,GAAG,KAAK,CAAC;IAEtF;;;OAGG;IACH,aAAa,EAAE,CAAC,KAAK,EAAE,KAAK,KAAK,IAAI,GAAG,SAAS,CAAC;IAClD;;;OAGG;IACH,aAAa,CACX,KAAK,EAAE,KAAK,EACZ,OAAO,CAAC,EAAE;QAAE,eAAe,CAAC,EAAE,OAAO,CAAA;KAAE,GACtC,YAAY,CAAC,MAAM,EAAE,aAAa,CAAC,CAAC;IACvC;;;;;;;;;OASG;IACH,6BAA6B,CAAC,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG,SAAS,CAAC;IAC/D;;;OAGG;IACH,qBAAqB,CAAC,KAAK,EAAE,KAAK,GAAG,wBAAwB,GAAG,SAAS,CAAC;CAC3E;AAED,UAAU,gBAAgB;IACxB;;;OAGG;IACH,KAAK,EAAE,QAAQ,CAAC;CACjB;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/model.js b/dist/src/experimental/typekit/kits/model.js
new file mode 100644
index 0000000000000000000000000000000000000000..ad9604a6694570b3bb8864e4f5f2edcb6a930e42
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/model.js
@@ -0,0 +1,105 @@
+import { getEffectiveModelType } from "../../../core/checker.js";
+import { ignoreDiagnostics } from "../../../core/diagnostics.js";
+import { getDiscriminatedUnionFromInheritance, } from "../../../core/helpers/discriminator-utils.js";
+import { getDiscriminator } from "../../../core/intrinsic-type-state.js";
+import { createRekeyableMap } from "../../../utils/misc.js";
+import { defineKit } from "../define-kit.js";
+import { copyMap, decoratorApplication } from "../utils.js";
+const spreadCache = new Map();
+defineKit({
+    model: {
+        create(desc) {
+            const properties = createRekeyableMap(Array.from(Object.entries(desc.properties)));
+            const model = this.program.checker.createType({
+                kind: "Model",
+                name: desc.name ?? "",
+                decorators: decoratorApplication(this, desc.decorators),
+                properties: properties,
+                node: undefined,
+                derivedModels: desc.derivedModels ?? [],
+                sourceModels: desc.sourceModels ?? [],
+                indexer: desc.indexer,
+            });
+            this.program.checker.finishType(model);
+            return model;
+        },
+        is(type) {
+            return type.kind === "Model";
+        },
+        isExpresion(type) {
+            return type.name === "";
+        },
+        getEffectiveModel(model, filter) {
+            return getEffectiveModelType(this.program, model, filter);
+        },
+        getSpreadType(model) {
+            if (spreadCache.has(model)) {
+                return spreadCache.get(model);
+            }
+            if (!model.indexer) {
+                return undefined;
+            }
+            if (model.indexer.key.name === "string") {
+                const record = this.record.create(model.indexer.value);
+                spreadCache.set(model, record);
+                return record;
+            }
+            if (model.indexer.key.name === "integer") {
+                const array = this.array.create(model.indexer.value);
+                spreadCache.set(model, array);
+                return array;
+            }
+            return model.indexer.value;
+        },
+        getProperties(model, options = {}) {
+            // Add explicitly defined properties
+            const properties = copyMap(model.properties);
+            // Add discriminator property if it exists
+            const discriminator = this.type.getDiscriminator(model);
+            if (discriminator) {
+                const discriminatorName = discriminator.propertyName;
+                properties.set(discriminatorName, this.modelProperty.create({ name: discriminatorName, type: this.builtin.string }));
+            }
+            if (options.includeExtended) {
+                let base = model.baseModel;
+                while (base) {
+                    for (const [key, value] of base.properties) {
+                        if (!properties.has(key)) {
+                            properties.set(key, value);
+                        }
+                    }
+                    base = base.baseModel;
+                }
+            }
+            // TODO: Add Spread?
+            return properties;
+        },
+        getAdditionalPropertiesRecord(model) {
+            // model MyModel is Record<> {} should be model with additional properties
+            if (this.model.is(model) && model.sourceModel && this.record.is(model.sourceModel)) {
+                return model.sourceModel;
+            }
+            // model MyModel extends Record<> {} should be model with additional properties
+            if (model.baseModel && this.record.is(model.baseModel)) {
+                return model.baseModel;
+            }
+            // model MyModel { ...Record<>} should be model with additional properties
+            const spread = this.model.getSpreadType(model);
+            if (spread && this.model.is(spread) && this.record.is(spread)) {
+                return spread;
+            }
+            if (model.baseModel) {
+                return this.model.getAdditionalPropertiesRecord(model.baseModel);
+            }
+            return undefined;
+        },
+        getDiscriminatedUnion(model) {
+            const discriminator = getDiscriminator(this.program, model);
+            if (!discriminator) {
+                return undefined;
+            }
+            return ignoreDiagnostics(getDiscriminatedUnionFromInheritance(model, discriminator));
+        },
+    },
+});
+//# sourceMappingURL=model.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/model.js.map b/dist/src/experimental/typekit/kits/model.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..3f4c28b3436120a818d43a8de824a44383fc3e17
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/model.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"model.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/model.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/operation.d.ts b/dist/src/experimental/typekit/kits/operation.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..f61e9bfb518d23d0d68769b22258296f887a35ff
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/operation.d.ts
@@ -0,0 +1,49 @@
+import { ModelProperty, Operation, Type } from "../../../core/types.js";
+/**
+ * A descriptor for an operation.
+ * @experimental
+ */
+export interface OperationDescriptor {
+    /**
+     * The name of the model property.
+     */
+    name: string;
+    /**
+     * The parameters to the model
+     */
+    parameters: ModelProperty[];
+    /**
+     * The return type of the model
+     */
+    returnType: Type;
+}
+/**
+ * Utilities for working with operation properties.
+ * @experimental
+ */
+export interface OperationKit {
+    /**
+     * Create an operation type.
+     *
+     * @param desc The descriptor of the operation.
+     */
+    create(desc: OperationDescriptor): Operation;
+    /**
+     * Check if the type is an operation.
+     * @param type type to check
+     */
+    is(type: Type): type is Operation;
+}
+interface TypekitExtension {
+    /**
+     * Utilities for working with operation properties.
+     * @experimental
+     */
+    operation: OperationKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=operation.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/operation.d.ts.map b/dist/src/experimental/typekit/kits/operation.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..a0664d669a948116781aeed6e86da7fd4684ce1a
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/operation.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"operation.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/operation.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,aAAa,EAAE,SAAS,EAAE,IAAI,EAAE,MAAM,wBAAwB,CAAC;AAGxE;;;GAGG;AACH,MAAM,WAAW,mBAAmB;IAClC;;OAEG;IACH,IAAI,EAAE,MAAM,CAAC;IAEb;;OAEG;IACH,UAAU,EAAE,aAAa,EAAE,CAAC;IAE5B;;OAEG;IACH,UAAU,EAAE,IAAI,CAAC;CAClB;AAED;;;GAGG;AACH,MAAM,WAAW,YAAY;IAC3B;;;;OAIG;IACH,MAAM,CAAC,IAAI,EAAE,mBAAmB,GAAG,SAAS,CAAC;IAC7C;;;OAGG;IACH,EAAE,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,IAAI,SAAS,CAAC;CACnC;AAED,UAAU,gBAAgB;IACxB;;;OAGG;IACH,SAAS,EAAE,YAAY,CAAC;CACzB;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/operation.js b/dist/src/experimental/typekit/kits/operation.js
new file mode 100644
index 0000000000000000000000000000000000000000..542c8c3713ec51b320c095c4f7c120174b17ad0a
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/operation.js
@@ -0,0 +1,28 @@
+import { defineKit } from "../define-kit.js";
+defineKit({
+    operation: {
+        is(type) {
+            return type.kind === "Operation";
+        },
+        create(desc) {
+            const parametersModel = this.model.create({
+                name: `${desc.name}Parameters`,
+                properties: desc.parameters.reduce((acc, property) => {
+                    acc[property.name] = property;
+                    return acc;
+                }, {}),
+            });
+            const operation = this.program.checker.createType({
+                kind: "Operation",
+                name: desc.name,
+                decorators: [],
+                parameters: parametersModel,
+                returnType: desc.returnType,
+                node: undefined,
+            });
+            this.program.checker.finishType(operation);
+            return operation;
+        },
+    },
+});
+//# sourceMappingURL=operation.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/operation.js.map b/dist/src/experimental/typekit/kits/operation.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..efd855f19a160551bd015e91a4fc002e026d708a
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/operation.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"operation.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/operation.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,SAAS,EAAE,MAAM,kBAAkB,CAAC;AAqD7C,SAAS,CAAmB;IAC1B,SAAS,EAAE;QACT,EAAE,CAAC,IAAU;YACX,OAAO,IAAI,CAAC,IAAI,KAAK,WAAW,CAAC;QACnC,CAAC;QACD,MAAM,CAAC,IAAI;YACT,MAAM,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;gBACxC,IAAI,EAAE,GAAG,IAAI,CAAC,IAAI,YAAY;gBAC9B,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,MAAM,CAChC,CAAC,GAAG,EAAE,QAAQ,EAAE,EAAE;oBAChB,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,QAAQ,CAAC;oBAC9B,OAAO,GAAG,CAAC;gBACb,CAAC,EACD,EAAmC,CACpC;aACF,CAAC,CAAC;YACH,MAAM,SAAS,GAAc,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC;gBAC3D,IAAI,EAAE,WAAW;gBACjB,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,UAAU,EAAE,EAAE;gBACd,UAAU,EAAE,eAAe;gBAC3B,UAAU,EAAE,IAAI,CAAC,UAAU;gBAC3B,IAAI,EAAE,SAAgB;aACvB,CAAC,CAAC;YACH,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;YAC3C,OAAO,SAAS,CAAC;QACnB,CAAC;KACF;CACF,CAAC,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/realm.d.ts b/dist/src/experimental/typekit/kits/realm.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..4f73739b93726e288e0434e87cecde635fda6ef1
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/realm.d.ts
@@ -0,0 +1,24 @@
+import { Realm } from "../../realm.js";
+/** @experimental */
+export interface RealmKit {
+    /**
+     * Gets the current realm used by the typekit.
+     */
+    get(): Realm;
+    /**
+     * Sets the current realm to be used by the typekit.
+     */
+    set(realm: Realm): void;
+}
+interface BaseTypeKit {
+    /**
+     * Utilities for working with general types.
+     */
+    realm: RealmKit;
+}
+declare module "../define-kit.js" {
+    interface TypekitPrototype extends BaseTypeKit {
+    }
+}
+export {};
+//# sourceMappingURL=realm.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/realm.d.ts.map b/dist/src/experimental/typekit/kits/realm.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..82caeb2a71e6cb8156a3df9ef7cbeaa03189ca95
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/realm.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"realm.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/realm.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,KAAK,EAAE,MAAM,gBAAgB,CAAC;AAGvC,oBAAoB;AACpB,MAAM,WAAW,QAAQ;IACvB;;OAEG;IACH,GAAG,IAAI,KAAK,CAAC;IACb;;OAEG;IACH,GAAG,CAAC,KAAK,EAAE,KAAK,GAAG,IAAI,CAAC;CACzB;AAED,UAAU,WAAW;IACnB;;OAEG;IACH,KAAK,EAAE,QAAQ,CAAC;CACjB;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,gBAAiB,SAAQ,WAAW;KAAG;CAClD"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/realm.js b/dist/src/experimental/typekit/kits/realm.js
new file mode 100644
index 0000000000000000000000000000000000000000..e519a29b3414789ae027f2713d9d6bcaae17acc6
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/realm.js
@@ -0,0 +1,17 @@
+import { Realm } from "../../realm.js";
+import { defineKit } from "../define-kit.js";
+let _realm;
+defineKit({
+    realm: {
+        get() {
+            if (!_realm) {
+                _realm = new Realm(this.program, " typekit realm");
+            }
+            return _realm;
+        },
+        set(realm) {
+            _realm = realm;
+        },
+    },
+});
+//# sourceMappingURL=realm.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/realm.js.map b/dist/src/experimental/typekit/kits/realm.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..e82835c67752fc68074070df475e3cb84cb961e2
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/realm.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"realm.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/realm.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,KAAK,EAAE,MAAM,gBAAgB,CAAC;AACvC,OAAO,EAAE,SAAS,EAAE,MAAM,kBAAkB,CAAC;AAyB7C,IAAI,MAAa,CAAC;AAElB,SAAS,CAAc;IACrB,KAAK,EAAE;QACL,GAAG;YACD,IAAI,CAAC,MAAM,EAAE,CAAC;gBACZ,MAAM,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,gBAAgB,CAAC,CAAC;YACrD,CAAC;YAED,OAAO,MAAM,CAAC;QAChB,CAAC;QACD,GAAG,CAAC,KAAY;YACd,MAAM,GAAG,KAAK,CAAC;QACjB,CAAC;KACF;CACF,CAAC,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/record.d.ts b/dist/src/experimental/typekit/kits/record.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..63e84da5194684f59e8163be15f0db8eaa0d662f
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/record.d.ts
@@ -0,0 +1,33 @@
+import { Model, Type } from "../../../core/types.js";
+/**
+ * RecordKit provides utilities for working with Record Model types.
+ * @experimental
+ */
+export interface RecordKit {
+    /**
+     * Check if the given `type` is a Record.
+     *
+     * @param type The type to check.
+     */
+    is(type: Type): boolean;
+    /**
+     *  Get the element type of a Record
+     * @param type a Record Model type
+     */
+    getElementType(type: Model): Type;
+    /**
+     * Create a Record Model type
+     * @param elementType The type of the elements in the record
+     */
+    create(elementType: Type): Model;
+}
+interface TypekitExtension {
+    /** @experimental */
+    record: RecordKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=record.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/record.d.ts.map b/dist/src/experimental/typekit/kits/record.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..a574762897e7bb8719aa6a8080be0f663d8a6cac
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/record.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"record.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/record.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,wBAAwB,CAAC;AAGrD;;;GAGG;AACH,MAAM,WAAW,SAAS;IACxB;;;;OAIG;IACH,EAAE,CAAC,IAAI,EAAE,IAAI,GAAG,OAAO,CAAC;IACxB;;;OAGG;IACH,cAAc,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI,CAAC;IAClC;;;OAGG;IACH,MAAM,CAAC,WAAW,EAAE,IAAI,GAAG,KAAK,CAAC;CAClC;AAED,UAAU,gBAAgB;IACxB,oBAAoB;IACpB,MAAM,EAAE,SAAS,CAAC;CACnB;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/record.js b/dist/src/experimental/typekit/kits/record.js
new file mode 100644
index 0000000000000000000000000000000000000000..85a1f44d8a5ab4efe4ec977671a697a8fb74d7ef
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/record.js
@@ -0,0 +1,26 @@
+import { isRecordModelType } from "../../../core/type-utils.js";
+import { defineKit } from "../define-kit.js";
+defineKit({
+    record: {
+        is(type) {
+            return (type.kind === "Model" && isRecordModelType(this.program, type) && type.properties.size === 0);
+        },
+        getElementType(type) {
+            if (!this.record.is(type)) {
+                throw new Error("Type is not a record.");
+            }
+            return type.indexer.value;
+        },
+        create(elementType) {
+            return this.model.create({
+                name: "Record",
+                properties: {},
+                indexer: {
+                    key: this.builtin.string,
+                    value: elementType,
+                },
+            });
+        },
+    },
+});
+//# sourceMappingURL=record.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/record.js.map b/dist/src/experimental/typekit/kits/record.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..8f43b329c655a3f06ab59b34319a6fd601ceb2c8
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/record.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"record.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/record.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,iBAAiB,EAAE,MAAM,6BAA6B,CAAC;AAEhE,OAAO,EAAE,SAAS,EAAE,MAAM,kBAAkB,CAAC;AAkC7C,SAAS,CAAmB;IAC1B,MAAM,EAAE;QACN,EAAE,CAAC,IAAI;YACL,OAAO,CACL,IAAI,CAAC,IAAI,KAAK,OAAO,IAAI,iBAAiB,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,KAAK,CAAC,CAC7F,CAAC;QACJ,CAAC;QACD,cAAc,CAAC,IAAI;YACjB,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;gBAC1B,MAAM,IAAI,KAAK,CAAC,uBAAuB,CAAC,CAAC;YAC3C,CAAC;YACD,OAAO,IAAI,CAAC,OAAQ,CAAC,KAAK,CAAC;QAC7B,CAAC;QACD,MAAM,CAAC,WAAW;YAChB,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;gBACvB,IAAI,EAAE,QAAQ;gBACd,UAAU,EAAE,EAAE;gBACd,OAAO,EAAE;oBACP,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM;oBACxB,KAAK,EAAE,WAAW;iBACnB;aACF,CAAC,CAAC;QACL,CAAC;KACF;CACF,CAAC,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/scalar.d.ts b/dist/src/experimental/typekit/kits/scalar.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..a8d4e26d5354fc3b08405bbe59f43b0f921424e9
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/scalar.d.ts
@@ -0,0 +1,360 @@
+import type { Scalar, Type } from "../../../core/types.js";
+import { type EncodeData } from "../../../lib/decorators.js";
+/**
+ * Operations for scalar types like strings, numerics, booleans, dates, etc.
+ * @experimental
+ */
+export interface ScalarKit {
+    /**
+     * Check if `type` is any scalar type.
+     *
+     * @param type The type to check.
+     */
+    is(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard boolean type.
+     *
+     * @param type The type to check.
+     */
+    isBoolean(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard bytes type.
+     *
+     * @param type The type to check.
+     */
+    isBytes(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard decimal type.
+     *
+     * @param type The type to check.
+     */
+    isDecimal(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard decimal128 type.
+     *
+     * @param type The type to check.
+     */
+    isDecimal128(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard duration type.
+     *
+     * @param type The type to check.
+     */
+    isDuration(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard float type.
+     *
+     * @param type The type to check.
+     */
+    isFloat(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard float32 type.
+     *
+     * @param type The type to check.
+     */
+    isFloat32(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard float64 type.
+     *
+     * @param type The type to check.
+     */
+    isFloat64(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard int8 type.
+     *
+     * @param type The type to check.
+     */
+    isInt8(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard int16 type.
+     *
+     * @param type The type to check.
+     */
+    isInt16(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard int32 type.
+     *
+     * @param type The type to check.
+     */
+    isInt32(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard int64 type.
+     *
+     * @param type The type to check.
+     */
+    isInt64(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard integer type.
+     *
+     * @param type The type to check.
+     */
+    isInteger(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard offsetDateTime type.
+     *
+     * @param type The type to check.
+     */
+    isOffsetDateTime(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard plainDate type.
+     *
+     * @param type The type to check.
+     */
+    isPlainDate(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard plainTime type.
+     *
+     * @param type The type to check.
+     */
+    isPlainTime(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard safeint type.
+     *
+     * @param type The type to check.
+     */
+    isSafeint(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard uint8 type.
+     *
+     * @param type The type to check.
+     */
+    isUint8(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard uint16 type.
+     *
+     * @param type The type to check.
+     */
+    isUint16(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard uint32 type.
+     *
+     * @param type The type to check.
+     */
+    isUint32(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard uint64 type.
+     *
+     * @param type The type to check.
+     */
+    isUint64(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard url type.
+     *
+     * @param type The type to check.
+     */
+    isUrl(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard utcDateTime type.
+     *
+     * @param type The type to check.
+     */
+    isUtcDateTime(type: Type): type is Scalar;
+    /**
+     *
+     * @param type The type to check.
+     */
+    isNumeric(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard string type.
+     *
+     * @param type The type to check.
+     */
+    isString(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard boolean type.
+     *
+     * @param type The type to check.
+     */
+    extendsBoolean(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard string type.
+     *
+     * @param type The type to check.
+     */
+    extendsString(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard numeric type.
+     *
+     * @param type The type to check.
+     */
+    extendsNumeric(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard bytes type.
+     *
+     * @param type The type to check.
+     */
+    extendsBytes(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard decimal type.
+     *
+     * @param type The type to check.
+     */
+    extendsDecimal(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard decimal128 type.
+     *
+     * @param type The type to check.
+     */
+    extendsDecimal128(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard duration type.
+     *
+     * @param type The type to check.
+     */
+    extendsDuration(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard float type.
+     *
+     * @param type The type to check.
+     */
+    extendsFloat(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard float32 type.
+     *
+     * @param type The type to check.
+     */
+    extendsFloat32(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard float64 type.
+     *
+     * @param type The type to check.
+     */
+    extendsFloat64(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard int8 type.
+     *
+     * @param type The type to check.
+     */
+    extendsInt8(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard int16 type.
+     *
+     * @param type The type to check.
+     */
+    extendsInt16(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard int32 type.
+     *
+     * @param type The type to check.
+     */
+    extendsInt32(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard int64 type.
+     *
+     * @param type The type to check.
+     */
+    extendsInt64(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard integer type.
+     *
+     * @param type The type to check.
+     */
+    extendsInteger(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard offsetDateTime type.
+     *
+     * @param type The type to check.
+     */
+    extendsOffsetDateTime(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard plainDate type.
+     *
+     * @param type The type to check.
+     */
+    extendsPlainDate(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard plainTime type.
+     *
+     * @param type The type to check.
+     */
+    extendsPlainTime(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard safeint type.
+     *
+     * @param type The type to check.
+     */
+    extendsSafeint(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard uint8 type.
+     *
+     * @param type The type to check.
+     */
+    extendsUint8(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard uint16 type.
+     *
+     * @param type The type to check.
+     */
+    extendsUint16(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard uint32 type.
+     *
+     * @param type The type to check.
+     */
+    extendsUint32(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard uint64 type.
+     *
+     * @param type The type to check.
+     */
+    extendsUint64(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard url type.
+     *
+     * @param type The type to check.
+     */
+    extendsUrl(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard utcDateTime type.
+     *
+     * @param type The type to check.
+     */
+    extendsUtcDateTime(type: Type): type is Scalar;
+    /**
+     * Get the standard built-in base type of a scalar. For all built-in scalar
+     * types (numeric, string, int32, etc.) this will just return the scalar
+     * type. For user-defined scalars, this will return the first base scalar
+     * that is built-in. For user-defined scalars without a standard base type,
+     * this will return null.
+     *
+     * @param type The scalar to check.
+     */
+    getStdBase(type: Scalar): Scalar | null;
+    /**
+     * Get the encoding information for a scalar type. Returns undefined if no
+     * encoding data is specified.
+     *
+     * Note: This will return the encoding data for the scalar type itself, not
+     * the model property that uses the scalar type. If this scalar might be
+     * referenced from a model property, use {@link modelProperty.getEncoding}
+     * instead.
+     *
+     * @param scalar The scalar to get the encoding data for.
+     */
+    getEncoding(scalar: Scalar): EncodeData | undefined;
+    /**
+     * Get the well-known format for a string scalar. Returns undefined if no
+     * format is specified.
+     *
+     * Note: This will return the format data for the scalar type itself, not
+     * the model property that uses the scalar type. If this scalar might be
+     * referenced from a model property, use {@link ModelPropertyKit.getEncoding}
+     * instead.
+     *
+     * @param scalar The scalar to get the format for.
+     */
+    getFormat(scalar: Scalar): string | undefined;
+}
+interface TypekitExtension {
+    /**
+     * Operations for scalar types like strings, numerics, booleans, dates, etc.
+     * @experimental
+     */
+    scalar: ScalarKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=scalar.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/scalar.d.ts.map b/dist/src/experimental/typekit/kits/scalar.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..99cb7fc7cbd1ba7a09b5c4ceee92deddaa65373a
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/scalar.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"scalar.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/scalar.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/scalar.js b/dist/src/experimental/typekit/kits/scalar.js
new file mode 100644
index 0000000000000000000000000000000000000000..51ed18777188a22dfaf91223b423384449a306d0
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/scalar.js
@@ -0,0 +1,91 @@
+import { isIntrinsicType } from "../../../core/decorator-utils.js";
+import { getEncode, getFormat } from "../../../lib/decorators.js";
+import { defineKit } from "../define-kit.js";
+defineKit({
+    scalar: {
+        is(type) {
+            return type.kind === "Scalar";
+        },
+        extendsBoolean: extendsStdType("boolean"),
+        extendsBytes: extendsStdType("bytes"),
+        extendsDecimal: extendsStdType("decimal"),
+        extendsDecimal128: extendsStdType("decimal128"),
+        extendsDuration: extendsStdType("duration"),
+        extendsFloat: extendsStdType("float"),
+        extendsFloat32: extendsStdType("float32"),
+        extendsFloat64: extendsStdType("float64"),
+        extendsInt8: extendsStdType("int8"),
+        extendsInt16: extendsStdType("int16"),
+        extendsInt32: extendsStdType("int32"),
+        extendsInt64: extendsStdType("int64"),
+        extendsInteger: extendsStdType("integer"),
+        extendsNumeric: extendsStdType("numeric"),
+        extendsOffsetDateTime: extendsStdType("offsetDateTime"),
+        extendsPlainDate: extendsStdType("plainDate"),
+        extendsPlainTime: extendsStdType("plainTime"),
+        extendsSafeint: extendsStdType("safeint"),
+        extendsString: extendsStdType("string"),
+        extendsUint8: extendsStdType("uint8"),
+        extendsUint16: extendsStdType("uint16"),
+        extendsUint32: extendsStdType("uint32"),
+        extendsUint64: extendsStdType("uint64"),
+        extendsUrl: extendsStdType("url"),
+        extendsUtcDateTime: extendsStdType("utcDateTime"),
+        isBoolean: isStdType("boolean"),
+        isBytes: isStdType("bytes"),
+        isDecimal: isStdType("decimal"),
+        isDecimal128: isStdType("decimal128"),
+        isDuration: isStdType("duration"),
+        isFloat: isStdType("float"),
+        isFloat32: isStdType("float32"),
+        isFloat64: isStdType("float64"),
+        isInt8: isStdType("int8"),
+        isInt16: isStdType("int16"),
+        isInt32: isStdType("int32"),
+        isInt64: isStdType("int64"),
+        isInteger: isStdType("integer"),
+        isNumeric: isStdType("numeric"),
+        isOffsetDateTime: isStdType("offsetDateTime"),
+        isPlainDate: isStdType("plainDate"),
+        isPlainTime: isStdType("plainTime"),
+        isSafeint: isStdType("safeint"),
+        isString: isStdType("string"),
+        isUint8: isStdType("uint8"),
+        isUint16: isStdType("uint16"),
+        isUint32: isStdType("uint32"),
+        isUint64: isStdType("uint64"),
+        isUrl: isStdType("url"),
+        isUtcDateTime: isStdType("utcDateTime"),
+        getStdBase(type) {
+            const tspNamespace = this.program.resolveTypeReference("TypeSpec")[0];
+            let current = type;
+            while (current) {
+                if (current.namespace === tspNamespace) {
+                    return current;
+                }
+                current = current.baseScalar;
+            }
+            return null;
+        },
+        getEncoding(type) {
+            return getEncode(this.program, type);
+        },
+        getFormat(type) {
+            return getFormat(this.program, type);
+        },
+    },
+});
+function isStdType(typeName) {
+    return function (type) {
+        return type === this.program.checker.getStdType(typeName);
+    };
+}
+function extendsStdType(typeName) {
+    return function (type) {
+        if (!this.scalar.is(type)) {
+            return false;
+        }
+        return isIntrinsicType(this.program, type, typeName);
+    };
+}
+//# sourceMappingURL=scalar.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/scalar.js.map b/dist/src/experimental/typekit/kits/scalar.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..b64d03ff1fc6d9d55189c46820a506a2bcad95cc
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/scalar.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"scalar.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/scalar.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/type.d.ts b/dist/src/experimental/typekit/kits/type.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..262aaff76dcc72b56b9ead6127570c55ae8693ec
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/type.d.ts
@@ -0,0 +1,113 @@
+import { Discriminator } from "../../../core/intrinsic-type-state.js";
+import { Enum, Model, Scalar, Union, type Type } from "../../../core/types.js";
+/**  @experimental */
+export interface TypeTypekit {
+    /**
+     * Clones a type and adds it to the typekit's realm.
+     * @param type Type to clone
+     */
+    clone<T extends Type>(type: T): T;
+    /**
+     * Finishes a type, applying all the decorators.
+     */
+    finishType(type: Type): void;
+    /**
+     * Checks if a type is decorated with @error
+     * @param type The type to check.
+     */
+    isError(type: Type): boolean;
+    /**
+     * Get the name of this type in the specified encoding.
+     */
+    getEncodedName(type: Type & {
+        name: string;
+    }, encoding: string): string;
+    /**
+     * Get the summary of this type as specified by the `@summary` decorator.
+     *
+     * @param type The type to get the summary for.
+     */
+    getSummary(type: Type): string | undefined;
+    /**
+     * Get the documentation of this type as specified by the `@doc` decorator or
+     * the JSDoc comment.
+     *
+     * @param type The type to get the documentation for.
+     */
+    getDoc(type: Type): string | undefined;
+    /**
+     * Get the plausible name of a type. If the type has a name, it will use it otherwise it will try generate a name based on the context.
+     * If the type can't get a name, it will return an empty string.
+     * If the type is a TemplateInstance, it will prefix the name with the template arguments.
+     * @param type The scalar to get the name of.z
+     */
+    getPlausibleName(type: Model | Union | Enum | Scalar): string;
+    /**
+     * Resolves the discriminator for a discriminated union. Returns undefined if the type is not a discriminated union.
+     * @param type
+     */
+    getDiscriminator(type: Model | Union): Discriminator | undefined;
+    /**
+     * Gets the maximum value for a numeric or model property type.
+     * @param type type to get the maximum value for
+     */
+    maxValue(type: Type): number | undefined;
+    /**
+     * Gets the minimum value for a numeric or model property type.
+     * @param type type to get the minimum value for
+     */
+    minValue(type: Type): number | undefined;
+    /**
+     * Gets the maximum value this numeric type should be, exclusive of the given value.
+     * @param type
+     */
+    maxValueExclusive(type: Type): number | undefined;
+    /**
+     * Gets the minimum value this numeric type should be, exclusive of the given value.
+     * @param type type to get the minimum value for
+     */
+    minValueExclusive(type: Type): number | undefined;
+    /**
+     * Gets the maximum length for a string type.
+     * @param type type to get the maximum length for
+     */
+    maxLength(type: Type): number | undefined;
+    /**
+     * Gets the minimum length for a string type.
+     * @param type type to get the minimum length for
+     */
+    minLength(type: Type): number | undefined;
+    /**
+     * Gets the maximum number of items for an array type.
+     * @param type type to get the maximum number of items for
+     */
+    maxItems(type: Type): number | undefined;
+    /**
+     * Gets the minimum number of items for an array type.
+     * @param type type to get the minimum number of items for
+     */
+    minItems(type: Type): number | undefined;
+    /**
+     * Checks if the given type is a never type.
+     */
+    isNever(type: Type): boolean;
+    /**
+     * Checks if the given type is a user defined type. Non-user defined types are defined in the compiler or other libraries imported by the spec.
+     * @param type The type to check.
+     * @returns True if the type is a user defined type, false otherwise.
+     */
+    isUserDefined(type: Type): boolean;
+}
+interface TypekitExtension {
+    /**
+     * Utilities for working with general types.
+     * @experimental
+     */
+    type: TypeTypekit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=type.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/type.d.ts.map b/dist/src/experimental/typekit/kits/type.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..670a5d40e0e9af01e2c1377fc1ebfefbcef10337
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/type.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"type.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/type.ts"],"names":[],"mappings":"AAGA,OAAO,EACL,aAAa,EAUd,MAAM,uCAAuC,CAAC;AAE/C,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,IAAI,EAAE,MAAM,wBAAwB,CAAC;AAQ/E,qBAAqB;AACrB,MAAM,WAAW,WAAW;IAC1B;;;OAGG;IACH,KAAK,CAAC,CAAC,SAAS,IAAI,EAAE,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC;IAClC;;OAEG;IACH,UAAU,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,CAAC;IAC7B;;;OAGG;IACH,OAAO,CAAC,IAAI,EAAE,IAAI,GAAG,OAAO,CAAC;IAC7B;;OAEG;IACH,cAAc,CAAC,IAAI,EAAE,IAAI,GAAG;QAAE,IAAI,EAAE,MAAM,CAAA;KAAE,EAAE,QAAQ,EAAE,MAAM,GAAG,MAAM,CAAC;IAExE;;;;OAIG;IACH,UAAU,CAAC,IAAI,EAAE,IAAI,GAAG,MAAM,GAAG,SAAS,CAAC;IAE3C;;;;;OAKG;IACH,MAAM,CAAC,IAAI,EAAE,IAAI,GAAG,MAAM,GAAG,SAAS,CAAC;IACvC;;;;;OAKG;IACH,gBAAgB,CAAC,IAAI,EAAE,KAAK,GAAG,KAAK,GAAG,IAAI,GAAG,MAAM,GAAG,MAAM,CAAC;IAC9D;;;OAGG;IACH,gBAAgB,CAAC,IAAI,EAAE,KAAK,GAAG,KAAK,GAAG,aAAa,GAAG,SAAS,CAAC;IACjE;;;OAGG;IACH,QAAQ,CAAC,IAAI,EAAE,IAAI,GAAG,MAAM,GAAG,SAAS,CAAC;IACzC;;;OAGG;IACH,QAAQ,CAAC,IAAI,EAAE,IAAI,GAAG,MAAM,GAAG,SAAS,CAAC;IAEzC;;;OAGG;IACH,iBAAiB,CAAC,IAAI,EAAE,IAAI,GAAG,MAAM,GAAG,SAAS,CAAC;IAElD;;;OAGG;IACH,iBAAiB,CAAC,IAAI,EAAE,IAAI,GAAG,MAAM,GAAG,SAAS,CAAC;IAElD;;;OAGG;IACH,SAAS,CAAC,IAAI,EAAE,IAAI,GAAG,MAAM,GAAG,SAAS,CAAC;IAC1C;;;OAGG;IACH,SAAS,CAAC,IAAI,EAAE,IAAI,GAAG,MAAM,GAAG,SAAS,CAAC;IAC1C;;;OAGG;IACH,QAAQ,CAAC,IAAI,EAAE,IAAI,GAAG,MAAM,GAAG,SAAS,CAAC;IACzC;;;OAGG;IACH,QAAQ,CAAC,IAAI,EAAE,IAAI,GAAG,MAAM,GAAG,SAAS,CAAC;IACzC;;OAEG;IACH,OAAO,CAAC,IAAI,EAAE,IAAI,GAAG,OAAO,CAAC;IAC7B;;;;OAIG;IACH,aAAa,CAAC,IAAI,EAAE,IAAI,GAAG,OAAO,CAAC;CACpC;AAED,UAAU,gBAAgB;IACxB;;;OAGG;IACH,IAAI,EAAE,WAAW,CAAC;CACnB;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/type.js b/dist/src/experimental/typekit/kits/type.js
new file mode 100644
index 0000000000000000000000000000000000000000..81a5782038c346b1d7f04014bb0a568a2ae38d19
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/type.js
@@ -0,0 +1,150 @@
+import { ignoreDiagnostics } from "../../../core/diagnostics.js";
+import { getDiscriminatedUnion } from "../../../core/helpers/discriminator-utils.js";
+import { getLocationContext } from "../../../core/helpers/location-context.js";
+import { getDiscriminator, getMaxItems, getMaxLength, getMaxValue, getMaxValueExclusive, getMinItems, getMinLength, getMinValue, getMinValueExclusive, } from "../../../core/intrinsic-type-state.js";
+import { isErrorType, isNeverType } from "../../../core/type-utils.js";
+import { getDoc, getSummary } from "../../../lib/decorators.js";
+import { resolveEncodedName } from "../../../lib/encoded-names.js";
+import { defineKit } from "../define-kit.js";
+import { $ } from "../index.js";
+import { copyMap } from "../utils.js";
+import { getPlausibleName } from "../utils/get-plausible-name.js";
+defineKit({
+    type: {
+        finishType(type) {
+            this.program.checker.finishType(type);
+        },
+        clone(type) {
+            let clone;
+            switch (type.kind) {
+                case "Model":
+                    clone = this.program.checker.createType({
+                        ...type,
+                        decorators: [...type.decorators],
+                        derivedModels: [...type.derivedModels],
+                        sourceModels: type.sourceModels.map((x) => ({ ...x })),
+                        properties: copyMap(type.properties),
+                        indexer: type.indexer ? { ...type.indexer } : undefined,
+                    });
+                    break;
+                case "Union":
+                    clone = this.program.checker.createType({
+                        ...type,
+                        decorators: [...type.decorators],
+                        variants: copyMap(type.variants),
+                        get options() {
+                            return Array.from(this.variants.values()).map((v) => v.type);
+                        },
+                    });
+                    break;
+                case "Interface":
+                    clone = this.program.checker.createType({
+                        ...type,
+                        decorators: [...type.decorators],
+                        operations: copyMap(type.operations),
+                    });
+                    break;
+                case "Enum":
+                    clone = this.program.checker.createType({
+                        ...type,
+                        decorators: [...type.decorators],
+                        members: copyMap(type.members),
+                    });
+                    break;
+                case "Namespace":
+                    clone = this.program.checker.createType({
+                        ...type,
+                        decorators: [...type.decorators],
+                        instantiationParameters: type.instantiationParameters
+                            ? [...type.instantiationParameters]
+                            : undefined,
+                        models: copyMap(type.models),
+                        decoratorDeclarations: copyMap(type.decoratorDeclarations),
+                        enums: copyMap(type.enums),
+                        unions: copyMap(type.unions),
+                        operations: copyMap(type.operations),
+                        interfaces: copyMap(type.interfaces),
+                        namespaces: copyMap(type.namespaces),
+                        scalars: copyMap(type.scalars),
+                    });
+                    break;
+                case "Scalar":
+                    clone = this.program.checker.createType({
+                        ...type,
+                        decorators: [...type.decorators],
+                        derivedScalars: [...type.derivedScalars],
+                        constructors: copyMap(type.constructors),
+                    });
+                    break;
+                default:
+                    clone = this.program.checker.createType({
+                        ...type,
+                        ...("decorators" in type ? { decorators: [...type.decorators] } : {}),
+                    });
+                    break;
+            }
+            this.realm.addType(clone);
+            return clone;
+        },
+        isError(type) {
+            return isErrorType(type);
+        },
+        getEncodedName(type, encoding) {
+            return resolveEncodedName(this.program, type, encoding);
+        },
+        getSummary(type) {
+            return getSummary(this.program, type);
+        },
+        getDoc(type) {
+            return getDoc(this.program, type);
+        },
+        getPlausibleName(type) {
+            return getPlausibleName(type);
+        },
+        getDiscriminator(type) {
+            let discriminator;
+            if ($.model.is(type)) {
+                discriminator = getDiscriminator(this.program, type);
+            }
+            else {
+                const unionDiscriminator = ignoreDiagnostics(getDiscriminatedUnion(this.program, type));
+                const propertyName = unionDiscriminator?.options.discriminatorPropertyName;
+                if (propertyName) {
+                    discriminator = { propertyName };
+                }
+            }
+            return discriminator;
+        },
+        maxValue(type) {
+            return getMaxValue(this.program, type);
+        },
+        minValue(type) {
+            return getMinValue(this.program, type);
+        },
+        maxLength(type) {
+            return getMaxLength(this.program, type);
+        },
+        minLength(type) {
+            return getMinLength(this.program, type);
+        },
+        maxItems(type) {
+            return getMaxItems(this.program, type);
+        },
+        maxValueExclusive(type) {
+            return getMaxValueExclusive(this.program, type);
+        },
+        minValueExclusive(type) {
+            return getMinValueExclusive(this.program, type);
+        },
+        minItems(type) {
+            return getMinItems(this.program, type);
+        },
+        isNever(type) {
+            return isNeverType(type);
+        },
+        isUserDefined(type) {
+            return getLocationContext(this.program, type).type === "project";
+        },
+    },
+});
+//# sourceMappingURL=type.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/type.js.map b/dist/src/experimental/typekit/kits/type.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..3359b4740cb65fe8d0372b7b8390283880ae572f
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/type.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"type.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/type.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/union-variant.d.ts b/dist/src/experimental/typekit/kits/union-variant.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..6b3678511b7ce1c77e6abc63ebdbfd846b15d49e
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/union-variant.d.ts
@@ -0,0 +1,60 @@
+import type { Type, Union, UnionVariant } from "../../../core/types.js";
+import { DecoratorArgs } from "../utils.js";
+/**
+ * A descriptor for a union variant.
+ * @experimental
+ */
+export interface UnionVariantDescriptor {
+    /**
+     * The name of the union variant.
+     */
+    name?: string | symbol;
+    /**
+     * Decorators to apply to the union variant.
+     */
+    decorators?: DecoratorArgs[];
+    /**
+     * The type of the union variant.
+     */
+    type: Type;
+    /**
+     * The union that the variant belongs to. If not provided here, it is assumed
+     * that it will be set in `union.build`.
+     */
+    union?: Union;
+}
+/**
+ * Utilities for working with union variants.
+ *
+ * Union variants are types that represent a single value within a union that can be one of
+ * several types.
+ *
+ * @experimental
+ */
+export interface UnionVariantKit {
+    /**
+     * Create a union variant.
+     *
+     * @param desc The descriptor of the union variant.
+     */
+    create(desc: UnionVariantDescriptor): UnionVariant;
+    /**
+     * Check if the given `type` is a union.
+     *
+     * @param type The type to check.
+     */
+    is(type: Type): type is UnionVariant;
+}
+interface TypekitExtension {
+    /**
+     * Utilities for working with union variants.
+     * @experimental
+     */
+    unionVariant: UnionVariantKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=union-variant.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/union-variant.d.ts.map b/dist/src/experimental/typekit/kits/union-variant.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..e0cc190a6fa878a2968ce2e7325a37aa84550e25
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/union-variant.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"union-variant.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/union-variant.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,YAAY,EAAE,MAAM,wBAAwB,CAAC;AAExE,OAAO,EAAwB,aAAa,EAAE,MAAM,aAAa,CAAC;AAElE;;;GAGG;AACH,MAAM,WAAW,sBAAsB;IACrC;;OAEG;IACH,IAAI,CAAC,EAAE,MAAM,GAAG,MAAM,CAAC;IAEvB;;OAEG;IACH,UAAU,CAAC,EAAE,aAAa,EAAE,CAAC;IAE7B;;OAEG;IACH,IAAI,EAAE,IAAI,CAAC;IAEX;;;OAGG;IACH,KAAK,CAAC,EAAE,KAAK,CAAC;CACf;AAED;;;;;;;GAOG;AACH,MAAM,WAAW,eAAe;IAC9B;;;;OAIG;IACH,MAAM,CAAC,IAAI,EAAE,sBAAsB,GAAG,YAAY,CAAC;IAEnD;;;;OAIG;IACH,EAAE,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,IAAI,YAAY,CAAC;CACtC;AAED,UAAU,gBAAgB;IACxB;;;OAGG;IACH,YAAY,EAAE,eAAe,CAAC;CAC/B;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/union-variant.js b/dist/src/experimental/typekit/kits/union-variant.js
new file mode 100644
index 0000000000000000000000000000000000000000..2d5fade21827f2b2b9e89a5b1bc01bf020b65b51
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/union-variant.js
@@ -0,0 +1,22 @@
+import { defineKit } from "../define-kit.js";
+import { decoratorApplication } from "../utils.js";
+defineKit({
+    unionVariant: {
+        create(desc) {
+            const variant = this.program.checker.createType({
+                kind: "UnionVariant",
+                name: desc.name ?? Symbol("name"),
+                decorators: decoratorApplication(this, desc.decorators),
+                type: desc.type,
+                node: undefined,
+                union: desc.union,
+            });
+            this.program.checker.finishType(variant);
+            return variant;
+        },
+        is(type) {
+            return type.kind === "UnionVariant";
+        },
+    },
+});
+//# sourceMappingURL=union-variant.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/union-variant.js.map b/dist/src/experimental/typekit/kits/union-variant.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..dd824be140eb52174c99a57b3596f7997befe016
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/union-variant.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"union-variant.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/union-variant.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,SAAS,EAAE,MAAM,kBAAkB,CAAC;AAC7C,OAAO,EAAE,oBAAoB,EAAiB,MAAM,aAAa,CAAC;AAiElE,SAAS,CAAmB;IAC1B,YAAY,EAAE;QACZ,MAAM,CAAC,IAAI;YACT,MAAM,OAAO,GAAiB,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC;gBAC5D,IAAI,EAAE,cAAc;gBACpB,IAAI,EAAE,IAAI,CAAC,IAAI,IAAI,MAAM,CAAC,MAAM,CAAC;gBACjC,UAAU,EAAE,oBAAoB,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC;gBACvD,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,IAAI,EAAE,SAAgB;gBACtB,KAAK,EAAE,IAAI,CAAC,KAAY;aACzB,CAAC,CAAC;YACH,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;YACzC,OAAO,OAAO,CAAC;QACjB,CAAC;QAED,EAAE,CAAC,IAAI;YACL,OAAO,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC;QACtC,CAAC;KACF;CACF,CAAC,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/union.d.ts b/dist/src/experimental/typekit/kits/union.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..2f22697b3fb4c27be4e9a83b47429d95a7ce3da9
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/union.d.ts
@@ -0,0 +1,85 @@
+import { DiscriminatedUnion } from "../../../core/helpers/discriminator-utils.js";
+import type { Type, Union, UnionVariant } from "../../../core/types.js";
+import { DecoratorArgs } from "../utils.js";
+/**
+ * A descriptor for a union type.
+ * @experimental
+ */
+export interface UnionDescriptor {
+    /**
+     * The name of the union. If name is provided, it is a union declaration.
+     * Otherwise, it is a union expression.
+     */
+    name?: string;
+    /**
+     * Decorators to apply to the union.
+     */
+    decorators?: DecoratorArgs[];
+    /**
+     * The variants of the union. If a variant is a string, number, or boolean, it
+     * will be converted to a union variant with the same name and type.
+     */
+    variants?: Record<string | symbol, string | number> | UnionVariant[];
+}
+/**
+ * Utilities for working with unions.
+ * @experimental
+ */
+export interface UnionKit {
+    /**
+     * Creates a union type with filtered variants.
+     * @param filterFn Function to filter the union variants
+     */
+    filter(union: Union, filterFn: (variant: UnionVariant) => boolean): Union;
+    /**
+     * Create a union type.
+     *
+     * @param desc The descriptor of the union.
+     */
+    create(desc: UnionDescriptor): Union;
+    /**
+     * Check if the given `type` is a union.
+     *
+     * @param type The type to check.
+     */
+    is(type: Type): type is Union;
+    /**
+     * Check if the union is a valid enum. Specifically, this checks if the
+     * union has a name (since there are no enum expressions), and whether each
+     * of the variant types is a valid enum member value.
+     *
+     * @param type The union to check.
+     */
+    isValidEnum(type: Union): boolean;
+    /**
+     * Check if a union is extensible. Extensible unions are unions which contain a variant
+     * that is a supertype of all the other types. This means that the subtypes of the common
+     * supertype are known example values, but others may be present.
+     * @param type The union to check.
+     */
+    isExtensible(type: Union): boolean;
+    /**
+     * Checks if an union is an expression (anonymous) or declared.
+     * @param type Uniton to check if it is an expression
+     */
+    isExpression(type: Union): boolean;
+    /**
+     * Resolves a discriminated union for the given union.
+     * @param type Union to resolve the discriminated union for.
+     */
+    getDiscriminatedUnion(type: Union): DiscriminatedUnion | undefined;
+}
+interface TypekitExtension {
+    /**
+     * Utilities for working with unions.
+     * @experimental
+     */
+    union: UnionKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export declare const UnionKit: void;
+export {};
+//# sourceMappingURL=union.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/union.d.ts.map b/dist/src/experimental/typekit/kits/union.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..00a1d1f93209a051c5799737f31ff0bd39143d2f
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/union.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"union.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/union.ts"],"names":[],"mappings":"AACA,OAAO,EACL,kBAAkB,EAEnB,MAAM,8CAA8C,CAAC;AACtD,OAAO,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,YAAY,EAAE,MAAM,wBAAwB,CAAC;AAGxE,OAAO,EAAwB,aAAa,EAAE,MAAM,aAAa,CAAC;AAElE;;;GAGG;AACH,MAAM,WAAW,eAAe;IAC9B;;;OAGG;IACH,IAAI,CAAC,EAAE,MAAM,CAAC;IAEd;;OAEG;IACH,UAAU,CAAC,EAAE,aAAa,EAAE,CAAC;IAE7B;;;OAGG;IACH,QAAQ,CAAC,EAAE,MAAM,CAAC,MAAM,GAAG,MAAM,EAAE,MAAM,GAAG,MAAM,CAAC,GAAG,YAAY,EAAE,CAAC;CACtE;AAED;;;GAGG;AACH,MAAM,WAAW,QAAQ;IACvB;;;OAGG;IACH,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,CAAC,OAAO,EAAE,YAAY,KAAK,OAAO,GAAG,KAAK,CAAC;IAC1E;;;;OAIG;IACH,MAAM,CAAC,IAAI,EAAE,eAAe,GAAG,KAAK,CAAC;IAErC;;;;OAIG;IACH,EAAE,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,IAAI,KAAK,CAAC;IAE9B;;;;;;OAMG;IACH,WAAW,CAAC,IAAI,EAAE,KAAK,GAAG,OAAO,CAAC;IAElC;;;;;OAKG;IACH,YAAY,CAAC,IAAI,EAAE,KAAK,GAAG,OAAO,CAAC;IAEnC;;;OAGG;IACH,YAAY,CAAC,IAAI,EAAE,KAAK,GAAG,OAAO,CAAC;IACnC;;;OAGG;IACH,qBAAqB,CAAC,IAAI,EAAE,KAAK,GAAG,kBAAkB,GAAG,SAAS,CAAC;CACpE;AAED,UAAU,gBAAgB;IACxB;;;OAGG;IACH,KAAK,EAAE,QAAQ,CAAC;CACjB;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C;AAED,eAAO,MAAM,QAAQ,MAyFnB,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/union.js b/dist/src/experimental/typekit/kits/union.js
new file mode 100644
index 0000000000000000000000000000000000000000..f0d267224f2867c33d9333ffe60523440657fd48
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/union.js
@@ -0,0 +1,80 @@
+import { ignoreDiagnostics } from "../../../core/diagnostics.js";
+import { getDiscriminatedUnion, } from "../../../core/helpers/discriminator-utils.js";
+import { createRekeyableMap } from "../../../utils/misc.js";
+import { defineKit } from "../define-kit.js";
+import { decoratorApplication } from "../utils.js";
+export const UnionKit = defineKit({
+    union: {
+        filter(union, filterFn) {
+            const variants = Array.from(union.variants.values()).filter(filterFn);
+            return this.union.create({ variants });
+        },
+        create(desc) {
+            const union = this.program.checker.createType({
+                kind: "Union",
+                name: desc.name,
+                decorators: decoratorApplication(this, desc.decorators),
+                variants: createRekeyableMap(),
+                get options() {
+                    return Array.from(this.variants.values()).map((v) => v.type);
+                },
+                expression: desc.name === undefined,
+                node: undefined,
+            });
+            if (Array.isArray(desc.variants)) {
+                for (const variant of desc.variants) {
+                    union.variants.set(variant.name, variant);
+                    variant.union = union;
+                }
+            }
+            else if (desc.variants) {
+                for (const [name, value] of Object.entries(desc.variants)) {
+                    union.variants.set(name, this.unionVariant.create({ name, type: this.literal.create(value) }));
+                }
+            }
+            this.program.checker.finishType(union);
+            return union;
+        },
+        is(type) {
+            return type.kind === "Union";
+        },
+        isValidEnum(type) {
+            for (const variant of type.variants.values()) {
+                if (!this.literal.isString(variant.type) && !this.literal.isNumeric(variant.type)) {
+                    return false;
+                }
+            }
+            return true;
+        },
+        isExtensible(type) {
+            const variants = Array.from(type.variants.values());
+            if (variants.length === 0) {
+                return false;
+            }
+            for (let i = 0; i < variants.length; i++) {
+                let isCommon = true;
+                for (let j = 0; j < variants.length; j++) {
+                    if (i === j) {
+                        continue;
+                    }
+                    const assignable = ignoreDiagnostics(this.program.checker.isTypeAssignableTo(variants[j].type, variants[i].type, type));
+                    if (!assignable) {
+                        isCommon = false;
+                        break;
+                    }
+                }
+                if (isCommon) {
+                    return true;
+                }
+            }
+            return false;
+        },
+        isExpression(type) {
+            return type.name === undefined || type.name === "";
+        },
+        getDiscriminatedUnion(type) {
+            return ignoreDiagnostics(getDiscriminatedUnion(this.program, type));
+        },
+    },
+});
+//# sourceMappingURL=union.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/union.js.map b/dist/src/experimental/typekit/kits/union.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..a00ebbb96cf4c27b3dc07c91ef67ff3a7ae19fa2
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/union.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"union.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/union.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/value.d.ts b/dist/src/experimental/typekit/kits/value.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..8e73d9ffb989cc56d4efabcdb9049e9713d64132
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/value.d.ts
@@ -0,0 +1,84 @@
+import type { ArrayValue, BooleanValue, EnumValue, NullValue, NumericValue, ObjectValue, ScalarValue, StringValue, Value } from "../../../core/types.js";
+/** @experimental */
+export interface ValueKit {
+    /**
+     * Create a Value type from a JavaScript value.
+     *
+     * @param value The JavaScript value to turn into a TypeSpec Value type.
+     */
+    create(value: string | number | boolean): Value;
+    /**
+     * Create a string Value type from a JavaScript string value.
+     *
+     * @param value The string value.
+     */
+    createString(value: string): StringValue;
+    /**
+     * Create a numeric Value type from a JavaScript number value.
+     *
+     * @param value The numeric value.
+     */
+    createNumeric(value: number): NumericValue;
+    /**
+     * Create a boolean Value type from a JavaScript boolean value.
+     *
+     * @param value The boolean value.
+     */
+    createBoolean(value: boolean): BooleanValue;
+    /**
+     * Check if `type` is a string Value type.
+     *
+     * @param type The type to check.
+     */
+    isString(type: Value): type is StringValue;
+    /**
+     * Check if `type` is a numeric Value type.
+     *
+     * @param type The type to check.
+     */
+    isNumeric(type: Value): type is NumericValue;
+    /**
+     * Check if `type` is a scalar value type
+     * @param type The type to check.
+     */
+    isScalar(type: Value): type is ScalarValue;
+    /**
+     * Check if `type` is an object value type
+     * @param type The type to check.
+     */
+    isObject(type: Value): type is ObjectValue;
+    /**
+     * Check if `type` is an array value type
+     * @param type The type to check.
+     */
+    isArray(type: Value): type is ArrayValue;
+    /**
+     * Check if `type` is an enum value type
+     * @param type The type to check.
+     */
+    isEnum(type: Value): type is EnumValue;
+    /**
+     * Check if `type` is a null value Type.
+     * @param type The type to check.
+     */
+    isNull(type: Value): type is NullValue;
+    /**
+     * Check if `type` is a boolean Value type.
+     *
+     * @param type The type to check.
+     */
+    isBoolean(type: Value): type is BooleanValue;
+    is(type: {
+        valueKind: string;
+    }): type is Value;
+}
+interface TypekitExtension {
+    /** @experimental */
+    value: ValueKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=value.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/value.d.ts.map b/dist/src/experimental/typekit/kits/value.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..2193e4e30f81badffb2a33e89eb5e55eb1a4e349
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/value.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"value.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/value.ts"],"names":[],"mappings":"AACA,OAAO,KAAK,EACV,UAAU,EACV,YAAY,EACZ,SAAS,EACT,SAAS,EACT,YAAY,EACZ,WAAW,EACX,WAAW,EACX,WAAW,EACX,KAAK,EACN,MAAM,wBAAwB,CAAC;AAGhC,oBAAoB;AACpB,MAAM,WAAW,QAAQ;IACvB;;;;OAIG;IACH,MAAM,CAAC,KAAK,EAAE,MAAM,GAAG,MAAM,GAAG,OAAO,GAAG,KAAK,CAAC;IAEhD;;;;OAIG;IACH,YAAY,CAAC,KAAK,EAAE,MAAM,GAAG,WAAW,CAAC;IAEzC;;;;OAIG;IACH,aAAa,CAAC,KAAK,EAAE,MAAM,GAAG,YAAY,CAAC;IAE3C;;;;OAIG;IACH,aAAa,CAAC,KAAK,EAAE,OAAO,GAAG,YAAY,CAAC;IAE5C;;;;OAIG;IACH,QAAQ,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI,IAAI,WAAW,CAAC;IAE3C;;;;OAIG;IACH,SAAS,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI,IAAI,YAAY,CAAC;IAE7C;;;OAGG;IACH,QAAQ,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI,IAAI,WAAW,CAAC;IAE3C;;;OAGG;IACH,QAAQ,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI,IAAI,WAAW,CAAC;IAE3C;;;OAGG;IACH,OAAO,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI,IAAI,UAAU,CAAC;IAEzC;;;OAGG;IACH,MAAM,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI,IAAI,SAAS,CAAC;IAEvC;;;OAGG;IACH,MAAM,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI,IAAI,SAAS,CAAC;IAEvC;;;;OAIG;IACH,SAAS,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI,IAAI,YAAY,CAAC;IAE7C,EAAE,CAAC,IAAI,EAAE;QAAE,SAAS,EAAE,MAAM,CAAA;KAAE,GAAG,IAAI,IAAI,KAAK,CAAC;CAChD;AAED,UAAU,gBAAgB;IACxB,oBAAoB;IACpB,KAAK,EAAE,QAAQ,CAAC;CACjB;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/value.js b/dist/src/experimental/typekit/kits/value.js
new file mode 100644
index 0000000000000000000000000000000000000000..18004b7edf4d10a6d191253eb7eba32d994dc10a
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/value.js
@@ -0,0 +1,81 @@
+import { Numeric } from "../../../core/numeric.js";
+import { defineKit } from "../define-kit.js";
+defineKit({
+    value: {
+        is(value) {
+            const type = value;
+            return (this.value.isString(type) ||
+                this.value.isNumeric(type) ||
+                this.value.isBoolean(type) ||
+                this.value.isArray(type) ||
+                this.value.isObject(type) ||
+                this.value.isEnum(type) ||
+                this.value.isNull(type) ||
+                this.value.isScalar(type));
+        },
+        create(value) {
+            if (typeof value === "string") {
+                return this.value.createString(value);
+            }
+            else if (typeof value === "number") {
+                return this.value.createNumeric(value);
+            }
+            else {
+                return this.value.createBoolean(value);
+            }
+        },
+        createString(value) {
+            return {
+                entityKind: "Value",
+                value: value,
+                valueKind: "StringValue",
+                type: this.literal.createString(value),
+                scalar: undefined,
+            };
+        },
+        createNumeric(value) {
+            const valueAsString = String(value);
+            return {
+                entityKind: "Value",
+                value: Numeric(valueAsString),
+                valueKind: "NumericValue",
+                type: this.literal.createNumeric(value),
+                scalar: undefined,
+            };
+        },
+        createBoolean(value) {
+            return {
+                entityKind: "Value",
+                value: value,
+                valueKind: "BooleanValue",
+                type: this.literal.createBoolean(value),
+                scalar: undefined,
+            };
+        },
+        isBoolean(type) {
+            return type.valueKind === "BooleanValue";
+        },
+        isString(type) {
+            return type.valueKind === "StringValue";
+        },
+        isNumeric(type) {
+            return type.valueKind === "NumericValue";
+        },
+        isArray(type) {
+            return type.valueKind === "ArrayValue";
+        },
+        isObject(type) {
+            return type.valueKind === "ObjectValue";
+        },
+        isEnum(type) {
+            return type.valueKind === "EnumValue";
+        },
+        isNull(type) {
+            return type.valueKind === "NullValue";
+        },
+        isScalar(type) {
+            return type.valueKind === "ScalarValue";
+        },
+    },
+});
+//# sourceMappingURL=value.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/value.js.map b/dist/src/experimental/typekit/kits/value.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..9f9ab264d19d9c204639da454a92bef9a479b12a
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/value.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"value.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/value.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/utils/get-plausible-name.d.ts b/dist/src/experimental/typekit/utils/get-plausible-name.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..381d49f266cdcafa7e68773c96cfaf9898f0bfd7
--- /dev/null
+++ b/dist/src/experimental/typekit/utils/get-plausible-name.d.ts
@@ -0,0 +1,7 @@
+import { Enum, Interface, Model, Scalar, Union } from "../../../core/types.js";
+/**
+ * Get a plausible name for the given type.
+ * @experimental
+ */
+export declare function getPlausibleName(type: Model | Union | Enum | Scalar | Interface): string;
+//# sourceMappingURL=get-plausible-name.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/utils/get-plausible-name.d.ts.map b/dist/src/experimental/typekit/utils/get-plausible-name.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..0915b549b5948b539d6c1039a96862de7128fbc2
--- /dev/null
+++ b/dist/src/experimental/typekit/utils/get-plausible-name.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"get-plausible-name.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/utils/get-plausible-name.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,wBAAwB,CAAC;AAE/E;;;GAGG;AACH,wBAAgB,gBAAgB,CAAC,IAAI,EAAE,KAAK,GAAG,KAAK,GAAG,IAAI,GAAG,MAAM,GAAG,SAAS,UAa/E"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/utils/get-plausible-name.js b/dist/src/experimental/typekit/utils/get-plausible-name.js
new file mode 100644
index 0000000000000000000000000000000000000000..77a81d8443c4ce00de9770d9c182c6ff41247442
--- /dev/null
+++ b/dist/src/experimental/typekit/utils/get-plausible-name.js
@@ -0,0 +1,17 @@
+import { isTemplateInstance } from "../../../core/type-utils.js";
+/**
+ * Get a plausible name for the given type.
+ * @experimental
+ */
+export function getPlausibleName(type) {
+    let name = type.name;
+    if (!name) {
+        name = "TypeExpression"; // TODO: Implement automatic name generation based on the type context
+    }
+    if (isTemplateInstance(type)) {
+        const namePrefix = type.templateMapper.args.map((a) => ("name" in a && a.name) || "").join("_");
+        name = `${namePrefix}${name}`;
+    }
+    return name;
+}
+//# sourceMappingURL=get-plausible-name.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/utils/get-plausible-name.js.map b/dist/src/experimental/typekit/utils/get-plausible-name.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..97e356f4aaa299f91bbadab452bf0fe1b9514718
--- /dev/null
+++ b/dist/src/experimental/typekit/utils/get-plausible-name.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"get-plausible-name.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/utils/get-plausible-name.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,kBAAkB,EAAE,MAAM,6BAA6B,CAAC;AAGjE;;;GAGG;AACH,MAAM,UAAU,gBAAgB,CAAC,IAA+C;IAC9E,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;IAErB,IAAI,CAAC,IAAI,EAAE,CAAC;QACV,IAAI,GAAG,gBAAgB,CAAC,CAAC,sEAAsE;IACjG,CAAC;IAED,IAAI,kBAAkB,CAAC,IAAI,CAAC,EAAE,CAAC;QAC7B,MAAM,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAChG,IAAI,GAAG,GAAG,UAAU,GAAG,IAAI,EAAE,CAAC;IAChC,CAAC;IAED,OAAO,IAAI,CAAC;AACd,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/utils/index.d.ts b/dist/src/experimental/typekit/utils/index.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..660fa7fda153683d2a05d50de8771042ebfd04bc
--- /dev/null
+++ b/dist/src/experimental/typekit/utils/index.d.ts
@@ -0,0 +1,2 @@
+export * from "./get-plausible-name.js";
+//# sourceMappingURL=index.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/utils/index.d.ts.map b/dist/src/experimental/typekit/utils/index.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..cf9b3bb7155db394b65c4b404795fba95f3e25e3
--- /dev/null
+++ b/dist/src/experimental/typekit/utils/index.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/utils/index.ts"],"names":[],"mappings":"AAAA,cAAc,yBAAyB,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/utils/index.js b/dist/src/experimental/typekit/utils/index.js
new file mode 100644
index 0000000000000000000000000000000000000000..304a615d6be370688abfb98f85fdcecc9f43bfaf
--- /dev/null
+++ b/dist/src/experimental/typekit/utils/index.js
@@ -0,0 +1,2 @@
+export * from "./get-plausible-name.js";
+//# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/utils/index.js.map b/dist/src/experimental/typekit/utils/index.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..3d85c42e1beaad96006fb906f45b59774c7652d2
--- /dev/null
+++ b/dist/src/experimental/typekit/utils/index.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/utils/index.ts"],"names":[],"mappings":"AAAA,cAAc,yBAAyB,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/utils.d.ts b/dist/src/experimental/typekit/utils.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..9d5791c566f2da9cf8a457c79abf121d1e9bb9df
--- /dev/null
+++ b/dist/src/experimental/typekit/utils.d.ts
@@ -0,0 +1,32 @@
+import type { DecoratorApplication, DecoratorFunction, RekeyableMap } from "../../core/types.js";
+import { Typekit } from "./define-kit.js";
+/**
+ * Creates a shallow copy of a rekeyable map.
+ *
+ * @experimental
+ */
+export declare function copyMap<T, U>(map: RekeyableMap<T, U>): RekeyableMap<T, U>;
+/**
+ * Decorator arguments can be either a single decorator (treated as a decorator with no arguments) or an array where the
+ * first element is the decorator and the rest of the elements are the JavaScript values of the arguments.
+ *
+ * @experimental
+ */
+export type DecoratorArgs = DecoratorFunction | [DecoratorFunction, ...any[]];
+/**
+ * Utility function for converting a list of decorators and arguments into structure decorator applications that are
+ * compatible with the TypeSpec type graph.
+ *
+ * Note: Not all JavaScript values can be converted faithfully to TypeSpec values. This function will attempt to convert
+ * the value to a literal TypeSpec value if it is a primitive value, otherwise it will be left as a JavaScript value.
+ * The `jsValue` property of the argument will always contain the original JavaScript value passed to the decorator.
+ *
+ * @param typekit - The Typekit instance to use for creating types and values.
+ * @param decorators - The list of decorators and arguments to apply.
+ *
+ * @see {@link DecoratorArgs}
+ *
+ * @experimental
+ */
+export declare function decoratorApplication(typekit: Typekit, decorators?: DecoratorArgs[]): DecoratorApplication[];
+//# sourceMappingURL=utils.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/utils.d.ts.map b/dist/src/experimental/typekit/utils.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..afd234385ec8397d5dbeb9331c723de097fa8196
--- /dev/null
+++ b/dist/src/experimental/typekit/utils.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"utils.d.ts","sourceRoot":"","sources":["../../../../src/experimental/typekit/utils.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,oBAAoB,EAAE,iBAAiB,EAAE,YAAY,EAAE,MAAM,qBAAqB,CAAC;AAEjG,OAAO,EAAE,OAAO,EAAE,MAAM,iBAAiB,CAAC;AAE1C;;;;GAIG;AACH,wBAAgB,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC,CAEzE;AAED;;;;;GAKG;AACH,MAAM,MAAM,aAAa,GAAG,iBAAiB,GAAG,CAAC,iBAAiB,EAAE,GAAG,GAAG,EAAE,CAAC,CAAC;AAE9E;;;;;;;;;;;;;;GAcG;AACH,wBAAgB,oBAAoB,CAClC,OAAO,EAAE,OAAO,EAChB,UAAU,CAAC,EAAE,aAAa,EAAE,GAC3B,oBAAoB,EAAE,CAiBxB"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/utils.js b/dist/src/experimental/typekit/utils.js
new file mode 100644
index 0000000000000000000000000000000000000000..92bbf85ea022db2eee41ac8f8308b06840059cb7
--- /dev/null
+++ b/dist/src/experimental/typekit/utils.js
@@ -0,0 +1,39 @@
+import { createRekeyableMap } from "../../utils/misc.js";
+/**
+ * Creates a shallow copy of a rekeyable map.
+ *
+ * @experimental
+ */
+export function copyMap(map) {
+    return createRekeyableMap(map.entries());
+}
+/**
+ * Utility function for converting a list of decorators and arguments into structure decorator applications that are
+ * compatible with the TypeSpec type graph.
+ *
+ * Note: Not all JavaScript values can be converted faithfully to TypeSpec values. This function will attempt to convert
+ * the value to a literal TypeSpec value if it is a primitive value, otherwise it will be left as a JavaScript value.
+ * The `jsValue` property of the argument will always contain the original JavaScript value passed to the decorator.
+ *
+ * @param typekit - The Typekit instance to use for creating types and values.
+ * @param decorators - The list of decorators and arguments to apply.
+ *
+ * @see {@link DecoratorArgs}
+ *
+ * @experimental
+ */
+export function decoratorApplication(typekit, decorators) {
+    return (decorators?.map((arg) => {
+        const [decorator, args] = Array.isArray(arg) ? [arg[0], arg.slice(1)] : [arg, []];
+        return {
+            decorator,
+            args: args.map((rawValue) => ({
+                value: typeof rawValue === "object" && rawValue !== null
+                    ? rawValue
+                    : typekit.literal.create(rawValue),
+                jsValue: rawValue,
+            })),
+        };
+    }) ?? []);
+}
+//# sourceMappingURL=utils.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/utils.js.map b/dist/src/experimental/typekit/utils.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..4da05bc2231e2f02e0b428e55c7c394ddd3adea9
--- /dev/null
+++ b/dist/src/experimental/typekit/utils.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../../../src/experimental/typekit/utils.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,kBAAkB,EAAE,MAAM,qBAAqB,CAAC;AAGzD;;;;GAIG;AACH,MAAM,UAAU,OAAO,CAAO,GAAuB;IACnD,OAAO,kBAAkB,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC;AAC3C,CAAC;AAUD;;;;;;;;;;;;;;GAcG;AACH,MAAM,UAAU,oBAAoB,CAClC,OAAgB,EAChB,UAA4B;IAE5B,OAAO,CACL,UAAU,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE;QACtB,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;QAElF,OAAO;YACL,SAAS;YACT,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,QAAa,EAAE,EAAE,CAAC,CAAC;gBACjC,KAAK,EACH,OAAO,QAAQ,KAAK,QAAQ,IAAI,QAAQ,KAAK,IAAI;oBAC/C,CAAC,CAAC,QAAQ;oBACV,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC;gBACtC,OAAO,EAAE,QAAQ;aAClB,CAAC,CAAC;SACJ,CAAC;IACJ,CAAC,CAAC,IAAI,EAAE,CACT,CAAC;AACJ,CAAC"}
\ No newline at end of file
diff --git a/dist/src/lib/examples.js b/dist/src/lib/examples.js
index 5218d3e7b82bfec191fbfdc61bd393376aa022be..22252282100987e6479602416f77865a4fdae71f 100644
--- a/dist/src/lib/examples.js
+++ b/dist/src/lib/examples.js
@@ -77,6 +77,11 @@ function serializeObjectValueAsJson(program, value, type) {
                 : propValue.name;
             obj[name] = serializeValueAsJson(program, propValue.value, definition);
         }
+        else if (type.kind === "Union") {
+            // If the type is still a union (meaning resolveUnions failed to resolve it to a specific variant),
+            // we should still serialize all the properties from the value
+            obj[propValue.name] = serializeValueAsJson(program, propValue.value, program.checker.anyType);
+        }
     }
     return obj;
 }
diff --git a/dist/src/lib/examples.js.map b/dist/src/lib/examples.js.map
index 54b15a7fd6d2bd52e0a7d5e726343ea105d0f5b3..cfe613948d3249d2a798a92dfe484a52e933917b 100644
--- a/dist/src/lib/examples.js.map
+++ b/dist/src/lib/examples.js.map
@@ -1 +1 @@
-{"version":3,"file":"examples.js","sourceRoot":"","sources":["../../../src/lib/examples.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"examples.js","sourceRoot":"","sources":["../../../src/lib/examples.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/lib/intrinsic-decorators.d.ts b/dist/src/lib/intrinsic-decorators.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..fd2dcb543e802347ad317814d6e24afb7f627974
--- /dev/null
+++ b/dist/src/lib/intrinsic-decorators.d.ts
@@ -0,0 +1,6 @@
+import type { Program } from "../core/program.js";
+import type { DecoratorContext, ModelIndexer, Scalar, Type } from "../core/types.js";
+export declare const namespace = "TypeSpec";
+export declare const $indexer: (context: DecoratorContext, target: Type, key: Scalar, value: Type) => void;
+export declare function getIndexer(program: Program, target: Type): ModelIndexer | undefined;
+//# sourceMappingURL=intrinsic-decorators.d.ts.map
\ No newline at end of file
diff --git a/dist/src/lib/intrinsic-decorators.d.ts.map b/dist/src/lib/intrinsic-decorators.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..e48dab44010e590a0ee438a993d8f01d78586768
--- /dev/null
+++ b/dist/src/lib/intrinsic-decorators.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"intrinsic-decorators.d.ts","sourceRoot":"","sources":["../../../src/lib/intrinsic-decorators.ts"],"names":[],"mappings":"AACA,OAAO,KAAK,EAAE,OAAO,EAAE,MAAM,oBAAoB,CAAC;AAClD,OAAO,KAAK,EAAE,gBAAgB,EAAE,YAAY,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,kBAAkB,CAAC;AAErF,eAAO,MAAM,SAAS,aAAa,CAAC;AAGpC,eAAO,MAAM,QAAQ,YAAa,gBAAgB,UAAU,IAAI,OAAO,MAAM,SAAS,IAAI,SAGzF,CAAC;AAEF,wBAAgB,UAAU,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,IAAI,GAAG,YAAY,GAAG,SAAS,CAEnF"}
\ No newline at end of file
diff --git a/dist/src/lib/intrinsic-decorators.js b/dist/src/lib/intrinsic-decorators.js
new file mode 100644
index 0000000000000000000000000000000000000000..c8b5976ace5c00cd501428e62b5e52e89261a892
--- /dev/null
+++ b/dist/src/lib/intrinsic-decorators.js
@@ -0,0 +1,17 @@
+import { setDocData } from "../core/intrinsic-type-state.js";
+export const namespace = "TypeSpec";
+const indexTypeKey = Symbol.for(`TypeSpec.index`);
+export const $indexer = (context, target, key, value) => {
+    const indexer = { key, value };
+    context.program.stateMap(indexTypeKey).set(target, indexer);
+};
+export function getIndexer(program, target) {
+    return program.stateMap(indexTypeKey).get(target);
+}
+/**
+ * @internal to be used to set the `@doc` from doc comment.
+ */
+export const $docFromComment = (context, target, key, text) => {
+    setDocData(context.program, target, key, { value: text, source: "comment" });
+};
+//# sourceMappingURL=intrinsic-decorators.js.map
\ No newline at end of file
diff --git a/dist/src/lib/intrinsic-decorators.js.map b/dist/src/lib/intrinsic-decorators.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..1f1a736f3d7d82ee0140d79005517411f5344827
--- /dev/null
+++ b/dist/src/lib/intrinsic-decorators.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"intrinsic-decorators.js","sourceRoot":"","sources":["../../../src/lib/intrinsic-decorators.ts"],"names":[],"mappings":"AAAA,OAAO,EAAa,UAAU,EAAE,MAAM,iCAAiC,CAAC;AAIxE,MAAM,CAAC,MAAM,SAAS,GAAG,UAAU,CAAC;AAEpC,MAAM,YAAY,GAAG,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;AAClD,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAC,OAAyB,EAAE,MAAY,EAAE,GAAW,EAAE,KAAW,EAAE,EAAE;IAC5F,MAAM,OAAO,GAAiB,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC;IAC7C,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;AAC9D,CAAC,CAAC;AAEF,MAAM,UAAU,UAAU,CAAC,OAAgB,EAAE,MAAY;IACvD,OAAO,OAAO,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;AACpD,CAAC;AAED;;GAEG;AACH,MAAM,CAAC,MAAM,eAAe,GAAG,CAC7B,OAAyB,EACzB,MAAY,EACZ,GAAc,EACd,IAAY,EACZ,EAAE;IACF,UAAU,CAAC,OAAO,CAAC,OAAO,EAAE,MAAM,EAAE,GAAG,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,CAAC,CAAC;AAC/E,CAAC,CAAC"}
\ No newline at end of file
diff --git a/dist/src/server/compile-service.d.ts.map b/dist/src/server/compile-service.d.ts.map
index a4e3788e5881ebe517a066f7cc3aa21f7a038445..c0474ec69fcda7b9fe1c1fd04387ca1c9e7193d6 100644
--- a/dist/src/server/compile-service.d.ts.map
+++ b/dist/src/server/compile-service.d.ts.map
@@ -1 +1 @@
-{"version":3,"file":"compile-service.d.ts","sourceRoot":"","sources":["../../../src/server/compile-service.ts"],"names":[],"mappings":"AAAA,OAAO,EAA6B,sBAAsB,EAAE,MAAM,uBAAuB,CAAC;AAC1F,OAAO,EAAE,YAAY,EAAE,MAAM,oCAAoC,CAAC;AAYlE,OAAO,EAAE,eAAe,EAAE,MAAM,oBAAoB,CAAC;AAGrD,OAAO,KAAK,EAAE,YAAY,EAAE,kBAAkB,EAAE,MAAM,kBAAkB,CAAC;AAIzE,OAAO,EAAE,oBAAoB,EAAE,MAAM,6BAA6B,CAAC;AAGnE,OAAO,EAAE,WAAW,EAAE,MAAM,mBAAmB,CAAC;AAChD,OAAO,EAAE,eAAe,EAAE,MAAM,wBAAwB,CAAC;AACzD,OAAO,EAGL,oBAAoB,EACrB,MAAM,6BAA6B,CAAC;AACrC,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,SAAS,EAAE,MAAM,YAAY,CAAC;AAClE,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,MAAM,qBAAqB,CAAC;AAEhE;;GAEG;AACH,MAAM,WAAW,cAAc;IAC7B;;;;;;;;OAQG;IACH,OAAO,CACL,QAAQ,EAAE,YAAY,GAAG,sBAAsB,EAC/C,iBAAiB,EAAE,eAAe,GAAG,SAAS,EAC9C,oBAAoB,EAAE,oBAAoB,GACzC,OAAO,CAAC,aAAa,GAAG,SAAS,CAAC,CAAC;IAEtC;;;OAGG;IACH,SAAS,CAAC,QAAQ,EAAE,YAAY,GAAG,sBAAsB,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;IAExF;;;;OAIG;IACH,YAAY,CAAC,QAAQ,EAAE,YAAY,GAAG,sBAAsB,EAAE,UAAU,EAAE,UAAU,GAAG,IAAI,CAAC;IAE5F,EAAE,CAAC,KAAK,EAAE,YAAY,EAAE,QAAQ,EAAE,CAAC,MAAM,EAAE,aAAa,KAAK,IAAI,GAAG,IAAI,CAAC;IAEzE,sBAAsB,CAAC,IAAI,EAAE,MAAM,GAAG,OAAO,CAAC,MAAM,GAAG,SAAS,CAAC,CAAC;CACnE;AAED,MAAM,WAAW,qBAAqB;IACpC,QAAQ,CAAC,eAAe,EAAE,eAAe,CAAC;IAC1C,QAAQ,CAAC,WAAW,EAAE,WAAW,CAAC;IAClC,QAAQ,CAAC,UAAU,EAAE,UAAU,CAAC;IAChC,QAAQ,CAAC,YAAY,EAAE,YAAY,CAAC;IACpC,QAAQ,CAAC,aAAa,EAAE,aAAa,CAAC;IACtC,QAAQ,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,SAAS,KAAK,IAAI,CAAC;IACvC,QAAQ,CAAC,qBAAqB,CAAC,EAAE,oBAAoB,CAAC;CACvD;AAED,wBAAgB,oBAAoB,CAAC,EACnC,YAAY,EACZ,UAAU,EACV,WAAW,EACX,eAAe,EACf,aAAa,EACb,GAAG,EACH,qBAAqB,GACtB,EAAE,qBAAqB,GAAG,cAAc,CAgQxC"}
\ No newline at end of file
+{"version":3,"file":"compile-service.d.ts","sourceRoot":"","sources":["../../../src/server/compile-service.ts"],"names":[],"mappings":"AAAA,OAAO,EAA6B,sBAAsB,EAAE,MAAM,uBAAuB,CAAC;AAC1F,OAAO,EAAE,YAAY,EAAE,MAAM,oCAAoC,CAAC;AAYlE,OAAO,EAAE,eAAe,EAAE,MAAM,oBAAoB,CAAC;AAGrD,OAAO,KAAK,EAAE,YAAY,EAAE,kBAAkB,EAAE,MAAM,kBAAkB,CAAC;AAIzE,OAAO,EAAE,oBAAoB,EAAE,MAAM,6BAA6B,CAAC;AAGnE,OAAO,EAAE,WAAW,EAAE,MAAM,mBAAmB,CAAC;AAChD,OAAO,EAAE,eAAe,EAAE,MAAM,wBAAwB,CAAC;AACzD,OAAO,EAGL,oBAAoB,EACrB,MAAM,6BAA6B,CAAC;AACrC,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,SAAS,EAAE,MAAM,YAAY,CAAC;AAClE,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,MAAM,qBAAqB,CAAC;AAEhE;;GAEG;AACH,MAAM,WAAW,cAAc;IAC7B;;;;;;;;OAQG;IACH,OAAO,CACL,QAAQ,EAAE,YAAY,GAAG,sBAAsB,EAC/C,iBAAiB,EAAE,eAAe,GAAG,SAAS,EAC9C,oBAAoB,EAAE,oBAAoB,GACzC,OAAO,CAAC,aAAa,GAAG,SAAS,CAAC,CAAC;IAEtC;;;OAGG;IACH,SAAS,CAAC,QAAQ,EAAE,YAAY,GAAG,sBAAsB,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;IAExF;;;;OAIG;IACH,YAAY,CAAC,QAAQ,EAAE,YAAY,GAAG,sBAAsB,EAAE,UAAU,EAAE,UAAU,GAAG,IAAI,CAAC;IAE5F,EAAE,CAAC,KAAK,EAAE,YAAY,EAAE,QAAQ,EAAE,CAAC,MAAM,EAAE,aAAa,KAAK,IAAI,GAAG,IAAI,CAAC;IAEzE,sBAAsB,CAAC,IAAI,EAAE,MAAM,GAAG,OAAO,CAAC,MAAM,GAAG,SAAS,CAAC,CAAC;CACnE;AAED,MAAM,WAAW,qBAAqB;IACpC,QAAQ,CAAC,eAAe,EAAE,eAAe,CAAC;IAC1C,QAAQ,CAAC,WAAW,EAAE,WAAW,CAAC;IAClC,QAAQ,CAAC,UAAU,EAAE,UAAU,CAAC;IAChC,QAAQ,CAAC,YAAY,EAAE,YAAY,CAAC;IACpC,QAAQ,CAAC,aAAa,EAAE,aAAa,CAAC;IACtC,QAAQ,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,SAAS,KAAK,IAAI,CAAC;IACvC,QAAQ,CAAC,qBAAqB,CAAC,EAAE,oBAAoB,CAAC;CACvD;AAED,wBAAgB,oBAAoB,CAAC,EACnC,YAAY,EACZ,UAAU,EACV,WAAW,EACX,eAAe,EACf,aAAa,EACb,GAAG,EACH,qBAAqB,GACtB,EAAE,qBAAqB,GAAG,cAAc,CAkQxC"}
\ No newline at end of file
diff --git a/dist/src/server/compile-service.js b/dist/src/server/compile-service.js
index b00b51d42e0d17a2f9cfc600171b66dae83069ca..3ba9bfea62f6841f479703a8d93ba2ca31e11ea2 100644
--- a/dist/src/server/compile-service.js
+++ b/dist/src/server/compile-service.js
@@ -6,7 +6,7 @@ import { builtInLinterRule_UnusedUsing } from "../core/linter-rules/unused-using
 import { builtInLinterLibraryName } from "../core/linter.js";
 import { parse } from "../core/parser.js";
 import { getBaseFileName, getDirectoryPath } from "../core/path-utils.js";
-import { distinctArray } from "../utils/misc.js";
+import { deepClone, distinctArray } from "../utils/misc.js";
 import { getLocationInYamlScript } from "../yaml/diagnostics.js";
 import { parseYaml } from "../yaml/parser.js";
 import { serverOptions } from "./constants.js";
@@ -58,8 +58,10 @@ export function createCompileService({ compilerHost, serverHost, fileService, fi
         const [optionsFromConfig, _] = resolveOptionsFromConfig(config, {
             cwd: getDirectoryPath(path),
         });
+        // we need to keep the optionsFromConfig unchanged which will be returned in CompileResult
+        const clone = deepClone(optionsFromConfig);
         const options = {
-            ...optionsFromConfig,
+            ...clone,
             ...serverOptions,
             ...(additionalOptions ?? {}),
         };
diff --git a/dist/src/server/compile-service.js.map b/dist/src/server/compile-service.js.map
index b2f716783f30e35028f44375ab97e85ac23ee3ae..99d7655a9d9168850d5d64e8093f1e38193a5c89 100644
--- a/dist/src/server/compile-service.js.map
+++ b/dist/src/server/compile-service.js.map
@@ -1 +1 @@
-{"version":3,"file":"compile-service.js","sourceRoot":"","sources":["../../../src/server/compile-service.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"compile-service.js","sourceRoot":"","sources":["../../../src/server/compile-service.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/server/emitter-provider.d.ts b/dist/src/server/emitter-provider.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..e9926786fa1e1622973262c998b9858609d4cd19
--- /dev/null
+++ b/dist/src/server/emitter-provider.d.ts
@@ -0,0 +1,22 @@
+import { NpmPackage, NpmPackageProvider } from "./npm-package-provider.js";
+export declare class EmitterProvider {
+    private npmPackageProvider;
+    private isEmitterPackageCache;
+    constructor(npmPackageProvider: NpmPackageProvider);
+    /**
+     *
+     * @param startFolder folder starts to search for package.json with emitters defined as dependencies
+     * @returns
+     */
+    listEmitters(startFolder: string): Promise<Record<string, NpmPackage>>;
+    /**
+     *
+     * @param startFolder folder starts to search for package.json with emitters defined as dependencies
+     * @param emitterName
+     * @returns
+     */
+    getEmitter(startFolder: string, emitterName: string): Promise<NpmPackage | undefined>;
+    private isEmitter;
+    private getEmitterFromDep;
+}
+//# sourceMappingURL=emitter-provider.d.ts.map
\ No newline at end of file
diff --git a/dist/src/server/emitter-provider.d.ts.map b/dist/src/server/emitter-provider.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..c708db29c29cb8a2ef38a951f3ac4975f7c3f725
--- /dev/null
+++ b/dist/src/server/emitter-provider.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"emitter-provider.d.ts","sourceRoot":"","sources":["../../../src/server/emitter-provider.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,UAAU,EAAE,kBAAkB,EAAE,MAAM,2BAA2B,CAAC;AAE3E,qBAAa,eAAe;IAEd,OAAO,CAAC,kBAAkB;IADtC,OAAO,CAAC,qBAAqB,CAA8B;gBACvC,kBAAkB,EAAE,kBAAkB;IAE1D;;;;OAIG;IACG,YAAY,CAAC,WAAW,EAAE,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;IAsB5E;;;;;OAKG;IACG,UAAU,CAAC,WAAW,EAAE,MAAM,EAAE,WAAW,EAAE,MAAM,GAAG,OAAO,CAAC,UAAU,GAAG,SAAS,CAAC;YAQ7E,SAAS;YAwBT,iBAAiB;CAQhC"}
\ No newline at end of file
diff --git a/dist/src/server/emitter-provider.js b/dist/src/server/emitter-provider.js
new file mode 100644
index 0000000000000000000000000000000000000000..8313fc52bf7906bd87c04c17015e56600add7d4c
--- /dev/null
+++ b/dist/src/server/emitter-provider.js
@@ -0,0 +1,79 @@
+import { joinPaths } from "../core/path-utils.js";
+export class EmitterProvider {
+    npmPackageProvider;
+    isEmitterPackageCache = new Map();
+    constructor(npmPackageProvider) {
+        this.npmPackageProvider = npmPackageProvider;
+    }
+    /**
+     *
+     * @param startFolder folder starts to search for package.json with emitters defined as dependencies
+     * @returns
+     */
+    async listEmitters(startFolder) {
+        const packageJsonFolder = await this.npmPackageProvider.getPackageJsonFolder(startFolder);
+        if (!packageJsonFolder)
+            return {};
+        const pkg = await this.npmPackageProvider.get(packageJsonFolder);
+        const data = await pkg?.getPackageJsonData();
+        if (!data)
+            return {};
+        const emitters = {};
+        const allDep = {
+            ...(data.dependencies ?? {}),
+            ...(data.devDependencies ?? {}),
+        };
+        for (const dep of Object.keys(allDep)) {
+            const depPkg = await this.getEmitterFromDep(packageJsonFolder, dep);
+            if (depPkg) {
+                emitters[dep] = depPkg;
+            }
+        }
+        return emitters;
+    }
+    /**
+     *
+     * @param startFolder folder starts to search for package.json with emitters defined as dependencies
+     * @param emitterName
+     * @returns
+     */
+    async getEmitter(startFolder, emitterName) {
+        const packageJsonFolder = await this.npmPackageProvider.getPackageJsonFolder(startFolder);
+        if (!packageJsonFolder) {
+            return undefined;
+        }
+        return this.getEmitterFromDep(packageJsonFolder, emitterName);
+    }
+    async isEmitter(depName, pkg) {
+        if (this.isEmitterPackageCache.has(depName)) {
+            return this.isEmitterPackageCache.get(depName);
+        }
+        const data = await pkg.getPackageJsonData();
+        // don't add to cache when failing to load package.json which is unexpected
+        if (!data)
+            return false;
+        if ((data.devDependencies && data.devDependencies["@typespec/compiler"]) ||
+            (data.dependencies && data.dependencies["@typespec/compiler"])) {
+            const exports = await pkg.getModuleExports();
+            // don't add to cache when failing to load exports which is unexpected
+            if (!exports)
+                return false;
+            const isEmitter = exports.$onEmit !== undefined;
+            this.isEmitterPackageCache.set(depName, isEmitter);
+            return isEmitter;
+        }
+        else {
+            this.isEmitterPackageCache.set(depName, false);
+            return false;
+        }
+    }
+    async getEmitterFromDep(packageJsonFolder, depName) {
+        const depFolder = joinPaths(packageJsonFolder, "node_modules", depName);
+        const depPkg = await this.npmPackageProvider.get(depFolder);
+        if (depPkg && (await this.isEmitter(depName, depPkg))) {
+            return depPkg;
+        }
+        return undefined;
+    }
+}
+//# sourceMappingURL=emitter-provider.js.map
\ No newline at end of file
diff --git a/dist/src/server/emitter-provider.js.map b/dist/src/server/emitter-provider.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..75875938f4ae63986642a2bbbb4e83b34101dd9a
--- /dev/null
+++ b/dist/src/server/emitter-provider.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"emitter-provider.js","sourceRoot":"","sources":["../../../src/server/emitter-provider.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/testing/rule-tester.d.ts.map b/dist/src/testing/rule-tester.d.ts.map
index 07c37ce3f7bd71b6318d690b060748a317dc1462..55016adca42facc56968762e8163b9586ca828b9 100644
--- a/dist/src/testing/rule-tester.d.ts.map
+++ b/dist/src/testing/rule-tester.d.ts.map
@@ -1 +1 @@
-{"version":3,"file":"rule-tester.d.ts","sourceRoot":"","sources":["../../../src/testing/rule-tester.ts"],"names":[],"mappings":"AAKA,OAAO,EAGL,kBAAkB,EAClB,MAAM,EACN,oBAAoB,EACrB,MAAM,kBAAkB,CAAC;AAC1B,OAAO,EAAE,eAAe,EAA4C,MAAM,aAAa,CAAC;AACxF,OAAO,EAAE,iBAAiB,EAAE,mBAAmB,EAAE,MAAM,sBAAsB,CAAC;AAE9E,OAAO,EAAE,eAAe,EAAE,iBAAiB,EAAE,cAAc,EAAE,MAAM,YAAY,CAAC;AAEhF,MAAM,WAAW,gBAAgB;IAC/B,MAAM,CACJ,CAAC,SAAS,MAAM,GAAG,mBAAmB,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,MAAM,GAAG,mBAAmB,CAAC,GAAG,CAAC,CAAC,EAE/F,IAAI,EAAE,CAAC,GACN,oBAAoB,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC;CAC/C;AAED,MAAM,WAAW,oBAAoB,CAAC,CAAC,SAAS,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,GAAG,GAAG;IAC1E,SAAS,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC;IAC3B,iBAAiB,CACf,WAAW,EACP,eAAe,GACf,eAAe,EAAE,GACjB,CAAC,CAAC,GAAG,EAAE,iBAAiB,CAAC,CAAC,CAAC,KAAK,eAAe,GAAG,eAAe,EAAE,CAAC,GACvE,OAAO,CAAC,IAAI,CAAC,CAAC;IACjB,YAAY,CAAC,SAAS,EAAE,MAAM,GAAG,kBAAkB,CAAC;CACrD;AAED,MAAM,WAAW,kBAAkB;IACjC,OAAO,CAAC,IAAI,EAAE,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;CACtC;AAED,wBAAgB,sBAAsB,CACpC,MAAM,EAAE,eAAe,GAAG,cAAc,EACxC,OAAO,EAAE,oBAAoB,CAAC,MAAM,EAAE,kBAAkB,CAAC,EACzD,WAAW,EAAE,MAAM,GAClB,gBAAgB,CA+FlB"}
\ No newline at end of file
+{"version":3,"file":"rule-tester.d.ts","sourceRoot":"","sources":["../../../src/testing/rule-tester.ts"],"names":[],"mappings":"AAKA,OAAO,EAGL,kBAAkB,EAClB,MAAM,EACN,oBAAoB,EACrB,MAAM,kBAAkB,CAAC;AAC1B,OAAO,EAAE,eAAe,EAA4C,MAAM,aAAa,CAAC;AACxF,OAAO,EAAE,iBAAiB,EAAE,mBAAmB,EAAE,MAAM,sBAAsB,CAAC;AAE9E,OAAO,EAAE,eAAe,EAAE,iBAAiB,EAAE,cAAc,EAAE,MAAM,YAAY,CAAC;AAEhF,MAAM,WAAW,gBAAgB;IAC/B,MAAM,CACJ,CAAC,SAAS,MAAM,GAAG,mBAAmB,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,MAAM,GAAG,mBAAmB,CAAC,GAAG,CAAC,CAAC,EAE/F,IAAI,EAAE,CAAC,GACN,oBAAoB,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC;CAC/C;AAED,MAAM,WAAW,oBAAoB,CAAC,CAAC,SAAS,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,GAAG,GAAG;IAC1E,SAAS,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC;IAC3B,iBAAiB,CACf,WAAW,EACP,eAAe,GACf,eAAe,EAAE,GACjB,CAAC,CAAC,GAAG,EAAE,iBAAiB,CAAC,CAAC,CAAC,KAAK,eAAe,GAAG,eAAe,EAAE,CAAC,GACvE,OAAO,CAAC,IAAI,CAAC,CAAC;IACjB,YAAY,CAAC,SAAS,EAAE,MAAM,GAAG,kBAAkB,CAAC;CACrD;AAED,MAAM,WAAW,kBAAkB;IACjC,OAAO,CAAC,IAAI,EAAE,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;CACtC;AAED,wBAAgB,sBAAsB,CACpC,MAAM,EAAE,eAAe,GAAG,cAAc,EACxC,OAAO,EAAE,oBAAoB,CAAC,MAAM,EAAE,kBAAkB,CAAC,EACzD,WAAW,EAAE,MAAM,GAClB,gBAAgB,CAkGlB"}
\ No newline at end of file
diff --git a/dist/src/testing/rule-tester.js b/dist/src/testing/rule-tester.js
index bb67efd1cb0f243ffcae711dfe1bc73dbac85862..2a8a45472d7a964c7fd7989d55d58d2d883a2d2e 100644
--- a/dist/src/testing/rule-tester.js
+++ b/dist/src/testing/rule-tester.js
@@ -74,6 +74,9 @@ export function createLinterRuleTester(runner, ruleDef, libraryName) {
         const context = createLinterRuleContext(runner.program, rule, diagnostics);
         const listener = ruleDef.create(context);
         navigateProgram(runner.program, listener);
+        if (listener.exit) {
+            await listener.exit(runner.program);
+        }
         // No diagnostics should have been reported to the program. If it happened the rule is calling reportDiagnostic directly and should NOT be doing that.
         expectDiagnosticEmpty(runner.program.diagnostics);
         return [res, diagnostics.diagnostics];
diff --git a/dist/src/testing/rule-tester.js.map b/dist/src/testing/rule-tester.js.map
index 5d639329e67a43ae8eabbc69f58a7a1ecf13c955..8a67060ad2934b71209525060085da2a650bef6f 100644
--- a/dist/src/testing/rule-tester.js.map
+++ b/dist/src/testing/rule-tester.js.map
@@ -1 +1 @@
-{"version":3,"file":"rule-tester.js","sourceRoot":"","sources":["../../../src/testing/rule-tester.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,EAAE,EAAE,WAAW,EAAE,MAAM,QAAQ,CAAC;AACzC,OAAO,EAAE,YAAY,IAAI,gBAAgB,EAAE,MAAM,uBAAuB,CAAC;AACzE,OAAO,EAAE,yBAAyB,EAAE,MAAM,wBAAwB,CAAC;AACnE,OAAO,EAAE,uBAAuB,EAAE,MAAM,mBAAmB,CAAC;AAC5D,OAAO,EAAE,eAAe,EAAE,MAAM,4BAA4B,CAAC;AAQ7D,OAAO,EAAmB,qBAAqB,EAAE,iBAAiB,EAAE,MAAM,aAAa,CAAC;AAExF,OAAO,EAAE,kBAAkB,EAAE,cAAc,EAAE,MAAM,iBAAiB,CAAC;AA0BrE,MAAM,UAAU,sBAAsB,CACpC,MAAwC,EACxC,OAAyD,EACzD,WAAmB;IAEnB,OAAO;QACL,MAAM;KACP,CAAC;IAEF,SAAS,MAAM,CAEb,IAAO;QACP,OAAO;YACL,SAAS;YACT,iBAAiB;YACjB,YAAY;SACb,CAAC;QAEF,KAAK,UAAU,SAAS;YACtB,MAAM,CAAC,CAAC,EAAE,WAAW,CAAC,GAAG,MAAM,kBAAkB,CAAC,IAAI,CAAC,CAAC;YACxD,qBAAqB,CAAC,WAAW,CAAC,CAAC;QACrC,CAAC;QAED,KAAK,UAAU,iBAAiB,CAC9B,KAG0E;YAE1E,MAAM,CAAC,MAAM,EAAE,WAAW,CAAC,GAAG,MAAM,kBAAkB,CAAC,IAAI,CAAC,CAAC;YAC7D,IAAI,QAAQ,CAAC;YACb,IAAI,OAAO,KAAK,KAAK,UAAU,EAAE,CAAC;gBAChC,IAAI,gBAAgB,IAAI,MAAM,EAAE,CAAC;oBAC/B,MAAM,IAAI,KAAK,CACb,iFAAiF,CAClF,CAAC;gBACJ,CAAC;gBACD,QAAQ,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC;YAC3B,CAAC;iBAAM,CAAC;gBACN,QAAQ,GAAG,KAAK,CAAC;YACnB,CAAC;YACD,iBAAiB,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;QAC3C,CAAC;QAED,SAAS,YAAY,CAAC,KAAa;YACjC,OAAO,EAAE,OAAO,EAAE,CAAC;YAEnB,KAAK,UAAU,OAAO,CAAC,YAAoB;gBACzC,MAAM,CAAC,CAAC,EAAE,WAAW,CAAC,GAAG,MAAM,kBAAkB,CAAC,IAAI,CAAC,CAAC;gBACxD,MAAM,OAAO,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,KAAK,CAAC,CAAC;gBACtE,EAAE,CAAC,OAAO,EAAE,oBAAoB,KAAK,cAAc,CAAC,CAAC;gBACrD,IAAI,OAA2B,CAAC;gBAChC,MAAM,IAAI,GAAiB;oBACzB,GAAG,MAAM,CAAC,OAAO,CAAC,IAAI;oBACtB,SAAS,EAAE,CAAC,IAAI,EAAE,UAAU,EAAE,EAAE;wBAC9B,OAAO,GAAG,UAAU,CAAC;wBACrB,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;oBAC3B,CAAC;iBACF,CAAC;gBACF,MAAM,gBAAgB,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;gBAEtC,EAAE,CAAC,OAAO,EAAE,qCAAqC,CAAC,CAAC;gBACnD,MAAM,EAAE,GAAG,MAAM,IAAI,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC;gBAC1D,MAAM,MAAM,GAAG,EAAE,CAAC,GAAG,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,EAAE,OAAO,CAAC,IAAW,CAAC,CAAC;gBAC9E,WAAW,CAAC,cAAc,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;YACnF,CAAC;QACH,CAAC;IACH,CAAC;IAED,KAAK,UAAU,kBAAkB,CAG/B,IAAO;QAEP,MAAM,eAAe,GAAG,EAAE,YAAY,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,EAAE,CAAC;QAC7D,IAAI,GAAG,CAAC;QACR,IAAI,eAAe,CAAC;QACpB,IAAI,kBAAkB,CAAC,MAAM,CAAC,EAAE,CAAC;YAC/B,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE,CAAC;gBAC7B,MAAM,IAAI,KAAK,CACb,iFAAiF,CAClF,CAAC;YACJ,CAAC;YACD,eAAe,GAAG,MAAM,MAAM,CAAC,QAAQ,CAAC,IAAI,EAAE,eAAe,CAAC,CAAC;QACjE,CAAC;aAAM,CAAC;YACN,CAAC,GAAG,EAAE,eAAe,CAAC,GAAG,MAAM,MAAM,CAAC,kBAAkB,CAAC,IAAI,EAAE,EAAE,eAAe,EAAE,CAAC,CAAC;QACtF,CAAC;QAED,qBAAqB,CAAC,eAAe,CAAC,CAAC;QAEvC,MAAM,WAAW,GAAG,yBAAyB,EAAE,CAAC;QAChD,MAAM,IAAI,GAAG,EAAE,GAAG,OAAO,EAAE,EAAE,EAAE,GAAG,WAAW,IAAI,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC;QAClE,MAAM,OAAO,GAAG,uBAAuB,CAAC,MAAM,CAAC,OAAO,EAAE,IAAI,EAAE,WAAW,CAAC,CAAC;QAC3E,MAAM,QAAQ,GAAG,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QACzC,eAAe,CAAC,MAAM,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;QAC1C,sJAAsJ;QACtJ,qBAAqB,CAAC,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;QAClD,OAAO,CAAC,GAAG,EAAE,WAAW,CAAC,WAAW,CAAC,CAAC;IACxC,CAAC;AACH,CAAC;AAED,SAAS,kBAAkB,CAAC,MAAwC;IAClE,OAAO,gBAAgB,IAAI,MAAM,CAAC;AACpC,CAAC"}
\ No newline at end of file
+{"version":3,"file":"rule-tester.js","sourceRoot":"","sources":["../../../src/testing/rule-tester.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/utils/misc.d.ts b/dist/src/utils/misc.d.ts
index fb33a613b216a425d5e8dbc4a110d9156de3c581..747b2ac717b0bb73611778d2597637eb7c27c369 100644
--- a/dist/src/utils/misc.d.ts
+++ b/dist/src/utils/misc.d.ts
@@ -119,5 +119,6 @@ type MutableExt<T> = T extends SymbolTable ? T & MutableSymbolTable : T extends
 export declare function mutate<T>(value: T): MutableExt<T>;
 export declare function createStringMap<T>(caseInsensitive: boolean): Map<string, T>;
 export declare function createRekeyableMap<K, V>(entries?: Iterable<[K, V]>): RekeyableMap<K, V>;
+export declare function isPromise(value: unknown): value is Promise<unknown>;
 export {};
 //# sourceMappingURL=misc.d.ts.map
\ No newline at end of file
diff --git a/dist/src/utils/misc.d.ts.map b/dist/src/utils/misc.d.ts.map
index 57d3490080de1be1e08741007a3887c98ba235c6..387eccdc427a3597ab6ca958996e2c3511f20a6e 100644
--- a/dist/src/utils/misc.d.ts.map
+++ b/dist/src/utils/misc.d.ts.map
@@ -1 +1 @@
-{"version":3,"file":"misc.d.ts","sourceRoot":"","sources":["../../../src/utils/misc.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"misc.d.ts","sourceRoot":"","sources":["../../../src/utils/misc.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/utils/misc.js b/dist/src/utils/misc.js
index 897017d3e8ce340ba53625e5658863b4d62b24f0..bff6eba0c58797df7425b60e0a656e0197df0a81 100644
--- a/dist/src/utils/misc.js
+++ b/dist/src/utils/misc.js
@@ -389,4 +389,7 @@ class RekeyableMapImpl {
         return true;
     }
 }
+export function isPromise(value) {
+    return !!value && typeof value.then === "function";
+}
 //# sourceMappingURL=misc.js.map
\ No newline at end of file
diff --git a/dist/src/utils/misc.js.map b/dist/src/utils/misc.js.map
index 09eb8e0759f21e509b288189a24a285f7fb46b1e..d232b8c860f5f1f4afcafe960253299c0e648da8 100644
--- a/dist/src/utils/misc.js.map
+++ b/dist/src/utils/misc.js.map
@@ -1 +1 @@
-{"version":3,"file":"misc.js","sourceRoot":"","sources":["../../../src/utils/misc.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"misc.js","sourceRoot":"","sources":["../../../src/utils/misc.ts"],"names":[],"mappings":"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"}

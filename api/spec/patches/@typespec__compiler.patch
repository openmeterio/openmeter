diff --git a/dist/manifest.js b/dist/manifest.js
index eb88049bbc07a96238deba0fe57d4c804524ef95..4db3b3e6cbc2aff218be6411a5b3174240e9aeda 100644
--- a/dist/manifest.js
+++ b/dist/manifest.js
@@ -1,4 +1,4 @@
 export default {
   "version": "1.5.0",
-  "commit": "20b4486d08707bdff026c981ab67d470316102f8"
+  "commit": "8edc8ade149b2e14c2ac149918e5629cebc413fc"
 };
\ No newline at end of file
diff --git a/dist/src/core/binder.d.ts.map b/dist/src/core/binder.d.ts.map
index 06b6ed97fc240db85c80608a9048e6839fc6a4cb..b4d9fb85c1d5b892b54cb42190c3bf0a5f3fa846 100644
--- a/dist/src/core/binder.d.ts.map
+++ b/dist/src/core/binder.d.ts.map
@@ -1 +1 @@
-{"version":3,"file":"binder.d.ts","sourceRoot":"","sources":["../../../src/core/binder.ts"],"names":[],"mappings":"AAIA,OAAO,KAAK,EAAE,OAAO,EAAE,MAAM,cAAc,CAAC;AAC5C,OAAO,EAcL,gBAAgB,EAMhB,IAAI,EAMJ,GAAG,EACH,WAAW,EACX,WAAW,EAGX,kBAAkB,EAInB,MAAM,YAAY,CAAC;AAKpB,QAAA,MAAM,WAAW;kBAGM,WAAW;;QAOhC,wCAAwC;wBACxB,WAAW,cAAc,GAAG;iBAUnC,MAAM,SAAS,GAAG;;;;;;;;;;;;;;;CAkB5B,CAAC;AAEF,MAAM,WAAW,MAAM;IACrB,cAAc,CAAC,MAAM,EAAE,kBAAkB,GAAG,IAAI,CAAC;IACjD,gBAAgB,CAAC,UAAU,EAAE,gBAAgB,GAAG,IAAI,CAAC;CAKtD;AAED,wBAAgB,iBAAiB,CAAC,MAAM,CAAC,EAAE,WAAW,GAAG,WAAW,CAEnE;AAED,wBAAgB,YAAY,CAAC,OAAO,EAAE,OAAO,GAAG,MAAM,CA4erD;AAsBD,wBAAgB,YAAY,CAC1B,IAAI,EAAE,IAAI,GAAG,SAAS,EACtB,IAAI,EAAE,MAAM,EACZ,KAAK,EAAE,WAAW,EAClB,MAAM,CAAC,EAAE,GAAG,EACZ,KAAK,CAAC,EAAE,GAAG,GACV,GAAG,CA0BL;AAED;;;;GAIG;AACH,wBAAgB,UAAU,CAAC,GAAG,EAAE,GAAG,GAAG,IAAI,CAEzC"}
\ No newline at end of file
+{"version":3,"file":"binder.d.ts","sourceRoot":"","sources":["../../../src/core/binder.ts"],"names":[],"mappings":"AAIA,OAAO,KAAK,EAAE,OAAO,EAAE,MAAM,cAAc,CAAC;AAC5C,OAAO,EAcL,gBAAgB,EAMhB,IAAI,EAMJ,GAAG,EACH,WAAW,EACX,WAAW,EAGX,kBAAkB,EAInB,MAAM,YAAY,CAAC;AAKpB,QAAA,MAAM,WAAW;kBAGM,WAAW;;QAOhC,wCAAwC;wBACxB,WAAW,cAAc,GAAG;iBAUnC,MAAM,SAAS,GAAG;;;;;;;;;;;;;;;CAkB5B,CAAC;AAEF,MAAM,WAAW,MAAM;IACrB,cAAc,CAAC,MAAM,EAAE,kBAAkB,GAAG,IAAI,CAAC;IACjD,gBAAgB,CAAC,UAAU,EAAE,gBAAgB,GAAG,IAAI,CAAC;CAKtD;AAED,wBAAgB,iBAAiB,CAAC,MAAM,CAAC,EAAE,WAAW,GAAG,WAAW,CAEnE;AAED,wBAAgB,YAAY,CAAC,OAAO,EAAE,OAAO,GAAG,MAAM,CAkfrD;AAsBD,wBAAgB,YAAY,CAC1B,IAAI,EAAE,IAAI,GAAG,SAAS,EACtB,IAAI,EAAE,MAAM,EACZ,KAAK,EAAE,WAAW,EAClB,MAAM,CAAC,EAAE,GAAG,EACZ,KAAK,CAAC,EAAE,GAAG,GACV,GAAG,CA0BL;AAED;;;;GAIG;AACH,wBAAgB,UAAU,CAAC,GAAG,EAAE,GAAG,GAAG,IAAI,CAEzC"}
\ No newline at end of file
diff --git a/dist/src/core/binder.js b/dist/src/core/binder.js
index 04dd6f7c207e75520e0c3f450cc58abe5ee86678..03f47c6d6984c396b2c06246c96dc546e0e0c1a0 100644
--- a/dist/src/core/binder.js
+++ b/dist/src/core/binder.js
@@ -268,7 +268,12 @@ export function createBinder(program) {
             if ("locals" in node) {
                 program.reportDuplicateSymbols(node.locals);
             }
-            scope = prevScope;
+            if (prevScope?.kind === SyntaxKind.TypeSpecScript && fileNamespace) {
+                scope = fileNamespace;
+            }
+            else {
+                scope = prevScope;
+            }
         }
         else {
             visitChildren(node, bindNode);
@@ -330,7 +335,7 @@ export function createBinder(program) {
         }
     }
     function bindNamespaceStatement(statement) {
-        const effectiveScope = fileNamespace ?? scope;
+        const effectiveScope = scope;
         // check if there's an existing symbol for this namespace
         const existingBinding = effectiveScope.symbol.exports.get(statement.id.sv);
         if (existingBinding && existingBinding.flags & 256 /* SymbolFlags.Namespace */) {
@@ -347,6 +352,7 @@ export function createBinder(program) {
         currentFile.namespaces.push(statement);
         if (statement.statements === undefined) {
             fileNamespace = statement;
+            scope = statement;
             let current = statement;
             while (current.kind !== SyntaxKind.TypeSpecScript) {
                 currentFile.inScopeNamespaces.push(current);
@@ -416,7 +422,7 @@ export function createBinder(program) {
         return symbol;
     }
     function declareScriptMember(node, flags, name) {
-        const effectiveScope = fileNamespace ?? scope;
+        const effectiveScope = scope;
         if (flags & 256 /* SymbolFlags.Namespace */ &&
             mergeNamespaceDeclarations(node, effectiveScope)) {
             return;
diff --git a/dist/src/core/binder.js.map b/dist/src/core/binder.js.map
index 3b48244b72827bb0b0719f4c3c29f85d1bbdae5a..172c32cc4413944ead98eea6ecc16ac4c59e044f 100644
--- a/dist/src/core/binder.js.map
+++ b/dist/src/core/binder.js.map
@@ -1 +1 @@
-{"version":3,"file":"binder.js","sourceRoot":"","sources":["../../../src/core/binder.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"binder.js","sourceRoot":"","sources":["../../../src/core/binder.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/core/compiler-code-fixes/model-to-object-literal.codefix.d.ts b/dist/src/core/compiler-code-fixes/model-to-object-literal.codefix.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..e896b82b5846d704e77f7b5e4b870be61a9d19d8
--- /dev/null
+++ b/dist/src/core/compiler-code-fixes/model-to-object-literal.codefix.d.ts
@@ -0,0 +1,6 @@
+import type { ModelExpressionNode } from "../types.js";
+/**
+ * Quick fix that convert a model expression to an object value.
+ */
+export declare function createModelToObjectValueCodeFix(node: ModelExpressionNode): import("../types.js").CodeFix;
+//# sourceMappingURL=model-to-object-literal.codefix.d.ts.map
\ No newline at end of file
diff --git a/dist/src/core/compiler-code-fixes/model-to-object-literal.codefix.d.ts.map b/dist/src/core/compiler-code-fixes/model-to-object-literal.codefix.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..d9597e316aa2726cb2862b4ce8c1b5fcd64e0019
--- /dev/null
+++ b/dist/src/core/compiler-code-fixes/model-to-object-literal.codefix.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"model-to-object-literal.codefix.d.ts","sourceRoot":"","sources":["../../../../src/core/compiler-code-fixes/model-to-object-literal.codefix.ts"],"names":[],"mappings":"AACA,OAAO,KAAK,EAAE,mBAAmB,EAAE,MAAM,aAAa,CAAC;AAEvD;;GAEG;AACH,wBAAgB,+BAA+B,CAAC,IAAI,EAAE,mBAAmB,iCASxE"}
\ No newline at end of file
diff --git a/dist/src/core/compiler-code-fixes/model-to-object-literal.codefix.js b/dist/src/core/compiler-code-fixes/model-to-object-literal.codefix.js
new file mode 100644
index 0000000000000000000000000000000000000000..a876db75824b651b22e9fe92f41b2ade8db6acfb
--- /dev/null
+++ b/dist/src/core/compiler-code-fixes/model-to-object-literal.codefix.js
@@ -0,0 +1,15 @@
+import { defineCodeFix, getSourceLocation } from "../diagnostics.js";
+/**
+ * Quick fix that convert a model expression to an object value.
+ */
+export function createModelToObjectValueCodeFix(node) {
+    return defineCodeFix({
+        id: "model-to-object-value",
+        label: `Convert to an object value \`#{}\``,
+        fix: (context) => {
+            const location = getSourceLocation(node);
+            return context.prependText(location, "#");
+        },
+    });
+}
+//# sourceMappingURL=model-to-object-literal.codefix.js.map
\ No newline at end of file
diff --git a/dist/src/core/compiler-code-fixes/model-to-object-literal.codefix.js.map b/dist/src/core/compiler-code-fixes/model-to-object-literal.codefix.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..e90542993c0c60eff1c10cbf3fc44bfb97da7962
--- /dev/null
+++ b/dist/src/core/compiler-code-fixes/model-to-object-literal.codefix.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"model-to-object-literal.codefix.js","sourceRoot":"","sources":["../../../../src/core/compiler-code-fixes/model-to-object-literal.codefix.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,aAAa,EAAE,iBAAiB,EAAE,MAAM,mBAAmB,CAAC;AAGrE;;GAEG;AACH,MAAM,UAAU,+BAA+B,CAAC,IAAyB;IACvE,OAAO,aAAa,CAAC;QACnB,EAAE,EAAE,uBAAuB;QAC3B,KAAK,EAAE,oCAAoC;QAC3C,GAAG,EAAE,CAAC,OAAO,EAAE,EAAE;YACf,MAAM,QAAQ,GAAG,iBAAiB,CAAC,IAAI,CAAC,CAAC;YACzC,OAAO,OAAO,CAAC,WAAW,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;QAC5C,CAAC;KACF,CAAC,CAAC;AACL,CAAC"}
\ No newline at end of file
diff --git a/dist/src/core/compiler-code-fixes/tuple-to-array-value.codefix.d.ts b/dist/src/core/compiler-code-fixes/tuple-to-array-value.codefix.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..3c3dc53b43c51ad0559a4860d399e975a06c939b
--- /dev/null
+++ b/dist/src/core/compiler-code-fixes/tuple-to-array-value.codefix.d.ts
@@ -0,0 +1,6 @@
+import type { TupleExpressionNode } from "../types.js";
+/**
+ * Quick fix that convert a tuple to an array value.
+ */
+export declare function createTupleToArrayValueCodeFix(node: TupleExpressionNode): import("../types.js").CodeFix;
+//# sourceMappingURL=tuple-to-array-value.codefix.d.ts.map
\ No newline at end of file
diff --git a/dist/src/core/compiler-code-fixes/tuple-to-array-value.codefix.d.ts.map b/dist/src/core/compiler-code-fixes/tuple-to-array-value.codefix.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..229cdcd9e1f22b6610e5da58a290d61ee94ebbde
--- /dev/null
+++ b/dist/src/core/compiler-code-fixes/tuple-to-array-value.codefix.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"tuple-to-array-value.codefix.d.ts","sourceRoot":"","sources":["../../../../src/core/compiler-code-fixes/tuple-to-array-value.codefix.ts"],"names":[],"mappings":"AACA,OAAO,KAAK,EAAE,mBAAmB,EAAE,MAAM,aAAa,CAAC;AAEvD;;GAEG;AACH,wBAAgB,8BAA8B,CAAC,IAAI,EAAE,mBAAmB,iCASvE"}
\ No newline at end of file
diff --git a/dist/src/core/compiler-code-fixes/tuple-to-array-value.codefix.js b/dist/src/core/compiler-code-fixes/tuple-to-array-value.codefix.js
new file mode 100644
index 0000000000000000000000000000000000000000..9c97e265855af65d2757cd8e46f10cee8c02a989
--- /dev/null
+++ b/dist/src/core/compiler-code-fixes/tuple-to-array-value.codefix.js
@@ -0,0 +1,15 @@
+import { defineCodeFix, getSourceLocation } from "../diagnostics.js";
+/**
+ * Quick fix that convert a tuple to an array value.
+ */
+export function createTupleToArrayValueCodeFix(node) {
+    return defineCodeFix({
+        id: "tuple-to-array-value",
+        label: `Convert to an array value \`#[]\``,
+        fix: (context) => {
+            const location = getSourceLocation(node);
+            return context.prependText(location, "#");
+        },
+    });
+}
+//# sourceMappingURL=tuple-to-array-value.codefix.js.map
\ No newline at end of file
diff --git a/dist/src/core/compiler-code-fixes/tuple-to-array-value.codefix.js.map b/dist/src/core/compiler-code-fixes/tuple-to-array-value.codefix.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..b50e1977d588b165e6ce04ba0643839d8a3d53e6
--- /dev/null
+++ b/dist/src/core/compiler-code-fixes/tuple-to-array-value.codefix.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"tuple-to-array-value.codefix.js","sourceRoot":"","sources":["../../../../src/core/compiler-code-fixes/tuple-to-array-value.codefix.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,aAAa,EAAE,iBAAiB,EAAE,MAAM,mBAAmB,CAAC;AAGrE;;GAEG;AACH,MAAM,UAAU,8BAA8B,CAAC,IAAyB;IACtE,OAAO,aAAa,CAAC;QACnB,EAAE,EAAE,sBAAsB;QAC1B,KAAK,EAAE,mCAAmC;QAC1C,GAAG,EAAE,CAAC,OAAO,EAAE,EAAE;YACf,MAAM,QAAQ,GAAG,iBAAiB,CAAC,IAAI,CAAC,CAAC;YACzC,OAAO,OAAO,CAAC,WAAW,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;QAC5C,CAAC;KACF,CAAC,CAAC;AACL,CAAC"}
\ No newline at end of file
diff --git a/dist/src/core/helpers/projected-names-utils.d.ts b/dist/src/core/helpers/projected-names-utils.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..30e547398087930a0bf3059a08c0d72abe7aa99e
--- /dev/null
+++ b/dist/src/core/helpers/projected-names-utils.d.ts
@@ -0,0 +1,20 @@
+import type { Program, ProjectedProgram } from "../program.js";
+import type { Type } from "../types.js";
+export interface ProjectedNameView {
+    program: ProjectedProgram;
+    /**
+     * Get the name of the given entity in that scope.
+     * If there is a projected name it returns that one otherwise return the original name.
+     */
+    getProjectedName(target: Type & {
+        name: string;
+    }): string;
+}
+/**
+ * Create an helper to manager project names.
+ * @param program Program
+ * @param target Name of the projected name target(e.g. json, csharp, etc.)
+ * @returns ProjectedNameView
+ */
+export declare function createProjectedNameProgram(program: Program, target: string): ProjectedNameView;
+//# sourceMappingURL=projected-names-utils.d.ts.map
\ No newline at end of file
diff --git a/dist/src/core/helpers/projected-names-utils.d.ts.map b/dist/src/core/helpers/projected-names-utils.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..ff1f5a2fcb09a2067b1ae6a8b756d690611a09db
--- /dev/null
+++ b/dist/src/core/helpers/projected-names-utils.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"projected-names-utils.d.ts","sourceRoot":"","sources":["../../../../src/core/helpers/projected-names-utils.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,OAAO,EAAE,gBAAgB,EAAE,MAAM,eAAe,CAAC;AAE/D,OAAO,KAAK,EAAa,IAAI,EAAE,MAAM,aAAa,CAAC;AAEnD,MAAM,WAAW,iBAAiB;IAChC,OAAO,EAAE,gBAAgB,CAAC;IAE1B;;;OAGG;IACH,gBAAgB,CAAC,MAAM,EAAE,IAAI,GAAG;QAAE,IAAI,EAAE,MAAM,CAAA;KAAE,GAAG,MAAM,CAAC;CAC3D;AAED;;;;;GAKG;AACH,wBAAgB,0BAA0B,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,GAAG,iBAAiB,CAyB9F"}
\ No newline at end of file
diff --git a/dist/src/core/helpers/projected-names-utils.js b/dist/src/core/helpers/projected-names-utils.js
new file mode 100644
index 0000000000000000000000000000000000000000..1adbc3bc4110ee6e384db8a41a2a93afabd9c5f1
--- /dev/null
+++ b/dist/src/core/helpers/projected-names-utils.js
@@ -0,0 +1,42 @@
+import { projectProgram } from "../program.js";
+/**
+ * Create an helper to manager project names.
+ * @param program Program
+ * @param target Name of the projected name target(e.g. json, csharp, etc.)
+ * @returns ProjectedNameView
+ */
+export function createProjectedNameProgram(program, target) {
+    const projectedProgram = projectProgram(program, [
+        {
+            projectionName: "target",
+            arguments: [target],
+        },
+    ]);
+    return {
+        program: projectedProgram,
+        getProjectedName,
+    };
+    function getProjectedName(type) {
+        const baseType = findTypeInProjector(projectedProgram.projector, type);
+        const projectedType = projectedProgram.projector.projectedTypes.get(baseType);
+        if (projectedType === undefined ||
+            !("name" in projectedType) ||
+            projectedType.name === baseType.name) {
+            return type.name;
+        }
+        return projectedType.name;
+    }
+}
+// TODO will REALM help here?
+function findTypeInProjector(projector, type) {
+    if (type.projectionSource === undefined) {
+        return type;
+    }
+    else if (type.projector === projector) {
+        return type;
+    }
+    else {
+        return findTypeInProjector(projector, type.projectionSource);
+    }
+}
+//# sourceMappingURL=projected-names-utils.js.map
\ No newline at end of file
diff --git a/dist/src/core/helpers/projected-names-utils.js.map b/dist/src/core/helpers/projected-names-utils.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..c834bfc480733ff645a28b12c0c5b7f821c6171e
--- /dev/null
+++ b/dist/src/core/helpers/projected-names-utils.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"projected-names-utils.js","sourceRoot":"","sources":["../../../../src/core/helpers/projected-names-utils.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,cAAc,EAAE,MAAM,eAAe,CAAC;AAa/C;;;;;GAKG;AACH,MAAM,UAAU,0BAA0B,CAAC,OAAgB,EAAE,MAAc;IACzE,MAAM,gBAAgB,GAAG,cAAc,CAAC,OAAO,EAAE;QAC/C;YACE,cAAc,EAAE,QAAQ;YACxB,SAAS,EAAE,CAAC,MAAM,CAAC;SACpB;KACF,CAAC,CAAC;IAEH,OAAO;QACL,OAAO,EAAE,gBAAgB;QACzB,gBAAgB;KACjB,CAAC;IAEF,SAAS,gBAAgB,CAAC,IAA6B;QACrD,MAAM,QAAQ,GAAG,mBAAmB,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;QACvE,MAAM,aAAa,GAAG,gBAAgB,CAAC,SAAS,CAAC,cAAc,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAC9E,IACE,aAAa,KAAK,SAAS;YAC3B,CAAC,CAAC,MAAM,IAAI,aAAa,CAAC;YAC1B,aAAa,CAAC,IAAI,KAAK,QAAQ,CAAC,IAAI,EACpC,CAAC;YACD,OAAO,IAAI,CAAC,IAAI,CAAC;QACnB,CAAC;QACD,OAAO,aAAa,CAAC,IAAc,CAAC;IACtC,CAAC;AACH,CAAC;AAED,6BAA6B;AAC7B,SAAS,mBAAmB,CAAiB,SAAgC,EAAE,IAAO;IACpF,IAAI,IAAI,CAAC,gBAAgB,KAAK,SAAS,EAAE,CAAC;QACxC,OAAO,IAAI,CAAC;IACd,CAAC;SAAM,IAAI,IAAI,CAAC,SAAS,KAAK,SAAS,EAAE,CAAC;QACxC,OAAO,IAAI,CAAC;IACd,CAAC;SAAM,CAAC;QACN,OAAO,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,gBAAgB,CAAQ,CAAC;IACtE,CAAC;AACH,CAAC"}
\ No newline at end of file
diff --git a/dist/src/core/index.d.ts b/dist/src/core/index.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..e26a57a8ca84c682b2b77b57b9d6e340ffd33436
--- /dev/null
+++ b/dist/src/core/index.d.ts
@@ -0,0 +1,2 @@
+export {};
+//# sourceMappingURL=index.d.ts.map
\ No newline at end of file
diff --git a/dist/src/core/index.d.ts.map b/dist/src/core/index.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..33498c611c4586fcbb2da09347e7a5638ed298a1
--- /dev/null
+++ b/dist/src/core/index.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.d.ts","sourceRoot":"","sources":["../../../src/core/index.ts"],"names":[],"mappings":""}
\ No newline at end of file
diff --git a/dist/src/core/index.js b/dist/src/core/index.js
new file mode 100644
index 0000000000000000000000000000000000000000..f8a711af8c0098cea04acd117a3294818a14a7e8
--- /dev/null
+++ b/dist/src/core/index.js
@@ -0,0 +1,2 @@
+export {};
+//# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/dist/src/core/index.js.map b/dist/src/core/index.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..38b0ffc5f65d20efd64ad564b51cb28fdc5eee3d
--- /dev/null
+++ b/dist/src/core/index.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/core/index.ts"],"names":[],"mappings":""}
\ No newline at end of file
diff --git a/dist/src/core/install.d.ts b/dist/src/core/install.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d0485c2c41f35550214d2597d9341e58177fed20
--- /dev/null
+++ b/dist/src/core/install.d.ts
@@ -0,0 +1,3 @@
+import { CliCompilerHost } from "./cli/types.js";
+export declare function installTypeSpecDependencies(host: CliCompilerHost, directory: string): Promise<void>;
+//# sourceMappingURL=install.d.ts.map
\ No newline at end of file
diff --git a/dist/src/core/install.d.ts.map b/dist/src/core/install.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..dc16719230e8e6bfa10ac449dc343df05871d8d9
--- /dev/null
+++ b/dist/src/core/install.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"install.d.ts","sourceRoot":"","sources":["../../../src/core/install.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,eAAe,EAAE,MAAM,gBAAgB,CAAC;AAUjD,wBAAsB,2BAA2B,CAC/C,IAAI,EAAE,eAAe,EACrB,SAAS,EAAE,MAAM,GAChB,OAAO,CAAC,IAAI,CAAC,CAuBf"}
\ No newline at end of file
diff --git a/dist/src/core/install.js b/dist/src/core/install.js
new file mode 100644
index 0000000000000000000000000000000000000000..859673c5a21eafdb14106afc9f672b6ff61a0dde
--- /dev/null
+++ b/dist/src/core/install.js
@@ -0,0 +1,24 @@
+import { spawn } from "child_process";
+export async function installTypeSpecDependencies(host, directory) {
+    const child = spawn("npm", ["install"], {
+        shell: process.platform === "win32",
+        stdio: "inherit",
+        cwd: directory,
+        env: process.env,
+    });
+    return new Promise(() => {
+        child.on("error", (error) => {
+            if (error.code === "ENOENT") {
+                host.logger.error("Cannot find `npm` executable. Make sure to have npm installed in your path.");
+            }
+            else {
+                host.logger.error(error.toString());
+            }
+            process.exit(error.errno);
+        });
+        child.on("exit", (exitCode) => {
+            process.exit(exitCode ?? -1);
+        });
+    });
+}
+//# sourceMappingURL=install.js.map
\ No newline at end of file
diff --git a/dist/src/core/install.js.map b/dist/src/core/install.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..f571f2d85b95a59669f5af87c1dafdfdcc1a19c1
--- /dev/null
+++ b/dist/src/core/install.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"install.js","sourceRoot":"","sources":["../../../src/core/install.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,KAAK,EAAE,MAAM,eAAe,CAAC;AAWtC,MAAM,CAAC,KAAK,UAAU,2BAA2B,CAC/C,IAAqB,EACrB,SAAiB;IAEjB,MAAM,KAAK,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC,SAAS,CAAC,EAAE;QACtC,KAAK,EAAE,OAAO,CAAC,QAAQ,KAAK,OAAO;QACnC,KAAK,EAAE,SAAS;QAChB,GAAG,EAAE,SAAS;QACd,GAAG,EAAE,OAAO,CAAC,GAAG;KACjB,CAAC,CAAC;IAEH,OAAO,IAAI,OAAO,CAAC,GAAG,EAAE;QACtB,KAAK,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,KAAiB,EAAE,EAAE;YACtC,IAAI,KAAK,CAAC,IAAI,KAAK,QAAQ,EAAE,CAAC;gBAC5B,IAAI,CAAC,MAAM,CAAC,KAAK,CACf,6EAA6E,CAC9E,CAAC;YACJ,CAAC;iBAAM,CAAC;gBACN,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;YACtC,CAAC;YACD,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC;QACH,KAAK,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE,EAAE;YAC5B,OAAO,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,CAAC,CAAC,CAAC;QAC/B,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC"}
\ No newline at end of file
diff --git a/dist/src/core/projected-program.d.ts b/dist/src/core/projected-program.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..c46fcf89f5293d4ad1865a7289b6da5ccc6aaaae
--- /dev/null
+++ b/dist/src/core/projected-program.d.ts
@@ -0,0 +1,3 @@
+import type { Program, ProjectedProgram } from "./index.js";
+export declare function isProjectedProgram(program: Program | ProjectedProgram): program is ProjectedProgram;
+//# sourceMappingURL=projected-program.d.ts.map
\ No newline at end of file
diff --git a/dist/src/core/projected-program.d.ts.map b/dist/src/core/projected-program.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..46bb5cde89b441d73b10177679001bd6f9e1aca8
--- /dev/null
+++ b/dist/src/core/projected-program.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"projected-program.d.ts","sourceRoot":"","sources":["../../../src/core/projected-program.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,OAAO,EAAE,gBAAgB,EAAE,MAAM,YAAY,CAAC;AAE5D,wBAAgB,kBAAkB,CAChC,OAAO,EAAE,OAAO,GAAG,gBAAgB,GAClC,OAAO,IAAI,gBAAgB,CAE7B"}
\ No newline at end of file
diff --git a/dist/src/core/projected-program.js b/dist/src/core/projected-program.js
new file mode 100644
index 0000000000000000000000000000000000000000..f1b8aa72f1b532d56a7f41d1f21e822948f9d4f0
--- /dev/null
+++ b/dist/src/core/projected-program.js
@@ -0,0 +1,4 @@
+export function isProjectedProgram(program) {
+    return "projector" in program;
+}
+//# sourceMappingURL=projected-program.js.map
\ No newline at end of file
diff --git a/dist/src/core/projected-program.js.map b/dist/src/core/projected-program.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..021947e6c3f4ed664c930d986179fa313fa71ad2
--- /dev/null
+++ b/dist/src/core/projected-program.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"projected-program.js","sourceRoot":"","sources":["../../../src/core/projected-program.ts"],"names":[],"mappings":"AAEA,MAAM,UAAU,kBAAkB,CAChC,OAAmC;IAEnC,OAAO,WAAW,IAAI,OAAO,CAAC;AAChC,CAAC"}
\ No newline at end of file
diff --git a/dist/src/core/projection-members.d.ts b/dist/src/core/projection-members.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..068dbf5adbe62d2bae345d5b15b4aa75d2ee49b4
--- /dev/null
+++ b/dist/src/core/projection-members.d.ts
@@ -0,0 +1,8 @@
+import type { Checker } from "./checker.js";
+import type { Type } from "./types.js";
+export declare function createProjectionMembers(checker: Checker): {
+    [TKind in Type["kind"]]?: Record<string, (base: Type & {
+        kind: TKind;
+    }) => Type>;
+};
+//# sourceMappingURL=projection-members.d.ts.map
\ No newline at end of file
diff --git a/dist/src/core/projection-members.d.ts.map b/dist/src/core/projection-members.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..08be42f5a7af380a120020b112e91af7272e9c1e
--- /dev/null
+++ b/dist/src/core/projection-members.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"projection-members.d.ts","sourceRoot":"","sources":["../../../src/core/projection-members.ts"],"names":[],"mappings":"AACA,OAAO,KAAK,EAAE,OAAO,EAAE,MAAM,cAAc,CAAC;AAE5C,OAAO,KAAK,EAAc,IAAI,EAAgB,MAAM,YAAY,CAAC;AAEjE,wBAAgB,uBAAuB,CAAC,OAAO,EAAE,OAAO,GAAG;KACxD,KAAK,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,GAAG;QAAE,IAAI,EAAE,KAAK,CAAA;KAAE,KAAK,IAAI,CAAC;CACjF,CAyZA"}
\ No newline at end of file
diff --git a/dist/src/core/projection-members.js b/dist/src/core/projection-members.js
new file mode 100644
index 0000000000000000000000000000000000000000..abd9ee299f47a187e197ac3838507ce93c6832bd
--- /dev/null
+++ b/dist/src/core/projection-members.js
@@ -0,0 +1,381 @@
+import { camelCase, kebabCase, pascalCase, snakeCase } from "change-case";
+import { ProjectionError, assertType } from "./diagnostics.js";
+export function createProjectionMembers(checker) {
+    const { voidType, neverType, createType, createFunctionType, createLiteralType } = checker;
+    function createBaseMembers() {
+        return {
+            projectionSource: (base) => base.projectionSource ?? voidType,
+            projectionBase: (base) => base.projectionBase ?? voidType,
+        };
+    }
+    function createNameableMembers() {
+        return {
+            name: (base) => (base.name ? createLiteralType(base.name) : voidType),
+            rename: (base) => {
+                return createFunctionType((newName) => {
+                    assertType("new name", newName, "String");
+                    base.name = newName.value;
+                    return voidType;
+                });
+            },
+        };
+    }
+    return {
+        Model: {
+            ...createBaseMembers(),
+            ...createNameableMembers(),
+            properties(base) {
+                return createType({
+                    kind: "Object",
+                    properties: {
+                        forEach: createFunctionType((block) => {
+                            assertType("block", block, "Function");
+                            const props = Array.from(base.properties.values());
+                            props.forEach((p) => block.implementation(p));
+                            return voidType;
+                        }),
+                    },
+                });
+            },
+            renameProperty(base) {
+                return createFunctionType((oldNameT, newNameT) => {
+                    assertType("current property name", oldNameT, "String");
+                    assertType("new property name", newNameT, "String");
+                    const oldName = oldNameT.value;
+                    const newName = newNameT.value;
+                    const prop = base.properties.get(oldName);
+                    if (!prop) {
+                        throw new ProjectionError(`Property ${oldName} not found`);
+                    }
+                    prop.name = newName;
+                    base.properties.rekey(oldName, newName);
+                    return voidType;
+                });
+            },
+            changePropertyType(base) {
+                return createFunctionType((nameT, newType) => {
+                    assertType("property name", nameT, "String");
+                    const propertyName = nameT.value;
+                    const prop = base.properties.get(propertyName);
+                    if (!prop) {
+                        throw new ProjectionError(`Property ${propertyName} not found`);
+                    }
+                    prop.type = newType;
+                    return voidType;
+                });
+            },
+            addProperty(base) {
+                return createFunctionType((nameT, type, defaultT) => {
+                    assertType("property", nameT, "String");
+                    const name = nameT.value;
+                    const prop = base.properties.get(name);
+                    if (prop) {
+                        throw new ProjectionError(`Property ${name} already exists`);
+                    }
+                    base.properties.set(name, createType({
+                        kind: "ModelProperty",
+                        name,
+                        optional: false,
+                        decorators: [],
+                        node: undefined,
+                        default: defaultT,
+                        type,
+                    }));
+                    return voidType;
+                });
+            },
+            deleteProperty(base) {
+                return createFunctionType((nameT) => {
+                    assertType("property", nameT, "String");
+                    const name = nameT.value;
+                    const prop = base.properties.get(name);
+                    if (!prop) {
+                        return voidType;
+                    }
+                    base.properties.delete(name);
+                    return voidType;
+                });
+            },
+        },
+        ModelProperty: {
+            ...createBaseMembers(),
+            name(base) {
+                return createLiteralType(base.name);
+            },
+            type(base) {
+                return base.type;
+            },
+            setType(base) {
+                return createFunctionType((t) => {
+                    base.type = t;
+                    return voidType;
+                });
+            },
+            setOptional(base) {
+                return createFunctionType((optional) => {
+                    assertType("Optional", optional, "Boolean");
+                    base.optional = optional.value;
+                    return voidType;
+                });
+            },
+        },
+        Scalar: {
+            ...createBaseMembers(),
+            ...createNameableMembers(),
+        },
+        Union: {
+            ...createBaseMembers(),
+            ...createNameableMembers(),
+            variants(base) {
+                return createType({
+                    kind: "Object",
+                    properties: {
+                        forEach: createFunctionType((block) => {
+                            assertType("block", block, "Function");
+                            const variants = Array.from(base.variants.values());
+                            variants.forEach((p) => block.implementation(p));
+                            return voidType;
+                        }),
+                    },
+                });
+            },
+            renameVariant(base) {
+                return createFunctionType((oldNameT, newNameT) => {
+                    assertType("old variant name", oldNameT, "String");
+                    assertType("new variant name", newNameT, "String");
+                    const oldName = oldNameT.value;
+                    const newName = newNameT.value;
+                    const variant = base.variants.get(oldName);
+                    if (!variant) {
+                        throw new ProjectionError(`Couldn't find variant ${variant}`);
+                    }
+                    base.variants.rekey(oldName, newName);
+                    variant.name = newName;
+                    return voidType;
+                });
+            },
+            addVariant(base) {
+                return createFunctionType((nameT, type) => {
+                    assertType("Variant name", nameT, "String");
+                    const name = nameT.value;
+                    const variantType = createType({
+                        kind: "UnionVariant",
+                        decorators: [],
+                        name,
+                        node: undefined,
+                        type,
+                        union: base,
+                    });
+                    base.variants.set(name, variantType);
+                    return voidType;
+                });
+            },
+            deleteVariant(base) {
+                return createFunctionType((nameT) => {
+                    assertType("Name", nameT, "String");
+                    const name = nameT.value;
+                    base.variants.delete(name);
+                    return voidType;
+                });
+            },
+        },
+        UnionVariant: {
+            ...createBaseMembers(),
+            name(base) {
+                if (typeof base.name === "string") {
+                    return createLiteralType(base.name);
+                }
+                else {
+                    throw new ProjectionError("Can't refer to name of anonymous union variant");
+                }
+            },
+            setType(base) {
+                return createFunctionType((type) => {
+                    base.type = type;
+                    return voidType;
+                });
+            },
+            type(base) {
+                return base.type;
+            },
+        },
+        Operation: {
+            ...createBaseMembers(),
+            ...createNameableMembers(),
+            parameters(base) {
+                return base.parameters;
+            },
+            returnType(base) {
+                return base.returnType;
+            },
+            changeReturnType(base) {
+                return createFunctionType((newType) => {
+                    base.returnType = newType;
+                    return voidType;
+                });
+            },
+        },
+        Interface: {
+            ...createBaseMembers(),
+            ...createNameableMembers(),
+            operations(base) {
+                return createType({
+                    kind: "Object",
+                    properties: {
+                        forEach: createFunctionType((block) => {
+                            assertType("block", block, "Function");
+                            const props = Array.from(base.operations.values());
+                            props.forEach((p) => block.implementation(p));
+                            return voidType;
+                        }),
+                    },
+                });
+            },
+            renameOperation(base) {
+                return createFunctionType((oldNameT, newNameT) => {
+                    assertType("operation name", oldNameT, "String");
+                    assertType("operation name", newNameT, "String");
+                    const oldName = oldNameT.value;
+                    const newName = newNameT.value;
+                    const op = base.operations.get(oldName);
+                    if (!op) {
+                        throw new ProjectionError(`Couldn't find operation named ${oldName}`);
+                    }
+                    op.name = newName;
+                    base.operations.rekey(oldName, newName);
+                    return voidType;
+                });
+            },
+            addOperation(base) {
+                return createFunctionType((nameT, parameters, returnType) => {
+                    assertType("operation name", nameT, "String");
+                    assertType("parameters", parameters, "Model");
+                    const name = nameT.value;
+                    const prop = base.operations.get(name);
+                    if (prop) {
+                        throw new ProjectionError(`Operation named ${name} already exists`);
+                    }
+                    base.operations.set(name, createType({
+                        kind: "Operation",
+                        name,
+                        node: undefined,
+                        parameters,
+                        returnType,
+                        decorators: [],
+                    }));
+                    return voidType;
+                });
+            },
+            deleteOperation(base) {
+                return createFunctionType((nameT) => {
+                    assertType("operation name", nameT, "String");
+                    const name = nameT.value;
+                    const prop = base.operations.get(name);
+                    if (!prop) {
+                        return voidType;
+                    }
+                    base.operations.delete(name);
+                    return voidType;
+                });
+            },
+        },
+        Enum: {
+            ...createBaseMembers(),
+            ...createNameableMembers(),
+            members(base) {
+                return createType({
+                    kind: "Object",
+                    properties: {
+                        forEach: createFunctionType((block) => {
+                            assertType("parameter", block, "Function");
+                            const props = Array.from(base.members.values());
+                            props.forEach((p) => block.implementation(p));
+                            return voidType;
+                        }),
+                    },
+                });
+            },
+            name(base) {
+                return createLiteralType(base.name);
+            },
+            addMember(base) {
+                return createFunctionType((nameT, type) => {
+                    assertType("enum member", nameT, "String");
+                    type && assertType("enum type", type, "String", "Number");
+                    const name = nameT.value;
+                    const member = base.members.get(name);
+                    if (member) {
+                        throw new ProjectionError(`Enum already has a member named ${name}`);
+                    }
+                    if (type !== undefined && type.kind !== "Number" && type.kind !== "String") {
+                        throw new ProjectionError(`Enum member types must be string or number`);
+                    }
+                    base.members.set(name, createType({
+                        kind: "EnumMember",
+                        enum: base,
+                        name,
+                        decorators: [],
+                        node: undefined,
+                        value: type ? type.value : undefined,
+                    }));
+                    return voidType;
+                });
+            },
+            deleteMember(base) {
+                return createFunctionType((nameT) => {
+                    assertType("enum member", nameT, "String");
+                    const name = nameT.value;
+                    base.members.delete(name);
+                    return voidType;
+                });
+            },
+            renameMember(base) {
+                return createFunctionType((oldNameT, newNameT) => {
+                    assertType("enum member", oldNameT, "String");
+                    assertType("enum member", newNameT, "String");
+                    const oldName = oldNameT.value;
+                    const newName = newNameT.value;
+                    const member = base.members.get(oldName);
+                    if (!member) {
+                        throw new ProjectionError(`Enum doesn't have member ${oldName}`);
+                    }
+                    member.name = newName;
+                    base.members.rekey(oldName, newName);
+                    return voidType;
+                });
+            },
+        },
+        EnumMember: {
+            ...createBaseMembers(),
+            name(base) {
+                return createLiteralType(base.name);
+            },
+            type(base) {
+                return base.value ? createLiteralType(base.value) : neverType;
+            },
+        },
+        String: {
+            toCamelCase(base) {
+                return createFunctionType(() => {
+                    return createLiteralType(camelCase(base.value));
+                });
+            },
+            toPascalCase(base) {
+                return createFunctionType(() => {
+                    return createLiteralType(pascalCase(base.value));
+                });
+            },
+            toSnakeCase(base) {
+                return createFunctionType(() => {
+                    return createLiteralType(snakeCase(base.value));
+                });
+            },
+            toKebabCase(base) {
+                return createFunctionType(() => {
+                    return createLiteralType(kebabCase(base.value));
+                });
+            },
+        },
+    };
+}
+//# sourceMappingURL=projection-members.js.map
\ No newline at end of file
diff --git a/dist/src/core/projection-members.js.map b/dist/src/core/projection-members.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..f6f5f09fac2149c0a2a27b11f719a201043e7f52
--- /dev/null
+++ b/dist/src/core/projection-members.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"projection-members.js","sourceRoot":"","sources":["../../../src/core/projection-members.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/core/projector.d.ts b/dist/src/core/projector.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..34a3446a29e2235748583c55cd2d70b157366718
--- /dev/null
+++ b/dist/src/core/projector.d.ts
@@ -0,0 +1,26 @@
+import type { Program, ProjectedProgram } from "./program.js";
+import type { ProjectionApplication, Type } from "./types.js";
+/**
+ * Creates a projector which returns a projected view of either the global namespace or the
+ * start node provided. Projecting a type effectively clones every type referenced underneath
+ * it. This is accomplished by doing a semantic walk of each type, cloning each type we find,
+ * and running projection code on the clone.
+ *
+ * Projectors can run multiple projections at once. In such cases, each projection is run
+ * on the same clone of the unprojected type. It is up to projections and the user to ensure
+ * that projections which depend on a particular shape are run when that shape is present (or
+ * else to ensure that their projections are tolerant to shape changes).
+ *
+ * The projector maintains its own state maps and sets. If a projection is active (i.e.
+ * program.currentProjector is set), then the projector's state will be returned instead
+ * of the program's state. This ensures that there is no overlap between projected and
+ * unprojected state. It also means that you cannot get state for nodes that are not
+ * part of the active projection.
+ *
+ * Note that decorators are run on namespaces prior to cloning any child types to align
+ * with the checker semantics, while projections are run after everything under the namespace
+ * is cloned. All other run decorators and projections after all child types are cloned and
+ * have their decorators run.
+ */
+export declare function createProjector(program: Program, projections: ProjectionApplication[], startNode?: Type): ProjectedProgram;
+//# sourceMappingURL=projector.d.ts.map
\ No newline at end of file
diff --git a/dist/src/core/projector.d.ts.map b/dist/src/core/projector.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..348dc1bfdda1459d09b75bf570a5db948e4e67d1
--- /dev/null
+++ b/dist/src/core/projector.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"projector.d.ts","sourceRoot":"","sources":["../../../src/core/projector.ts"],"names":[],"mappings":"AAGA,OAAO,KAAK,EAAE,OAAO,EAAE,gBAAgB,EAAE,MAAM,cAAc,CAAC;AAI9D,OAAO,KAAK,EAWV,qBAAqB,EAIrB,IAAI,EAKL,MAAM,YAAY,CAAC;AAEpB;;;;;;;;;;;;;;;;;;;;;GAqBG;AACH,wBAAgB,eAAe,CAC7B,OAAO,EAAE,OAAO,EAChB,WAAW,EAAE,qBAAqB,EAAE,EACpC,SAAS,CAAC,EAAE,IAAI,GACf,gBAAgB,CAqpBlB"}
\ No newline at end of file
diff --git a/dist/src/core/projector.js b/dist/src/core/projector.js
new file mode 100644
index 0000000000000000000000000000000000000000..d022951c3895ac2e91686840d821cc01cd72e761
--- /dev/null
+++ b/dist/src/core/projector.js
@@ -0,0 +1,581 @@
+import { createRekeyableMap, mutate } from "../utils/misc.js";
+import { finishTypeForProgram } from "./checker.js";
+import { compilerAssert } from "./diagnostics.js";
+import { isProjectedProgram } from "./projected-program.js";
+import { createStateAccessors } from "./state-accessors.js";
+import { getParentTemplateNode, isNeverType, isTemplateInstance, isValue } from "./type-utils.js";
+/**
+ * Creates a projector which returns a projected view of either the global namespace or the
+ * start node provided. Projecting a type effectively clones every type referenced underneath
+ * it. This is accomplished by doing a semantic walk of each type, cloning each type we find,
+ * and running projection code on the clone.
+ *
+ * Projectors can run multiple projections at once. In such cases, each projection is run
+ * on the same clone of the unprojected type. It is up to projections and the user to ensure
+ * that projections which depend on a particular shape are run when that shape is present (or
+ * else to ensure that their projections are tolerant to shape changes).
+ *
+ * The projector maintains its own state maps and sets. If a projection is active (i.e.
+ * program.currentProjector is set), then the projector's state will be returned instead
+ * of the program's state. This ensures that there is no overlap between projected and
+ * unprojected state. It also means that you cannot get state for nodes that are not
+ * part of the active projection.
+ *
+ * Note that decorators are run on namespaces prior to cloning any child types to align
+ * with the checker semantics, while projections are run after everything under the namespace
+ * is cloned. All other run decorators and projections after all child types are cloned and
+ * have their decorators run.
+ */
+export function createProjector(program, projections, startNode) {
+    const projectedTypes = new Map();
+    const checker = program.checker;
+    const neverType = checker.neverType;
+    const scope = [];
+    const projector = {
+        projectedTypes,
+        projections,
+        projectType,
+        parentProjector: isProjectedProgram(program) ? program.projector : undefined,
+    };
+    const projectedNamespaces = [];
+    let projectingNamespaces = false;
+    const projectedProgram = {
+        ...program,
+        getGlobalNamespaceType: () => projector.projectedGlobalNamespace,
+        projector,
+        ...createStateAccessors(program.stateMaps, program.stateSets, projector),
+    };
+    const targetGlobalNs = startNode
+        ? startNode.projector
+            ? startNode.projector.projectedGlobalNamespace
+            : program.checker.getGlobalNamespaceType()
+        : program.checker.getGlobalNamespaceType();
+    projectingNamespaces = true;
+    // Project the global namespace to get a reference.
+    projector.projectedGlobalNamespace = projectNamespace(targetGlobalNs, false);
+    // Then project the content
+    projectSubNamespaces(targetGlobalNs, projector.projectedGlobalNamespace);
+    projectingNamespaces = false;
+    // then project all the types
+    for (const ns of projectedNamespaces) {
+        projectNamespaceContents(ns);
+    }
+    projectType(targetGlobalNs);
+    projector.projectedStartNode = startNode
+        ? projectedTypes.get(startNode)
+        : projector.projectedGlobalNamespace;
+    return projectedProgram;
+    function projectType(type) {
+        if (isValue(type)) {
+            if (type.valueKind === "EnumValue") {
+                // This is a hack. We project the enum itself, so we need to project enum values in order to prevent incoherence
+                // between projections that reference enum values and the enum/members themselves. If we project the enummember
+                // in the value and it results in something other than an enum member, we will give up and just return the value
+                // as is. Otherwise we'll return the projected member.
+                const projectedType = projectType(type.type);
+                const projectedMember = projectType(type.value);
+                if (projectedMember.kind === "EnumMember") {
+                    return {
+                        entityKind: "Value",
+                        valueKind: "EnumValue",
+                        type: projectedType,
+                        value: projectedMember,
+                    };
+                }
+                else {
+                    return type;
+                }
+            }
+            else {
+                return type;
+            }
+        }
+        if (type.entityKind === "Indeterminate") {
+            return { entityKind: "Indeterminate", type: projectType(type.type) };
+        }
+        if (projectedTypes.has(type)) {
+            return projectedTypes.get(type);
+        }
+        scope.push(type);
+        const preProjected = applyPreProjection(type);
+        if (preProjected !== type) {
+            projectedTypes.set(type, preProjected);
+            scope.pop();
+            return preProjected;
+        }
+        let projected;
+        switch (type.kind) {
+            case "Namespace":
+                compilerAssert(projectingNamespaces, `Namespace ${type.name} should have already been projected.`);
+                projected = projectNamespace(type, false);
+                break;
+            case "Scalar":
+                projected = projectScalar(type);
+                break;
+            case "Model":
+                projected = projectModel(type);
+                break;
+            case "ModelProperty":
+                projected = projectModelProperty(type);
+                break;
+            case "Operation":
+                projected = projectOperation(type);
+                break;
+            case "Interface":
+                projected = projectInterface(type);
+                break;
+            case "Union":
+                projected = projectUnion(type);
+                break;
+            case "UnionVariant":
+                projected = projectUnionVariant(type);
+                break;
+            case "Tuple":
+                projected = projectTuple(type);
+                break;
+            case "Enum":
+                projected = projectEnum(type);
+                break;
+            case "EnumMember":
+                projected = projectEnumMember(type);
+                break;
+            default:
+                projected = type;
+        }
+        scope.pop();
+        return projected;
+    }
+    function projectSubNamespaces(ns, projectedNs) {
+        if (ns.namespaces.size === projectedNs.namespaces.size) {
+            // Sub namespace should already have been projected.
+            return;
+        }
+        for (const [key, childNs] of ns.namespaces) {
+            const projected = projectNamespace(childNs);
+            if (projected.kind === "Namespace") {
+                // todo: check for never?
+                projectedNs.namespaces.set(key, projected);
+            }
+        }
+    }
+    function projectNamespace(ns, projectSubNamespace = true) {
+        const alreadyProjected = projectedTypes.get(ns);
+        if (alreadyProjected) {
+            if (projectSubNamespace) {
+                projectSubNamespaces(ns, alreadyProjected);
+            }
+            return alreadyProjected;
+        }
+        const projectedNs = shallowClone(ns, {
+            namespaces: new Map(),
+            scalars: new Map(),
+            models: new Map(),
+            operations: new Map(),
+            interfaces: new Map(),
+            unions: new Map(),
+            enums: new Map(),
+            decorators: [],
+        });
+        projectedNs.decorators = projectDecorators(ns.decorators);
+        if (ns.namespace) {
+            projectedNs.namespace = projectNamespace(ns.namespace, false);
+        }
+        // ns run decorators before projecting anything inside them
+        finishTypeForProgram(projectedProgram, projectedNs);
+        if (projectSubNamespace) {
+            projectSubNamespaces(ns, projectedNs);
+        }
+        projectedNamespaces.push(ns);
+        return applyProjection(ns, projectedNs);
+    }
+    /**
+     * Projects the contents of a namespace, but not the namespace itself. The namespace itself
+     * is projected in an earlier phase.
+     */
+    function projectNamespaceContents(ns) {
+        const projectedNs = projectedTypes.get(ns);
+        compilerAssert(projectedNs, "Should have projected namespace by now");
+        if (projectedNs.kind !== "Namespace") {
+            // we projected the namespace to something else so don't do any more work.
+            // this might happen if a namespace itself was added/removed/etc. and is
+            // projected to never.
+            return neverType;
+        }
+        for (const childModel of ns.models.values()) {
+            const projected = projectType(childModel);
+            if (projected.kind === "Model") {
+                projectedNs.models.set(projected.name, projected);
+            }
+        }
+        for (const scalar of ns.scalars.values()) {
+            const projected = projectType(scalar);
+            if (projected.kind === "Scalar") {
+                projectedNs.scalars.set(projected.name, projected);
+            }
+        }
+        for (const childOperation of ns.operations.values()) {
+            const projected = projectType(childOperation);
+            if (projected.kind === "Operation") {
+                projectedNs.operations.set(projected.name, projected);
+            }
+        }
+        for (const childInterface of ns.interfaces.values()) {
+            const projected = projectType(childInterface);
+            if (projected.kind === "Interface") {
+                projectedNs.interfaces.set(projected.name, projected);
+            }
+        }
+        for (const childUnion of ns.unions.values()) {
+            const projected = projectType(childUnion);
+            if (projected.kind === "Union") {
+                projectedNs.unions.set(projected.name, projected);
+            }
+        }
+        for (const childEnum of ns.enums.values()) {
+            const projected = projectType(childEnum);
+            if (projected.kind === "Enum") {
+                projectedNs.enums.set(projected.name, projected);
+            }
+        }
+        return projectedNs;
+    }
+    function projectModel(model) {
+        const properties = createRekeyableMap();
+        const projectedModel = shallowClone(model, {
+            properties,
+            derivedModels: [],
+        });
+        if (model.templateMapper) {
+            projectedModel.templateMapper = projectTemplateMapper(model.templateMapper);
+            // eslint-disable-next-line @typescript-eslint/no-deprecated
+            projectedModel.templateArguments = mutate(projectedModel.templateMapper.args);
+        }
+        if (model.baseModel) {
+            projectedModel.baseModel = projectType(model.baseModel);
+        }
+        if (model.sourceModel) {
+            projectedModel.sourceModel = projectType(model.sourceModel);
+        }
+        projectedModel.sourceModels = model.sourceModels.map((source) => {
+            return { ...source, model: projectType(source.model) };
+        });
+        if (model.indexer) {
+            const projectedValue = projectType(model.indexer.value);
+            projectedModel.indexer = {
+                key: projectType(model.indexer.key),
+                value: projectedValue,
+            };
+        }
+        projectedTypes.set(model, projectedModel);
+        for (const prop of model.properties.values()) {
+            const projectedProp = projectType(prop);
+            if (projectedProp.kind === "ModelProperty") {
+                properties.set(projectedProp.name, projectedProp);
+            }
+        }
+        projectedModel.decorators = projectDecorators(model.decorators);
+        if (shouldFinishType(model)) {
+            finishTypeForProgram(projectedProgram, projectedModel);
+        }
+        const projectedResult = applyProjection(model, projectedModel);
+        if (!isNeverType(projectedResult) &&
+            projectedResult.kind === "Model" &&
+            projectedResult.baseModel) {
+            projectedResult.baseModel.derivedModels ??= [];
+            projectedResult.baseModel.derivedModels.push(projectedModel);
+        }
+        return projectedResult;
+    }
+    function projectTemplateMapper(mapper) {
+        const projectedMapper = {
+            ...mapper,
+            args: [],
+            map: new Map(),
+        };
+        for (const arg of mapper.args) {
+            mutate(projectedMapper.args).push(projectType(arg));
+        }
+        for (const [param, type] of mapper.map) {
+            projectedMapper.map.set(param, projectType(type));
+        }
+        return projectedMapper;
+    }
+    function projectScalar(scalar) {
+        const projectedScalar = shallowClone(scalar, {
+            derivedScalars: [],
+        });
+        if (scalar.templateMapper) {
+            projectedScalar.templateMapper = projectTemplateMapper(scalar.templateMapper);
+            // eslint-disable-next-line @typescript-eslint/no-deprecated
+            projectedScalar.templateArguments = mutate(projectedScalar.templateMapper.args);
+        }
+        if (scalar.baseScalar) {
+            projectedScalar.baseScalar = projectType(scalar.baseScalar);
+        }
+        projectedTypes.set(scalar, projectedScalar);
+        projectedScalar.decorators = projectDecorators(scalar.decorators);
+        if (shouldFinishType(scalar)) {
+            finishTypeForProgram(projectedProgram, projectedScalar);
+        }
+        const projectedResult = applyProjection(scalar, projectedScalar);
+        if (!isNeverType(projectedResult) &&
+            projectedResult.kind === "Scalar" &&
+            projectedResult.baseScalar) {
+            projectedResult.baseScalar.derivedScalars ??= [];
+            projectedResult.baseScalar.derivedScalars.push(projectedScalar);
+        }
+        return projectedResult;
+    }
+    /**
+     * Returns true if we should finish a type. The only time we don't finish is when it's
+     * a template type, because we don't want to run decorators for templates.
+     */
+    function shouldFinishType(type) {
+        const parentTemplate = type.node && getParentTemplateNode(type.node);
+        return !parentTemplate || isTemplateInstance(type);
+    }
+    function projectModelProperty(prop) {
+        const projectedType = projectType(prop.type);
+        const projectedDecs = projectDecorators(prop.decorators);
+        const projectedProp = shallowClone(prop, {
+            type: projectedType,
+            decorators: projectedDecs,
+        });
+        if (prop.sourceProperty) {
+            const sourceProperty = projectType(prop.sourceProperty);
+            projectedProp.sourceProperty = sourceProperty;
+        }
+        if (shouldFinishType(prop)) {
+            finishTypeForProgram(projectedProgram, projectedProp);
+        }
+        if (prop.model) {
+            projectedProp.model = projectType(prop.model);
+        }
+        return applyProjection(prop, projectedProp);
+    }
+    function projectOperation(op) {
+        const projectedOp = shallowClone(op, {});
+        projectedOp.parameters = projectType(op.parameters);
+        projectedOp.returnType = projectType(op.returnType);
+        projectedOp.decorators = projectDecorators(op.decorators);
+        if (op.templateMapper) {
+            projectedOp.templateMapper = projectTemplateMapper(op.templateMapper);
+            // eslint-disable-next-line @typescript-eslint/no-deprecated
+            projectedOp.templateArguments = mutate(projectedOp.templateMapper.args);
+        }
+        if (op.sourceOperation) {
+            projectedOp.sourceOperation = projectType(op.sourceOperation);
+        }
+        if (op.namespace) {
+            projectedOp.namespace = projectedNamespaceScope();
+        }
+        if (op.isFinished) {
+            finishTypeForProgram(projectedProgram, projectedOp);
+        }
+        if (op.interface) {
+            projectedOp.interface = projectType(op.interface);
+        }
+        return applyProjection(op, projectedOp);
+    }
+    function projectInterface(iface) {
+        const operations = createRekeyableMap();
+        const sourceInterfaces = [];
+        const projectedIface = shallowClone(iface, {
+            operations,
+            sourceInterfaces,
+        });
+        projectedIface.decorators = projectDecorators(iface.decorators);
+        if (iface.templateMapper) {
+            projectedIface.templateMapper = projectTemplateMapper(iface.templateMapper);
+            // eslint-disable-next-line @typescript-eslint/no-deprecated
+            projectedIface.templateArguments = mutate(projectedIface.templateMapper.args);
+        }
+        for (const op of iface.operations.values()) {
+            const projectedOp = projectType(op);
+            if (projectedOp.kind === "Operation") {
+                operations.set(projectedOp.name, projectedOp);
+            }
+        }
+        for (const source of iface.sourceInterfaces) {
+            sourceInterfaces.push(projectType(source));
+        }
+        if (shouldFinishType(iface)) {
+            finishTypeForProgram(projectedProgram, projectedIface);
+        }
+        return applyProjection(iface, projectedIface);
+    }
+    function projectUnion(union) {
+        const variants = createRekeyableMap();
+        const projectedUnion = shallowClone(union, {
+            variants,
+        });
+        projectedUnion.decorators = projectDecorators(union.decorators);
+        if (union.templateMapper) {
+            projectedUnion.templateMapper = projectTemplateMapper(union.templateMapper);
+            // eslint-disable-next-line @typescript-eslint/no-deprecated
+            projectedUnion.templateArguments = mutate(projectedUnion.templateMapper.args);
+        }
+        for (const variant of union.variants.values()) {
+            const projectedVariant = projectType(variant);
+            if (projectedVariant.kind === "UnionVariant" && projectedVariant.type !== neverType) {
+                variants.set(projectedVariant.name, projectedVariant);
+            }
+        }
+        if (shouldFinishType(union)) {
+            finishTypeForProgram(projectedProgram, projectedUnion);
+        }
+        return applyProjection(union, projectedUnion);
+    }
+    function projectUnionVariant(variant) {
+        const projectedType = projectType(variant.type);
+        const projectedDecs = projectDecorators(variant.decorators);
+        const projectedVariant = shallowClone(variant, {
+            type: projectedType,
+            decorators: projectedDecs,
+        });
+        finishTypeForProgram(projectedProgram, projectedVariant);
+        projectedVariant.union = projectType(variant.union);
+        return applyProjection(variant, projectedVariant);
+    }
+    function projectTuple(tuple) {
+        const values = [];
+        const projectedTuple = shallowClone(tuple, {
+            values,
+        });
+        for (const item of tuple.values) {
+            values.push(projectType(item));
+        }
+        return projectedTuple;
+    }
+    function projectEnum(e) {
+        const members = createRekeyableMap();
+        const projectedEnum = shallowClone(e, {
+            members,
+        });
+        projectedEnum.decorators = projectDecorators(e.decorators);
+        projectedTypes.set(e, projectedEnum);
+        for (const member of e.members.values()) {
+            const projectedMember = projectType(member);
+            if (projectedMember.kind === "EnumMember") {
+                members.set(projectedMember.name, projectedMember);
+            }
+        }
+        finishTypeForProgram(projectedProgram, projectedEnum);
+        return applyProjection(e, projectedEnum);
+    }
+    function projectEnumMember(e) {
+        const decorators = projectDecorators(e.decorators);
+        const projectedMember = shallowClone(e, {
+            decorators,
+        });
+        finishTypeForProgram(projectedProgram, projectedMember);
+        projectedMember.enum = projectType(e.enum);
+        return applyProjection(e, projectedMember);
+    }
+    function projectDecorators(decs) {
+        const decorators = [];
+        for (const dec of decs) {
+            const args = [];
+            for (const arg of dec.args) {
+                const jsValue = typeof arg.jsValue === "object" && arg.jsValue !== null && "entityKind" in arg.jsValue
+                    ? projectType(arg.jsValue)
+                    : arg.jsValue;
+                args.push({ ...arg, value: projectType(arg.value), jsValue });
+            }
+            decorators.push({ ...dec, args });
+        }
+        return decorators;
+    }
+    function getInScopeProjections() {
+        const candidates = new Set(projections);
+        const inScope = [];
+        let currentScope = namespaceScope();
+        outer: while (currentScope) {
+            for (const candidate of candidates) {
+                if (!candidate.scope || candidate.scope === currentScope) {
+                    candidates.delete(candidate);
+                    inScope.push(candidate);
+                    if (candidates.size === 0) {
+                        break outer;
+                    }
+                }
+            }
+            currentScope = currentScope.namespace;
+        }
+        return inScope;
+    }
+    function namespaceScope() {
+        for (let i = scope.length - 1; i >= 0; i--) {
+            if (scope[i].namespace !== undefined) {
+                return scope[i].namespace;
+            }
+        }
+        return undefined;
+    }
+    function projectedNamespaceScope() {
+        const ns = namespaceScope();
+        if (!ns)
+            return ns;
+        return projectType(ns);
+    }
+    function applyProjection(baseType, projectedType) {
+        const inScopeProjections = getInScopeProjections();
+        for (const projectionApplication of inScopeProjections) {
+            const projectionsByName = baseType.projectionsByName(projectionApplication.projectionName);
+            if (projectionsByName.length === 0)
+                continue;
+            const targetNode = projectionApplication.direction === "from"
+                ? projectionsByName[0].from
+                : projectionsByName[0].to;
+            if (targetNode) {
+                const projected = checker.project(projectedType, targetNode, projectionApplication.arguments);
+                if (projected !== projectedType) {
+                    // override the projected type cache with the returned type
+                    projectedTypes.set(baseType, projected);
+                    return projected;
+                }
+            }
+        }
+        return projectedType;
+    }
+    function applyPreProjection(type) {
+        const inScopeProjections = getInScopeProjections();
+        for (const projectionApplication of inScopeProjections) {
+            const projectionsByName = type.projectionsByName(projectionApplication.projectionName);
+            if (projectionsByName.length === 0)
+                continue;
+            const targetNode = projectionApplication.direction === "from"
+                ? projectionsByName[0].preFrom
+                : projectionsByName[0].preTo;
+            if (targetNode) {
+                return checker.project(type, targetNode, projectionApplication.arguments);
+            }
+        }
+        return type;
+    }
+    function shallowClone(type, additionalProps) {
+        const scopeProps = {};
+        if ("namespace" in type && type.namespace !== undefined) {
+            scopeProps.namespace = projectedNamespaceScope();
+        }
+        const clone = checker.createType({
+            ...type,
+            ...additionalProps,
+            ...scopeProps,
+            projectionSource: type,
+            projectionBase: type.projectionBase ?? type,
+            projector,
+        });
+        if (type.kind === "Union") {
+            // create the options getter
+            Object.defineProperty(clone, "options", {
+                get() {
+                    return Array.from(this.variants.values()).map((v) => v.type);
+                },
+            });
+        }
+        projectedTypes.set(type, clone);
+        return clone;
+    }
+}
+//# sourceMappingURL=projector.js.map
\ No newline at end of file
diff --git a/dist/src/core/projector.js.map b/dist/src/core/projector.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..49754bd661a51e606d5f43deaabe5d003ab7f257
--- /dev/null
+++ b/dist/src/core/projector.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"projector.js","sourceRoot":"","sources":["../../../src/core/projector.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/core/scanner.js b/dist/src/core/scanner.js
index 896e308087d949e478153d53e99f21fe935956b3..07b56903f8cef413dc60d9db2f641564f206ac56 100644
--- a/dist/src/core/scanner.js
+++ b/dist/src/core/scanner.js
@@ -1294,7 +1294,7 @@ export function skipTriviaBackward(script, position, endPosition = -1) {
         position--;
     }
     else if (position > input.length) {
-        compilerAssert(false, "position out of range");
+        compilerAssert(false, `position out of range: ${position}, text length: ${input.length}`);
     }
     while (position > endPosition) {
         const ch = input.charCodeAt(position);
diff --git a/dist/src/core/scanner.js.map b/dist/src/core/scanner.js.map
index a05b64adcc9fff847a647877c2ff8001b375daf6..53390bb089bf8742f2be1d677cbd7dc3e2c59c56 100644
--- a/dist/src/core/scanner.js.map
+++ b/dist/src/core/scanner.js.map
@@ -1 +1 @@
-{"version":3,"file":"scanner.js","sourceRoot":"","sources":["../../../src/core/scanner.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"scanner.js","sourceRoot":"","sources":["../../../src/core/scanner.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/asset-emitter.d.ts b/dist/src/emitter-framework/asset-emitter.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..f0859699abeb2c688df59a89d2afdbe7f33fab59
--- /dev/null
+++ b/dist/src/emitter-framework/asset-emitter.d.ts
@@ -0,0 +1,5 @@
+import type { EmitContext, Program } from "../core/index.js";
+import { TypeEmitter } from "./type-emitter.js";
+import { AssetEmitter } from "./types.js";
+export declare function createAssetEmitter<T, TOptions extends object>(program: Program, TypeEmitterClass: typeof TypeEmitter<T, TOptions>, emitContext: EmitContext<TOptions>): AssetEmitter<T, TOptions>;
+//# sourceMappingURL=asset-emitter.d.ts.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/asset-emitter.d.ts.map b/dist/src/emitter-framework/asset-emitter.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..0ea5db92a7abc2385669fe8c19855e72f943fceb
--- /dev/null
+++ b/dist/src/emitter-framework/asset-emitter.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"asset-emitter.d.ts","sourceRoot":"","sources":["../../../src/emitter-framework/asset-emitter.ts"],"names":[],"mappings":"AAEA,OAAO,KAAK,EAAE,WAAW,EAAoB,OAAO,EAAQ,MAAM,kBAAkB,CAAC;AAOrF,OAAO,EAAE,WAAW,EAAE,MAAM,mBAAmB,CAAC;AAChD,OAAO,EACL,YAAY,EAiBb,MAAM,YAAY,CAAC;AAWpB,wBAAgB,kBAAkB,CAAC,CAAC,EAAE,QAAQ,SAAS,MAAM,EAC3D,OAAO,EAAE,OAAO,EAChB,gBAAgB,EAAE,OAAO,WAAW,CAAC,CAAC,EAAE,QAAQ,CAAC,EACjD,WAAW,EAAE,WAAW,CAAC,QAAQ,CAAC,GACjC,YAAY,CAAC,CAAC,EAAE,QAAQ,CAAC,CA2wB3B"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/asset-emitter.js b/dist/src/emitter-framework/asset-emitter.js
new file mode 100644
index 0000000000000000000000000000000000000000..174b2ad52ec151fdad4aec9ae49dcbbc910d4129
--- /dev/null
+++ b/dist/src/emitter-framework/asset-emitter.js
@@ -0,0 +1,720 @@
+import { compilerAssert } from "../core/diagnostics.js";
+import { getTypeName } from "../core/helpers/type-name-utils.js";
+import { joinPaths } from "../core/path-utils.js";
+import { isTemplateDeclaration } from "../core/type-utils.js";
+import { CustomKeyMap } from "./custom-key-map.js";
+import { Placeholder } from "./placeholder.js";
+import { resolveDeclarationReferenceScope } from "./ref-scope.js";
+import { ReferenceCycle } from "./reference-cycle.js";
+import { CircularEmit, Declaration, EmitterResult, NoEmit, RawCode, } from "./types.js";
+export function createAssetEmitter(program, TypeEmitterClass, emitContext) {
+    const sourceFiles = [];
+    const options = {
+        noEmit: program.compilerOptions.noEmit ?? false,
+        emitterOutputDir: emitContext.emitterOutputDir,
+        ...emitContext.options,
+    };
+    const typeId = CustomKeyMap.objectKeyer();
+    const contextId = CustomKeyMap.objectKeyer();
+    const entryId = CustomKeyMap.objectKeyer();
+    // This is effectively a seen set, ensuring that we don't emit the same
+    // type with the same context twice. So the map stores a triple of:
+    //
+    // 1. the method of TypeEmitter we would call
+    // 2. the tsp type we're emitting.
+    // 3. the current context.
+    //
+    // Note that in order for this to work, context needs to be interned so
+    // contexts with the same values inside are treated as identical in the
+    // map. See createInterner for more details.
+    const typeToEmitEntity = new CustomKeyMap(([method, type, context]) => {
+        return `${method}-${typeId.getKey(type)}-${contextId.getKey(context)}`;
+    });
+    // When we encounter a circular reference, this map will hold a callback
+    // that should be called when the circularly referenced type has completed
+    // its emit.
+    const waitingCircularRefs = new CustomKeyMap(([method, type, context]) => {
+        return `${method}-${typeId.getKey(type)}-${contextId.getKey(context)}`;
+    });
+    // Similar to `typeToEmitEntity`, this ensures we don't recompute context
+    // for types that we already have context for. Note that context is
+    // dependent on the context of the context call, e.g. if a model is
+    // referenced with reference context set we need to get its declaration
+    // context again. So we use the context's context as a key. Context must
+    // be interned, see createInterner for more details.
+    const knownContexts = new CustomKeyMap(([entry, context]) => {
+        return `${entryId.getKey(entry)}-${contextId.getKey(context)}`;
+    });
+    // The stack of types that the currently emitted type is lexically
+    // contained in. This gets pushed to when we visit a type that is
+    // lexically contained in the current type, and is reset when we jump via
+    // reference to another type in a different lexical context. Note that
+    // this does not correspond to tsp's lexical nesting, e.g. in the case of
+    // an alias to a model expression, the alias is lexically outside the
+    // model, but in the type graph we will consider it to be lexically inside
+    // whatever references the alias.
+    let lexicalTypeStack = [];
+    let referenceTypeChain = [];
+    // Internally, context is is split between lexicalContext and
+    // referenceContext because when a reference is made, we carry over
+    // referenceContext but leave lexical context behind. When context is
+    // accessed by the user, they are merged by getContext().
+    let context = {
+        lexicalContext: {},
+        referenceContext: {},
+    };
+    let programContext = null;
+    // Incoming reference context is reference context that comes from emitting a
+    // type reference. Incoming reference context is only set on the
+    // incomingReferenceContextTarget and types lexically contained within it. For
+    // example, when referencing a model with reference context set, we may need
+    // to get context from the referenced model's namespaces, and such namespaces
+    // will not see the reference context. However, the reference context will be
+    // available for the model, its properties, and any types nested within it
+    // (e.g. anonymous models).
+    let incomingReferenceContext = null;
+    let incomingReferenceContextTarget = null;
+    const stateInterner = createInterner();
+    const stackEntryInterner = createInterner();
+    const assetEmitter = {
+        getContext() {
+            return {
+                ...context.lexicalContext,
+                ...context.referenceContext,
+            };
+        },
+        getOptions() {
+            return options;
+        },
+        getProgram() {
+            return program;
+        },
+        result: {
+            declaration(name, value) {
+                const scope = currentScope();
+                compilerAssert(scope, "Emit context must have a scope set in order to create declarations. Consider setting scope to a new source file's global scope in the `programContext` method of `TypeEmitter`.");
+                return new Declaration(name, scope, value);
+            },
+            rawCode(value) {
+                return new RawCode(value);
+            },
+            none() {
+                return new NoEmit();
+            },
+        },
+        createScope(block, name, parentScope = null) {
+            let newScope;
+            if (!parentScope) {
+                // create source file scope
+                newScope = {
+                    kind: "sourceFile",
+                    name,
+                    sourceFile: block,
+                    parentScope,
+                    childScopes: [],
+                    declarations: [],
+                };
+            }
+            else {
+                newScope = {
+                    kind: "namespace",
+                    name,
+                    namespace: block,
+                    childScopes: [],
+                    declarations: [],
+                    parentScope,
+                };
+            }
+            parentScope?.childScopes.push(newScope);
+            return newScope; // the overload of createScope causes type weirdness
+        },
+        createSourceFile(path) {
+            const basePath = options.emitterOutputDir;
+            const sourceFile = {
+                globalScope: undefined,
+                path: joinPaths(basePath, path),
+                imports: new Map(),
+                meta: {},
+            };
+            sourceFile.globalScope = this.createScope(sourceFile, "");
+            sourceFiles.push(sourceFile);
+            return sourceFile;
+        },
+        emitTypeReference(target, options) {
+            return withPatchedReferenceContext(options?.referenceContext, () => {
+                const oldIncomingReferenceContext = incomingReferenceContext;
+                const oldIncomingReferenceContextTarget = incomingReferenceContextTarget;
+                incomingReferenceContext = context.referenceContext ?? null;
+                incomingReferenceContextTarget = incomingReferenceContext ? target : null;
+                let result;
+                if (target.kind === "ModelProperty") {
+                    result = invokeTypeEmitter("modelPropertyReference", target);
+                }
+                else if (target.kind === "EnumMember") {
+                    result = invokeTypeEmitter("enumMemberReference", target);
+                }
+                if (result) {
+                    incomingReferenceContext = oldIncomingReferenceContext;
+                    incomingReferenceContextTarget = oldIncomingReferenceContextTarget;
+                    return result;
+                }
+                const entity = this.emitType(target);
+                incomingReferenceContext = oldIncomingReferenceContext;
+                incomingReferenceContextTarget = oldIncomingReferenceContextTarget;
+                let placeholder = null;
+                if (entity.kind === "circular") {
+                    let waiting = waitingCircularRefs.get(entity.emitEntityKey);
+                    if (!waiting) {
+                        waiting = [];
+                        waitingCircularRefs.set(entity.emitEntityKey, waiting);
+                    }
+                    const typeChainSnapshot = referenceTypeChain;
+                    waiting.push({
+                        state: {
+                            lexicalTypeStack,
+                            context,
+                        },
+                        cb: (resolvedEntity) => invokeReference(this, resolvedEntity, true, resolveReferenceCycle(typeChainSnapshot, entity, typeToEmitEntity)),
+                    });
+                    placeholder = new Placeholder();
+                    return this.result.rawCode(placeholder);
+                }
+                else {
+                    return invokeReference(this, entity, false);
+                }
+                function invokeReference(assetEmitter, entity, circular, cycle) {
+                    let ref;
+                    const scope = currentScope();
+                    if (circular) {
+                        ref = typeEmitter.circularReference(entity, scope, cycle);
+                    }
+                    else {
+                        if (entity.kind !== "declaration") {
+                            return entity;
+                        }
+                        compilerAssert(scope, "Emit context must have a scope set in order to create references to declarations.");
+                        const { pathUp, pathDown, commonScope } = resolveDeclarationReferenceScope(entity, scope);
+                        ref = typeEmitter.reference(entity, pathUp, pathDown, commonScope);
+                    }
+                    if (!(ref instanceof EmitterResult)) {
+                        ref = assetEmitter.result.rawCode(ref);
+                    }
+                    if (placeholder) {
+                        // this should never happen as this function shouldn't be called until
+                        // the target declaration is finished being emitted.
+                        compilerAssert(ref.kind !== "circular", "TypeEmitter `reference` returned circular emit");
+                        // this could presumably be allowed if we want.
+                        compilerAssert(ref.kind === "none" || !(ref.value instanceof Placeholder), "TypeEmitter's `reference` method cannot return a placeholder.");
+                        switch (ref.kind) {
+                            case "code":
+                            case "declaration":
+                                placeholder.setValue(ref.value);
+                                break;
+                            case "none":
+                                // this cast is incorrect, think about what should happen
+                                // if reference returns noEmit...
+                                placeholder.setValue("");
+                                break;
+                        }
+                    }
+                    return ref;
+                }
+            });
+        },
+        emitDeclarationName(type) {
+            return typeEmitter.declarationName(type);
+        },
+        async writeOutput() {
+            return typeEmitter.writeOutput(sourceFiles);
+        },
+        getSourceFiles() {
+            return sourceFiles;
+        },
+        emitType(type, context) {
+            if (context?.referenceContext) {
+                incomingReferenceContext = context?.referenceContext ?? incomingReferenceContext;
+                incomingReferenceContextTarget = type ?? incomingReferenceContextTarget;
+            }
+            const declName = isDeclaration(type) && type.kind !== "Namespace" ? typeEmitter.declarationName(type) : null;
+            const key = typeEmitterKey(type);
+            let args;
+            switch (key) {
+                case "scalarDeclaration":
+                case "scalarInstantiation":
+                case "modelDeclaration":
+                case "modelInstantiation":
+                case "operationDeclaration":
+                case "interfaceDeclaration":
+                case "interfaceOperationDeclaration":
+                case "enumDeclaration":
+                case "unionDeclaration":
+                case "unionInstantiation":
+                    args = [declName];
+                    break;
+                case "arrayDeclaration":
+                    const arrayDeclElement = type.indexer.value;
+                    args = [declName, arrayDeclElement];
+                    break;
+                case "arrayLiteral":
+                    const arrayLiteralElement = type.indexer.value;
+                    args = [arrayLiteralElement];
+                    break;
+                case "intrinsic":
+                    args = [declName];
+                    break;
+                default:
+                    args = [];
+            }
+            const result = invokeTypeEmitter(key, type, ...args);
+            return result;
+        },
+        emitProgram(options) {
+            const namespace = program.getGlobalNamespaceType();
+            if (options?.emitGlobalNamespace) {
+                this.emitType(namespace);
+                return;
+            }
+            for (const ns of namespace.namespaces.values()) {
+                if (ns.name === "TypeSpec" && !options?.emitTypeSpecNamespace)
+                    continue;
+                this.emitType(ns);
+            }
+            for (const model of namespace.models.values()) {
+                if (!isTemplateDeclaration(model)) {
+                    this.emitType(model);
+                }
+            }
+            for (const operation of namespace.operations.values()) {
+                if (!isTemplateDeclaration(operation)) {
+                    this.emitType(operation);
+                }
+            }
+            for (const enumeration of namespace.enums.values()) {
+                this.emitType(enumeration);
+            }
+            for (const union of namespace.unions.values()) {
+                if (!isTemplateDeclaration(union)) {
+                    this.emitType(union);
+                }
+            }
+            for (const iface of namespace.interfaces.values()) {
+                if (!isTemplateDeclaration(iface)) {
+                    this.emitType(iface);
+                }
+            }
+            for (const scalar of namespace.scalars.values()) {
+                this.emitType(scalar);
+            }
+        },
+        emitModelProperties(model) {
+            const res = invokeTypeEmitter("modelProperties", model);
+            if (res instanceof EmitterResult) {
+                return res;
+            }
+            else {
+                return this.result.rawCode(res);
+            }
+        },
+        emitModelProperty(property) {
+            return invokeTypeEmitter("modelPropertyLiteral", property);
+        },
+        emitOperationParameters(operation) {
+            return invokeTypeEmitter("operationParameters", operation, operation.parameters);
+        },
+        emitOperationReturnType(operation) {
+            return invokeTypeEmitter("operationReturnType", operation, operation.returnType);
+        },
+        emitInterfaceOperations(iface) {
+            return invokeTypeEmitter("interfaceDeclarationOperations", iface);
+        },
+        emitInterfaceOperation(operation) {
+            const name = typeEmitter.declarationName(operation);
+            if (name === undefined) {
+                // the general approach of invoking the expression form doesn't work here
+                // because TypeSpec doesn't have operation expressions.
+                compilerAssert(false, "Unnamed operations are not supported");
+            }
+            return invokeTypeEmitter("interfaceOperationDeclaration", operation, name);
+        },
+        emitEnumMembers(en) {
+            return invokeTypeEmitter("enumMembers", en);
+        },
+        emitUnionVariants(union) {
+            return invokeTypeEmitter("unionVariants", union);
+        },
+        emitTupleLiteralValues(tuple) {
+            return invokeTypeEmitter("tupleLiteralValues", tuple);
+        },
+        async emitSourceFile(sourceFile) {
+            return await typeEmitter.sourceFile(sourceFile);
+        },
+    };
+    const typeEmitter = new TypeEmitterClass(assetEmitter);
+    return assetEmitter;
+    /**
+     * This function takes care of calling a method on the TypeEmitter to
+     * convert it to some emitted output. It will return a cached type if we
+     * have seen it before (and the context is the same). It will establish
+     * the emit context by calling the appropriate methods before getting the
+     * emit result. Also if a type emitter returns just a T or a
+     * Placeholder<T>, it will convert that to a RawCode result.
+     */
+    function invokeTypeEmitter(method, ...args) {
+        const type = args[0];
+        let entity;
+        let emitEntityKey;
+        let cached = false;
+        withTypeContext(method, args, () => {
+            emitEntityKey = [method, type, context];
+            const seenEmitEntity = typeToEmitEntity.get(emitEntityKey);
+            if (seenEmitEntity) {
+                entity = seenEmitEntity;
+                cached = true;
+                return;
+            }
+            typeToEmitEntity.set(emitEntityKey, new CircularEmit(emitEntityKey));
+            compilerAssert(typeEmitter[method], `TypeEmitter doesn't have a method named ${method}.`);
+            entity = liftToRawCode(typeEmitter[method](...args));
+        });
+        if (cached) {
+            return entity;
+        }
+        if (entity instanceof Placeholder) {
+            entity.onValue((v) => handleCompletedEntity(v));
+            return entity;
+        }
+        handleCompletedEntity(entity);
+        return entity;
+        function handleCompletedEntity(entity) {
+            typeToEmitEntity.set(emitEntityKey, entity);
+            const waitingRefCbs = waitingCircularRefs.get(emitEntityKey);
+            if (waitingRefCbs) {
+                for (const record of waitingRefCbs) {
+                    withContext(record.state, () => {
+                        record.cb(entity);
+                    });
+                }
+                waitingCircularRefs.set(emitEntityKey, []);
+            }
+            if (entity.kind === "declaration") {
+                entity.scope.declarations.push(entity);
+            }
+        }
+        function liftToRawCode(value) {
+            if (value instanceof EmitterResult) {
+                return value;
+            }
+            return assetEmitter.result.rawCode(value);
+        }
+    }
+    function isInternalMethod(method) {
+        return (method === "interfaceDeclarationOperations" ||
+            method === "interfaceOperationDeclaration" ||
+            method === "operationParameters" ||
+            method === "operationReturnType" ||
+            method === "modelProperties" ||
+            method === "enumMembers" ||
+            method === "tupleLiteralValues" ||
+            method === "unionVariants");
+    }
+    /**
+     * This helper takes a type and sets the `context` state to what it should
+     * be in order to invoke the type emitter method for that type. This needs
+     * to take into account the current context and any incoming reference
+     * context.
+     */
+    function setContextForType(method, args) {
+        const type = args[0];
+        let newTypeStack;
+        // if we've walked into a new declaration, reset the lexical type stack
+        // to the lexical containers of the current type.
+        if (isDeclaration(type) && type.kind !== "Intrinsic" && !isInternalMethod(method)) {
+            newTypeStack = [stackEntryInterner.intern({ method, args: stackEntryInterner.intern(args) })];
+            let ns = type.namespace;
+            while (ns) {
+                if (ns.name === "")
+                    break;
+                newTypeStack.unshift(stackEntryInterner.intern({ method: "namespace", args: stackEntryInterner.intern([ns]) }));
+                ns = ns.namespace;
+            }
+        }
+        else {
+            newTypeStack = [
+                ...lexicalTypeStack,
+                stackEntryInterner.intern({ method, args: stackEntryInterner.intern(args) }),
+            ];
+        }
+        lexicalTypeStack = newTypeStack;
+        if (!programContext) {
+            programContext = stateInterner.intern({
+                lexicalContext: typeEmitter.programContext(program),
+                referenceContext: stateInterner.intern({}),
+            });
+        }
+        // Establish our context by starting from program and walking up the type stack
+        // and merging in context for each of the lexical containers.
+        context = programContext;
+        for (const entry of lexicalTypeStack) {
+            if (incomingReferenceContext && entry.args[0] === incomingReferenceContextTarget) {
+                // bring in any reference context so it is available for any types nested beneath this type.
+                context = stateInterner.intern({
+                    lexicalContext: context.lexicalContext,
+                    referenceContext: stateInterner.intern({
+                        ...context.referenceContext,
+                        ...incomingReferenceContext,
+                    }),
+                });
+            }
+            const seenContext = knownContexts.get([entry, context]);
+            if (seenContext) {
+                context = seenContext;
+                continue;
+            }
+            const lexicalKey = entry.method + "Context";
+            const referenceKey = entry.method + "ReferenceContext";
+            if (keyHasContext(entry.method)) {
+                compilerAssert(typeEmitter[lexicalKey], `TypeEmitter doesn't have a method named ${lexicalKey}`);
+            }
+            if (keyHasReferenceContext(entry.method)) {
+                compilerAssert(typeEmitter[referenceKey], `TypeEmitter doesn't have a method named ${referenceKey}`);
+            }
+            const newContext = keyHasContext(entry.method)
+                ? typeEmitter[lexicalKey](...entry.args)
+                : {};
+            const newReferenceContext = keyHasReferenceContext(entry.method)
+                ? typeEmitter[referenceKey](...entry.args)
+                : {};
+            // assemble our new reference and lexical contexts.
+            const newContextState = stateInterner.intern({
+                lexicalContext: stateInterner.intern({
+                    ...context.lexicalContext,
+                    ...newContext,
+                }),
+                referenceContext: stateInterner.intern({
+                    ...context.referenceContext,
+                    ...newReferenceContext,
+                }),
+            });
+            knownContexts.set([entry, context], newContextState);
+            context = newContextState;
+        }
+        if (!isInternalMethod(method)) {
+            referenceTypeChain = [
+                ...referenceTypeChain,
+                stackEntryInterner.intern({
+                    method,
+                    type,
+                    context,
+                }),
+            ];
+        }
+    }
+    /**
+     * Invoke the callback with the proper context for a given type.
+     */
+    function withTypeContext(method, args, cb) {
+        const oldContext = context;
+        const oldTypeStack = lexicalTypeStack;
+        const oldRefTypeStack = referenceTypeChain;
+        setContextForType(method, args);
+        cb();
+        context = oldContext;
+        lexicalTypeStack = oldTypeStack;
+        referenceTypeChain = oldRefTypeStack;
+    }
+    function withPatchedReferenceContext(referenceContext, cb) {
+        if (referenceContext !== undefined) {
+            const oldContext = context;
+            context = stateInterner.intern({
+                lexicalContext: context.lexicalContext,
+                referenceContext: stateInterner.intern({
+                    ...context.referenceContext,
+                    ...referenceContext,
+                }),
+            });
+            const result = cb();
+            context = oldContext;
+            return result;
+        }
+        else {
+            return cb();
+        }
+    }
+    /**
+     * Invoke the callback with the given context.
+     */
+    function withContext(newContext, cb) {
+        const oldContext = context;
+        const oldTypeStack = lexicalTypeStack;
+        context = newContext.context;
+        lexicalTypeStack = newContext.lexicalTypeStack;
+        cb();
+        context = oldContext;
+        lexicalTypeStack = oldTypeStack;
+    }
+    function typeEmitterKey(type) {
+        switch (type.kind) {
+            case "Model":
+                if (program.checker.isStdType(type) && type.name === "Array") {
+                    // likely an array literal, though could be a bare reference to Array maybe?
+                    return "arrayLiteral";
+                }
+                if (type.name === "") {
+                    return "modelLiteral";
+                }
+                if (type.templateMapper) {
+                    return "modelInstantiation";
+                }
+                if (type.indexer && type.indexer.key.name === "integer") {
+                    return "arrayDeclaration";
+                }
+                return "modelDeclaration";
+            case "Namespace":
+                return "namespace";
+            case "ModelProperty":
+                return "modelPropertyLiteral";
+            case "StringTemplate":
+                return "stringTemplate";
+            case "Boolean":
+                return "booleanLiteral";
+            case "String":
+                return "stringLiteral";
+            case "Number":
+                return "numericLiteral";
+            case "Operation":
+                if (type.interface) {
+                    return "interfaceOperationDeclaration";
+                }
+                else {
+                    return "operationDeclaration";
+                }
+            case "Interface":
+                return "interfaceDeclaration";
+            case "Enum":
+                return "enumDeclaration";
+            case "EnumMember":
+                return "enumMember";
+            case "Union":
+                if (!type.name) {
+                    return "unionLiteral";
+                }
+                if (type.templateMapper) {
+                    return "unionInstantiation";
+                }
+                return "unionDeclaration";
+            case "UnionVariant":
+                return "unionVariant";
+            case "Tuple":
+                return "tupleLiteral";
+            case "Scalar":
+                if (type.templateMapper) {
+                    return "scalarInstantiation";
+                }
+                else {
+                    return "scalarDeclaration";
+                }
+            case "Intrinsic":
+                return "intrinsic";
+            default:
+                compilerAssert(false, `Encountered type ${type.kind} which we don't know how to emit.`);
+        }
+    }
+    function currentScope() {
+        return context.referenceContext?.scope ?? context.lexicalContext?.scope ?? null;
+    }
+}
+/**
+ * Returns true if the given type is a declaration or an instantiation of a declaration.
+ * @param type
+ * @returns
+ */
+function isDeclaration(type) {
+    switch (type.kind) {
+        case "Namespace":
+        case "Interface":
+        case "Enum":
+        case "Operation":
+        case "Scalar":
+        case "Intrinsic":
+            return true;
+        case "Model":
+            return type.name ? type.name !== "" && type.name !== "Array" : false;
+        case "Union":
+            return type.name ? type.name !== "" : false;
+        default:
+            return false;
+    }
+}
+/**
+ * An interner takes an object and returns either that same object, or a
+ * previously seen object that has the identical shape.
+ *
+ * This implementation is EXTREMELY non-optimal (O(n*m) where n = number of unique
+ * state objects and m = the number of properties a state object contains). This
+ * will very quickly be a bottleneck. That said, the common case is no state at
+ * all, and also this is essentially implementing records and tuples, so could
+ * probably adopt those when they are released. That that said, the records and
+ * tuples are presently facing headwinds due to implementations facing exactly
+ * these performance characteristics. Regardless, there are optimizations we
+ * could consider.
+ */
+function createInterner() {
+    const emptyObject = {};
+    const knownObjects = new Set();
+    return {
+        intern(object) {
+            const keyLen = Object.keys(object).length;
+            if (keyLen === 0)
+                return emptyObject;
+            for (const ko of knownObjects) {
+                const entries = Object.entries(ko);
+                if (entries.length !== keyLen)
+                    continue;
+                let found = true;
+                for (const [key, value] of entries) {
+                    if (object[key] !== value) {
+                        found = false;
+                        break;
+                    }
+                }
+                if (found) {
+                    return ko;
+                }
+            }
+            knownObjects.add(object);
+            return object;
+        },
+    };
+}
+const noContext = new Set(["modelPropertyReference", "enumMemberReference"]);
+function keyHasContext(key) {
+    return !noContext.has(key);
+}
+const noReferenceContext = new Set([
+    ...noContext,
+    "booleanLiteral",
+    "stringTemplate",
+    "stringLiteral",
+    "numericLiteral",
+    "scalarInstantiation",
+    "enumMember",
+    "enumMembers",
+    "intrinsic",
+]);
+function keyHasReferenceContext(key) {
+    return !noReferenceContext.has(key);
+}
+function resolveReferenceCycle(stack, entity, typeToEmitEntity) {
+    for (let i = stack.length - 1; i >= 0; i--) {
+        if (stack[i].type === entity.emitEntityKey[1]) {
+            return new ReferenceCycle(stack.slice(i).map((x) => {
+                return {
+                    type: x.type,
+                    entity: typeToEmitEntity.get([x.method, x.type, x.context]),
+                };
+            }));
+        }
+    }
+    throw new Error(`Couldn't resolve the circular reference stack for ${getTypeName(entity.emitEntityKey[1])}`);
+}
+//# sourceMappingURL=asset-emitter.js.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/asset-emitter.js.map b/dist/src/emitter-framework/asset-emitter.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..4ed40e7e3803e0d26eeac280000fcc565cfe9b2a
--- /dev/null
+++ b/dist/src/emitter-framework/asset-emitter.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"asset-emitter.js","sourceRoot":"","sources":["../../../src/emitter-framework/asset-emitter.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/builders/array-builder.d.ts b/dist/src/emitter-framework/builders/array-builder.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..35dfd315837f23ebfb1df3e30e7fa4a77b49908c
--- /dev/null
+++ b/dist/src/emitter-framework/builders/array-builder.d.ts
@@ -0,0 +1,7 @@
+import { Placeholder } from "../placeholder.js";
+import { EmitEntity } from "../types.js";
+export declare class ArrayBuilder<T> extends Array {
+    #private;
+    push(...values: (EmitEntity<T> | Placeholder<T> | T)[]): number;
+}
+//# sourceMappingURL=array-builder.d.ts.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/builders/array-builder.d.ts.map b/dist/src/emitter-framework/builders/array-builder.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..117bdee88f25dda48bb970834a68019763a93ddd
--- /dev/null
+++ b/dist/src/emitter-framework/builders/array-builder.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"array-builder.d.ts","sourceRoot":"","sources":["../../../../src/emitter-framework/builders/array-builder.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,WAAW,EAAE,MAAM,mBAAmB,CAAC;AAChD,OAAO,EAAE,UAAU,EAAiB,MAAM,aAAa,CAAC;AAExD,qBAAa,YAAY,CAAC,CAAC,CAAE,SAAQ,KAAK;;IASxC,IAAI,CAAC,GAAG,MAAM,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,MAAM;CAwBhE"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/builders/array-builder.js b/dist/src/emitter-framework/builders/array-builder.js
new file mode 100644
index 0000000000000000000000000000000000000000..80b78582befaf01a844ed1c1e2a9602c15c5e0ce
--- /dev/null
+++ b/dist/src/emitter-framework/builders/array-builder.js
@@ -0,0 +1,35 @@
+import { compilerAssert } from "../../core/index.js";
+import { Placeholder } from "../placeholder.js";
+import { EmitterResult } from "../types.js";
+export class ArrayBuilder extends Array {
+    #setPlaceholderValue(p, value) {
+        for (const [i, item] of this.entries()) {
+            if (item === p) {
+                this[i] = value;
+            }
+        }
+    }
+    push(...values) {
+        for (const v of values) {
+            let toPush;
+            if (v instanceof EmitterResult) {
+                compilerAssert(v.kind !== "circular", "Can't push a circular emit result.");
+                if (v.kind === "none") {
+                    toPush = undefined;
+                }
+                else {
+                    toPush = v.value;
+                }
+            }
+            else {
+                toPush = v;
+            }
+            if (toPush instanceof Placeholder) {
+                toPush.onValue((v) => this.#setPlaceholderValue(toPush, v));
+            }
+            super.push(toPush);
+        }
+        return values.length;
+    }
+}
+//# sourceMappingURL=array-builder.js.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/builders/array-builder.js.map b/dist/src/emitter-framework/builders/array-builder.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..6e13b1875193c951bf7002b1365c28a007ddf249
--- /dev/null
+++ b/dist/src/emitter-framework/builders/array-builder.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"array-builder.js","sourceRoot":"","sources":["../../../../src/emitter-framework/builders/array-builder.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,cAAc,EAAE,MAAM,qBAAqB,CAAC;AACrD,OAAO,EAAE,WAAW,EAAE,MAAM,mBAAmB,CAAC;AAChD,OAAO,EAAc,aAAa,EAAE,MAAM,aAAa,CAAC;AAExD,MAAM,OAAO,YAAgB,SAAQ,KAAK;IACxC,oBAAoB,CAAC,CAAiB,EAAE,KAAQ;QAC9C,KAAK,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC;YACvC,IAAI,IAAI,KAAK,CAAC,EAAE,CAAC;gBACf,IAAI,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;YAClB,CAAC;QACH,CAAC;IACH,CAAC;IAED,IAAI,CAAC,GAAG,MAA8C;QACpD,KAAK,MAAM,CAAC,IAAI,MAAM,EAAE,CAAC;YACvB,IAAI,MAAsC,CAAC;YAC3C,IAAI,CAAC,YAAY,aAAa,EAAE,CAAC;gBAC/B,cAAc,CAAC,CAAC,CAAC,IAAI,KAAK,UAAU,EAAE,oCAAoC,CAAC,CAAC;gBAE5E,IAAI,CAAC,CAAC,IAAI,KAAK,MAAM,EAAE,CAAC;oBACtB,MAAM,GAAG,SAAS,CAAC;gBACrB,CAAC;qBAAM,CAAC;oBACN,MAAM,GAAG,CAAC,CAAC,KAAK,CAAC;gBACnB,CAAC;YACH,CAAC;iBAAM,CAAC;gBACN,MAAM,GAAG,CAAC,CAAC;YACb,CAAC;YAED,IAAI,MAAM,YAAY,WAAW,EAAE,CAAC;gBAClC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,oBAAoB,CAAC,MAAwB,EAAE,CAAC,CAAC,CAAC,CAAC;YAChF,CAAC;YAED,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACrB,CAAC;QAED,OAAO,MAAM,CAAC,MAAM,CAAC;IACvB,CAAC;CACF"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/builders/object-builder.d.ts b/dist/src/emitter-framework/builders/object-builder.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..6ee04fcf1298788c98651c593ddd77149dfa5766
--- /dev/null
+++ b/dist/src/emitter-framework/builders/object-builder.d.ts
@@ -0,0 +1,12 @@
+import { Placeholder } from "../placeholder.js";
+import { EmitEntity } from "../types.js";
+declare const placeholderSym: unique symbol;
+export interface ObjectBuilder<T> extends Record<string, any> {
+}
+export declare class ObjectBuilder<T> {
+    private readonly [placeholderSym];
+    constructor(initializer?: Record<string, unknown> | Placeholder<Record<string, unknown>> | ObjectBuilder<T>);
+    set(key: string, v: EmitEntity<T> | Placeholder<T> | T): void;
+}
+export {};
+//# sourceMappingURL=object-builder.d.ts.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/builders/object-builder.d.ts.map b/dist/src/emitter-framework/builders/object-builder.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..723fecab45820439f802837abd32aa9f398583e5
--- /dev/null
+++ b/dist/src/emitter-framework/builders/object-builder.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"object-builder.d.ts","sourceRoot":"","sources":["../../../../src/emitter-framework/builders/object-builder.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,WAAW,EAAE,MAAM,mBAAmB,CAAC;AAChD,OAAO,EAAE,UAAU,EAAiB,MAAM,aAAa,CAAC;AAExD,QAAA,MAAM,cAAc,eAAwB,CAAC;AAG7C,MAAM,WAAW,aAAa,CAAC,CAAC,CAAE,SAAQ,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC;CAAG;AAEhE,qBAAa,aAAa,CAAC,CAAC;IAC1B,OAAO,CAAC,QAAQ,CAAC,CAAC,cAAc,CAAC,CAA+B;gBAG9D,WAAW,GACP,MAAM,CAAC,MAAM,EAAE,OAAO,CAAC,GACvB,WAAW,CAAC,MAAM,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC,GACpC,aAAa,CAAC,CAAC,CAAM;IA0B3B,GAAG,CAAC,GAAG,EAAE,MAAM,EAAE,CAAC,EAAE,UAAU,CAAC,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC,GAAG,CAAC;CAqBvD"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/builders/object-builder.js b/dist/src/emitter-framework/builders/object-builder.js
new file mode 100644
index 0000000000000000000000000000000000000000..700e4928a597130ebb01a28ebb93f4b6e121084b
--- /dev/null
+++ b/dist/src/emitter-framework/builders/object-builder.js
@@ -0,0 +1,52 @@
+import { compilerAssert } from "../../core/index.js";
+import { Placeholder } from "../placeholder.js";
+import { EmitterResult } from "../types.js";
+const placeholderSym = Symbol("placeholder");
+// eslint-disable-next-line @typescript-eslint/no-unsafe-declaration-merging
+export class ObjectBuilder {
+    [placeholderSym];
+    constructor(initializer = {}) {
+        const copyProperties = (source) => {
+            for (const [key, value] of Object.entries(source)) {
+                this.set(key, value);
+            }
+        };
+        const registerPlaceholder = (placeholder) => {
+            placeholder.onValue(copyProperties);
+        };
+        if (initializer instanceof ObjectBuilder) {
+            if (initializer[placeholderSym]) {
+                this[placeholderSym] = initializer[placeholderSym];
+                registerPlaceholder(initializer[placeholderSym]);
+            }
+            copyProperties(initializer);
+        }
+        else if (initializer instanceof Placeholder) {
+            this[placeholderSym] = initializer;
+            registerPlaceholder(initializer);
+        }
+        else {
+            copyProperties(initializer);
+        }
+    }
+    set(key, v) {
+        let value = v;
+        if (v instanceof EmitterResult) {
+            compilerAssert(v.kind !== "circular", "Can't set a circular emit result.");
+            if (v.kind === "none") {
+                this[key] = undefined;
+                return;
+            }
+            else {
+                value = v.value;
+            }
+        }
+        if (value instanceof Placeholder) {
+            value.onValue((v) => {
+                this[key] = v;
+            });
+        }
+        this[key] = value;
+    }
+}
+//# sourceMappingURL=object-builder.js.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/builders/object-builder.js.map b/dist/src/emitter-framework/builders/object-builder.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..3edc10c3766a1113a13ab36064fd65b780847dca
--- /dev/null
+++ b/dist/src/emitter-framework/builders/object-builder.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"object-builder.js","sourceRoot":"","sources":["../../../../src/emitter-framework/builders/object-builder.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,cAAc,EAAE,MAAM,qBAAqB,CAAC;AACrD,OAAO,EAAE,WAAW,EAAE,MAAM,mBAAmB,CAAC;AAChD,OAAO,EAAc,aAAa,EAAE,MAAM,aAAa,CAAC;AAExD,MAAM,cAAc,GAAG,MAAM,CAAC,aAAa,CAAC,CAAC;AAI7C,4EAA4E;AAC5E,MAAM,OAAO,aAAa;IACP,CAAC,cAAc,CAAC,CAA+B;IAEhE,YACE,cAGuB,EAAE;QAEzB,MAAM,cAAc,GAAG,CAAC,MAA+B,EAAE,EAAE;YACzD,KAAK,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC;gBAClD,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,KAAY,CAAC,CAAC;YAC9B,CAAC;QACH,CAAC,CAAC;QACF,MAAM,mBAAmB,GAAG,CAAC,WAAiD,EAAE,EAAE;YAChF,WAAW,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;QACtC,CAAC,CAAC;QAEF,IAAI,WAAW,YAAY,aAAa,EAAE,CAAC;YACzC,IAAI,WAAW,CAAC,cAAc,CAAC,EAAE,CAAC;gBAChC,IAAI,CAAC,cAAc,CAAC,GAAG,WAAW,CAAC,cAAc,CAAC,CAAC;gBACnD,mBAAmB,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC,CAAC;YACnD,CAAC;YACD,cAAc,CAAC,WAAW,CAAC,CAAC;QAC9B,CAAC;aAAM,IAAI,WAAW,YAAY,WAAW,EAAE,CAAC;YAC9C,IAAI,CAAC,cAAc,CAAC,GAAG,WAAW,CAAC;YAEnC,mBAAmB,CAAC,WAAW,CAAC,CAAC;QACnC,CAAC;aAAM,CAAC;YACN,cAAc,CAAC,WAAW,CAAC,CAAC;QAC9B,CAAC;IACH,CAAC;IAED,GAAG,CAAC,GAAW,EAAE,CAAqC;QACpD,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,IAAI,CAAC,YAAY,aAAa,EAAE,CAAC;YAC/B,cAAc,CAAC,CAAC,CAAC,IAAI,KAAK,UAAU,EAAE,mCAAmC,CAAC,CAAC;YAE3E,IAAI,CAAC,CAAC,IAAI,KAAK,MAAM,EAAE,CAAC;gBACtB,IAAI,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC;gBACtB,OAAO;YACT,CAAC;iBAAM,CAAC;gBACN,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC;YAClB,CAAC;QACH,CAAC;QAED,IAAI,KAAK,YAAY,WAAW,EAAE,CAAC;YACjC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE;gBAClB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YAChB,CAAC,CAAC,CAAC;QACL,CAAC;QAED,IAAI,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;IACpB,CAAC;CACF"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/builders/string-builder.d.ts b/dist/src/emitter-framework/builders/string-builder.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..470d2ec1ff6d9d18855ec91d50fddaabe3067801
--- /dev/null
+++ b/dist/src/emitter-framework/builders/string-builder.d.ts
@@ -0,0 +1,13 @@
+import { Placeholder } from "../placeholder.js";
+import { EmitEntity } from "../types.js";
+export declare class StringBuilder extends Placeholder<string> {
+    #private;
+    segments: (string | Placeholder<string>)[];
+    pushLiteralSegment(segment: string): void;
+    pushPlaceholder(ph: Placeholder<string>): void;
+    pushStringBuilder(builder: StringBuilder): void;
+    push(segment: StringBuilder | Placeholder<string> | string): void;
+    reduce(): string | this;
+}
+export declare function code(parts: TemplateStringsArray, ...substitutions: (EmitEntity<string> | string | Placeholder<string> | StringBuilder)[]): StringBuilder | string;
+//# sourceMappingURL=string-builder.d.ts.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/builders/string-builder.d.ts.map b/dist/src/emitter-framework/builders/string-builder.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..b69514e96f8476fd38ce12e9bb9d159c8282131a
--- /dev/null
+++ b/dist/src/emitter-framework/builders/string-builder.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"string-builder.d.ts","sourceRoot":"","sources":["../../../../src/emitter-framework/builders/string-builder.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,WAAW,EAAE,MAAM,mBAAmB,CAAC;AAChD,OAAO,EAAE,UAAU,EAAE,MAAM,aAAa,CAAC;AAEzC,qBAAa,aAAc,SAAQ,WAAW,CAAC,MAAM,CAAC;;IAC7C,QAAQ,EAAE,CAAC,MAAM,GAAG,WAAW,CAAC,MAAM,CAAC,CAAC,EAAE,CAAM;IAoBvD,kBAAkB,CAAC,OAAO,EAAE,MAAM;IAQlC,eAAe,CAAC,EAAE,EAAE,WAAW,CAAC,MAAM,CAAC;IAUvC,iBAAiB,CAAC,OAAO,EAAE,aAAa;IAMxC,IAAI,CAAC,OAAO,EAAE,aAAa,GAAG,WAAW,CAAC,MAAM,CAAC,GAAG,MAAM;IAU1D,MAAM;CAWP;AAED,wBAAgB,IAAI,CAClB,KAAK,EAAE,oBAAoB,EAC3B,GAAG,aAAa,EAAE,CAAC,UAAU,CAAC,MAAM,CAAC,GAAG,MAAM,GAAG,WAAW,CAAC,MAAM,CAAC,GAAG,aAAa,CAAC,EAAE,GACtF,aAAa,GAAG,MAAM,CA2BxB"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/builders/string-builder.js b/dist/src/emitter-framework/builders/string-builder.js
new file mode 100644
index 0000000000000000000000000000000000000000..ca1e86309e6d4256837987b40065e4164403eec1
--- /dev/null
+++ b/dist/src/emitter-framework/builders/string-builder.js
@@ -0,0 +1,90 @@
+import { Placeholder } from "../placeholder.js";
+export class StringBuilder extends Placeholder {
+    segments = [];
+    #placeholders = new Set();
+    #notifyComplete() {
+        const value = this.segments.join("");
+        this.setValue(value);
+    }
+    #setPlaceholderValue(ph, value) {
+        for (const [i, segment] of this.segments.entries()) {
+            if (segment === ph) {
+                this.segments[i] = value;
+            }
+        }
+        this.#placeholders.delete(ph);
+        if (this.#placeholders.size === 0) {
+            this.#notifyComplete();
+        }
+    }
+    pushLiteralSegment(segment) {
+        if (this.#shouldConcatLiteral()) {
+            this.segments[this.segments.length - 1] += segment;
+        }
+        else {
+            this.segments.push(segment);
+        }
+    }
+    pushPlaceholder(ph) {
+        this.#placeholders.add(ph);
+        ph.onValue((value) => {
+            this.#setPlaceholderValue(ph, value);
+        });
+        this.segments.push(ph);
+    }
+    pushStringBuilder(builder) {
+        for (const segment of builder.segments) {
+            this.push(segment);
+        }
+    }
+    push(segment) {
+        if (typeof segment === "string") {
+            this.pushLiteralSegment(segment);
+        }
+        else if (segment instanceof StringBuilder) {
+            this.pushStringBuilder(segment);
+        }
+        else {
+            this.pushPlaceholder(segment);
+        }
+    }
+    reduce() {
+        if (this.#placeholders.size === 0) {
+            return this.segments.join("");
+        }
+        return this;
+    }
+    #shouldConcatLiteral() {
+        return this.segments.length > 0 && typeof this.segments[this.segments.length - 1] === "string";
+    }
+}
+export function code(parts, ...substitutions) {
+    const builder = new StringBuilder();
+    for (const [i, literalPart] of parts.entries()) {
+        builder.push(literalPart);
+        if (i < substitutions.length) {
+            const sub = substitutions[i];
+            if (typeof sub === "string") {
+                builder.push(sub);
+            }
+            else if (sub instanceof StringBuilder) {
+                builder.pushStringBuilder(sub);
+            }
+            else if (sub instanceof Placeholder) {
+                builder.pushPlaceholder(sub);
+            }
+            else {
+                switch (sub.kind) {
+                    case "circular":
+                    case "none":
+                        builder.pushLiteralSegment("");
+                        break;
+                    default:
+                        builder.push(sub.value);
+                }
+            }
+        }
+    }
+    return builder.reduce();
+}
+//# sourceMappingURL=string-builder.js.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/builders/string-builder.js.map b/dist/src/emitter-framework/builders/string-builder.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..afca9ba155a6d62d4d66a52bc2829b32a355fbf4
--- /dev/null
+++ b/dist/src/emitter-framework/builders/string-builder.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"string-builder.js","sourceRoot":"","sources":["../../../../src/emitter-framework/builders/string-builder.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/custom-key-map.d.ts b/dist/src/emitter-framework/custom-key-map.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..923c14e6bbb178e24baea5b8cb480f0631375329
--- /dev/null
+++ b/dist/src/emitter-framework/custom-key-map.d.ts
@@ -0,0 +1,29 @@
+/**
+ * This is a map type that allows providing a custom keyer function. The keyer
+ * function returns a string that is used to look up in the map. This is useful
+ * for implementing maps that look up based on an arbitrary number of keys.
+ *
+ * For example, to look up in a map with a [ObjA, ObjB)] tuple, such that tuples
+ * with identical values (but not necessarily identical tuples!) create an
+ * object keyer for each of the objects:
+ *
+ *     const aKeyer = CustomKeyMap.objectKeyer();
+ *     const bKeyer = CUstomKeyMap.objectKeyer();
+ *
+ * And compose these into a tuple keyer to use when instantiating the custom key
+ * map:
+ *
+ *     const tupleKeyer = ([a, b]) => `${aKeyer.getKey(a)}-${bKeyer.getKey(b)}`;
+ *     const map = new CustomKeyMap(tupleKeyer);
+ *
+ */
+export declare class CustomKeyMap<K extends readonly any[], V> {
+    #private;
+    constructor(keyer: (args: K) => string);
+    get(items: K): V | undefined;
+    set(items: K, value: V): void;
+    static objectKeyer(): {
+        getKey(o: object): number | undefined;
+    };
+}
+//# sourceMappingURL=custom-key-map.d.ts.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/custom-key-map.d.ts.map b/dist/src/emitter-framework/custom-key-map.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..ad34e72f3d895fba8b116f462718e9f86b5bb33d
--- /dev/null
+++ b/dist/src/emitter-framework/custom-key-map.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"custom-key-map.d.ts","sourceRoot":"","sources":["../../../src/emitter-framework/custom-key-map.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;GAkBG;AACH,qBAAa,YAAY,CAAC,CAAC,SAAS,SAAS,GAAG,EAAE,EAAE,CAAC;;gBAIvC,KAAK,EAAE,CAAC,IAAI,EAAE,CAAC,KAAK,MAAM;IAItC,GAAG,CAAC,KAAK,EAAE,CAAC,GAAG,CAAC,GAAG,SAAS;IAI5B,GAAG,CAAC,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,GAAG,IAAI;IAK7B,MAAM,CAAC,WAAW;kBAIJ,MAAM;;CAYrB"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/custom-key-map.js b/dist/src/emitter-framework/custom-key-map.js
new file mode 100644
index 0000000000000000000000000000000000000000..2ccbd6b7a20cd9ef21f6ff81b464001e99509522
--- /dev/null
+++ b/dist/src/emitter-framework/custom-key-map.js
@@ -0,0 +1,49 @@
+/**
+ * This is a map type that allows providing a custom keyer function. The keyer
+ * function returns a string that is used to look up in the map. This is useful
+ * for implementing maps that look up based on an arbitrary number of keys.
+ *
+ * For example, to look up in a map with a [ObjA, ObjB)] tuple, such that tuples
+ * with identical values (but not necessarily identical tuples!) create an
+ * object keyer for each of the objects:
+ *
+ *     const aKeyer = CustomKeyMap.objectKeyer();
+ *     const bKeyer = CUstomKeyMap.objectKeyer();
+ *
+ * And compose these into a tuple keyer to use when instantiating the custom key
+ * map:
+ *
+ *     const tupleKeyer = ([a, b]) => `${aKeyer.getKey(a)}-${bKeyer.getKey(b)}`;
+ *     const map = new CustomKeyMap(tupleKeyer);
+ *
+ */
+export class CustomKeyMap {
+    #items = new Map();
+    #keyer;
+    constructor(keyer) {
+        this.#keyer = keyer;
+    }
+    get(items) {
+        return this.#items.get(this.#keyer(items));
+    }
+    set(items, value) {
+        const key = this.#keyer(items);
+        this.#items.set(key, value);
+    }
+    static objectKeyer() {
+        const knownKeys = new WeakMap();
+        let count = 0;
+        return {
+            getKey(o) {
+                if (knownKeys.has(o)) {
+                    return knownKeys.get(o);
+                }
+                const key = count;
+                count++;
+                knownKeys.set(o, key);
+                return key;
+            },
+        };
+    }
+}
+//# sourceMappingURL=custom-key-map.js.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/custom-key-map.js.map b/dist/src/emitter-framework/custom-key-map.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..7f6cad3ac396e2952b89dae044700e2ba1e77136
--- /dev/null
+++ b/dist/src/emitter-framework/custom-key-map.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"custom-key-map.js","sourceRoot":"","sources":["../../../src/emitter-framework/custom-key-map.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;GAkBG;AACH,MAAM,OAAO,YAAY;IACvB,MAAM,GAAG,IAAI,GAAG,EAAa,CAAC;IAC9B,MAAM,CAAC;IAEP,YAAY,KAA0B;QACpC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;IACtB,CAAC;IAED,GAAG,CAAC,KAAQ;QACV,OAAO,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;IAC7C,CAAC;IAED,GAAG,CAAC,KAAQ,EAAE,KAAQ;QACpB,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QAC/B,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;IAC9B,CAAC;IAED,MAAM,CAAC,WAAW;QAChB,MAAM,SAAS,GAAG,IAAI,OAAO,EAAkB,CAAC;QAChD,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,OAAO;YACL,MAAM,CAAC,CAAS;gBACd,IAAI,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC;oBACrB,OAAO,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBAC1B,CAAC;gBAED,MAAM,GAAG,GAAG,KAAK,CAAC;gBAClB,KAAK,EAAE,CAAC;gBACR,SAAS,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;gBACtB,OAAO,GAAG,CAAC;YACb,CAAC;SACF,CAAC;IACJ,CAAC;CACF"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/index.d.ts b/dist/src/emitter-framework/index.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..439d7661e9379adea134d4c98c09e84e962963d3
--- /dev/null
+++ b/dist/src/emitter-framework/index.d.ts
@@ -0,0 +1,9 @@
+export * from "./asset-emitter.js";
+export * from "./builders/array-builder.js";
+export * from "./builders/object-builder.js";
+export * from "./builders/string-builder.js";
+export * from "./placeholder.js";
+export { ReferenceCycle } from "./reference-cycle.js";
+export * from "./type-emitter.js";
+export * from "./types.js";
+//# sourceMappingURL=index.d.ts.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/index.d.ts.map b/dist/src/emitter-framework/index.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..e549eed231778f76151380d7ebab35f51b99a10a
--- /dev/null
+++ b/dist/src/emitter-framework/index.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.d.ts","sourceRoot":"","sources":["../../../src/emitter-framework/index.ts"],"names":[],"mappings":"AAAA,cAAc,oBAAoB,CAAC;AACnC,cAAc,6BAA6B,CAAC;AAC5C,cAAc,8BAA8B,CAAC;AAC7C,cAAc,8BAA8B,CAAC;AAC7C,cAAc,kBAAkB,CAAC;AACjC,OAAO,EAAE,cAAc,EAAE,MAAM,sBAAsB,CAAC;AACtD,cAAc,mBAAmB,CAAC;AAClC,cAAc,YAAY,CAAC"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/index.js b/dist/src/emitter-framework/index.js
new file mode 100644
index 0000000000000000000000000000000000000000..27b1a124b15b159bab2a27c7f7784aef51c65f1b
--- /dev/null
+++ b/dist/src/emitter-framework/index.js
@@ -0,0 +1,9 @@
+export * from "./asset-emitter.js";
+export * from "./builders/array-builder.js";
+export * from "./builders/object-builder.js";
+export * from "./builders/string-builder.js";
+export * from "./placeholder.js";
+export { ReferenceCycle } from "./reference-cycle.js";
+export * from "./type-emitter.js";
+export * from "./types.js";
+//# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/index.js.map b/dist/src/emitter-framework/index.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..fe76e4f1e17acae15940c26d630c7327463fb427
--- /dev/null
+++ b/dist/src/emitter-framework/index.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/emitter-framework/index.ts"],"names":[],"mappings":"AAAA,cAAc,oBAAoB,CAAC;AACnC,cAAc,6BAA6B,CAAC;AAC5C,cAAc,8BAA8B,CAAC;AAC7C,cAAc,8BAA8B,CAAC;AAC7C,cAAc,kBAAkB,CAAC;AACjC,OAAO,EAAE,cAAc,EAAE,MAAM,sBAAsB,CAAC;AACtD,cAAc,mBAAmB,CAAC;AAClC,cAAc,YAAY,CAAC"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/placeholder.d.ts b/dist/src/emitter-framework/placeholder.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..654d526978be94a7a4690969a957d98e68ae78af
--- /dev/null
+++ b/dist/src/emitter-framework/placeholder.d.ts
@@ -0,0 +1,12 @@
+/**
+ * Keeps track of a value we don't know yet because of a circular reference. Use
+ * the `onValue` method to provide a callback with how to handle the
+ * placeholder's value becoming available. Generally the callback will replace
+ * this placeholder with the value in whatever references the placeholder.
+ */
+export declare class Placeholder<T> {
+    #private;
+    setValue(value: T): void;
+    onValue(cb: (value: T) => void): void;
+}
+//# sourceMappingURL=placeholder.d.ts.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/placeholder.d.ts.map b/dist/src/emitter-framework/placeholder.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..2c6a98b00064b4fa03a9ffbc0866133f69bb4631
--- /dev/null
+++ b/dist/src/emitter-framework/placeholder.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"placeholder.d.ts","sourceRoot":"","sources":["../../../src/emitter-framework/placeholder.ts"],"names":[],"mappings":"AAAA;;;;;GAKG;AACH,qBAAa,WAAW,CAAC,CAAC;;IAExB,QAAQ,CAAC,KAAK,EAAE,CAAC;IAMjB,OAAO,CAAC,EAAE,EAAE,CAAC,KAAK,EAAE,CAAC,KAAK,IAAI;CAG/B"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/placeholder.js b/dist/src/emitter-framework/placeholder.js
new file mode 100644
index 0000000000000000000000000000000000000000..afdbfdbd8e070e23d5e289b8d1e8231abb35557e
--- /dev/null
+++ b/dist/src/emitter-framework/placeholder.js
@@ -0,0 +1,18 @@
+/**
+ * Keeps track of a value we don't know yet because of a circular reference. Use
+ * the `onValue` method to provide a callback with how to handle the
+ * placeholder's value becoming available. Generally the callback will replace
+ * this placeholder with the value in whatever references the placeholder.
+ */
+export class Placeholder {
+    #listeners = [];
+    setValue(value) {
+        for (const listener of this.#listeners) {
+            listener(value);
+        }
+    }
+    onValue(cb) {
+        this.#listeners.push(cb);
+    }
+}
+//# sourceMappingURL=placeholder.js.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/placeholder.js.map b/dist/src/emitter-framework/placeholder.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..43a489833511764469d1cbe3cfe488cff8feee03
--- /dev/null
+++ b/dist/src/emitter-framework/placeholder.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"placeholder.js","sourceRoot":"","sources":["../../../src/emitter-framework/placeholder.ts"],"names":[],"mappings":"AAAA;;;;;GAKG;AACH,MAAM,OAAO,WAAW;IACtB,UAAU,GAA2B,EAAE,CAAC;IACxC,QAAQ,CAAC,KAAQ;QACf,KAAK,MAAM,QAAQ,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC;YACvC,QAAQ,CAAC,KAAK,CAAC,CAAC;QAClB,CAAC;IACH,CAAC;IAED,OAAO,CAAC,EAAsB;QAC5B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAC3B,CAAC;CACF"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/ref-scope.d.ts b/dist/src/emitter-framework/ref-scope.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..87f311708756f6f3bfa39621154487da9fd0cf93
--- /dev/null
+++ b/dist/src/emitter-framework/ref-scope.d.ts
@@ -0,0 +1,14 @@
+import type { Declaration, Scope } from "./types.js";
+export declare function scopeChain<T>(scope: Scope<T> | null): (import("./types.js").SourceFileScope<T> | import("./types.js").NamespaceScope<T>)[];
+/**
+ * Resolve relative scopes between the current scope and the target declaration.
+ * @param target The target declaration
+ * @param currentScope Current scope
+ * @returns
+ */
+export declare function resolveDeclarationReferenceScope<T>(target: Declaration<T>, currentScope: Scope<T>): {
+    pathUp: Scope<T>[];
+    pathDown: Scope<T>[];
+    commonScope: import("./types.js").SourceFileScope<T> | import("./types.js").NamespaceScope<T>;
+};
+//# sourceMappingURL=ref-scope.d.ts.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/ref-scope.d.ts.map b/dist/src/emitter-framework/ref-scope.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..0f755ca549300fad39c5036707a6ce8409a5d905
--- /dev/null
+++ b/dist/src/emitter-framework/ref-scope.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"ref-scope.d.ts","sourceRoot":"","sources":["../../../src/emitter-framework/ref-scope.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,WAAW,EAAE,KAAK,EAAE,MAAM,YAAY,CAAC;AAErD,wBAAgB,UAAU,CAAC,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,wFAQnD;AAED;;;;;GAKG;AACH,wBAAgB,gCAAgC,CAAC,CAAC,EAChD,MAAM,EAAE,WAAW,CAAC,CAAC,CAAC,EACtB,YAAY,EAAE,KAAK,CAAC,CAAC,CAAC;;;;EAmBvB"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/ref-scope.js b/dist/src/emitter-framework/ref-scope.js
new file mode 100644
index 0000000000000000000000000000000000000000..610fad2463813e389e82c05cbb1062a2b3de9b98
--- /dev/null
+++ b/dist/src/emitter-framework/ref-scope.js
@@ -0,0 +1,30 @@
+export function scopeChain(scope) {
+    const chain = [];
+    while (scope) {
+        chain.unshift(scope);
+        scope = scope.parentScope;
+    }
+    return chain;
+}
+/**
+ * Resolve relative scopes between the current scope and the target declaration.
+ * @param target The target declaration
+ * @param currentScope Current scope
+ * @returns
+ */
+export function resolveDeclarationReferenceScope(target, currentScope) {
+    const targetScope = target.scope;
+    const targetChain = scopeChain(targetScope);
+    const currentChain = scopeChain(currentScope);
+    let diffStart = 0;
+    while (targetChain[diffStart] &&
+        currentChain[diffStart] &&
+        targetChain[diffStart] === currentChain[diffStart]) {
+        diffStart++;
+    }
+    const pathUp = currentChain.slice(diffStart);
+    const pathDown = targetChain.slice(diffStart);
+    const commonScope = targetChain[diffStart - 1] ?? null;
+    return { pathUp, pathDown, commonScope };
+}
+//# sourceMappingURL=ref-scope.js.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/ref-scope.js.map b/dist/src/emitter-framework/ref-scope.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..a76a846b4808582db1a8d8a324b0f87a5e55626c
--- /dev/null
+++ b/dist/src/emitter-framework/ref-scope.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"ref-scope.js","sourceRoot":"","sources":["../../../src/emitter-framework/ref-scope.ts"],"names":[],"mappings":"AAEA,MAAM,UAAU,UAAU,CAAI,KAAsB;IAClD,MAAM,KAAK,GAAG,EAAE,CAAC;IACjB,OAAO,KAAK,EAAE,CAAC;QACb,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QACrB,KAAK,GAAG,KAAK,CAAC,WAAW,CAAC;IAC5B,CAAC;IAED,OAAO,KAAK,CAAC;AACf,CAAC;AAED;;;;;GAKG;AACH,MAAM,UAAU,gCAAgC,CAC9C,MAAsB,EACtB,YAAsB;IAEtB,MAAM,WAAW,GAAG,MAAM,CAAC,KAAK,CAAC;IACjC,MAAM,WAAW,GAAG,UAAU,CAAC,WAAW,CAAC,CAAC;IAC5C,MAAM,YAAY,GAAG,UAAU,CAAC,YAAY,CAAC,CAAC;IAC9C,IAAI,SAAS,GAAG,CAAC,CAAC;IAClB,OACE,WAAW,CAAC,SAAS,CAAC;QACtB,YAAY,CAAC,SAAS,CAAC;QACvB,WAAW,CAAC,SAAS,CAAC,KAAK,YAAY,CAAC,SAAS,CAAC,EAClD,CAAC;QACD,SAAS,EAAE,CAAC;IACd,CAAC;IAED,MAAM,MAAM,GAAe,YAAY,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;IACzD,MAAM,QAAQ,GAAe,WAAW,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;IAE1D,MAAM,WAAW,GAAG,WAAW,CAAC,SAAS,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC;IACvD,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,CAAC;AAC3C,CAAC"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/reference-cycle.d.ts b/dist/src/emitter-framework/reference-cycle.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..7e993e3c92a69ab8052a092cbd683e01623b4a48
--- /dev/null
+++ b/dist/src/emitter-framework/reference-cycle.d.ts
@@ -0,0 +1,23 @@
+import type { Type } from "../core/index.js";
+import type { EmitEntity } from "./types.js";
+export interface ReferenceCycleEntry {
+    type: Type;
+    entity: EmitEntity<unknown>;
+}
+/**
+ * Represent a reference cycle.
+ * The cycle entries will always start with a declaration if there is one in the cycle.
+ */
+export declare class ReferenceCycle implements Iterable<ReferenceCycleEntry> {
+    #private;
+    /**
+     * If this cycle contains a declaration.
+     */
+    readonly containsDeclaration: boolean;
+    constructor(entries: ReferenceCycleEntry[]);
+    get first(): ReferenceCycleEntry;
+    [Symbol.iterator](): Iterator<ReferenceCycleEntry>;
+    [Symbol.toStringTag](): string;
+    toString(): string;
+}
+//# sourceMappingURL=reference-cycle.d.ts.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/reference-cycle.d.ts.map b/dist/src/emitter-framework/reference-cycle.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..85035eb89dba9114dbd5c8ea0b250de8e48bdc45
--- /dev/null
+++ b/dist/src/emitter-framework/reference-cycle.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"reference-cycle.d.ts","sourceRoot":"","sources":["../../../src/emitter-framework/reference-cycle.ts"],"names":[],"mappings":"AACA,OAAO,KAAK,EAAE,IAAI,EAAE,MAAM,kBAAkB,CAAC;AAC7C,OAAO,KAAK,EAAE,UAAU,EAAE,MAAM,YAAY,CAAC;AAE7C,MAAM,WAAW,mBAAmB;IAClC,IAAI,EAAE,IAAI,CAAC;IACX,MAAM,EAAE,UAAU,CAAC,OAAO,CAAC,CAAC;CAC7B;AAED;;;GAGG;AACH,qBAAa,cAAe,YAAW,QAAQ,CAAC,mBAAmB,CAAC;;IAClE;;OAEG;IACH,QAAQ,CAAC,mBAAmB,EAAE,OAAO,CAAC;gBAI1B,OAAO,EAAE,mBAAmB,EAAE;IAQ1C,IAAI,KAAK,IAAI,mBAAmB,CAE/B;IAED,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,QAAQ,CAAC,mBAAmB,CAAC;IAIlD,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,MAAM;IAI9B,QAAQ,IAAI,MAAM;CAGnB"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/reference-cycle.js b/dist/src/emitter-framework/reference-cycle.js
new file mode 100644
index 0000000000000000000000000000000000000000..b3b40ba488a682a1dbcf325fc7cdf498091c9613
--- /dev/null
+++ b/dist/src/emitter-framework/reference-cycle.js
@@ -0,0 +1,32 @@
+import { getTypeName } from "../core/helpers/type-name-utils.js";
+/**
+ * Represent a reference cycle.
+ * The cycle entries will always start with a declaration if there is one in the cycle.
+ */
+export class ReferenceCycle {
+    /**
+     * If this cycle contains a declaration.
+     */
+    containsDeclaration;
+    #entries;
+    constructor(entries) {
+        const firstDeclarationIndex = entries.findIndex((entry) => entry.entity.kind === "declaration");
+        this.containsDeclaration = firstDeclarationIndex !== -1;
+        this.#entries = this.containsDeclaration
+            ? [...entries.slice(firstDeclarationIndex), ...entries.slice(0, firstDeclarationIndex)]
+            : entries;
+    }
+    get first() {
+        return this.#entries[0];
+    }
+    [Symbol.iterator]() {
+        return this.#entries[Symbol.iterator]();
+    }
+    [Symbol.toStringTag]() {
+        return [...this.#entries, this.#entries[0]].map((x) => getTypeName(x.type)).join(" -> ");
+    }
+    toString() {
+        return this[Symbol.toStringTag]();
+    }
+}
+//# sourceMappingURL=reference-cycle.js.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/reference-cycle.js.map b/dist/src/emitter-framework/reference-cycle.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..d2be6f823836093c6ffc2630112ee3656b76e46a
--- /dev/null
+++ b/dist/src/emitter-framework/reference-cycle.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"reference-cycle.js","sourceRoot":"","sources":["../../../src/emitter-framework/reference-cycle.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,WAAW,EAAE,MAAM,oCAAoC,CAAC;AASjE;;;GAGG;AACH,MAAM,OAAO,cAAc;IACzB;;OAEG;IACM,mBAAmB,CAAU;IAEtC,QAAQ,CAAwB;IAEhC,YAAY,OAA8B;QACxC,MAAM,qBAAqB,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,KAAK,aAAa,CAAC,CAAC;QAChG,IAAI,CAAC,mBAAmB,GAAG,qBAAqB,KAAK,CAAC,CAAC,CAAC;QACxD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,mBAAmB;YACtC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC,qBAAqB,CAAC,EAAE,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,qBAAqB,CAAC,CAAC;YACvF,CAAC,CAAC,OAAO,CAAC;IACd,CAAC;IAED,IAAI,KAAK;QACP,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC1B,CAAC;IAED,CAAC,MAAM,CAAC,QAAQ,CAAC;QACf,OAAO,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC;IAC1C,CAAC;IAED,CAAC,MAAM,CAAC,WAAW,CAAC;QAClB,OAAO,CAAC,GAAG,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAC3F,CAAC;IAED,QAAQ;QACN,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC;IACpC,CAAC;CACF"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/type-emitter.d.ts b/dist/src/emitter-framework/type-emitter.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..1a2e0227e11ee97669e7e78921c1ddc9a3bd362c
--- /dev/null
+++ b/dist/src/emitter-framework/type-emitter.d.ts
@@ -0,0 +1,349 @@
+import type { Program } from "../core/program.js";
+import type { BooleanLiteral, Enum, EnumMember, Interface, IntrinsicType, Model, ModelProperty, Namespace, NumericLiteral, Operation, Scalar, StringLiteral, StringTemplate, Tuple, Type, Union, UnionVariant } from "../core/types.js";
+import { Placeholder } from "./placeholder.js";
+import { ReferenceCycle } from "./reference-cycle.js";
+import { AssetEmitter, Context, Declaration, EmitEntity, EmittedSourceFile, Scope, SourceFile, TypeSpecDeclaration } from "./types.js";
+export type EmitterOutput<T> = EmitEntity<T> | Placeholder<T> | T;
+/**
+ * Implement emitter logic by extending this class and passing it to
+ * `emitContext.createAssetEmitter`. This class should not be constructed
+ * directly.
+ *
+ * TypeEmitters serve two primary purposes:
+ *
+ * 1. Handle emitting TypeSpec types into other languages
+ * 2. Set emitter context
+ *
+ * The generic type parameter `T` is the type you expect to produce for each TypeSpec type.
+ * In the case of generating source code for a programming language, this is probably `string`
+ * (in which case, consider using the `CodeTypeEmitter`) but might also be an AST node. If you
+ * are emitting JSON or similar, `T` would likely be `object`.
+ *
+ * ## Emitting types
+ *
+ * Emitting TypeSpec types into other languages is accomplished by implementing
+ * the AssetEmitter method that corresponds with the TypeSpec type you are
+ * emitting. For example, to emit a TypeSpec model declaration, implement the
+ * `modelDeclaration` method.
+ *
+ * TypeSpec types that have both declaration and literal forms like models or
+ * unions will have separate methods. For example, models have both
+ * `modelDeclaration` and `modelLiteral` methods that can be implemented
+ * separately.
+ *
+ * Also, types which can be instantiated like models or operations have a
+ * separate method for the instantiated type. For example, models have a
+ * `modelInstantiation` method that gets called with such types. Generally these
+ * will be treated either as if they were declarations or literals depending on
+ * preference, but may also be treated specially.
+ *
+ * ## Emitter results
+ * There are three kinds of results your methods might return - declarations,
+ * raw code, or nothing.
+ *
+ * ### Declarations
+ *
+ * Create declarations by calling `this.emitter.result.declaration` passing it a
+ * name and the emit output for the declaration. Note that you must have scope
+ * in your context or you will get an error. If you want all declarations to be
+ * emitted to the same source file, you can create a single scope in
+ * `programContext` via something like:
+ *
+ * ```typescript
+ * programContext(program: Program): Context {
+ *   const sourceFile = this.emitter.createSourceFile("test.txt");
+ *   return {
+ *     scope: sourceFile.globalScope,
+ *   };
+ * }
+ * ```
+ *
+ * ### Raw Code
+ *
+ * Create raw code, or emitter output that doesn't contribute to a declaration,
+ * by calling `this.emitter.result.rawCode` passing it a value. Returning just a
+ * value is considered raw code and so you often don't need to call this
+ * directly.
+ *
+ * ### No Emit
+ *
+ * When a type doesn't contribute anything to the emitted output, return
+ * `this.emitter.result.none()`.
+ *
+ * ## Context
+ *
+ * The TypeEmitter will often want to keep track of what context a type is found
+ * in. There are two kinds of context - lexical context, and reference context.
+ *
+ * * Lexical context is context that applies to the type and every type
+ *   contained inside of it. For example, lexical context for a model will apply
+ *   to the model, its properties, and any nested model literals.
+ * * Reference context is context that applies to types contained inside of the
+ *   type and referenced anywhere inside of it. For example, reference context
+ *   set on a model will apply to the model, its properties, any nested model
+ *   literals, and any type referenced inside anywhere inside the model and any
+ *   of the referenced types' references.
+ *
+ * In both cases, context is an object. It's strongly recommended that the context
+ * object either contain only primitive types, or else only reference immutable
+ * objects.
+ *
+ * Set lexical by implementing the `*Context` methods of the TypeEmitter and
+ * returning the context, for example `modelDeclarationContext` sets the context
+ * for model declarations and the types contained inside of it.
+ *
+ * Set reference context by implementing the `*ReferenceContext` methods of the
+ * TypeEmitter and returning the context. Note that not all types have reference
+ * context methods, because not all types can actually reference anything.
+ *
+ * When a context method returns some context, it is merged with the current
+ * context. It is not possible to remove previous context, but it can be
+ * overridden with `undefined`.
+ *
+ * When emitting types with context, the same type might be emitted multiple
+ * times if we come across that type with different contexts. For example, if we
+ * have a TypeSpec program like
+ *
+ * ```typespec
+ * model Pet { }
+ * model Person {
+ *   pet: Pet;
+ * }
+ * ```
+ *
+ * And we set reference context for the Person model, Pet will be emitted twice,
+ * once without context and once with the reference context.
+ */
+export declare class TypeEmitter<T, TOptions extends object = Record<string, never>> {
+    protected emitter: AssetEmitter<T, TOptions>;
+    /**
+     * @private
+     *
+     * Constructs a TypeEmitter. Do not use this constructor directly, instead
+     * call `createAssetEmitter` on the emitter context object.
+     * @param emitter The asset emitter
+     */
+    constructor(emitter: AssetEmitter<T, TOptions>);
+    /**
+     * Context shared by the entire program. In cases where you are emitting to a
+     * single file, use this method to establish your main source file and set the
+     * `scope` property to that source file's `globalScope`.
+     * @param program
+     * @returns Context
+     */
+    programContext(program: Program): Context;
+    /**
+     * Emit a namespace
+     *
+     * @param namespace
+     * @returns Emitter output
+     */
+    namespace(namespace: Namespace): EmitterOutput<T>;
+    /**
+     * Set lexical context for a namespace
+     *
+     * @param namespace
+     */
+    namespaceContext(namespace: Namespace): Context;
+    /**
+     * Set reference context for a namespace.
+     *
+     * @param namespace
+     */
+    namespaceReferenceContext(namespace: Namespace): Context;
+    /**
+     * Emit a model literal (e.g. as created by `{}` syntax in TypeSpec).
+     *
+     * @param model
+     */
+    modelLiteral(model: Model): EmitterOutput<T>;
+    /**
+     * Set lexical context for a model literal.
+     * @param model
+     */
+    modelLiteralContext(model: Model): Context;
+    /**
+     * Set reference context for a model literal.
+     * @param model
+     */
+    modelLiteralReferenceContext(model: Model): Context;
+    /**
+     * Emit a model declaration (e.g. as created by `model Foo { }` syntax in
+     * TypeSpec).
+     *
+     * @param model
+     */
+    modelDeclaration(model: Model, name: string): EmitterOutput<T>;
+    /**
+     * Set lexical context for a model declaration.
+     *
+     * @param model
+     * @param name the model's declaration name as retrieved from the
+     * `declarationName` method.
+     */
+    modelDeclarationContext(model: Model, name: string): Context;
+    /**
+     * Set reference context for a model declaration.
+     * @param model
+     */
+    modelDeclarationReferenceContext(model: Model, name: string): Context;
+    /**
+     * Emit a model instantiation (e.g. as created by `Box<string>` syntax in
+     * TypeSpec). In some cases, `name` is undefined because a good name could
+     * not be found for the instantiation. This often occurs with for instantiations
+     * involving type expressions like `Box<string | int32>`.
+     *
+     * @param model
+     * @param name The name of the instantiation as retrieved from the
+     * `declarationName` method.
+     */
+    modelInstantiation(model: Model, name: string | undefined): EmitterOutput<T>;
+    /**
+     * Set lexical context for a model instantiation.
+     * @param model
+     */
+    modelInstantiationContext(model: Model, name: string | undefined): Context;
+    /**
+     * Set reference context for a model declaration.
+     * @param model
+     */
+    modelInstantiationReferenceContext(model: Model, name: string | undefined): Context;
+    /**
+     * Emit a model's properties. Unless overridden, this method will emit each of
+     * the model's properties and return a no emit result.
+     *
+     * @param model
+     */
+    modelProperties(model: Model): EmitterOutput<T>;
+    modelPropertiesContext(model: Model): Context;
+    modelPropertiesReferenceContext(model: Model): Context;
+    /**
+     * Emit a property of a model.
+     *
+     * @param property
+     */
+    modelPropertyLiteral(property: ModelProperty): EmitterOutput<T>;
+    /**
+     * Set lexical context for a property of a model.
+     *
+     * @param property
+     */
+    modelPropertyLiteralContext(property: ModelProperty): Context;
+    /**
+     * Set reference context for a property of a model.
+     *
+     * @param property
+     */
+    modelPropertyLiteralReferenceContext(property: ModelProperty): Context;
+    /**
+     * Emit a model property reference (e.g. as created by the `SomeModel.prop`
+     * syntax in TypeSpec). By default, this will emit the type of the referenced
+     * property and return that result. In other words, the emit will look as if
+     * `SomeModel.prop` were replaced with the type of `prop`.
+     *
+     * @param property
+     */
+    modelPropertyReference(property: ModelProperty): EmitterOutput<T>;
+    /**
+     * Emit an enum member reference (e.g. as created by the `SomeEnum.member` syntax
+     * in TypeSpec). By default, this will emit nothing.
+     *
+     * @param property the enum member
+     */
+    enumMemberReference(member: EnumMember): EmitterOutput<T>;
+    arrayDeclaration(array: Model, name: string, elementType: Type): EmitterOutput<T>;
+    arrayDeclarationContext(array: Model, name: string, elementType: Type): Context;
+    arrayDeclarationReferenceContext(array: Model, name: string, elementType: Type): Context;
+    arrayLiteral(array: Model, elementType: Type): EmitterOutput<T>;
+    arrayLiteralContext(array: Model, elementType: Type): Context;
+    arrayLiteralReferenceContext(array: Model, elementType: Type): Context;
+    scalarDeclaration(scalar: Scalar, name: string): EmitterOutput<T>;
+    scalarDeclarationContext(scalar: Scalar, name: string): Context;
+    scalarDeclarationReferenceContext(scalar: Scalar, name: string): Context;
+    scalarInstantiation(scalar: Scalar, name: string | undefined): EmitterOutput<T>;
+    scalarInstantiationContext(scalar: Scalar, name: string | undefined): Context;
+    intrinsic(intrinsic: IntrinsicType, name: string): EmitterOutput<T>;
+    intrinsicContext(intrinsic: IntrinsicType, name: string): Context;
+    booleanLiteralContext(boolean: BooleanLiteral): Context;
+    booleanLiteral(boolean: BooleanLiteral): EmitterOutput<T>;
+    stringTemplateContext(string: StringTemplate): Context;
+    stringTemplate(stringTemplate: StringTemplate): EmitterOutput<T>;
+    stringLiteralContext(string: StringLiteral): Context;
+    stringLiteral(string: StringLiteral): EmitterOutput<T>;
+    numericLiteralContext(number: NumericLiteral): Context;
+    numericLiteral(number: NumericLiteral): EmitterOutput<T>;
+    operationDeclaration(operation: Operation, name: string): EmitterOutput<T>;
+    operationDeclarationContext(operation: Operation, name: string): Context;
+    operationDeclarationReferenceContext(operation: Operation, name: string): Context;
+    interfaceDeclarationOperationsContext(iface: Interface): Context;
+    interfaceDeclarationOperationsReferenceContext(iface: Interface): Context;
+    interfaceOperationDeclarationContext(operation: Operation, name: string): Context;
+    interfaceOperationDeclarationReferenceContext(operation: Operation, name: string): Context;
+    operationParameters(operation: Operation, parameters: Model): EmitterOutput<T>;
+    operationParametersContext(operation: Operation, parameters: Model): Context;
+    operationParametersReferenceContext(operation: Operation, parameters: Model): Context;
+    operationReturnType(operation: Operation, returnType: Type): EmitterOutput<T>;
+    operationReturnTypeContext(operation: Operation, returnType: Type): Context;
+    operationReturnTypeReferenceContext(operation: Operation, returnType: Type): Context;
+    interfaceDeclaration(iface: Interface, name: string): EmitterOutput<T>;
+    interfaceDeclarationContext(iface: Interface, name: string): Context;
+    interfaceDeclarationReferenceContext(iface: Interface, name: string): Context;
+    interfaceDeclarationOperations(iface: Interface): EmitterOutput<T>;
+    interfaceOperationDeclaration(operation: Operation, name: string): EmitterOutput<T>;
+    enumDeclaration(en: Enum, name: string): EmitterOutput<T>;
+    enumDeclarationContext(en: Enum, name: string): Context;
+    enumDeclarationReferenceContext(en: Enum, name: string): Context;
+    enumMembers(en: Enum): EmitterOutput<T>;
+    enumMembersContext(en: Enum): Context;
+    enumMember(member: EnumMember): EmitterOutput<T>;
+    enumMemberContext(member: EnumMember): {};
+    unionDeclaration(union: Union, name: string): EmitterOutput<T>;
+    unionDeclarationContext(union: Union): Context;
+    unionDeclarationReferenceContext(union: Union): Context;
+    unionInstantiation(union: Union, name: string): EmitterOutput<T>;
+    unionInstantiationContext(union: Union, name: string): Context;
+    unionInstantiationReferenceContext(union: Union, name: string): Context;
+    unionLiteral(union: Union): EmitterOutput<T>;
+    unionLiteralContext(union: Union): Context;
+    unionLiteralReferenceContext(union: Union): Context;
+    unionVariants(union: Union): EmitterOutput<T>;
+    unionVariantsContext(): Context;
+    unionVariantsReferenceContext(): Context;
+    unionVariant(variant: UnionVariant): EmitterOutput<T>;
+    unionVariantContext(union: Union): Context;
+    unionVariantReferenceContext(union: Union): Context;
+    tupleLiteral(tuple: Tuple): EmitterOutput<T>;
+    tupleLiteralContext(tuple: Tuple): Context;
+    tupleLiteralValues(tuple: Tuple): EmitterOutput<T>;
+    tupleLiteralValuesContext(tuple: Tuple): Context;
+    tupleLiteralValuesReferenceContext(tuple: Tuple): Context;
+    tupleLiteralReferenceContext(tuple: Tuple): Context;
+    sourceFile(sourceFile: SourceFile<T>): Promise<EmittedSourceFile> | EmittedSourceFile;
+    writeOutput(sourceFiles: SourceFile<T>[]): Promise<void>;
+    reference(targetDeclaration: Declaration<T>, pathUp: Scope<T>[], pathDown: Scope<T>[], commonScope: Scope<T> | null): EmitEntity<T> | T;
+    /**
+     * Handle circular references. When this method is called it means we are resolving a circular reference.
+     * By default if the target is a declaration it will call to {@link reference} otherwise it means we have an inline reference
+     * @param target Reference target.
+     * @param scope Current scope.
+     * @returns Resolved reference entity.
+     */
+    circularReference(target: EmitEntity<T>, scope: Scope<T> | undefined, cycle: ReferenceCycle): EmitEntity<T> | T;
+    declarationName(declarationType: TypeSpecDeclaration): string | undefined;
+}
+/**
+ * A subclass of `TypeEmitter<string>` that makes working with strings a bit easier.
+ * In particular, when emitting members of a type (`modelProperties`, `enumMembers`, etc.),
+ * instead of returning no result, it returns the value of each of the members concatenated
+ * by commas. It will also construct references by concatenating namespace elements together
+ * with `.` which should work nicely in many object oriented languages.
+ */
+export declare class CodeTypeEmitter<TOptions extends object = Record<string, never>> extends TypeEmitter<string, TOptions> {
+    modelProperties(model: Model): EmitterOutput<string>;
+    interfaceDeclarationOperations(iface: Interface): EmitterOutput<string>;
+    enumMembers(en: Enum): EmitterOutput<string>;
+    unionVariants(union: Union): EmitterOutput<string>;
+    tupleLiteralValues(tuple: Tuple): EmitterOutput<string>;
+    reference(targetDeclaration: Declaration<string>, pathUp: Scope<string>[], pathDown: Scope<string>[], commonScope: Scope<string> | null): string | EmitEntity<string>;
+}
+//# sourceMappingURL=type-emitter.d.ts.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/type-emitter.d.ts.map b/dist/src/emitter-framework/type-emitter.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..2d730d65f3356673be506ac5d1777a614531c22f
--- /dev/null
+++ b/dist/src/emitter-framework/type-emitter.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"type-emitter.d.ts","sourceRoot":"","sources":["../../../src/emitter-framework/type-emitter.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/type-emitter.js b/dist/src/emitter-framework/type-emitter.js
new file mode 100644
index 0000000000000000000000000000000000000000..66cb38349f1034f5bbdf7e0ef107d042227c03ed
--- /dev/null
+++ b/dist/src/emitter-framework/type-emitter.js
@@ -0,0 +1,721 @@
+import { compilerAssert } from "../core/diagnostics.js";
+import { emitFile } from "../core/emitter-utils.js";
+import { isTemplateDeclaration } from "../core/type-utils.js";
+import { StringBuilder, code } from "./builders/string-builder.js";
+import { resolveDeclarationReferenceScope } from "./ref-scope.js";
+/**
+ * Implement emitter logic by extending this class and passing it to
+ * `emitContext.createAssetEmitter`. This class should not be constructed
+ * directly.
+ *
+ * TypeEmitters serve two primary purposes:
+ *
+ * 1. Handle emitting TypeSpec types into other languages
+ * 2. Set emitter context
+ *
+ * The generic type parameter `T` is the type you expect to produce for each TypeSpec type.
+ * In the case of generating source code for a programming language, this is probably `string`
+ * (in which case, consider using the `CodeTypeEmitter`) but might also be an AST node. If you
+ * are emitting JSON or similar, `T` would likely be `object`.
+ *
+ * ## Emitting types
+ *
+ * Emitting TypeSpec types into other languages is accomplished by implementing
+ * the AssetEmitter method that corresponds with the TypeSpec type you are
+ * emitting. For example, to emit a TypeSpec model declaration, implement the
+ * `modelDeclaration` method.
+ *
+ * TypeSpec types that have both declaration and literal forms like models or
+ * unions will have separate methods. For example, models have both
+ * `modelDeclaration` and `modelLiteral` methods that can be implemented
+ * separately.
+ *
+ * Also, types which can be instantiated like models or operations have a
+ * separate method for the instantiated type. For example, models have a
+ * `modelInstantiation` method that gets called with such types. Generally these
+ * will be treated either as if they were declarations or literals depending on
+ * preference, but may also be treated specially.
+ *
+ * ## Emitter results
+ * There are three kinds of results your methods might return - declarations,
+ * raw code, or nothing.
+ *
+ * ### Declarations
+ *
+ * Create declarations by calling `this.emitter.result.declaration` passing it a
+ * name and the emit output for the declaration. Note that you must have scope
+ * in your context or you will get an error. If you want all declarations to be
+ * emitted to the same source file, you can create a single scope in
+ * `programContext` via something like:
+ *
+ * ```typescript
+ * programContext(program: Program): Context {
+ *   const sourceFile = this.emitter.createSourceFile("test.txt");
+ *   return {
+ *     scope: sourceFile.globalScope,
+ *   };
+ * }
+ * ```
+ *
+ * ### Raw Code
+ *
+ * Create raw code, or emitter output that doesn't contribute to a declaration,
+ * by calling `this.emitter.result.rawCode` passing it a value. Returning just a
+ * value is considered raw code and so you often don't need to call this
+ * directly.
+ *
+ * ### No Emit
+ *
+ * When a type doesn't contribute anything to the emitted output, return
+ * `this.emitter.result.none()`.
+ *
+ * ## Context
+ *
+ * The TypeEmitter will often want to keep track of what context a type is found
+ * in. There are two kinds of context - lexical context, and reference context.
+ *
+ * * Lexical context is context that applies to the type and every type
+ *   contained inside of it. For example, lexical context for a model will apply
+ *   to the model, its properties, and any nested model literals.
+ * * Reference context is context that applies to types contained inside of the
+ *   type and referenced anywhere inside of it. For example, reference context
+ *   set on a model will apply to the model, its properties, any nested model
+ *   literals, and any type referenced inside anywhere inside the model and any
+ *   of the referenced types' references.
+ *
+ * In both cases, context is an object. It's strongly recommended that the context
+ * object either contain only primitive types, or else only reference immutable
+ * objects.
+ *
+ * Set lexical by implementing the `*Context` methods of the TypeEmitter and
+ * returning the context, for example `modelDeclarationContext` sets the context
+ * for model declarations and the types contained inside of it.
+ *
+ * Set reference context by implementing the `*ReferenceContext` methods of the
+ * TypeEmitter and returning the context. Note that not all types have reference
+ * context methods, because not all types can actually reference anything.
+ *
+ * When a context method returns some context, it is merged with the current
+ * context. It is not possible to remove previous context, but it can be
+ * overridden with `undefined`.
+ *
+ * When emitting types with context, the same type might be emitted multiple
+ * times if we come across that type with different contexts. For example, if we
+ * have a TypeSpec program like
+ *
+ * ```typespec
+ * model Pet { }
+ * model Person {
+ *   pet: Pet;
+ * }
+ * ```
+ *
+ * And we set reference context for the Person model, Pet will be emitted twice,
+ * once without context and once with the reference context.
+ */
+export class TypeEmitter {
+    emitter;
+    /**
+     * @private
+     *
+     * Constructs a TypeEmitter. Do not use this constructor directly, instead
+     * call `createAssetEmitter` on the emitter context object.
+     * @param emitter The asset emitter
+     */
+    constructor(emitter) {
+        this.emitter = emitter;
+    }
+    /**
+     * Context shared by the entire program. In cases where you are emitting to a
+     * single file, use this method to establish your main source file and set the
+     * `scope` property to that source file's `globalScope`.
+     * @param program
+     * @returns Context
+     */
+    programContext(program) {
+        return {};
+    }
+    /**
+     * Emit a namespace
+     *
+     * @param namespace
+     * @returns Emitter output
+     */
+    namespace(namespace) {
+        for (const ns of namespace.namespaces.values()) {
+            this.emitter.emitType(ns);
+        }
+        for (const model of namespace.models.values()) {
+            if (!isTemplateDeclaration(model)) {
+                this.emitter.emitType(model);
+            }
+        }
+        for (const operation of namespace.operations.values()) {
+            if (!isTemplateDeclaration(operation)) {
+                this.emitter.emitType(operation);
+            }
+        }
+        for (const enumeration of namespace.enums.values()) {
+            this.emitter.emitType(enumeration);
+        }
+        for (const union of namespace.unions.values()) {
+            if (!isTemplateDeclaration(union)) {
+                this.emitter.emitType(union);
+            }
+        }
+        for (const iface of namespace.interfaces.values()) {
+            if (!isTemplateDeclaration(iface)) {
+                this.emitter.emitType(iface);
+            }
+        }
+        for (const scalar of namespace.scalars.values()) {
+            this.emitter.emitType(scalar);
+        }
+        return this.emitter.result.none();
+    }
+    /**
+     * Set lexical context for a namespace
+     *
+     * @param namespace
+     */
+    namespaceContext(namespace) {
+        return {};
+    }
+    /**
+     * Set reference context for a namespace.
+     *
+     * @param namespace
+     */
+    namespaceReferenceContext(namespace) {
+        return {};
+    }
+    /**
+     * Emit a model literal (e.g. as created by `{}` syntax in TypeSpec).
+     *
+     * @param model
+     */
+    modelLiteral(model) {
+        if (model.baseModel) {
+            this.emitter.emitType(model.baseModel);
+        }
+        this.emitter.emitModelProperties(model);
+        return this.emitter.result.none();
+    }
+    /**
+     * Set lexical context for a model literal.
+     * @param model
+     */
+    modelLiteralContext(model) {
+        return {};
+    }
+    /**
+     * Set reference context for a model literal.
+     * @param model
+     */
+    modelLiteralReferenceContext(model) {
+        return {};
+    }
+    /**
+     * Emit a model declaration (e.g. as created by `model Foo { }` syntax in
+     * TypeSpec).
+     *
+     * @param model
+     */
+    modelDeclaration(model, name) {
+        if (model.baseModel) {
+            this.emitter.emitType(model.baseModel);
+        }
+        this.emitter.emitModelProperties(model);
+        return this.emitter.result.none();
+    }
+    /**
+     * Set lexical context for a model declaration.
+     *
+     * @param model
+     * @param name the model's declaration name as retrieved from the
+     * `declarationName` method.
+     */
+    modelDeclarationContext(model, name) {
+        return {};
+    }
+    /**
+     * Set reference context for a model declaration.
+     * @param model
+     */
+    modelDeclarationReferenceContext(model, name) {
+        return {};
+    }
+    /**
+     * Emit a model instantiation (e.g. as created by `Box<string>` syntax in
+     * TypeSpec). In some cases, `name` is undefined because a good name could
+     * not be found for the instantiation. This often occurs with for instantiations
+     * involving type expressions like `Box<string | int32>`.
+     *
+     * @param model
+     * @param name The name of the instantiation as retrieved from the
+     * `declarationName` method.
+     */
+    modelInstantiation(model, name) {
+        if (model.baseModel) {
+            this.emitter.emitType(model.baseModel);
+        }
+        this.emitter.emitModelProperties(model);
+        return this.emitter.result.none();
+    }
+    /**
+     * Set lexical context for a model instantiation.
+     * @param model
+     */
+    modelInstantiationContext(model, name) {
+        return {};
+    }
+    /**
+     * Set reference context for a model declaration.
+     * @param model
+     */
+    modelInstantiationReferenceContext(model, name) {
+        return {};
+    }
+    /**
+     * Emit a model's properties. Unless overridden, this method will emit each of
+     * the model's properties and return a no emit result.
+     *
+     * @param model
+     */
+    modelProperties(model) {
+        for (const prop of model.properties.values()) {
+            this.emitter.emitModelProperty(prop);
+        }
+        return this.emitter.result.none();
+    }
+    modelPropertiesContext(model) {
+        return {};
+    }
+    modelPropertiesReferenceContext(model) {
+        return {};
+    }
+    /**
+     * Emit a property of a model.
+     *
+     * @param property
+     */
+    modelPropertyLiteral(property) {
+        this.emitter.emitTypeReference(property.type);
+        return this.emitter.result.none();
+    }
+    /**
+     * Set lexical context for a property of a model.
+     *
+     * @param property
+     */
+    modelPropertyLiteralContext(property) {
+        return {};
+    }
+    /**
+     * Set reference context for a property of a model.
+     *
+     * @param property
+     */
+    modelPropertyLiteralReferenceContext(property) {
+        return {};
+    }
+    /**
+     * Emit a model property reference (e.g. as created by the `SomeModel.prop`
+     * syntax in TypeSpec). By default, this will emit the type of the referenced
+     * property and return that result. In other words, the emit will look as if
+     * `SomeModel.prop` were replaced with the type of `prop`.
+     *
+     * @param property
+     */
+    modelPropertyReference(property) {
+        return this.emitter.emitTypeReference(property.type);
+    }
+    /**
+     * Emit an enum member reference (e.g. as created by the `SomeEnum.member` syntax
+     * in TypeSpec). By default, this will emit nothing.
+     *
+     * @param property the enum member
+     */
+    enumMemberReference(member) {
+        return this.emitter.result.none();
+    }
+    arrayDeclaration(array, name, elementType) {
+        this.emitter.emitType(array.indexer.value);
+        return this.emitter.result.none();
+    }
+    arrayDeclarationContext(array, name, elementType) {
+        return {};
+    }
+    arrayDeclarationReferenceContext(array, name, elementType) {
+        return {};
+    }
+    arrayLiteral(array, elementType) {
+        return this.emitter.result.none();
+    }
+    arrayLiteralContext(array, elementType) {
+        return {};
+    }
+    arrayLiteralReferenceContext(array, elementType) {
+        return {};
+    }
+    scalarDeclaration(scalar, name) {
+        if (scalar.baseScalar) {
+            this.emitter.emitType(scalar.baseScalar);
+        }
+        return this.emitter.result.none();
+    }
+    scalarDeclarationContext(scalar, name) {
+        return {};
+    }
+    scalarDeclarationReferenceContext(scalar, name) {
+        return {};
+    }
+    scalarInstantiation(scalar, name) {
+        return this.emitter.result.none();
+    }
+    scalarInstantiationContext(scalar, name) {
+        return {};
+    }
+    intrinsic(intrinsic, name) {
+        return this.emitter.result.none();
+    }
+    intrinsicContext(intrinsic, name) {
+        return {};
+    }
+    booleanLiteralContext(boolean) {
+        return {};
+    }
+    booleanLiteral(boolean) {
+        return this.emitter.result.none();
+    }
+    stringTemplateContext(string) {
+        return {};
+    }
+    stringTemplate(stringTemplate) {
+        return this.emitter.result.none();
+    }
+    stringLiteralContext(string) {
+        return {};
+    }
+    stringLiteral(string) {
+        return this.emitter.result.none();
+    }
+    numericLiteralContext(number) {
+        return {};
+    }
+    numericLiteral(number) {
+        return this.emitter.result.none();
+    }
+    operationDeclaration(operation, name) {
+        this.emitter.emitOperationParameters(operation);
+        this.emitter.emitOperationReturnType(operation);
+        return this.emitter.result.none();
+    }
+    operationDeclarationContext(operation, name) {
+        return {};
+    }
+    operationDeclarationReferenceContext(operation, name) {
+        return {};
+    }
+    interfaceDeclarationOperationsContext(iface) {
+        return {};
+    }
+    interfaceDeclarationOperationsReferenceContext(iface) {
+        return {};
+    }
+    interfaceOperationDeclarationContext(operation, name) {
+        return {};
+    }
+    interfaceOperationDeclarationReferenceContext(operation, name) {
+        return {};
+    }
+    operationParameters(operation, parameters) {
+        return this.emitter.result.none();
+    }
+    operationParametersContext(operation, parameters) {
+        return {};
+    }
+    operationParametersReferenceContext(operation, parameters) {
+        return {};
+    }
+    operationReturnType(operation, returnType) {
+        return this.emitter.result.none();
+    }
+    operationReturnTypeContext(operation, returnType) {
+        return {};
+    }
+    operationReturnTypeReferenceContext(operation, returnType) {
+        return {};
+    }
+    interfaceDeclaration(iface, name) {
+        this.emitter.emitInterfaceOperations(iface);
+        return this.emitter.result.none();
+    }
+    interfaceDeclarationContext(iface, name) {
+        return {};
+    }
+    interfaceDeclarationReferenceContext(iface, name) {
+        return {};
+    }
+    interfaceDeclarationOperations(iface) {
+        for (const op of iface.operations.values()) {
+            this.emitter.emitInterfaceOperation(op);
+        }
+        return this.emitter.result.none();
+    }
+    interfaceOperationDeclaration(operation, name) {
+        this.emitter.emitOperationParameters(operation);
+        this.emitter.emitOperationReturnType(operation);
+        return this.emitter.result.none();
+    }
+    enumDeclaration(en, name) {
+        this.emitter.emitEnumMembers(en);
+        return this.emitter.result.none();
+    }
+    enumDeclarationContext(en, name) {
+        return {};
+    }
+    enumDeclarationReferenceContext(en, name) {
+        return {};
+    }
+    enumMembers(en) {
+        for (const member of en.members.values()) {
+            this.emitter.emitType(member);
+        }
+        return this.emitter.result.none();
+    }
+    enumMembersContext(en) {
+        return {};
+    }
+    enumMember(member) {
+        return this.emitter.result.none();
+    }
+    enumMemberContext(member) {
+        return {};
+    }
+    unionDeclaration(union, name) {
+        this.emitter.emitUnionVariants(union);
+        return this.emitter.result.none();
+    }
+    unionDeclarationContext(union) {
+        return {};
+    }
+    unionDeclarationReferenceContext(union) {
+        return {};
+    }
+    unionInstantiation(union, name) {
+        this.emitter.emitUnionVariants(union);
+        return this.emitter.result.none();
+    }
+    unionInstantiationContext(union, name) {
+        return {};
+    }
+    unionInstantiationReferenceContext(union, name) {
+        return {};
+    }
+    unionLiteral(union) {
+        this.emitter.emitUnionVariants(union);
+        return this.emitter.result.none();
+    }
+    unionLiteralContext(union) {
+        return {};
+    }
+    unionLiteralReferenceContext(union) {
+        return {};
+    }
+    unionVariants(union) {
+        for (const variant of union.variants.values()) {
+            this.emitter.emitType(variant);
+        }
+        return this.emitter.result.none();
+    }
+    unionVariantsContext() {
+        return {};
+    }
+    unionVariantsReferenceContext() {
+        return {};
+    }
+    unionVariant(variant) {
+        this.emitter.emitTypeReference(variant.type);
+        return this.emitter.result.none();
+    }
+    unionVariantContext(union) {
+        return {};
+    }
+    unionVariantReferenceContext(union) {
+        return {};
+    }
+    tupleLiteral(tuple) {
+        this.emitter.emitTupleLiteralValues(tuple);
+        return this.emitter.result.none();
+    }
+    tupleLiteralContext(tuple) {
+        return {};
+    }
+    tupleLiteralValues(tuple) {
+        for (const value of tuple.values.values()) {
+            this.emitter.emitType(value);
+        }
+        return this.emitter.result.none();
+    }
+    tupleLiteralValuesContext(tuple) {
+        return {};
+    }
+    tupleLiteralValuesReferenceContext(tuple) {
+        return {};
+    }
+    tupleLiteralReferenceContext(tuple) {
+        return {};
+    }
+    sourceFile(sourceFile) {
+        const emittedSourceFile = {
+            path: sourceFile.path,
+            contents: "",
+        };
+        for (const decl of sourceFile.globalScope.declarations) {
+            emittedSourceFile.contents += decl.value + "\n";
+        }
+        return emittedSourceFile;
+    }
+    async writeOutput(sourceFiles) {
+        for (const file of sourceFiles) {
+            const outputFile = await this.emitter.emitSourceFile(file);
+            await emitFile(this.emitter.getProgram(), {
+                path: outputFile.path,
+                content: outputFile.contents,
+            });
+        }
+    }
+    reference(targetDeclaration, pathUp, pathDown, commonScope) {
+        return this.emitter.result.none();
+    }
+    /**
+     * Handle circular references. When this method is called it means we are resolving a circular reference.
+     * By default if the target is a declaration it will call to {@link reference} otherwise it means we have an inline reference
+     * @param target Reference target.
+     * @param scope Current scope.
+     * @returns Resolved reference entity.
+     */
+    circularReference(target, scope, cycle) {
+        if (!cycle.containsDeclaration) {
+            throw new Error(`Circular references to non-declarations are not supported by this emitter. Cycle:\n${cycle}`);
+        }
+        if (target.kind !== "declaration") {
+            return target;
+        }
+        compilerAssert(scope, "Emit context must have a scope set in order to create references to declarations.");
+        const { pathUp, pathDown, commonScope } = resolveDeclarationReferenceScope(target, scope);
+        return this.reference(target, pathUp, pathDown, commonScope);
+    }
+    declarationName(declarationType) {
+        compilerAssert(declarationType.name !== undefined, "Can't emit a declaration that doesn't have a name.");
+        if (declarationType.kind === "Enum" || declarationType.kind === "Intrinsic") {
+            return declarationType.name;
+        }
+        // for operations inside interfaces, we don't want to do the fancy thing because it will make
+        // operations inside instantiated interfaces get weird names
+        if (declarationType.kind === "Operation" && declarationType.interface) {
+            return declarationType.name;
+        }
+        if (!declarationType.templateMapper) {
+            return declarationType.name;
+        }
+        let unspeakable = false;
+        const parameterNames = declarationType.templateMapper.args.map((t) => {
+            if (t.entityKind === "Indeterminate") {
+                t = t.type;
+            }
+            if (!("kind" in t)) {
+                return undefined;
+            }
+            switch (t.kind) {
+                case "Model":
+                case "Scalar":
+                case "Interface":
+                case "Operation":
+                case "Enum":
+                case "Union":
+                case "Intrinsic":
+                    if (!t.name) {
+                        unspeakable = true;
+                        return undefined;
+                    }
+                    const declName = this.emitter.emitDeclarationName(t);
+                    if (declName === undefined) {
+                        unspeakable = true;
+                        return undefined;
+                    }
+                    return declName[0].toUpperCase() + declName.slice(1);
+                default:
+                    unspeakable = true;
+                    return undefined;
+            }
+        });
+        if (unspeakable) {
+            return undefined;
+        }
+        return declarationType.name + parameterNames.join("");
+    }
+}
+/**
+ * A subclass of `TypeEmitter<string>` that makes working with strings a bit easier.
+ * In particular, when emitting members of a type (`modelProperties`, `enumMembers`, etc.),
+ * instead of returning no result, it returns the value of each of the members concatenated
+ * by commas. It will also construct references by concatenating namespace elements together
+ * with `.` which should work nicely in many object oriented languages.
+ */
+export class CodeTypeEmitter extends TypeEmitter {
+    modelProperties(model) {
+        const builder = new StringBuilder();
+        let i = 0;
+        for (const prop of model.properties.values()) {
+            i++;
+            const propVal = this.emitter.emitModelProperty(prop);
+            builder.push(code `${propVal}${i < model.properties.size ? "," : ""}`);
+        }
+        return this.emitter.result.rawCode(builder.reduce());
+    }
+    interfaceDeclarationOperations(iface) {
+        const builder = new StringBuilder();
+        let i = 0;
+        for (const op of iface.operations.values()) {
+            i++;
+            builder.push(code `${this.emitter.emitInterfaceOperation(op)}${i < iface.operations.size ? "," : ""}`);
+        }
+        return builder.reduce();
+    }
+    enumMembers(en) {
+        const builder = new StringBuilder();
+        let i = 0;
+        for (const enumMember of en.members.values()) {
+            i++;
+            builder.push(code `${this.emitter.emitType(enumMember)}${i < en.members.size ? "," : ""}`);
+        }
+        return builder.reduce();
+    }
+    unionVariants(union) {
+        const builder = new StringBuilder();
+        let i = 0;
+        for (const v of union.variants.values()) {
+            i++;
+            builder.push(code `${this.emitter.emitType(v)}${i < union.variants.size ? "," : ""}`);
+        }
+        return builder.reduce();
+    }
+    tupleLiteralValues(tuple) {
+        const builder = new StringBuilder();
+        let i = 0;
+        for (const v of tuple.values) {
+            i++;
+            builder.push(code `${this.emitter.emitTypeReference(v)}${i < tuple.values.length ? "," : ""}`);
+        }
+        return builder.reduce();
+    }
+    reference(targetDeclaration, pathUp, pathDown, commonScope) {
+        const basePath = pathDown.map((s) => s.name).join(".");
+        return basePath
+            ? this.emitter.result.rawCode(basePath + "." + targetDeclaration.name)
+            : this.emitter.result.rawCode(targetDeclaration.name);
+    }
+}
+//# sourceMappingURL=type-emitter.js.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/type-emitter.js.map b/dist/src/emitter-framework/type-emitter.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..7bf99afb88d45a79ede486fd12d57a84d9742e57
--- /dev/null
+++ b/dist/src/emitter-framework/type-emitter.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"type-emitter.js","sourceRoot":"","sources":["../../../src/emitter-framework/type-emitter.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/types.d.ts b/dist/src/emitter-framework/types.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..0d7916a77e5cbee6fea4bf0df24752a9300b65c3
--- /dev/null
+++ b/dist/src/emitter-framework/types.d.ts
@@ -0,0 +1,139 @@
+import type { Enum, Interface, IntrinsicType, Model, ModelProperty, Operation, Program, Scalar, Tuple, Type, Union } from "../core/index.js";
+import { Placeholder } from "./placeholder.js";
+import type { TypeEmitter } from "./type-emitter.js";
+type AssetEmitterOptions<TOptions extends object> = {
+    noEmit: boolean;
+    emitterOutputDir: string;
+} & TOptions;
+export interface EmitTypeReferenceOptions {
+    readonly referenceContext?: Record<string, any>;
+}
+export interface AssetEmitter<T, TOptions extends object = Record<string, unknown>> {
+    /**
+     * Get the current emitter context as set by the TypeEmitter's various
+     * context methods.
+     *
+     * @returns The current emitter context
+     */
+    getContext(): Context;
+    getOptions(): AssetEmitterOptions<TOptions>;
+    getProgram(): Program;
+    emitTypeReference(type: Type, context?: EmitTypeReferenceOptions): EmitEntity<T>;
+    emitDeclarationName(type: TypeSpecDeclaration): string | undefined;
+    emitType(type: Type, context?: Partial<ContextState>): EmitEntity<T>;
+    emitProgram(options?: {
+        emitGlobalNamespace?: boolean;
+        emitTypeSpecNamespace?: boolean;
+    }): void;
+    emitModelProperties(model: Model): EmitEntity<T>;
+    emitModelProperty(prop: ModelProperty): EmitEntity<T>;
+    emitOperationParameters(operation: Operation): EmitEntity<T>;
+    emitOperationReturnType(operation: Operation): EmitEntity<T>;
+    emitInterfaceOperations(iface: Interface): EmitEntity<T>;
+    emitInterfaceOperation(operation: Operation): EmitEntity<T>;
+    emitEnumMembers(en: Enum): EmitEntity<T>;
+    emitUnionVariants(union: Union): EmitEntity<T>;
+    emitTupleLiteralValues(tuple: Tuple): EmitEntity<T>;
+    emitSourceFile(sourceFile: SourceFile<T>): Promise<EmittedSourceFile>;
+    /**
+     * Create a source file.
+     *
+     * @param name the path of the file, resolved relative to the emitter's output directory.
+     */
+    createSourceFile(name: string): SourceFile<T>;
+    createScope(sourceFile: SourceFile<T>, name: string): SourceFileScope<T>;
+    createScope(namespace: any, name: string, parentScope: Scope<T>): NamespaceScope<T>;
+    createScope(block: any, name: string, parentScope?: Scope<T> | null): Scope<T>;
+    result: {
+        declaration(name: string, value: T | Placeholder<T>): Declaration<T>;
+        rawCode(value: T | Placeholder<T>): RawCode<T>;
+        none(): NoEmit;
+    };
+    writeOutput(): Promise<void>;
+    /** Get source files that have been scoped. */
+    getSourceFiles(): SourceFile<T>[];
+}
+export interface ScopeBase<T> {
+    kind: string;
+    name: string;
+    parentScope: Scope<T> | null;
+    childScopes: Scope<T>[];
+    declarations: Declaration<T>[];
+}
+export interface SourceFileScope<T> extends ScopeBase<T> {
+    kind: "sourceFile";
+    sourceFile: SourceFile<T>;
+}
+export interface NamespaceScope<T> extends ScopeBase<T> {
+    kind: "namespace";
+    parentScope: Scope<T>;
+    namespace: any;
+}
+export type Scope<T> = SourceFileScope<T> | NamespaceScope<T>;
+export interface TypeReference {
+    expression: string;
+}
+export interface SourceFile<T> {
+    path: string;
+    globalScope: Scope<T>;
+    imports: Map<string, string[]>;
+    meta: Record<string, any>;
+}
+export interface EmittedSourceFile {
+    contents: string;
+    path: string;
+}
+export type EmitEntity<T> = Declaration<T> | RawCode<T> | NoEmit | CircularEmit;
+export declare class EmitterResult {
+}
+export declare class Declaration<T> extends EmitterResult {
+    name: string;
+    scope: Scope<T>;
+    value: T | Placeholder<T>;
+    kind: "declaration";
+    meta: Record<string, any>;
+    constructor(name: string, scope: Scope<T>, value: T | Placeholder<T>);
+}
+export declare class RawCode<T> extends EmitterResult {
+    value: T | Placeholder<T>;
+    kind: "code";
+    constructor(value: T | Placeholder<T>);
+}
+export declare class NoEmit extends EmitterResult {
+    kind: "none";
+}
+export declare class CircularEmit extends EmitterResult {
+    emitEntityKey: [string, Type, ContextState];
+    kind: "circular";
+    constructor(emitEntityKey: [string, Type, ContextState]);
+}
+export interface AssetTag {
+    language: AssetTagFactory;
+    create(key: string): AssetTagFactory;
+}
+export interface AssetTagInstance {
+}
+export type AssetTagFactory = {
+    (value: string): AssetTagInstance;
+};
+export type TypeSpecDeclaration = Model | Interface | Union | Operation | Enum | Scalar | IntrinsicType;
+export interface ContextState {
+    lexicalContext: Record<string, any>;
+    referenceContext: Record<string, any>;
+}
+export type Context = Record<string, any>;
+export type ESRecord = Record<string, any> & {
+    _record: true;
+};
+type EndingWith<Names, Name extends string> = Names extends `${infer _X}${Name}` ? Names : never;
+export type TypeEmitterMethod = keyof Omit<TypeEmitter<any, any>, "sourceFile" | "declarationName" | "reference" | "circularReference" | "emitValue" | "writeOutput" | EndingWith<keyof TypeEmitter<any, any>, "Context">>;
+export interface LexicalTypeStackEntry {
+    method: TypeEmitterMethod;
+    args: any[];
+}
+export interface EmitterState {
+    lexicalTypeStack: LexicalTypeStackEntry[];
+    context: ContextState;
+}
+export {};
+//# sourceMappingURL=types.d.ts.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/types.d.ts.map b/dist/src/emitter-framework/types.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..6d163ae4748a5a5cbcae6961818076599386cb2a
--- /dev/null
+++ b/dist/src/emitter-framework/types.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"types.d.ts","sourceRoot":"","sources":["../../../src/emitter-framework/types.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,EACV,IAAI,EACJ,SAAS,EACT,aAAa,EACb,KAAK,EACL,aAAa,EACb,SAAS,EACT,OAAO,EACP,MAAM,EACN,KAAK,EACL,IAAI,EACJ,KAAK,EACN,MAAM,kBAAkB,CAAC;AAC1B,OAAO,EAAE,WAAW,EAAE,MAAM,kBAAkB,CAAC;AAC/C,OAAO,KAAK,EAAE,WAAW,EAAE,MAAM,mBAAmB,CAAC;AAErD,KAAK,mBAAmB,CAAC,QAAQ,SAAS,MAAM,IAAI;IAClD,MAAM,EAAE,OAAO,CAAC;IAChB,gBAAgB,EAAE,MAAM,CAAC;CAC1B,GAAG,QAAQ,CAAC;AAEb,MAAM,WAAW,wBAAwB;IACvC,QAAQ,CAAC,gBAAgB,CAAC,EAAE,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;CACjD;AAED,MAAM,WAAW,YAAY,CAAC,CAAC,EAAE,QAAQ,SAAS,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,OAAO,CAAC;IAChF;;;;;OAKG;IACH,UAAU,IAAI,OAAO,CAAC;IACtB,UAAU,IAAI,mBAAmB,CAAC,QAAQ,CAAC,CAAC;IAC5C,UAAU,IAAI,OAAO,CAAC;IACtB,iBAAiB,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,CAAC,EAAE,wBAAwB,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;IACjF,mBAAmB,CAAC,IAAI,EAAE,mBAAmB,GAAG,MAAM,GAAG,SAAS,CAAC;IACnE,QAAQ,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,CAAC,EAAE,OAAO,CAAC,YAAY,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;IACrE,WAAW,CAAC,OAAO,CAAC,EAAE;QAAE,mBAAmB,CAAC,EAAE,OAAO,CAAC;QAAC,qBAAqB,CAAC,EAAE,OAAO,CAAA;KAAE,GAAG,IAAI,CAAC;IAChG,mBAAmB,CAAC,KAAK,EAAE,KAAK,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;IACjD,iBAAiB,CAAC,IAAI,EAAE,aAAa,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;IACtD,uBAAuB,CAAC,SAAS,EAAE,SAAS,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;IAC7D,uBAAuB,CAAC,SAAS,EAAE,SAAS,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;IAC7D,uBAAuB,CAAC,KAAK,EAAE,SAAS,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;IACzD,sBAAsB,CAAC,SAAS,EAAE,SAAS,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;IAC5D,eAAe,CAAC,EAAE,EAAE,IAAI,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;IACzC,iBAAiB,CAAC,KAAK,EAAE,KAAK,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;IAC/C,sBAAsB,CAAC,KAAK,EAAE,KAAK,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;IACpD,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;IACtE;;;;OAIG;IACH,gBAAgB,CAAC,IAAI,EAAE,MAAM,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;IAC9C,WAAW,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,MAAM,GAAG,eAAe,CAAC,CAAC,CAAC,CAAC;IACzE,WAAW,CAAC,SAAS,EAAE,GAAG,EAAE,IAAI,EAAE,MAAM,EAAE,WAAW,EAAE,KAAK,CAAC,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;IACpF,WAAW,CAAC,KAAK,EAAE,GAAG,EAAE,IAAI,EAAE,MAAM,EAAE,WAAW,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;IAC/E,MAAM,EAAE;QACN,WAAW,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC;QACrE,OAAO,CAAC,KAAK,EAAE,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;QAC/C,IAAI,IAAI,MAAM,CAAC;KAChB,CAAC;IACF,WAAW,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC;IAE7B,8CAA8C;IAC9C,cAAc,IAAI,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC;CACnC;AAED,MAAM,WAAW,SAAS,CAAC,CAAC;IAC1B,IAAI,EAAE,MAAM,CAAC;IACb,IAAI,EAAE,MAAM,CAAC;IACb,WAAW,EAAE,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;IAC7B,WAAW,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC;IACxB,YAAY,EAAE,WAAW,CAAC,CAAC,CAAC,EAAE,CAAC;CAChC;AAED,MAAM,WAAW,eAAe,CAAC,CAAC,CAAE,SAAQ,SAAS,CAAC,CAAC,CAAC;IACtD,IAAI,EAAE,YAAY,CAAC;IACnB,UAAU,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC;CAC3B;AAED,MAAM,WAAW,cAAc,CAAC,CAAC,CAAE,SAAQ,SAAS,CAAC,CAAC,CAAC;IACrD,IAAI,EAAE,WAAW,CAAC;IAClB,WAAW,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;IACtB,SAAS,EAAE,GAAG,CAAC;CAChB;AAED,MAAM,MAAM,KAAK,CAAC,CAAC,IAAI,eAAe,CAAC,CAAC,CAAC,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;AAE9D,MAAM,WAAW,aAAa;IAC5B,UAAU,EAAE,MAAM,CAAC;CACpB;AAED,MAAM,WAAW,UAAU,CAAC,CAAC;IAC3B,IAAI,EAAE,MAAM,CAAC;IACb,WAAW,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;IACtB,OAAO,EAAE,GAAG,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,CAAC;IAC/B,IAAI,EAAE,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;CAC3B;AAED,MAAM,WAAW,iBAAiB;IAChC,QAAQ,EAAE,MAAM,CAAC;IACjB,IAAI,EAAE,MAAM,CAAC;CACd;AAED,MAAM,MAAM,UAAU,CAAC,CAAC,IAAI,WAAW,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,GAAG,MAAM,GAAG,YAAY,CAAC;AAEhF,qBAAa,aAAa;CAAG;AAC7B,qBAAa,WAAW,CAAC,CAAC,CAAE,SAAQ,aAAa;IAKtC,IAAI,EAAE,MAAM;IACZ,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;IACf,KAAK,EAAE,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;IAN3B,IAAI,gBAA0B;IAC9B,IAAI,EAAE,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC,CAAM;gBAG7B,IAAI,EAAE,MAAM,EACZ,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC,EACf,KAAK,EAAE,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;CAQnC;AAED,qBAAa,OAAO,CAAC,CAAC,CAAE,SAAQ,aAAa;IAGxB,KAAK,EAAE,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;IAFrC,IAAI,SAAmB;gBAEX,KAAK,EAAE,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;CAO7C;AAED,qBAAa,MAAO,SAAQ,aAAa;IAChC,IAAI,SAAmB;CAC/B;AAED,qBAAa,YAAa,SAAQ,aAAa;IAE1B,aAAa,EAAE,CAAC,MAAM,EAAE,IAAI,EAAE,YAAY,CAAC;IADvD,IAAI,aAAuB;gBACf,aAAa,EAAE,CAAC,MAAM,EAAE,IAAI,EAAE,YAAY,CAAC;CAG/D;AAED,MAAM,WAAW,QAAQ;IACvB,QAAQ,EAAE,eAAe,CAAC;IAC1B,MAAM,CAAC,GAAG,EAAE,MAAM,GAAG,eAAe,CAAC;CACtC;AAED,MAAM,WAAW,gBAAgB;CAAG;AAEpC,MAAM,MAAM,eAAe,GAAG;IAC5B,CAAC,KAAK,EAAE,MAAM,GAAG,gBAAgB,CAAC;CACnC,CAAC;AAEF,MAAM,MAAM,mBAAmB,GAC3B,KAAK,GACL,SAAS,GACT,KAAK,GACL,SAAS,GACT,IAAI,GACJ,MAAM,GACN,aAAa,CAAC;AAElB,MAAM,WAAW,YAAY;IAC3B,cAAc,EAAE,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;IACpC,gBAAgB,EAAE,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;CACvC;AAED,MAAM,MAAM,OAAO,GAAG,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;AAC1C,MAAM,MAAM,QAAQ,GAAG,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC,GAAG;IAAE,OAAO,EAAE,IAAI,CAAA;CAAE,CAAC;AAE/D,KAAK,UAAU,CAAC,KAAK,EAAE,IAAI,SAAS,MAAM,IAAI,KAAK,SAAS,GAAG,MAAM,EAAE,GAAG,IAAI,EAAE,GAAG,KAAK,GAAG,KAAK,CAAC;AAEjG,MAAM,MAAM,iBAAiB,GAAG,MAAM,IAAI,CACxC,WAAW,CAAC,GAAG,EAAE,GAAG,CAAC,EACnB,YAAY,GACZ,iBAAiB,GACjB,WAAW,GACX,mBAAmB,GACnB,WAAW,GACX,aAAa,GACb,UAAU,CAAC,MAAM,WAAW,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,SAAS,CAAC,CACrD,CAAC;AAEF,MAAM,WAAW,qBAAqB;IACpC,MAAM,EAAE,iBAAiB,CAAC;IAC1B,IAAI,EAAE,GAAG,EAAE,CAAC;CACb;AAED,MAAM,WAAW,YAAY;IAC3B,gBAAgB,EAAE,qBAAqB,EAAE,CAAC;IAC1C,OAAO,EAAE,YAAY,CAAC;CACvB"}
\ No newline at end of file
diff --git a/dist/src/emitter-framework/types.js b/dist/src/emitter-framework/types.js
new file mode 100644
index 0000000000000000000000000000000000000000..bee61293e799a1827d2b7baa141254f9bf63c3c7
--- /dev/null
+++ b/dist/src/emitter-framework/types.js
@@ -0,0 +1,42 @@
+import { Placeholder } from "./placeholder.js";
+export class EmitterResult {
+}
+export class Declaration extends EmitterResult {
+    name;
+    scope;
+    value;
+    kind = "declaration";
+    meta = {};
+    constructor(name, scope, value) {
+        if (value instanceof Placeholder) {
+            value.onValue((v) => (this.value = v));
+        }
+        super();
+        this.name = name;
+        this.scope = scope;
+        this.value = value;
+    }
+}
+export class RawCode extends EmitterResult {
+    value;
+    kind = "code";
+    constructor(value) {
+        if (value instanceof Placeholder) {
+            value.onValue((v) => (this.value = v));
+        }
+        super();
+        this.value = value;
+    }
+}
+export class NoEmit extends EmitterResult {
+    kind = "none";
+}
+export class CircularEmit extends EmitterResult {
+    emitEntityKey;
+    kind = "circular";
+    constructor(emitEntityKey) {
+        super();
+        this.emitEntityKey = emitEntityKey;
+    }
+}
+//# sourceMappingURL=types.js.map
\ No newline at end of file
diff --git a/dist/src/emitter-framework/types.js.map b/dist/src/emitter-framework/types.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..141d93840f7b47ce168f5d3a874f7813d23a673f
--- /dev/null
+++ b/dist/src/emitter-framework/types.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"types.js","sourceRoot":"","sources":["../../../src/emitter-framework/types.ts"],"names":[],"mappings":"AAaA,OAAO,EAAE,WAAW,EAAE,MAAM,kBAAkB,CAAC;AA+F/C,MAAM,OAAO,aAAa;CAAG;AAC7B,MAAM,OAAO,WAAe,SAAQ,aAAa;IAKtC;IACA;IACA;IANF,IAAI,GAAG,aAAsB,CAAC;IAC9B,IAAI,GAAwB,EAAE,CAAC;IAEtC,YACS,IAAY,EACZ,KAAe,EACf,KAAyB;QAEhC,IAAI,KAAK,YAAY,WAAW,EAAE,CAAC;YACjC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC;QACzC,CAAC;QAED,KAAK,EAAE,CAAC;QARD,SAAI,GAAJ,IAAI,CAAQ;QACZ,UAAK,GAAL,KAAK,CAAU;QACf,UAAK,GAAL,KAAK,CAAoB;IAOlC,CAAC;CACF;AAED,MAAM,OAAO,OAAW,SAAQ,aAAa;IAGxB;IAFZ,IAAI,GAAG,MAAe,CAAC;IAE9B,YAAmB,KAAyB;QAC1C,IAAI,KAAK,YAAY,WAAW,EAAE,CAAC;YACjC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC;QACzC,CAAC;QAED,KAAK,EAAE,CAAC;QALS,UAAK,GAAL,KAAK,CAAoB;IAM5C,CAAC;CACF;AAED,MAAM,OAAO,MAAO,SAAQ,aAAa;IAChC,IAAI,GAAG,MAAe,CAAC;CAC/B;AAED,MAAM,OAAO,YAAa,SAAQ,aAAa;IAE1B;IADZ,IAAI,GAAG,UAAmB,CAAC;IAClC,YAAmB,aAA2C;QAC5D,KAAK,EAAE,CAAC;QADS,kBAAa,GAAb,aAAa,CAA8B;IAE9D,CAAC;CACF"}
\ No newline at end of file
diff --git a/dist/src/experimental/state-accessor.d.ts b/dist/src/experimental/state-accessor.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..e2c20f6b5a41559233aea8f98fe49d1861f7a840
--- /dev/null
+++ b/dist/src/experimental/state-accessor.d.ts
@@ -0,0 +1,13 @@
+import type { Program } from "../core/program.js";
+import type { Type } from "../core/types.js";
+type StateMapGetter<K extends Type, V> = (program: Program, type: K) => V | undefined;
+type StateMapSetter<K extends Type, V> = (program: Program, type: K, value: V) => void;
+type StateMapMapGetter<K extends Type, V> = (program: Program) => Map<K, V>;
+/** @experimental */
+export declare function unsafe_useStateMap<K extends Type, V>(key: symbol): [StateMapGetter<K, V>, StateMapSetter<K, V>, StateMapMapGetter<K, V>];
+type StateSetGetter<K extends Type> = (program: Program, type: K) => boolean;
+type StateSetSetter<K extends Type> = (program: Program, type: K) => void;
+/** @experimental */
+export declare function unsafe_useStateSet<K extends Type>(key: symbol): [StateSetGetter<K>, StateSetSetter<K>];
+export {};
+//# sourceMappingURL=state-accessor.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/state-accessor.d.ts.map b/dist/src/experimental/state-accessor.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..dde1611aedc3b8fdaa2ee81c823b28902b6eca63
--- /dev/null
+++ b/dist/src/experimental/state-accessor.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"state-accessor.d.ts","sourceRoot":"","sources":["../../../src/experimental/state-accessor.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,OAAO,EAAE,MAAM,oBAAoB,CAAC;AAClD,OAAO,KAAK,EAAE,IAAI,EAAE,MAAM,kBAAkB,CAAC;AAE7C,KAAK,cAAc,CAAC,CAAC,SAAS,IAAI,EAAE,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,KAAK,CAAC,GAAG,SAAS,CAAC;AACtF,KAAK,cAAc,CAAC,CAAC,SAAS,IAAI,EAAE,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,KAAK,IAAI,CAAC;AACvF,KAAK,iBAAiB,CAAC,CAAC,SAAS,IAAI,EAAE,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,KAAK,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AAE5E,oBAAoB;AACpB,wBAAgB,kBAAkB,CAAC,CAAC,SAAS,IAAI,EAAE,CAAC,EAClD,GAAG,EAAE,MAAM,GACV,CAAC,cAAc,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,cAAc,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,iBAAiB,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAMvE;AAED,KAAK,cAAc,CAAC,CAAC,SAAS,IAAI,IAAI,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,KAAK,OAAO,CAAC;AAC7E,KAAK,cAAc,CAAC,CAAC,SAAS,IAAI,IAAI,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,KAAK,IAAI,CAAC;AAE1E,oBAAoB;AACpB,wBAAgB,kBAAkB,CAAC,CAAC,SAAS,IAAI,EAC/C,GAAG,EAAE,MAAM,GACV,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,cAAc,CAAC,CAAC,CAAC,CAAC,CAKxC"}
\ No newline at end of file
diff --git a/dist/src/experimental/state-accessor.js b/dist/src/experimental/state-accessor.js
new file mode 100644
index 0000000000000000000000000000000000000000..29809586f0458198c6b711ebf4b598ce07b804cf
--- /dev/null
+++ b/dist/src/experimental/state-accessor.js
@@ -0,0 +1,14 @@
+/** @experimental */
+export function unsafe_useStateMap(key) {
+    const getter = (program, target) => program.stateMap(key).get(target);
+    const setter = (program, target, value) => program.stateMap(key).set(target, value);
+    const mapGetter = (program) => program.stateMap(key);
+    return [getter, setter, mapGetter];
+}
+/** @experimental */
+export function unsafe_useStateSet(key) {
+    const getter = (program, target) => program.stateSet(key).has(target);
+    const setter = (program, target) => program.stateSet(key).add(target);
+    return [getter, setter];
+}
+//# sourceMappingURL=state-accessor.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/state-accessor.js.map b/dist/src/experimental/state-accessor.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..85bdaf1868739c749591b33323065e4287b11b2b
--- /dev/null
+++ b/dist/src/experimental/state-accessor.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"state-accessor.js","sourceRoot":"","sources":["../../../src/experimental/state-accessor.ts"],"names":[],"mappings":"AAOA,oBAAoB;AACpB,MAAM,UAAU,kBAAkB,CAChC,GAAW;IAEX,MAAM,MAAM,GAAG,CAAC,OAAgB,EAAE,MAAS,EAAE,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAClF,MAAM,MAAM,GAAG,CAAC,OAAgB,EAAE,MAAS,EAAE,KAAQ,EAAE,EAAE,CACvD,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;IAC3C,MAAM,SAAS,GAAG,CAAC,OAAgB,EAAE,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;IAC9D,OAAO,CAAC,MAAM,EAAE,MAAM,EAAE,SAAgB,CAAC,CAAC;AAC5C,CAAC;AAKD,oBAAoB;AACpB,MAAM,UAAU,kBAAkB,CAChC,GAAW;IAEX,MAAM,MAAM,GAAG,CAAC,OAAgB,EAAE,MAAS,EAAE,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAClF,MAAM,MAAM,GAAG,CAAC,OAAgB,EAAE,MAAS,EAAE,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAElF,OAAO,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;AAC1B,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/define-kit.d.ts b/dist/src/experimental/typekit/define-kit.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..4099510f788296516701751afa2b6afa8ed970c7
--- /dev/null
+++ b/dist/src/experimental/typekit/define-kit.d.ts
@@ -0,0 +1,29 @@
+import { type Program } from "../../core/program.js";
+import { Realm } from "../realm.js";
+/**
+ * A Typekit is a collection of utility functions and namespaces that allow you to work with TypeSpec types.
+ *
+ * @experimental
+ */
+export interface Typekit {
+    readonly program: Program;
+    readonly realm: Realm;
+}
+/**
+ * contextual typing to type guards is annoying (often have to restate the signature),
+ * so this helper will remove the type assertions from the interface you are currently defining.
+ * @experimental
+ */
+export type StripGuards<T> = {
+    [K in keyof T]: T[K] extends (...args: infer P) => infer R ? (...args: P) => R : T[K] extends Record<string, any> ? StripGuards<T[K]> : T[K];
+};
+export declare const TypekitNamespaceSymbol: unique symbol;
+/**
+ * Defines an extension to the Typekit interface.
+ *
+ * All Typekit instances will inherit the functionality defined by calls to this function.
+ *
+ * @experimental
+ */
+export declare function defineKit<T extends Record<string, any>>(source: StripGuards<T> & ThisType<Typekit>): void;
+//# sourceMappingURL=define-kit.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/define-kit.d.ts.map b/dist/src/experimental/typekit/define-kit.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..d739828685cbb3369d8b2066b30320df7ffa8f82
--- /dev/null
+++ b/dist/src/experimental/typekit/define-kit.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"define-kit.d.ts","sourceRoot":"","sources":["../../../../src/experimental/typekit/define-kit.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,KAAK,OAAO,EAAE,MAAM,uBAAuB,CAAC;AACrD,OAAO,EAAE,KAAK,EAAE,MAAM,aAAa,CAAC;AAEpC;;;;GAIG;AACH,MAAM,WAAW,OAAO;IACtB,QAAQ,CAAC,OAAO,EAAE,OAAO,CAAC;IAC1B,QAAQ,CAAC,KAAK,EAAE,KAAK,CAAC;CACvB;AAYD;;;;GAIG;AACH,MAAM,MAAM,WAAW,CAAC,CAAC,IAAI;KAC1B,CAAC,IAAI,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,IAAI,EAAE,MAAM,CAAC,KAAK,MAAM,CAAC,GACtD,CAAC,GAAG,IAAI,EAAE,CAAC,KAAK,CAAC,GACjB,CAAC,CAAC,CAAC,CAAC,SAAS,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC,GAC9B,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GACjB,CAAC,CAAC,CAAC,CAAC;CACX,CAAC;AAEF,eAAO,MAAM,sBAAsB,eAAiC,CAAC;AAErE;;;;;;GAMG;AACH,wBAAgB,SAAS,CAAC,CAAC,SAAS,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC,EACrD,MAAM,EAAE,WAAW,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,OAAO,CAAC,GACzC,IAAI,CAmBN"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/define-kit.js b/dist/src/experimental/typekit/define-kit.js
new file mode 100644
index 0000000000000000000000000000000000000000..35458c939ff118e98d7a8e1eeaba1b9ebac03b62
--- /dev/null
+++ b/dist/src/experimental/typekit/define-kit.js
@@ -0,0 +1,35 @@
+/**
+ * The prototype object for Typekit instances.
+ *
+ * @see {@link defineKit}
+ *
+ * @experimental
+ * @internal
+ */
+export const TypekitPrototype = {};
+export const TypekitNamespaceSymbol = Symbol.for("TypekitNamespace");
+/**
+ * Defines an extension to the Typekit interface.
+ *
+ * All Typekit instances will inherit the functionality defined by calls to this function.
+ *
+ * @experimental
+ */
+export function defineKit(source) {
+    for (const [name, fnOrNs] of Object.entries(source)) {
+        let kits = fnOrNs;
+        if (TypekitPrototype[name] !== undefined) {
+            kits = { ...TypekitPrototype[name], ...fnOrNs };
+        }
+        // Tag top-level namespace objects with the symbol
+        if (typeof kits === "object" && kits !== null) {
+            Object.defineProperty(kits, TypekitNamespaceSymbol, {
+                value: true,
+                enumerable: false, // Keep the symbol non-enumerable
+                configurable: false,
+            });
+        }
+        TypekitPrototype[name] = kits;
+    }
+}
+//# sourceMappingURL=define-kit.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/define-kit.js.map b/dist/src/experimental/typekit/define-kit.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..439b7361e922c7afeae72b5f4847009e6152e9cd
--- /dev/null
+++ b/dist/src/experimental/typekit/define-kit.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"define-kit.js","sourceRoot":"","sources":["../../../../src/experimental/typekit/define-kit.ts"],"names":[],"mappings":"AAaA;;;;;;;GAOG;AACH,MAAM,CAAC,MAAM,gBAAgB,GAA4B,EAAE,CAAC;AAe5D,MAAM,CAAC,MAAM,sBAAsB,GAAG,MAAM,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;AAErE;;;;;;GAMG;AACH,MAAM,UAAU,SAAS,CACvB,MAA0C;IAE1C,KAAK,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC;QACpD,IAAI,IAAI,GAAG,MAAM,CAAC;QAElB,IAAI,gBAAgB,CAAC,IAAI,CAAC,KAAK,SAAS,EAAE,CAAC;YACzC,IAAI,GAAG,EAAE,GAAG,gBAAgB,CAAC,IAAI,CAAC,EAAE,GAAG,MAAM,EAAE,CAAC;QAClD,CAAC;QAED,kDAAkD;QAClD,IAAI,OAAO,IAAI,KAAK,QAAQ,IAAI,IAAI,KAAK,IAAI,EAAE,CAAC;YAC9C,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,sBAAsB,EAAE;gBAClD,KAAK,EAAE,IAAI;gBACX,UAAU,EAAE,KAAK,EAAE,iCAAiC;gBACpD,YAAY,EAAE,KAAK;aACpB,CAAC,CAAC;QACL,CAAC;QAED,gBAAgB,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;IAChC,CAAC;AACH,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/array.d.ts b/dist/src/experimental/typekit/kits/array.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..d4f74542f127d8abb163cb85f60e0f700a1b4501
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/array.d.ts
@@ -0,0 +1,28 @@
+import { Model, Type } from "../../../core/types.js";
+/**
+ * @experimental
+ */
+export interface ArrayKit {
+    /**
+     * Check if a type is an array.
+     */
+    is(type: Type): boolean;
+    /**
+     * Get the element type of an array.
+     */
+    getElementType(type: Model): Type;
+    /**
+     * Create an array type.
+     */
+    create(elementType: Type): Model;
+}
+interface TypekitExtension {
+    /** @experimental */
+    array: ArrayKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=array.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/array.d.ts.map b/dist/src/experimental/typekit/kits/array.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..f92f1705000a76125b8177808df2f5fd16a1983c
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/array.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"array.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/array.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,wBAAwB,CAAC;AAGrD;;GAEG;AACH,MAAM,WAAW,QAAQ;IACvB;;OAEG;IACH,EAAE,CAAC,IAAI,EAAE,IAAI,GAAG,OAAO,CAAC;IACxB;;OAEG;IACH,cAAc,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI,CAAC;IAClC;;OAEG;IACH,MAAM,CAAC,WAAW,EAAE,IAAI,GAAG,KAAK,CAAC;CAClC;AAED,UAAU,gBAAgB;IACxB,oBAAoB;IACpB,KAAK,EAAE,QAAQ,CAAC;CACjB;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/array.js b/dist/src/experimental/typekit/kits/array.js
new file mode 100644
index 0000000000000000000000000000000000000000..fd05710a1e1fb231eda80c66e421cbfc6b6571a1
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/array.js
@@ -0,0 +1,26 @@
+import { isArrayModelType } from "../../../core/type-utils.js";
+import { defineKit } from "../define-kit.js";
+defineKit({
+    array: {
+        is(type) {
+            return (type.kind === "Model" && isArrayModelType(this.program, type) && type.properties.size === 0);
+        },
+        getElementType(type) {
+            if (!this.array.is(type)) {
+                throw new Error("Type is not an array.");
+            }
+            return type.indexer.value;
+        },
+        create(elementType) {
+            return this.model.create({
+                name: "Array",
+                properties: {},
+                indexer: {
+                    key: this.builtin.integer,
+                    value: elementType,
+                },
+            });
+        },
+    },
+});
+//# sourceMappingURL=array.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/array.js.map b/dist/src/experimental/typekit/kits/array.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..25669809a221c85a3be5d8b05fc527f29346b233
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/array.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"array.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/array.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,gBAAgB,EAAE,MAAM,6BAA6B,CAAC;AAE/D,OAAO,EAAE,SAAS,EAAE,MAAM,kBAAkB,CAAC;AA6B7C,SAAS,CAAmB;IAC1B,KAAK,EAAE;QACL,EAAE,CAAC,IAAI;YACL,OAAO,CACL,IAAI,CAAC,IAAI,KAAK,OAAO,IAAI,gBAAgB,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,KAAK,CAAC,CAC5F,CAAC;QACJ,CAAC;QACD,cAAc,CAAC,IAAI;YACjB,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;gBACzB,MAAM,IAAI,KAAK,CAAC,uBAAuB,CAAC,CAAC;YAC3C,CAAC;YACD,OAAO,IAAI,CAAC,OAAQ,CAAC,KAAK,CAAC;QAC7B,CAAC;QACD,MAAM,CAAC,WAAW;YAChB,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;gBACvB,IAAI,EAAE,OAAO;gBACb,UAAU,EAAE,EAAE;gBACd,OAAO,EAAE;oBACP,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO;oBACzB,KAAK,EAAE,WAAW;iBACnB;aACF,CAAC,CAAC;QACL,CAAC;KACF;CACF,CAAC,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/builtin.d.ts b/dist/src/experimental/typekit/kits/builtin.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..15d06c0e27442104c10b155e897474dd85c323e4
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/builtin.d.ts
@@ -0,0 +1,117 @@
+import type { Scalar } from "../../../core/types.js";
+/**
+ * A kit of built-in types.
+ * @experimental
+ */
+export interface BuiltinKit {
+    /**
+     * Accessor for the string builtin type.
+     */
+    get string(): Scalar;
+    /**
+     * Accessor for the boolean builtin type.
+     */
+    get boolean(): Scalar;
+    /**
+     * Accessor for the bytes builtin type, representing binary data.
+     */
+    get bytes(): Scalar;
+    /**
+     * Accessor for the decimal builtin type for high-precision decimal values.
+     */
+    get decimal(): Scalar;
+    /**
+     * Accessor for the decimal128 builtin type, a 128-bit decimal value.
+     */
+    get decimal128(): Scalar;
+    /**
+     * Accessor for the duration builtin type, representing a span of time.
+     */
+    get duration(): Scalar;
+    /**
+     * Accessor for the float builtin type, representing a double-precision floating-point number.
+     */
+    get float(): Scalar;
+    /**
+     * Accessor for the float32 builtin type, representing a single-precision floating-point number.
+     */
+    get float32(): Scalar;
+    /**
+     * Accessor for the float64 builtin type, representing a double-precision floating-point number.
+     */
+    get float64(): Scalar;
+    /**
+     * Accessor for the int8 builtin type, representing an 8-bit signed integer.
+     */
+    get int8(): Scalar;
+    /**
+     * Accessor for the int16 builtin type, representing a 16-bit signed integer.
+     */
+    get int16(): Scalar;
+    /**
+     * Accessor for the int32 builtin type, representing a 32-bit signed integer.
+     */
+    get int32(): Scalar;
+    /**
+     * Accessor for the int64 builtin type, representing a 64-bit signed integer.
+     */
+    get int64(): Scalar;
+    /**
+     * Accessor for the integer builtin type, representing an arbitrary-precision integer.
+     */
+    get integer(): Scalar;
+    /**
+     * Accessor for the offsetDateTime builtin type, representing a date and time with an offset.
+     */
+    get offsetDateTime(): Scalar;
+    /**
+     * Accessor for the plainDate builtin type, representing a date without time or offset.
+     */
+    get plainDate(): Scalar;
+    /**
+     * Accessor for the plainTime builtin type, representing a time without date or offset.
+     */
+    get plainTime(): Scalar;
+    /**
+     * Accessor for the safeInt builtin type, representing an integer within the safe range for JavaScript.
+     */
+    get safeInt(): Scalar;
+    /**
+     * Accessor for the uint8 builtin type, representing an 8-bit unsigned integer.
+     */
+    get uint8(): Scalar;
+    /**
+     * Accessor for the uint16 builtin type, representing a 16-bit unsigned integer.
+     */
+    get uint16(): Scalar;
+    /**
+     * Accessor for the uint32 builtin type, representing a 32-bit unsigned integer.
+     */
+    get uint32(): Scalar;
+    /**
+     * Accessor for the uint64 builtin type, representing a 64-bit unsigned integer.
+     */
+    get uint64(): Scalar;
+    /**
+     * Accessor for the url builtin type, representing a valid URL string.
+     */
+    get url(): Scalar;
+    /**
+     * Accessor for the utcDateTime builtin type, representing a date and time in UTC.
+     */
+    get utcDateTime(): Scalar;
+    /**
+     * Accessor for the numeric builtin type, representing a numeric value.
+     */
+    get numeric(): Scalar;
+}
+interface TypekitExtension {
+    /** @experimental */
+    builtin: BuiltinKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=builtin.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/builtin.d.ts.map b/dist/src/experimental/typekit/kits/builtin.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..8219c5f68a39801aaf10560d7190bca911b1a4ef
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/builtin.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"builtin.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/builtin.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,MAAM,EAAE,MAAM,wBAAwB,CAAC;AAGrD;;;GAGG;AACH,MAAM,WAAW,UAAU;IACzB;;OAEG;IACH,IAAI,MAAM,IAAI,MAAM,CAAC;IAErB;;OAEG;IACH,IAAI,OAAO,IAAI,MAAM,CAAC;IAEtB;;OAEG;IACH,IAAI,KAAK,IAAI,MAAM,CAAC;IAEpB;;OAEG;IACH,IAAI,OAAO,IAAI,MAAM,CAAC;IAEtB;;OAEG;IACH,IAAI,UAAU,IAAI,MAAM,CAAC;IAEzB;;OAEG;IACH,IAAI,QAAQ,IAAI,MAAM,CAAC;IAEvB;;OAEG;IACH,IAAI,KAAK,IAAI,MAAM,CAAC;IAEpB;;OAEG;IACH,IAAI,OAAO,IAAI,MAAM,CAAC;IAEtB;;OAEG;IACH,IAAI,OAAO,IAAI,MAAM,CAAC;IAEtB;;OAEG;IACH,IAAI,IAAI,IAAI,MAAM,CAAC;IAEnB;;OAEG;IACH,IAAI,KAAK,IAAI,MAAM,CAAC;IAEpB;;OAEG;IACH,IAAI,KAAK,IAAI,MAAM,CAAC;IAEpB;;OAEG;IACH,IAAI,KAAK,IAAI,MAAM,CAAC;IAEpB;;OAEG;IACH,IAAI,OAAO,IAAI,MAAM,CAAC;IAEtB;;OAEG;IACH,IAAI,cAAc,IAAI,MAAM,CAAC;IAE7B;;OAEG;IACH,IAAI,SAAS,IAAI,MAAM,CAAC;IAExB;;OAEG;IACH,IAAI,SAAS,IAAI,MAAM,CAAC;IAExB;;OAEG;IACH,IAAI,OAAO,IAAI,MAAM,CAAC;IAEtB;;OAEG;IACH,IAAI,KAAK,IAAI,MAAM,CAAC;IAEpB;;OAEG;IACH,IAAI,MAAM,IAAI,MAAM,CAAC;IAErB;;OAEG;IACH,IAAI,MAAM,IAAI,MAAM,CAAC;IAErB;;OAEG;IACH,IAAI,MAAM,IAAI,MAAM,CAAC;IAErB;;OAEG;IACH,IAAI,GAAG,IAAI,MAAM,CAAC;IAElB;;OAEG;IACH,IAAI,WAAW,IAAI,MAAM,CAAC;IAE1B;;OAEG;IACH,IAAI,OAAO,IAAI,MAAM,CAAC;CACvB;AAED,UAAU,gBAAgB;IACxB,oBAAoB;IACpB,OAAO,EAAE,UAAU,CAAC;CACrB;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/builtin.js b/dist/src/experimental/typekit/kits/builtin.js
new file mode 100644
index 0000000000000000000000000000000000000000..31d527ff3d12ee63ac51b217889b5c2d9a000443
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/builtin.js
@@ -0,0 +1,81 @@
+import { defineKit } from "../define-kit.js";
+defineKit({
+    builtin: {
+        get string() {
+            return this.program.checker.getStdType("string");
+        },
+        get boolean() {
+            return this.program.checker.getStdType("boolean");
+        },
+        get bytes() {
+            return this.program.checker.getStdType("bytes");
+        },
+        get decimal() {
+            return this.program.checker.getStdType("decimal");
+        },
+        get decimal128() {
+            return this.program.checker.getStdType("decimal128");
+        },
+        get duration() {
+            return this.program.checker.getStdType("duration");
+        },
+        get float() {
+            return this.program.checker.getStdType("float");
+        },
+        get float32() {
+            return this.program.checker.getStdType("float32");
+        },
+        get float64() {
+            return this.program.checker.getStdType("float64");
+        },
+        get int8() {
+            return this.program.checker.getStdType("int8");
+        },
+        get int16() {
+            return this.program.checker.getStdType("int16");
+        },
+        get int32() {
+            return this.program.checker.getStdType("int32");
+        },
+        get int64() {
+            return this.program.checker.getStdType("int64");
+        },
+        get integer() {
+            return this.program.checker.getStdType("integer");
+        },
+        get offsetDateTime() {
+            return this.program.checker.getStdType("offsetDateTime");
+        },
+        get plainDate() {
+            return this.program.checker.getStdType("plainDate");
+        },
+        get plainTime() {
+            return this.program.checker.getStdType("plainTime");
+        },
+        get safeInt() {
+            return this.program.checker.getStdType("safeint");
+        },
+        get uint8() {
+            return this.program.checker.getStdType("uint8");
+        },
+        get uint16() {
+            return this.program.checker.getStdType("uint16");
+        },
+        get uint32() {
+            return this.program.checker.getStdType("uint32");
+        },
+        get uint64() {
+            return this.program.checker.getStdType("uint64");
+        },
+        get url() {
+            return this.program.checker.getStdType("url");
+        },
+        get utcDateTime() {
+            return this.program.checker.getStdType("utcDateTime");
+        },
+        get numeric() {
+            return this.program.checker.getStdType("numeric");
+        },
+    },
+});
+//# sourceMappingURL=builtin.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/builtin.js.map b/dist/src/experimental/typekit/kits/builtin.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..d53ea2568ef371c03b6660f88fa18049b15b749f
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/builtin.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"builtin.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/builtin.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/enum-member.d.ts b/dist/src/experimental/typekit/kits/enum-member.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..b2196aa96e7fe2a8ba3efa8054fe0635932ad69e
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/enum-member.d.ts
@@ -0,0 +1,52 @@
+import type { Enum, EnumMember, Type } from "../../../core/types.js";
+import { DecoratorArgs } from "../utils.js";
+/**
+ * A descriptor for creating an enum member.
+ * @experimental
+ */
+export interface EnumMemberDescriptor {
+    /**
+     * The name of the enum member.
+     */
+    name: string;
+    /**
+     * Decorators to apply to the enum member.
+     */
+    decorators?: DecoratorArgs[];
+    /**
+     * The value of the enum member. If not supplied, the value will be the same
+     * as the name.
+     */
+    value?: string | number;
+    /**
+     * The enum that the member belongs to. If not provided here, it is assumed
+     * that it will be set in `enum.build`.
+     */
+    enum?: Enum;
+}
+/**
+ * A kit for working with enum members.
+ * @experimental
+ */
+export interface EnumMemberKit {
+    /**
+     * Create an enum member. The enum member will be finished (i.e. decorators are run).
+     */
+    create(desc: EnumMemberDescriptor): EnumMember;
+    /**
+     * Check if `type` is an enum member type.
+     *
+     * @param type the type to check.
+     */
+    is(type: Type): type is EnumMember;
+}
+interface TypekitExtension {
+    /** @experimental */
+    enumMember: EnumMemberKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=enum-member.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/enum-member.d.ts.map b/dist/src/experimental/typekit/kits/enum-member.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..c57509b9793f9fa7ead777ed699e3e318726d869
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/enum-member.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"enum-member.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/enum-member.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE,MAAM,wBAAwB,CAAC;AAGrE,OAAO,EAAwB,aAAa,EAAE,MAAM,aAAa,CAAC;AAElE;;;GAGG;AACH,MAAM,WAAW,oBAAoB;IACnC;;OAEG;IACH,IAAI,EAAE,MAAM,CAAC;IACb;;OAEG;IACH,UAAU,CAAC,EAAE,aAAa,EAAE,CAAC;IAE7B;;;OAGG;IACH,KAAK,CAAC,EAAE,MAAM,GAAG,MAAM,CAAC;IAExB;;;OAGG;IACH,IAAI,CAAC,EAAE,IAAI,CAAC;CACb;AAED;;;GAGG;AACH,MAAM,WAAW,aAAa;IAC5B;;OAEG;IACH,MAAM,CAAC,IAAI,EAAE,oBAAoB,GAAG,UAAU,CAAC;IAE/C;;;;OAIG;IACH,EAAE,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,IAAI,UAAU,CAAC;CACpC;AAED,UAAU,gBAAgB;IACxB,oBAAoB;IACpB,UAAU,EAAE,aAAa,CAAC;CAC3B;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/enum-member.js b/dist/src/experimental/typekit/kits/enum-member.js
new file mode 100644
index 0000000000000000000000000000000000000000..94642e58ae0f7f8c21a22f53fa3d0a14046de9b5
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/enum-member.js
@@ -0,0 +1,22 @@
+import { defineKit } from "../define-kit.js";
+import { decoratorApplication } from "../utils.js";
+defineKit({
+    enumMember: {
+        create(desc) {
+            const member = this.program.checker.createType({
+                kind: "EnumMember",
+                name: desc.name,
+                value: desc.value,
+                decorators: decoratorApplication(this, desc.decorators),
+                node: undefined,
+                enum: desc.enum, // initialized in enum.build if not provided here
+            });
+            this.program.checker.finishType(member);
+            return member;
+        },
+        is(type) {
+            return type.kind === "EnumMember";
+        },
+    },
+});
+//# sourceMappingURL=enum-member.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/enum-member.js.map b/dist/src/experimental/typekit/kits/enum-member.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..ce9d402a0e9b6594084db0ae5df311423b6e5fd6
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/enum-member.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"enum-member.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/enum-member.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,SAAS,EAAE,MAAM,kBAAkB,CAAC;AAC7C,OAAO,EAAE,oBAAoB,EAAiB,MAAM,aAAa,CAAC;AAwDlE,SAAS,CAAmB;IAC1B,UAAU,EAAE;QACV,MAAM,CAAC,IAAI;YACT,MAAM,MAAM,GAAe,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC;gBACzD,IAAI,EAAE,YAAY;gBAClB,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,KAAK,EAAE,IAAI,CAAC,KAAK;gBACjB,UAAU,EAAE,oBAAoB,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC;gBACvD,IAAI,EAAE,SAAgB;gBACtB,IAAI,EAAE,IAAI,CAAC,IAAW,EAAE,iDAAiD;aAC1E,CAAC,CAAC;YACH,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;YACxC,OAAO,MAAM,CAAC;QAChB,CAAC;QAED,EAAE,CAAC,IAAI;YACL,OAAO,IAAI,CAAC,IAAI,KAAK,YAAY,CAAC;QACpC,CAAC;KACF;CACF,CAAC,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/enum.d.ts b/dist/src/experimental/typekit/kits/enum.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..6b38c389066bc736ea2df7f6bf91ccd68d7b2496
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/enum.d.ts
@@ -0,0 +1,54 @@
+import type { Enum, EnumMember, Type, Union } from "../../../core/types.js";
+import { DecoratorArgs } from "../utils.js";
+/**
+ * Describes an enum type for creation.
+ * @experimental
+ */
+interface EnumDescriptor {
+    /**
+     * The name of the enum declaration.
+     */
+    name: string;
+    /**
+     * Decorators to apply to the enum.
+     */
+    decorators?: DecoratorArgs[];
+    /**
+     * The members of the enum. If a member is an object, each property will be
+     * converted to an EnumMember with the same name and value.
+     */
+    members?: Record<string, string | number> | EnumMember[];
+}
+/**
+ * A kit for working with enum types.
+ * @experimental
+ */
+export interface EnumKit {
+    /**
+     * Build an enum type. The enum type will be finished (i.e. decorators are
+     * run).
+     */
+    create(desc: EnumDescriptor): Enum;
+    /**
+     * Build an equivalent enum from the given union. Union variants which are
+     * not valid enum members are skipped. You can check if a union is a valid
+     * enum with {@link UnionKit.union}'s `isEnumValue`.
+     */
+    createFromUnion(type: Union): Enum;
+    /**
+     * Check if `type` is an enum type.
+     *
+     * @param type the type to check.
+     */
+    is(type: Type): type is Enum;
+}
+interface TypekitExtension {
+    /** @experimental */
+    enum: EnumKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=enum.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/enum.d.ts.map b/dist/src/experimental/typekit/kits/enum.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..9abb4a60e78877820f433e0f7f61b32a37bbe14f
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/enum.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"enum.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/enum.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,wBAAwB,CAAC;AAM5E,OAAO,EAAwB,aAAa,EAAE,MAAM,aAAa,CAAC;AAElE;;;GAGG;AACH,UAAU,cAAc;IACtB;;OAEG;IACH,IAAI,EAAE,MAAM,CAAC;IAEb;;OAEG;IACH,UAAU,CAAC,EAAE,aAAa,EAAE,CAAC;IAE7B;;;OAGG;IACH,OAAO,CAAC,EAAE,MAAM,CAAC,MAAM,EAAE,MAAM,GAAG,MAAM,CAAC,GAAG,UAAU,EAAE,CAAC;CAC1D;AAED;;;GAGG;AACH,MAAM,WAAW,OAAO;IACtB;;;OAGG;IACH,MAAM,CAAC,IAAI,EAAE,cAAc,GAAG,IAAI,CAAC;IAEnC;;;;OAIG;IACH,eAAe,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI,CAAC;IAEnC;;;;OAIG;IACH,EAAE,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,IAAI,IAAI,CAAC;CAC9B;AAED,UAAU,gBAAgB;IACxB,oBAAoB;IACpB,IAAI,EAAE,OAAO,CAAC;CACf;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/enum.js b/dist/src/experimental/typekit/kits/enum.js
new file mode 100644
index 0000000000000000000000000000000000000000..fa22332bf8e8e9962e002b21e1abf736f184a9a3
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/enum.js
@@ -0,0 +1,47 @@
+import { createRekeyableMap } from "../../../utils/misc.js";
+import { defineKit } from "../define-kit.js";
+import { decoratorApplication } from "../utils.js";
+defineKit({
+    enum: {
+        create(desc) {
+            const en = this.program.checker.createType({
+                kind: "Enum",
+                name: desc.name,
+                decorators: decoratorApplication(this, desc.decorators),
+                members: createRekeyableMap(),
+                node: undefined,
+            });
+            if (Array.isArray(desc.members)) {
+                for (const member of desc.members) {
+                    member.enum = en;
+                    en.members.set(member.name, member);
+                }
+            }
+            else {
+                for (const [name, member] of Object.entries(desc.members ?? {})) {
+                    en.members.set(name, this.enumMember.create({ name, value: member, enum: en }));
+                }
+            }
+            this.program.checker.finishType(en);
+            return en;
+        },
+        is(type) {
+            return type.kind === "Enum";
+        },
+        createFromUnion(type) {
+            if (!type.name) {
+                throw new Error("Cannot create an enum from an anonymous union.");
+            }
+            const enumMembers = [];
+            for (const variant of type.variants.values()) {
+                if ((variant.name && typeof variant.name === "symbol") ||
+                    (!this.literal.isString(variant.type) && !this.literal.isNumeric(variant.type))) {
+                    continue;
+                }
+                enumMembers.push(this.enumMember.create({ name: variant.name, value: variant.type.value }));
+            }
+            return this.enum.create({ name: type.name, members: enumMembers });
+        },
+    },
+});
+//# sourceMappingURL=enum.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/enum.js.map b/dist/src/experimental/typekit/kits/enum.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..b99d0939c78a2e170acf1ff7527b6608ac6ab475
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/enum.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"enum.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/enum.ts"],"names":[],"mappings":"AAIA,OAAO,EAAE,kBAAkB,EAAE,MAAM,wBAAwB,CAAC;AAC5D,OAAO,EAAE,SAAS,EAAE,MAAM,kBAAkB,CAAC;AAC7C,OAAO,EAAE,oBAAoB,EAAiB,MAAM,aAAa,CAAC;AA2DlE,SAAS,CAAmB;IAC1B,IAAI,EAAE;QACJ,MAAM,CAAC,IAAI;YACT,MAAM,EAAE,GAAS,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC;gBAC/C,IAAI,EAAE,MAAM;gBACZ,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,UAAU,EAAE,oBAAoB,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC;gBACvD,OAAO,EAAE,kBAAkB,EAAE;gBAC7B,IAAI,EAAE,SAAgB;aACvB,CAAC,CAAC;YAEH,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC;gBAChC,KAAK,MAAM,MAAM,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC;oBAClC,MAAM,CAAC,IAAI,GAAG,EAAE,CAAC;oBACjB,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;gBACtC,CAAC;YACH,CAAC;iBAAM,CAAC;gBACN,KAAK,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,IAAI,EAAE,CAAC,EAAE,CAAC;oBAChE,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;gBAClF,CAAC;YACH,CAAC;YAED,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;YACpC,OAAO,EAAE,CAAC;QACZ,CAAC;QAED,EAAE,CAAC,IAAI;YACL,OAAO,IAAI,CAAC,IAAI,KAAK,MAAM,CAAC;QAC9B,CAAC;QAED,eAAe,CAAC,IAAI;YAClB,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;gBACf,MAAM,IAAI,KAAK,CAAC,gDAAgD,CAAC,CAAC;YACpE,CAAC;YAED,MAAM,WAAW,GAAiB,EAAE,CAAC;YACrC,KAAK,MAAM,OAAO,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,EAAE,CAAC;gBAC7C,IACE,CAAC,OAAO,CAAC,IAAI,IAAI,OAAO,OAAO,CAAC,IAAI,KAAK,QAAQ,CAAC;oBAClD,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,EAC/E,CAAC;oBACD,SAAS;gBACX,CAAC;gBACD,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,EAAE,KAAK,EAAE,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YAC9F,CAAC;YAED,OAAO,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,OAAO,EAAE,WAAW,EAAE,CAAC,CAAC;QACrE,CAAC;KACF;CACF,CAAC,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/index.d.ts b/dist/src/experimental/typekit/kits/index.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..be67f3513a336d8ffbe779716cd4a029126bb764
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/index.d.ts
@@ -0,0 +1,15 @@
+export * from "./array.js";
+export * from "./builtin.js";
+export * from "./enum-member.js";
+export * from "./enum.js";
+export * from "./literal.js";
+export * from "./model-property.js";
+export * from "./model.js";
+export * from "./operation.js";
+export * from "./record.js";
+export * from "./scalar.js";
+export * from "./type.js";
+export * from "./union-variant.js";
+export * from "./union.js";
+export * from "./value.js";
+//# sourceMappingURL=index.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/index.d.ts.map b/dist/src/experimental/typekit/kits/index.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..4439e526ac841b20646ab9c8ca0d7d7fc483bb9b
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/index.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/index.ts"],"names":[],"mappings":"AAAA,cAAc,YAAY,CAAC;AAC3B,cAAc,cAAc,CAAC;AAC7B,cAAc,kBAAkB,CAAC;AACjC,cAAc,WAAW,CAAC;AAC1B,cAAc,cAAc,CAAC;AAC7B,cAAc,qBAAqB,CAAC;AACpC,cAAc,YAAY,CAAC;AAC3B,cAAc,gBAAgB,CAAC;AAC/B,cAAc,aAAa,CAAC;AAC5B,cAAc,aAAa,CAAC;AAC5B,cAAc,WAAW,CAAC;AAC1B,cAAc,oBAAoB,CAAC;AACnC,cAAc,YAAY,CAAC;AAC3B,cAAc,YAAY,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/index.js b/dist/src/experimental/typekit/kits/index.js
new file mode 100644
index 0000000000000000000000000000000000000000..7b57fc035454670416fdcb69fe5db4b2c757b2cc
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/index.js
@@ -0,0 +1,15 @@
+export * from "./array.js";
+export * from "./builtin.js";
+export * from "./enum-member.js";
+export * from "./enum.js";
+export * from "./literal.js";
+export * from "./model-property.js";
+export * from "./model.js";
+export * from "./operation.js";
+export * from "./record.js";
+export * from "./scalar.js";
+export * from "./type.js";
+export * from "./union-variant.js";
+export * from "./union.js";
+export * from "./value.js";
+//# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/index.js.map b/dist/src/experimental/typekit/kits/index.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..496cc301eaf6c4556fb3557f79a7f797bf77c836
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/index.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/index.ts"],"names":[],"mappings":"AAAA,cAAc,YAAY,CAAC;AAC3B,cAAc,cAAc,CAAC;AAC7B,cAAc,kBAAkB,CAAC;AACjC,cAAc,WAAW,CAAC;AAC1B,cAAc,cAAc,CAAC;AAC7B,cAAc,qBAAqB,CAAC;AACpC,cAAc,YAAY,CAAC;AAC3B,cAAc,gBAAgB,CAAC;AAC/B,cAAc,aAAa,CAAC;AAC5B,cAAc,aAAa,CAAC;AAC5B,cAAc,WAAW,CAAC;AAC1B,cAAc,oBAAoB,CAAC;AACnC,cAAc,YAAY,CAAC;AAC3B,cAAc,YAAY,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/literal.d.ts b/dist/src/experimental/typekit/kits/literal.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..91e8d832795a7bb14738e9d6a8f3a2ce5a1e2df9
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/literal.d.ts
@@ -0,0 +1,69 @@
+import type { BooleanLiteral, NumericLiteral, StringLiteral, Type } from "../../../core/types.js";
+/** @experimental */
+export interface LiteralKit {
+    /**
+     * Create a literal type from a JavaScript value.
+     *
+     * @param value The JavaScript value to turn into a TypeSpec literal type.
+     */
+    create(value: string | number | boolean): StringLiteral | NumericLiteral | BooleanLiteral;
+    /**
+     * Create a string literal type from a JavaScript string value.
+     *
+     * @param value The string value.
+     */
+    createString(value: string): StringLiteral;
+    /**
+     * Create a numeric literal type from a JavaScript number value.
+     *
+     * @param value The numeric value.
+     */
+    createNumeric(value: number): NumericLiteral;
+    /**
+     * Create a boolean literal type from a JavaScript boolean value.
+     *
+     * @param value The boolean value.
+     */
+    createBoolean(value: boolean): BooleanLiteral;
+    /**
+     * Check if `type` is a literal type.
+     *
+     * @param type The type to check.
+     */
+    is(type: Type): type is StringLiteral | NumericLiteral | BooleanLiteral;
+    /**
+     * Check if `type` is a string literal type.
+     *
+     * @param type The type to check.
+     */
+    isString(type: Type): type is StringLiteral;
+    /**
+     * Check if `type` is a numeric literal type.
+     *
+     * @param type The type to check.
+     */
+    isNumeric(type: Type): type is NumericLiteral;
+    /**
+     * Check if `type` is a boolean literal type.
+     *
+     * @param type The type to check.
+     */
+    isBoolean(type: Type): type is BooleanLiteral;
+}
+interface TypekitExtension {
+    /**
+     * Utilities for working with literal types.
+     *
+     * Literal types are types that represent a single value, such as a string,
+     * number, or boolean.
+     *
+     * @experimental
+     */
+    literal: LiteralKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=literal.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/literal.d.ts.map b/dist/src/experimental/typekit/kits/literal.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..489516e7e40b844429177a124a0e5bc3198a68d4
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/literal.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"literal.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/literal.ts"],"names":[],"mappings":"AACA,OAAO,KAAK,EAAE,cAAc,EAAE,cAAc,EAAE,aAAa,EAAE,IAAI,EAAE,MAAM,wBAAwB,CAAC;AAGlG,oBAAoB;AACpB,MAAM,WAAW,UAAU;IACzB;;;;OAIG;IACH,MAAM,CAAC,KAAK,EAAE,MAAM,GAAG,MAAM,GAAG,OAAO,GAAG,aAAa,GAAG,cAAc,GAAG,cAAc,CAAC;IAE1F;;;;OAIG;IACH,YAAY,CAAC,KAAK,EAAE,MAAM,GAAG,aAAa,CAAC;IAE3C;;;;OAIG;IACH,aAAa,CAAC,KAAK,EAAE,MAAM,GAAG,cAAc,CAAC;IAE7C;;;;OAIG;IACH,aAAa,CAAC,KAAK,EAAE,OAAO,GAAG,cAAc,CAAC;IAE9C;;;;OAIG;IACH,EAAE,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,IAAI,aAAa,GAAG,cAAc,GAAG,cAAc,CAAC;IAExE;;;;OAIG;IACH,QAAQ,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,IAAI,aAAa,CAAC;IAE5C;;;;OAIG;IACH,SAAS,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,IAAI,cAAc,CAAC;IAE9C;;;;OAIG;IACH,SAAS,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,IAAI,cAAc,CAAC;CAC/C;AAED,UAAU,gBAAgB;IACxB;;;;;;;OAOG;IACH,OAAO,EAAE,UAAU,CAAC;CACrB;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/literal.js b/dist/src/experimental/typekit/kits/literal.js
new file mode 100644
index 0000000000000000000000000000000000000000..9634061df2dbe2a396087ffde4af68a8664b516e
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/literal.js
@@ -0,0 +1,51 @@
+import { Numeric } from "../../../core/numeric.js";
+import { defineKit } from "../define-kit.js";
+defineKit({
+    literal: {
+        create(value) {
+            if (typeof value === "string") {
+                return this.literal.createString(value);
+            }
+            else if (typeof value === "number") {
+                return this.literal.createNumeric(value);
+            }
+            else {
+                return this.literal.createBoolean(value);
+            }
+        },
+        createString(value) {
+            return this.program.checker.createType({
+                kind: "String",
+                value,
+            });
+        },
+        createNumeric(value) {
+            const valueAsString = String(value);
+            return this.program.checker.createType({
+                kind: "Number",
+                value,
+                valueAsString,
+                numericValue: Numeric(valueAsString),
+            });
+        },
+        createBoolean(value) {
+            return this.program.checker.createType({
+                kind: "Boolean",
+                value,
+            });
+        },
+        isBoolean(type) {
+            return type.kind === "Boolean";
+        },
+        isString(type) {
+            return type.kind === "String";
+        },
+        isNumeric(type) {
+            return type.kind === "Number";
+        },
+        is(type) {
+            return (this.literal.isBoolean(type) || this.literal.isNumeric(type) || this.literal.isString(type));
+        },
+    },
+});
+//# sourceMappingURL=literal.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/literal.js.map b/dist/src/experimental/typekit/kits/literal.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..47a3c4f7f0d87a54b726d249ba11a3d443d8717c
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/literal.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"literal.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/literal.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,OAAO,EAAE,MAAM,0BAA0B,CAAC;AAEnD,OAAO,EAAE,SAAS,EAAE,MAAM,kBAAkB,CAAC;AA6E7C,SAAS,CAAmB;IAC1B,OAAO,EAAE;QACP,MAAM,CAAC,KAAK;YACV,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE,CAAC;gBAC9B,OAAO,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;YAC1C,CAAC;iBAAM,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE,CAAC;gBACrC,OAAO,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAC3C,CAAC;iBAAM,CAAC;gBACN,OAAO,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAC3C,CAAC;QACH,CAAC;QACD,YAAY,CAAC,KAAK;YAChB,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC;gBACrC,IAAI,EAAE,QAAQ;gBACd,KAAK;aACN,CAAC,CAAC;QACL,CAAC;QAED,aAAa,CAAC,KAAK;YACjB,MAAM,aAAa,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;YAEpC,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC;gBACrC,IAAI,EAAE,QAAQ;gBACd,KAAK;gBACL,aAAa;gBACb,YAAY,EAAE,OAAO,CAAC,aAAa,CAAC;aACrC,CAAC,CAAC;QACL,CAAC;QAED,aAAa,CAAC,KAAK;YACjB,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC;gBACrC,IAAI,EAAE,SAAS;gBACf,KAAK;aACN,CAAC,CAAC;QACL,CAAC;QAED,SAAS,CAAC,IAAI;YACZ,OAAO,IAAI,CAAC,IAAI,KAAK,SAAS,CAAC;QACjC,CAAC;QACD,QAAQ,CAAC,IAAI;YACX,OAAO,IAAI,CAAC,IAAI,KAAK,QAAQ,CAAC;QAChC,CAAC;QACD,SAAS,CAAC,IAAI;YACZ,OAAO,IAAI,CAAC,IAAI,KAAK,QAAQ,CAAC;QAChC,CAAC;QACD,EAAE,CAAC,IAAI;YACL,OAAO,CACL,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAC5F,CAAC;QACJ,CAAC;KACF;CACF,CAAC,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/model-property.d.ts b/dist/src/experimental/typekit/kits/model-property.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..f304b0147478505fa6da4004051cbe2de6cba5f6
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/model-property.d.ts
@@ -0,0 +1,82 @@
+import type { Enum, EnumMember, ModelProperty, Type, Value } from "../../../core/types.js";
+import { EncodeData } from "../../../lib/decorators.js";
+/**
+ * A descriptor for a model property.
+ * @experimental
+ */
+export interface ModelPropertyDescriptor {
+    /**
+     * The name of the model property.
+     */
+    name: string;
+    /**
+     * The type of the model property.
+     */
+    type: Type;
+    /**
+     * Whether the model property is optional.
+     */
+    optional?: boolean;
+    /**
+     * Default value
+     */
+    defaultValue?: Value | undefined;
+}
+/**
+ * Utilities for working with model properties.
+ *
+ * For many reflection operations, the metadata being asked for may be found
+ * on the model property or the type of the model property. In such cases,
+ * these operations will return the metadata from the model property if it
+ * exists, or the type of the model property if it exists.
+ * @experimental
+ */
+export interface ModelPropertyKit {
+    /**
+     * Creates a modelProperty type.
+     * @param desc The descriptor of the model property.
+     */
+    create(desc: ModelPropertyDescriptor): ModelProperty;
+    /**
+     * Check if the given `type` is a model property.
+     *
+     * @param type The type to check.
+     */
+    is(type: Type): type is ModelProperty;
+    /**
+     * Get the encoding of the model property or its type. The property's type
+     * must be a scalar.
+     *
+     * @param property The model property to get the encoding for.
+     */
+    getEncoding(property: ModelProperty): EncodeData | undefined;
+    /**
+     * Get the format of the model property or its type. The property's type must
+     * be a string.
+     *
+     * @param property The model property to get the format for.
+     */
+    getFormat(property: ModelProperty): string | undefined;
+    /**
+     * Get the visibility of the model property.
+     */
+    getVisibilityForClass(property: ModelProperty, visibilityClass: Enum): Set<EnumMember>;
+}
+interface TypekitExtension {
+    /**
+     * Utilities for working with model properties.
+     *
+     * For many reflection operations, the metadata being asked for may be found
+     * on the model property or the type of the model property. In such cases,
+     * these operations will return the metadata from the model property if it
+     * exists, or the type of the model property if it exists.
+     * @experimental
+     */
+    modelProperty: ModelPropertyKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=model-property.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/model-property.d.ts.map b/dist/src/experimental/typekit/kits/model-property.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..5d56dab2694cfb4abbd84a99faa956e1600e2137
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/model-property.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"model-property.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/model-property.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,IAAI,EAAE,UAAU,EAAE,aAAa,EAAU,IAAI,EAAE,KAAK,EAAE,MAAM,wBAAwB,CAAC;AAEnG,OAAO,EAAE,UAAU,EAAwB,MAAM,4BAA4B,CAAC;AAG9E;;;GAGG;AACH,MAAM,WAAW,uBAAuB;IACtC;;OAEG;IACH,IAAI,EAAE,MAAM,CAAC;IAEb;;OAEG;IACH,IAAI,EAAE,IAAI,CAAC;IAEX;;OAEG;IACH,QAAQ,CAAC,EAAE,OAAO,CAAC;IAEnB;;OAEG;IACH,YAAY,CAAC,EAAE,KAAK,GAAG,SAAS,CAAC;CAClC;AAED;;;;;;;;GAQG;AACH,MAAM,WAAW,gBAAgB;IAC/B;;;OAGG;IACH,MAAM,CAAC,IAAI,EAAE,uBAAuB,GAAG,aAAa,CAAC;IACrD;;;;OAIG;IACH,EAAE,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,IAAI,aAAa,CAAC;IAEtC;;;;;OAKG;IACH,WAAW,CAAC,QAAQ,EAAE,aAAa,GAAG,UAAU,GAAG,SAAS,CAAC;IAE7D;;;;;OAKG;IACH,SAAS,CAAC,QAAQ,EAAE,aAAa,GAAG,MAAM,GAAG,SAAS,CAAC;IAEvD;;OAEG;IACH,qBAAqB,CAAC,QAAQ,EAAE,aAAa,EAAE,eAAe,EAAE,IAAI,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC;CACxF;AAED,UAAU,gBAAgB;IACxB;;;;;;;;OAQG;IACH,aAAa,EAAE,gBAAgB,CAAC;CACjC;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/model-property.js b/dist/src/experimental/typekit/kits/model-property.js
new file mode 100644
index 0000000000000000000000000000000000000000..2365ec407642e9c672668769bd14f779eabe7f75
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/model-property.js
@@ -0,0 +1,31 @@
+import { getVisibilityForClass } from "../../../core/visibility/core.js";
+import { getEncode, getFormat } from "../../../lib/decorators.js";
+import { defineKit } from "../define-kit.js";
+defineKit({
+    modelProperty: {
+        is(type) {
+            return type.kind === "ModelProperty";
+        },
+        getEncoding(type) {
+            return getEncode(this.program, type) ?? getEncode(this.program, type.type);
+        },
+        getFormat(type) {
+            return getFormat(this.program, type) ?? getFormat(this.program, type.type);
+        },
+        getVisibilityForClass(property, visibilityClass) {
+            return getVisibilityForClass(this.program, property, visibilityClass);
+        },
+        create(desc) {
+            return this.program.checker.createType({
+                kind: "ModelProperty",
+                name: desc.name,
+                node: undefined,
+                type: desc.type,
+                optional: desc.optional ?? false,
+                decorators: [],
+                defaultValue: desc.defaultValue,
+            });
+        },
+    },
+});
+//# sourceMappingURL=model-property.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/model-property.js.map b/dist/src/experimental/typekit/kits/model-property.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..4175d8eeca92173d43c737523e9d88bb644a1ef0
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/model-property.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"model-property.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/model-property.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,qBAAqB,EAAE,MAAM,kCAAkC,CAAC;AACzE,OAAO,EAAc,SAAS,EAAE,SAAS,EAAE,MAAM,4BAA4B,CAAC;AAC9E,OAAO,EAAE,SAAS,EAAE,MAAM,kBAAkB,CAAC;AAyF7C,SAAS,CAAmB;IAC1B,aAAa,EAAE;QACb,EAAE,CAAC,IAAI;YACL,OAAO,IAAI,CAAC,IAAI,KAAK,eAAe,CAAC;QACvC,CAAC;QAED,WAAW,CAAC,IAAI;YACd,OAAO,SAAS,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,SAAS,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,IAAc,CAAC,CAAC;QACvF,CAAC;QAED,SAAS,CAAC,IAAI;YACZ,OAAO,SAAS,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,SAAS,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,IAAc,CAAC,CAAC;QACvF,CAAC;QAED,qBAAqB,CAAC,QAAQ,EAAE,eAAe;YAC7C,OAAO,qBAAqB,CAAC,IAAI,CAAC,OAAO,EAAE,QAAQ,EAAE,eAAe,CAAC,CAAC;QACxE,CAAC;QACD,MAAM,CAAC,IAAI;YACT,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC;gBACrC,IAAI,EAAE,eAAe;gBACrB,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,IAAI,EAAE,SAAgB;gBACtB,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,QAAQ,EAAE,IAAI,CAAC,QAAQ,IAAI,KAAK;gBAChC,UAAU,EAAE,EAAE;gBACd,YAAY,EAAE,IAAI,CAAC,YAAY;aAChC,CAAC,CAAC;QACL,CAAC;KACF;CACF,CAAC,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/model.d.ts b/dist/src/experimental/typekit/kits/model.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..4bb00ec255f185a3373d377288c0bd5131913744
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/model.d.ts
@@ -0,0 +1,117 @@
+import { DiscriminatedUnionLegacy } from "../../../core/helpers/discriminator-utils.js";
+import type { Model, ModelIndexer, ModelProperty, RekeyableMap, SourceModel, Type } from "../../../core/types.js";
+import { DecoratorArgs } from "../utils.js";
+/**
+ * A descriptor for creating a model.
+ * @experimental
+ */
+export interface ModelDescriptor {
+    /**
+     * The name of the Model. If name is provided, it is a Model  declaration.
+     * Otherwise, it is a Model expression.
+     */
+    name?: string;
+    /**
+     * Decorators to apply to the Model.
+     */
+    decorators?: DecoratorArgs[];
+    /**
+     * Properties of the model.
+     */
+    properties: Record<string, ModelProperty>;
+    /**
+     * Models that extend this model.
+     */
+    derivedModels?: Model[];
+    /**
+     * Models that this model extends.
+     */
+    sourceModels?: SourceModel[];
+    /**
+     * The indexer property of the model.
+     */
+    indexer?: ModelIndexer;
+}
+/**
+ * Utilities for working with models.
+ * @experimental
+ */
+export interface ModelKit {
+    /**
+     * Create a model type.
+     *
+     * @param desc The descriptor of the model.
+     */
+    create(desc: ModelDescriptor): Model;
+    /**
+     * Check if the given `type` is a model..
+     *
+     * @param type The type to check.
+     */
+    is(type: Type): type is Model;
+    /**
+     * Check this is an anonyous model. Specifically, this checks if the
+     * model has a name.
+     *
+     * @param type The model to check.
+     */
+    isExpresion(type: Model): boolean;
+    /**
+     * If the input is anonymous (or the provided filter removes properties)
+     * and there exists a named model with the same set of properties
+     * (ignoring filtered properties), then return that named model.
+     * Otherwise, return the input unchanged.
+     *
+     * This can be used by emitters to find a better name for a set of
+     * properties after filtering. For example, given `{ @metadata prop:
+     * string} & SomeName`, and an emitter that wishes to discard properties
+     * marked with `@metadata`, the emitter can use this to recover that the
+     * best name for the remaining properties is `SomeName`.
+     *
+     * @param model The input model
+     * @param filter An optional filter to apply to the input model's
+     * properties.
+     */
+    getEffectiveModel(model: Model, filter?: (property: ModelProperty) => boolean): Model;
+    /**
+     * Given a model, return the type that is spread
+     * @returns the type that is spread or undefined if no spread
+     */
+    getSpreadType: (model: Model) => Type | undefined;
+    /**
+     * Gets all properties from a model, explicitly defined and implicitly defined.
+     * @param model model to get the properties from
+     */
+    getProperties(model: Model, options?: {
+        includeExtended?: boolean;
+    }): RekeyableMap<string, ModelProperty>;
+    /**
+     * Get the record representing additional properties, if there are additional properties.
+     * This method checks for additional properties in the following cases:
+     * 1. If the model is a Record type.
+     * 2. If the model extends a Record type.
+     * 3. If the model spreads a Record type.
+     *
+     * @param model The model to get the additional properties type of.
+     * @returns The record representing additional properties, or undefined if there are none.
+     */
+    getAdditionalPropertiesRecord(model: Model): Model | undefined;
+    /**
+     * Resolves a discriminated union for the given model from inheritance.
+     * @param type Model to resolve the discriminated union for.
+     */
+    getDiscriminatedUnion(model: Model): DiscriminatedUnionLegacy | undefined;
+}
+interface TypekitExtension {
+    /**
+     * Utilities for working with models.
+     * @experimental
+     */
+    model: ModelKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=model.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/model.d.ts.map b/dist/src/experimental/typekit/kits/model.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..962ca13a9b5eb644cdaa94cb1601aa7ec88591b1
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/model.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"model.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/model.ts"],"names":[],"mappings":"AAEA,OAAO,EACL,wBAAwB,EAEzB,MAAM,8CAA8C,CAAC;AAEtD,OAAO,KAAK,EACV,KAAK,EACL,YAAY,EACZ,aAAa,EACb,YAAY,EACZ,WAAW,EACX,IAAI,EACL,MAAM,wBAAwB,CAAC;AAGhC,OAAO,EAAiC,aAAa,EAAE,MAAM,aAAa,CAAC;AAE3E;;;GAGG;AACH,MAAM,WAAW,eAAe;IAC9B;;;OAGG;IACH,IAAI,CAAC,EAAE,MAAM,CAAC;IAEd;;OAEG;IACH,UAAU,CAAC,EAAE,aAAa,EAAE,CAAC;IAE7B;;OAEG;IACH,UAAU,EAAE,MAAM,CAAC,MAAM,EAAE,aAAa,CAAC,CAAC;IAE1C;;OAEG;IACH,aAAa,CAAC,EAAE,KAAK,EAAE,CAAC;IAExB;;OAEG;IACH,YAAY,CAAC,EAAE,WAAW,EAAE,CAAC;IAC7B;;OAEG;IACH,OAAO,CAAC,EAAE,YAAY,CAAC;CACxB;AAED;;;GAGG;AACH,MAAM,WAAW,QAAQ;IACvB;;;;OAIG;IACH,MAAM,CAAC,IAAI,EAAE,eAAe,GAAG,KAAK,CAAC;IAErC;;;;OAIG;IACH,EAAE,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,IAAI,KAAK,CAAC;IAE9B;;;;;OAKG;IACH,WAAW,CAAC,IAAI,EAAE,KAAK,GAAG,OAAO,CAAC;IAElC;;;;;;;;;;;;;;;OAeG;IACH,iBAAiB,CAAC,KAAK,EAAE,KAAK,EAAE,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,aAAa,KAAK,OAAO,GAAG,KAAK,CAAC;IAEtF;;;OAGG;IACH,aAAa,EAAE,CAAC,KAAK,EAAE,KAAK,KAAK,IAAI,GAAG,SAAS,CAAC;IAClD;;;OAGG;IACH,aAAa,CACX,KAAK,EAAE,KAAK,EACZ,OAAO,CAAC,EAAE;QAAE,eAAe,CAAC,EAAE,OAAO,CAAA;KAAE,GACtC,YAAY,CAAC,MAAM,EAAE,aAAa,CAAC,CAAC;IACvC;;;;;;;;;OASG;IACH,6BAA6B,CAAC,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG,SAAS,CAAC;IAC/D;;;OAGG;IACH,qBAAqB,CAAC,KAAK,EAAE,KAAK,GAAG,wBAAwB,GAAG,SAAS,CAAC;CAC3E;AAED,UAAU,gBAAgB;IACxB;;;OAGG;IACH,KAAK,EAAE,QAAQ,CAAC;CACjB;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/model.js b/dist/src/experimental/typekit/kits/model.js
new file mode 100644
index 0000000000000000000000000000000000000000..ad9604a6694570b3bb8864e4f5f2edcb6a930e42
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/model.js
@@ -0,0 +1,105 @@
+import { getEffectiveModelType } from "../../../core/checker.js";
+import { ignoreDiagnostics } from "../../../core/diagnostics.js";
+import { getDiscriminatedUnionFromInheritance, } from "../../../core/helpers/discriminator-utils.js";
+import { getDiscriminator } from "../../../core/intrinsic-type-state.js";
+import { createRekeyableMap } from "../../../utils/misc.js";
+import { defineKit } from "../define-kit.js";
+import { copyMap, decoratorApplication } from "../utils.js";
+const spreadCache = new Map();
+defineKit({
+    model: {
+        create(desc) {
+            const properties = createRekeyableMap(Array.from(Object.entries(desc.properties)));
+            const model = this.program.checker.createType({
+                kind: "Model",
+                name: desc.name ?? "",
+                decorators: decoratorApplication(this, desc.decorators),
+                properties: properties,
+                node: undefined,
+                derivedModels: desc.derivedModels ?? [],
+                sourceModels: desc.sourceModels ?? [],
+                indexer: desc.indexer,
+            });
+            this.program.checker.finishType(model);
+            return model;
+        },
+        is(type) {
+            return type.kind === "Model";
+        },
+        isExpresion(type) {
+            return type.name === "";
+        },
+        getEffectiveModel(model, filter) {
+            return getEffectiveModelType(this.program, model, filter);
+        },
+        getSpreadType(model) {
+            if (spreadCache.has(model)) {
+                return spreadCache.get(model);
+            }
+            if (!model.indexer) {
+                return undefined;
+            }
+            if (model.indexer.key.name === "string") {
+                const record = this.record.create(model.indexer.value);
+                spreadCache.set(model, record);
+                return record;
+            }
+            if (model.indexer.key.name === "integer") {
+                const array = this.array.create(model.indexer.value);
+                spreadCache.set(model, array);
+                return array;
+            }
+            return model.indexer.value;
+        },
+        getProperties(model, options = {}) {
+            // Add explicitly defined properties
+            const properties = copyMap(model.properties);
+            // Add discriminator property if it exists
+            const discriminator = this.type.getDiscriminator(model);
+            if (discriminator) {
+                const discriminatorName = discriminator.propertyName;
+                properties.set(discriminatorName, this.modelProperty.create({ name: discriminatorName, type: this.builtin.string }));
+            }
+            if (options.includeExtended) {
+                let base = model.baseModel;
+                while (base) {
+                    for (const [key, value] of base.properties) {
+                        if (!properties.has(key)) {
+                            properties.set(key, value);
+                        }
+                    }
+                    base = base.baseModel;
+                }
+            }
+            // TODO: Add Spread?
+            return properties;
+        },
+        getAdditionalPropertiesRecord(model) {
+            // model MyModel is Record<> {} should be model with additional properties
+            if (this.model.is(model) && model.sourceModel && this.record.is(model.sourceModel)) {
+                return model.sourceModel;
+            }
+            // model MyModel extends Record<> {} should be model with additional properties
+            if (model.baseModel && this.record.is(model.baseModel)) {
+                return model.baseModel;
+            }
+            // model MyModel { ...Record<>} should be model with additional properties
+            const spread = this.model.getSpreadType(model);
+            if (spread && this.model.is(spread) && this.record.is(spread)) {
+                return spread;
+            }
+            if (model.baseModel) {
+                return this.model.getAdditionalPropertiesRecord(model.baseModel);
+            }
+            return undefined;
+        },
+        getDiscriminatedUnion(model) {
+            const discriminator = getDiscriminator(this.program, model);
+            if (!discriminator) {
+                return undefined;
+            }
+            return ignoreDiagnostics(getDiscriminatedUnionFromInheritance(model, discriminator));
+        },
+    },
+});
+//# sourceMappingURL=model.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/model.js.map b/dist/src/experimental/typekit/kits/model.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..3f4c28b3436120a818d43a8de824a44383fc3e17
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/model.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"model.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/model.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/operation.d.ts b/dist/src/experimental/typekit/kits/operation.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..f61e9bfb518d23d0d68769b22258296f887a35ff
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/operation.d.ts
@@ -0,0 +1,49 @@
+import { ModelProperty, Operation, Type } from "../../../core/types.js";
+/**
+ * A descriptor for an operation.
+ * @experimental
+ */
+export interface OperationDescriptor {
+    /**
+     * The name of the model property.
+     */
+    name: string;
+    /**
+     * The parameters to the model
+     */
+    parameters: ModelProperty[];
+    /**
+     * The return type of the model
+     */
+    returnType: Type;
+}
+/**
+ * Utilities for working with operation properties.
+ * @experimental
+ */
+export interface OperationKit {
+    /**
+     * Create an operation type.
+     *
+     * @param desc The descriptor of the operation.
+     */
+    create(desc: OperationDescriptor): Operation;
+    /**
+     * Check if the type is an operation.
+     * @param type type to check
+     */
+    is(type: Type): type is Operation;
+}
+interface TypekitExtension {
+    /**
+     * Utilities for working with operation properties.
+     * @experimental
+     */
+    operation: OperationKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=operation.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/operation.d.ts.map b/dist/src/experimental/typekit/kits/operation.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..a0664d669a948116781aeed6e86da7fd4684ce1a
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/operation.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"operation.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/operation.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,aAAa,EAAE,SAAS,EAAE,IAAI,EAAE,MAAM,wBAAwB,CAAC;AAGxE;;;GAGG;AACH,MAAM,WAAW,mBAAmB;IAClC;;OAEG;IACH,IAAI,EAAE,MAAM,CAAC;IAEb;;OAEG;IACH,UAAU,EAAE,aAAa,EAAE,CAAC;IAE5B;;OAEG;IACH,UAAU,EAAE,IAAI,CAAC;CAClB;AAED;;;GAGG;AACH,MAAM,WAAW,YAAY;IAC3B;;;;OAIG;IACH,MAAM,CAAC,IAAI,EAAE,mBAAmB,GAAG,SAAS,CAAC;IAC7C;;;OAGG;IACH,EAAE,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,IAAI,SAAS,CAAC;CACnC;AAED,UAAU,gBAAgB;IACxB;;;OAGG;IACH,SAAS,EAAE,YAAY,CAAC;CACzB;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/operation.js b/dist/src/experimental/typekit/kits/operation.js
new file mode 100644
index 0000000000000000000000000000000000000000..542c8c3713ec51b320c095c4f7c120174b17ad0a
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/operation.js
@@ -0,0 +1,28 @@
+import { defineKit } from "../define-kit.js";
+defineKit({
+    operation: {
+        is(type) {
+            return type.kind === "Operation";
+        },
+        create(desc) {
+            const parametersModel = this.model.create({
+                name: `${desc.name}Parameters`,
+                properties: desc.parameters.reduce((acc, property) => {
+                    acc[property.name] = property;
+                    return acc;
+                }, {}),
+            });
+            const operation = this.program.checker.createType({
+                kind: "Operation",
+                name: desc.name,
+                decorators: [],
+                parameters: parametersModel,
+                returnType: desc.returnType,
+                node: undefined,
+            });
+            this.program.checker.finishType(operation);
+            return operation;
+        },
+    },
+});
+//# sourceMappingURL=operation.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/operation.js.map b/dist/src/experimental/typekit/kits/operation.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..efd855f19a160551bd015e91a4fc002e026d708a
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/operation.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"operation.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/operation.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,SAAS,EAAE,MAAM,kBAAkB,CAAC;AAqD7C,SAAS,CAAmB;IAC1B,SAAS,EAAE;QACT,EAAE,CAAC,IAAU;YACX,OAAO,IAAI,CAAC,IAAI,KAAK,WAAW,CAAC;QACnC,CAAC;QACD,MAAM,CAAC,IAAI;YACT,MAAM,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;gBACxC,IAAI,EAAE,GAAG,IAAI,CAAC,IAAI,YAAY;gBAC9B,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,MAAM,CAChC,CAAC,GAAG,EAAE,QAAQ,EAAE,EAAE;oBAChB,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,QAAQ,CAAC;oBAC9B,OAAO,GAAG,CAAC;gBACb,CAAC,EACD,EAAmC,CACpC;aACF,CAAC,CAAC;YACH,MAAM,SAAS,GAAc,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC;gBAC3D,IAAI,EAAE,WAAW;gBACjB,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,UAAU,EAAE,EAAE;gBACd,UAAU,EAAE,eAAe;gBAC3B,UAAU,EAAE,IAAI,CAAC,UAAU;gBAC3B,IAAI,EAAE,SAAgB;aACvB,CAAC,CAAC;YACH,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;YAC3C,OAAO,SAAS,CAAC;QACnB,CAAC;KACF;CACF,CAAC,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/realm.d.ts b/dist/src/experimental/typekit/kits/realm.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..4f73739b93726e288e0434e87cecde635fda6ef1
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/realm.d.ts
@@ -0,0 +1,24 @@
+import { Realm } from "../../realm.js";
+/** @experimental */
+export interface RealmKit {
+    /**
+     * Gets the current realm used by the typekit.
+     */
+    get(): Realm;
+    /**
+     * Sets the current realm to be used by the typekit.
+     */
+    set(realm: Realm): void;
+}
+interface BaseTypeKit {
+    /**
+     * Utilities for working with general types.
+     */
+    realm: RealmKit;
+}
+declare module "../define-kit.js" {
+    interface TypekitPrototype extends BaseTypeKit {
+    }
+}
+export {};
+//# sourceMappingURL=realm.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/realm.d.ts.map b/dist/src/experimental/typekit/kits/realm.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..82caeb2a71e6cb8156a3df9ef7cbeaa03189ca95
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/realm.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"realm.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/realm.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,KAAK,EAAE,MAAM,gBAAgB,CAAC;AAGvC,oBAAoB;AACpB,MAAM,WAAW,QAAQ;IACvB;;OAEG;IACH,GAAG,IAAI,KAAK,CAAC;IACb;;OAEG;IACH,GAAG,CAAC,KAAK,EAAE,KAAK,GAAG,IAAI,CAAC;CACzB;AAED,UAAU,WAAW;IACnB;;OAEG;IACH,KAAK,EAAE,QAAQ,CAAC;CACjB;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,gBAAiB,SAAQ,WAAW;KAAG;CAClD"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/realm.js b/dist/src/experimental/typekit/kits/realm.js
new file mode 100644
index 0000000000000000000000000000000000000000..e519a29b3414789ae027f2713d9d6bcaae17acc6
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/realm.js
@@ -0,0 +1,17 @@
+import { Realm } from "../../realm.js";
+import { defineKit } from "../define-kit.js";
+let _realm;
+defineKit({
+    realm: {
+        get() {
+            if (!_realm) {
+                _realm = new Realm(this.program, " typekit realm");
+            }
+            return _realm;
+        },
+        set(realm) {
+            _realm = realm;
+        },
+    },
+});
+//# sourceMappingURL=realm.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/realm.js.map b/dist/src/experimental/typekit/kits/realm.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..e82835c67752fc68074070df475e3cb84cb961e2
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/realm.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"realm.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/realm.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,KAAK,EAAE,MAAM,gBAAgB,CAAC;AACvC,OAAO,EAAE,SAAS,EAAE,MAAM,kBAAkB,CAAC;AAyB7C,IAAI,MAAa,CAAC;AAElB,SAAS,CAAc;IACrB,KAAK,EAAE;QACL,GAAG;YACD,IAAI,CAAC,MAAM,EAAE,CAAC;gBACZ,MAAM,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,gBAAgB,CAAC,CAAC;YACrD,CAAC;YAED,OAAO,MAAM,CAAC;QAChB,CAAC;QACD,GAAG,CAAC,KAAY;YACd,MAAM,GAAG,KAAK,CAAC;QACjB,CAAC;KACF;CACF,CAAC,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/record.d.ts b/dist/src/experimental/typekit/kits/record.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..63e84da5194684f59e8163be15f0db8eaa0d662f
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/record.d.ts
@@ -0,0 +1,33 @@
+import { Model, Type } from "../../../core/types.js";
+/**
+ * RecordKit provides utilities for working with Record Model types.
+ * @experimental
+ */
+export interface RecordKit {
+    /**
+     * Check if the given `type` is a Record.
+     *
+     * @param type The type to check.
+     */
+    is(type: Type): boolean;
+    /**
+     *  Get the element type of a Record
+     * @param type a Record Model type
+     */
+    getElementType(type: Model): Type;
+    /**
+     * Create a Record Model type
+     * @param elementType The type of the elements in the record
+     */
+    create(elementType: Type): Model;
+}
+interface TypekitExtension {
+    /** @experimental */
+    record: RecordKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=record.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/record.d.ts.map b/dist/src/experimental/typekit/kits/record.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..a574762897e7bb8719aa6a8080be0f663d8a6cac
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/record.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"record.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/record.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,wBAAwB,CAAC;AAGrD;;;GAGG;AACH,MAAM,WAAW,SAAS;IACxB;;;;OAIG;IACH,EAAE,CAAC,IAAI,EAAE,IAAI,GAAG,OAAO,CAAC;IACxB;;;OAGG;IACH,cAAc,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI,CAAC;IAClC;;;OAGG;IACH,MAAM,CAAC,WAAW,EAAE,IAAI,GAAG,KAAK,CAAC;CAClC;AAED,UAAU,gBAAgB;IACxB,oBAAoB;IACpB,MAAM,EAAE,SAAS,CAAC;CACnB;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/record.js b/dist/src/experimental/typekit/kits/record.js
new file mode 100644
index 0000000000000000000000000000000000000000..85a1f44d8a5ab4efe4ec977671a697a8fb74d7ef
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/record.js
@@ -0,0 +1,26 @@
+import { isRecordModelType } from "../../../core/type-utils.js";
+import { defineKit } from "../define-kit.js";
+defineKit({
+    record: {
+        is(type) {
+            return (type.kind === "Model" && isRecordModelType(this.program, type) && type.properties.size === 0);
+        },
+        getElementType(type) {
+            if (!this.record.is(type)) {
+                throw new Error("Type is not a record.");
+            }
+            return type.indexer.value;
+        },
+        create(elementType) {
+            return this.model.create({
+                name: "Record",
+                properties: {},
+                indexer: {
+                    key: this.builtin.string,
+                    value: elementType,
+                },
+            });
+        },
+    },
+});
+//# sourceMappingURL=record.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/record.js.map b/dist/src/experimental/typekit/kits/record.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..8f43b329c655a3f06ab59b34319a6fd601ceb2c8
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/record.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"record.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/record.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,iBAAiB,EAAE,MAAM,6BAA6B,CAAC;AAEhE,OAAO,EAAE,SAAS,EAAE,MAAM,kBAAkB,CAAC;AAkC7C,SAAS,CAAmB;IAC1B,MAAM,EAAE;QACN,EAAE,CAAC,IAAI;YACL,OAAO,CACL,IAAI,CAAC,IAAI,KAAK,OAAO,IAAI,iBAAiB,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,KAAK,CAAC,CAC7F,CAAC;QACJ,CAAC;QACD,cAAc,CAAC,IAAI;YACjB,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;gBAC1B,MAAM,IAAI,KAAK,CAAC,uBAAuB,CAAC,CAAC;YAC3C,CAAC;YACD,OAAO,IAAI,CAAC,OAAQ,CAAC,KAAK,CAAC;QAC7B,CAAC;QACD,MAAM,CAAC,WAAW;YAChB,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;gBACvB,IAAI,EAAE,QAAQ;gBACd,UAAU,EAAE,EAAE;gBACd,OAAO,EAAE;oBACP,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM;oBACxB,KAAK,EAAE,WAAW;iBACnB;aACF,CAAC,CAAC;QACL,CAAC;KACF;CACF,CAAC,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/scalar.d.ts b/dist/src/experimental/typekit/kits/scalar.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..a8d4e26d5354fc3b08405bbe59f43b0f921424e9
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/scalar.d.ts
@@ -0,0 +1,360 @@
+import type { Scalar, Type } from "../../../core/types.js";
+import { type EncodeData } from "../../../lib/decorators.js";
+/**
+ * Operations for scalar types like strings, numerics, booleans, dates, etc.
+ * @experimental
+ */
+export interface ScalarKit {
+    /**
+     * Check if `type` is any scalar type.
+     *
+     * @param type The type to check.
+     */
+    is(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard boolean type.
+     *
+     * @param type The type to check.
+     */
+    isBoolean(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard bytes type.
+     *
+     * @param type The type to check.
+     */
+    isBytes(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard decimal type.
+     *
+     * @param type The type to check.
+     */
+    isDecimal(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard decimal128 type.
+     *
+     * @param type The type to check.
+     */
+    isDecimal128(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard duration type.
+     *
+     * @param type The type to check.
+     */
+    isDuration(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard float type.
+     *
+     * @param type The type to check.
+     */
+    isFloat(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard float32 type.
+     *
+     * @param type The type to check.
+     */
+    isFloat32(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard float64 type.
+     *
+     * @param type The type to check.
+     */
+    isFloat64(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard int8 type.
+     *
+     * @param type The type to check.
+     */
+    isInt8(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard int16 type.
+     *
+     * @param type The type to check.
+     */
+    isInt16(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard int32 type.
+     *
+     * @param type The type to check.
+     */
+    isInt32(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard int64 type.
+     *
+     * @param type The type to check.
+     */
+    isInt64(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard integer type.
+     *
+     * @param type The type to check.
+     */
+    isInteger(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard offsetDateTime type.
+     *
+     * @param type The type to check.
+     */
+    isOffsetDateTime(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard plainDate type.
+     *
+     * @param type The type to check.
+     */
+    isPlainDate(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard plainTime type.
+     *
+     * @param type The type to check.
+     */
+    isPlainTime(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard safeint type.
+     *
+     * @param type The type to check.
+     */
+    isSafeint(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard uint8 type.
+     *
+     * @param type The type to check.
+     */
+    isUint8(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard uint16 type.
+     *
+     * @param type The type to check.
+     */
+    isUint16(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard uint32 type.
+     *
+     * @param type The type to check.
+     */
+    isUint32(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard uint64 type.
+     *
+     * @param type The type to check.
+     */
+    isUint64(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard url type.
+     *
+     * @param type The type to check.
+     */
+    isUrl(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard utcDateTime type.
+     *
+     * @param type The type to check.
+     */
+    isUtcDateTime(type: Type): type is Scalar;
+    /**
+     *
+     * @param type The type to check.
+     */
+    isNumeric(type: Type): type is Scalar;
+    /**
+     * Check if `type` is exactly the standard string type.
+     *
+     * @param type The type to check.
+     */
+    isString(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard boolean type.
+     *
+     * @param type The type to check.
+     */
+    extendsBoolean(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard string type.
+     *
+     * @param type The type to check.
+     */
+    extendsString(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard numeric type.
+     *
+     * @param type The type to check.
+     */
+    extendsNumeric(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard bytes type.
+     *
+     * @param type The type to check.
+     */
+    extendsBytes(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard decimal type.
+     *
+     * @param type The type to check.
+     */
+    extendsDecimal(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard decimal128 type.
+     *
+     * @param type The type to check.
+     */
+    extendsDecimal128(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard duration type.
+     *
+     * @param type The type to check.
+     */
+    extendsDuration(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard float type.
+     *
+     * @param type The type to check.
+     */
+    extendsFloat(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard float32 type.
+     *
+     * @param type The type to check.
+     */
+    extendsFloat32(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard float64 type.
+     *
+     * @param type The type to check.
+     */
+    extendsFloat64(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard int8 type.
+     *
+     * @param type The type to check.
+     */
+    extendsInt8(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard int16 type.
+     *
+     * @param type The type to check.
+     */
+    extendsInt16(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard int32 type.
+     *
+     * @param type The type to check.
+     */
+    extendsInt32(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard int64 type.
+     *
+     * @param type The type to check.
+     */
+    extendsInt64(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard integer type.
+     *
+     * @param type The type to check.
+     */
+    extendsInteger(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard offsetDateTime type.
+     *
+     * @param type The type to check.
+     */
+    extendsOffsetDateTime(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard plainDate type.
+     *
+     * @param type The type to check.
+     */
+    extendsPlainDate(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard plainTime type.
+     *
+     * @param type The type to check.
+     */
+    extendsPlainTime(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard safeint type.
+     *
+     * @param type The type to check.
+     */
+    extendsSafeint(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard uint8 type.
+     *
+     * @param type The type to check.
+     */
+    extendsUint8(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard uint16 type.
+     *
+     * @param type The type to check.
+     */
+    extendsUint16(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard uint32 type.
+     *
+     * @param type The type to check.
+     */
+    extendsUint32(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard uint64 type.
+     *
+     * @param type The type to check.
+     */
+    extendsUint64(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard url type.
+     *
+     * @param type The type to check.
+     */
+    extendsUrl(type: Type): type is Scalar;
+    /**
+     * Check if `type` extends the standard utcDateTime type.
+     *
+     * @param type The type to check.
+     */
+    extendsUtcDateTime(type: Type): type is Scalar;
+    /**
+     * Get the standard built-in base type of a scalar. For all built-in scalar
+     * types (numeric, string, int32, etc.) this will just return the scalar
+     * type. For user-defined scalars, this will return the first base scalar
+     * that is built-in. For user-defined scalars without a standard base type,
+     * this will return null.
+     *
+     * @param type The scalar to check.
+     */
+    getStdBase(type: Scalar): Scalar | null;
+    /**
+     * Get the encoding information for a scalar type. Returns undefined if no
+     * encoding data is specified.
+     *
+     * Note: This will return the encoding data for the scalar type itself, not
+     * the model property that uses the scalar type. If this scalar might be
+     * referenced from a model property, use {@link modelProperty.getEncoding}
+     * instead.
+     *
+     * @param scalar The scalar to get the encoding data for.
+     */
+    getEncoding(scalar: Scalar): EncodeData | undefined;
+    /**
+     * Get the well-known format for a string scalar. Returns undefined if no
+     * format is specified.
+     *
+     * Note: This will return the format data for the scalar type itself, not
+     * the model property that uses the scalar type. If this scalar might be
+     * referenced from a model property, use {@link ModelPropertyKit.getEncoding}
+     * instead.
+     *
+     * @param scalar The scalar to get the format for.
+     */
+    getFormat(scalar: Scalar): string | undefined;
+}
+interface TypekitExtension {
+    /**
+     * Operations for scalar types like strings, numerics, booleans, dates, etc.
+     * @experimental
+     */
+    scalar: ScalarKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=scalar.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/scalar.d.ts.map b/dist/src/experimental/typekit/kits/scalar.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..99cb7fc7cbd1ba7a09b5c4ceee92deddaa65373a
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/scalar.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"scalar.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/scalar.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/scalar.js b/dist/src/experimental/typekit/kits/scalar.js
new file mode 100644
index 0000000000000000000000000000000000000000..51ed18777188a22dfaf91223b423384449a306d0
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/scalar.js
@@ -0,0 +1,91 @@
+import { isIntrinsicType } from "../../../core/decorator-utils.js";
+import { getEncode, getFormat } from "../../../lib/decorators.js";
+import { defineKit } from "../define-kit.js";
+defineKit({
+    scalar: {
+        is(type) {
+            return type.kind === "Scalar";
+        },
+        extendsBoolean: extendsStdType("boolean"),
+        extendsBytes: extendsStdType("bytes"),
+        extendsDecimal: extendsStdType("decimal"),
+        extendsDecimal128: extendsStdType("decimal128"),
+        extendsDuration: extendsStdType("duration"),
+        extendsFloat: extendsStdType("float"),
+        extendsFloat32: extendsStdType("float32"),
+        extendsFloat64: extendsStdType("float64"),
+        extendsInt8: extendsStdType("int8"),
+        extendsInt16: extendsStdType("int16"),
+        extendsInt32: extendsStdType("int32"),
+        extendsInt64: extendsStdType("int64"),
+        extendsInteger: extendsStdType("integer"),
+        extendsNumeric: extendsStdType("numeric"),
+        extendsOffsetDateTime: extendsStdType("offsetDateTime"),
+        extendsPlainDate: extendsStdType("plainDate"),
+        extendsPlainTime: extendsStdType("plainTime"),
+        extendsSafeint: extendsStdType("safeint"),
+        extendsString: extendsStdType("string"),
+        extendsUint8: extendsStdType("uint8"),
+        extendsUint16: extendsStdType("uint16"),
+        extendsUint32: extendsStdType("uint32"),
+        extendsUint64: extendsStdType("uint64"),
+        extendsUrl: extendsStdType("url"),
+        extendsUtcDateTime: extendsStdType("utcDateTime"),
+        isBoolean: isStdType("boolean"),
+        isBytes: isStdType("bytes"),
+        isDecimal: isStdType("decimal"),
+        isDecimal128: isStdType("decimal128"),
+        isDuration: isStdType("duration"),
+        isFloat: isStdType("float"),
+        isFloat32: isStdType("float32"),
+        isFloat64: isStdType("float64"),
+        isInt8: isStdType("int8"),
+        isInt16: isStdType("int16"),
+        isInt32: isStdType("int32"),
+        isInt64: isStdType("int64"),
+        isInteger: isStdType("integer"),
+        isNumeric: isStdType("numeric"),
+        isOffsetDateTime: isStdType("offsetDateTime"),
+        isPlainDate: isStdType("plainDate"),
+        isPlainTime: isStdType("plainTime"),
+        isSafeint: isStdType("safeint"),
+        isString: isStdType("string"),
+        isUint8: isStdType("uint8"),
+        isUint16: isStdType("uint16"),
+        isUint32: isStdType("uint32"),
+        isUint64: isStdType("uint64"),
+        isUrl: isStdType("url"),
+        isUtcDateTime: isStdType("utcDateTime"),
+        getStdBase(type) {
+            const tspNamespace = this.program.resolveTypeReference("TypeSpec")[0];
+            let current = type;
+            while (current) {
+                if (current.namespace === tspNamespace) {
+                    return current;
+                }
+                current = current.baseScalar;
+            }
+            return null;
+        },
+        getEncoding(type) {
+            return getEncode(this.program, type);
+        },
+        getFormat(type) {
+            return getFormat(this.program, type);
+        },
+    },
+});
+function isStdType(typeName) {
+    return function (type) {
+        return type === this.program.checker.getStdType(typeName);
+    };
+}
+function extendsStdType(typeName) {
+    return function (type) {
+        if (!this.scalar.is(type)) {
+            return false;
+        }
+        return isIntrinsicType(this.program, type, typeName);
+    };
+}
+//# sourceMappingURL=scalar.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/scalar.js.map b/dist/src/experimental/typekit/kits/scalar.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..b64d03ff1fc6d9d55189c46820a506a2bcad95cc
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/scalar.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"scalar.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/scalar.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/type.d.ts b/dist/src/experimental/typekit/kits/type.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..262aaff76dcc72b56b9ead6127570c55ae8693ec
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/type.d.ts
@@ -0,0 +1,113 @@
+import { Discriminator } from "../../../core/intrinsic-type-state.js";
+import { Enum, Model, Scalar, Union, type Type } from "../../../core/types.js";
+/**  @experimental */
+export interface TypeTypekit {
+    /**
+     * Clones a type and adds it to the typekit's realm.
+     * @param type Type to clone
+     */
+    clone<T extends Type>(type: T): T;
+    /**
+     * Finishes a type, applying all the decorators.
+     */
+    finishType(type: Type): void;
+    /**
+     * Checks if a type is decorated with @error
+     * @param type The type to check.
+     */
+    isError(type: Type): boolean;
+    /**
+     * Get the name of this type in the specified encoding.
+     */
+    getEncodedName(type: Type & {
+        name: string;
+    }, encoding: string): string;
+    /**
+     * Get the summary of this type as specified by the `@summary` decorator.
+     *
+     * @param type The type to get the summary for.
+     */
+    getSummary(type: Type): string | undefined;
+    /**
+     * Get the documentation of this type as specified by the `@doc` decorator or
+     * the JSDoc comment.
+     *
+     * @param type The type to get the documentation for.
+     */
+    getDoc(type: Type): string | undefined;
+    /**
+     * Get the plausible name of a type. If the type has a name, it will use it otherwise it will try generate a name based on the context.
+     * If the type can't get a name, it will return an empty string.
+     * If the type is a TemplateInstance, it will prefix the name with the template arguments.
+     * @param type The scalar to get the name of.z
+     */
+    getPlausibleName(type: Model | Union | Enum | Scalar): string;
+    /**
+     * Resolves the discriminator for a discriminated union. Returns undefined if the type is not a discriminated union.
+     * @param type
+     */
+    getDiscriminator(type: Model | Union): Discriminator | undefined;
+    /**
+     * Gets the maximum value for a numeric or model property type.
+     * @param type type to get the maximum value for
+     */
+    maxValue(type: Type): number | undefined;
+    /**
+     * Gets the minimum value for a numeric or model property type.
+     * @param type type to get the minimum value for
+     */
+    minValue(type: Type): number | undefined;
+    /**
+     * Gets the maximum value this numeric type should be, exclusive of the given value.
+     * @param type
+     */
+    maxValueExclusive(type: Type): number | undefined;
+    /**
+     * Gets the minimum value this numeric type should be, exclusive of the given value.
+     * @param type type to get the minimum value for
+     */
+    minValueExclusive(type: Type): number | undefined;
+    /**
+     * Gets the maximum length for a string type.
+     * @param type type to get the maximum length for
+     */
+    maxLength(type: Type): number | undefined;
+    /**
+     * Gets the minimum length for a string type.
+     * @param type type to get the minimum length for
+     */
+    minLength(type: Type): number | undefined;
+    /**
+     * Gets the maximum number of items for an array type.
+     * @param type type to get the maximum number of items for
+     */
+    maxItems(type: Type): number | undefined;
+    /**
+     * Gets the minimum number of items for an array type.
+     * @param type type to get the minimum number of items for
+     */
+    minItems(type: Type): number | undefined;
+    /**
+     * Checks if the given type is a never type.
+     */
+    isNever(type: Type): boolean;
+    /**
+     * Checks if the given type is a user defined type. Non-user defined types are defined in the compiler or other libraries imported by the spec.
+     * @param type The type to check.
+     * @returns True if the type is a user defined type, false otherwise.
+     */
+    isUserDefined(type: Type): boolean;
+}
+interface TypekitExtension {
+    /**
+     * Utilities for working with general types.
+     * @experimental
+     */
+    type: TypeTypekit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=type.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/type.d.ts.map b/dist/src/experimental/typekit/kits/type.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..670a5d40e0e9af01e2c1377fc1ebfefbcef10337
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/type.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"type.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/type.ts"],"names":[],"mappings":"AAGA,OAAO,EACL,aAAa,EAUd,MAAM,uCAAuC,CAAC;AAE/C,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,IAAI,EAAE,MAAM,wBAAwB,CAAC;AAQ/E,qBAAqB;AACrB,MAAM,WAAW,WAAW;IAC1B;;;OAGG;IACH,KAAK,CAAC,CAAC,SAAS,IAAI,EAAE,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC;IAClC;;OAEG;IACH,UAAU,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,CAAC;IAC7B;;;OAGG;IACH,OAAO,CAAC,IAAI,EAAE,IAAI,GAAG,OAAO,CAAC;IAC7B;;OAEG;IACH,cAAc,CAAC,IAAI,EAAE,IAAI,GAAG;QAAE,IAAI,EAAE,MAAM,CAAA;KAAE,EAAE,QAAQ,EAAE,MAAM,GAAG,MAAM,CAAC;IAExE;;;;OAIG;IACH,UAAU,CAAC,IAAI,EAAE,IAAI,GAAG,MAAM,GAAG,SAAS,CAAC;IAE3C;;;;;OAKG;IACH,MAAM,CAAC,IAAI,EAAE,IAAI,GAAG,MAAM,GAAG,SAAS,CAAC;IACvC;;;;;OAKG;IACH,gBAAgB,CAAC,IAAI,EAAE,KAAK,GAAG,KAAK,GAAG,IAAI,GAAG,MAAM,GAAG,MAAM,CAAC;IAC9D;;;OAGG;IACH,gBAAgB,CAAC,IAAI,EAAE,KAAK,GAAG,KAAK,GAAG,aAAa,GAAG,SAAS,CAAC;IACjE;;;OAGG;IACH,QAAQ,CAAC,IAAI,EAAE,IAAI,GAAG,MAAM,GAAG,SAAS,CAAC;IACzC;;;OAGG;IACH,QAAQ,CAAC,IAAI,EAAE,IAAI,GAAG,MAAM,GAAG,SAAS,CAAC;IAEzC;;;OAGG;IACH,iBAAiB,CAAC,IAAI,EAAE,IAAI,GAAG,MAAM,GAAG,SAAS,CAAC;IAElD;;;OAGG;IACH,iBAAiB,CAAC,IAAI,EAAE,IAAI,GAAG,MAAM,GAAG,SAAS,CAAC;IAElD;;;OAGG;IACH,SAAS,CAAC,IAAI,EAAE,IAAI,GAAG,MAAM,GAAG,SAAS,CAAC;IAC1C;;;OAGG;IACH,SAAS,CAAC,IAAI,EAAE,IAAI,GAAG,MAAM,GAAG,SAAS,CAAC;IAC1C;;;OAGG;IACH,QAAQ,CAAC,IAAI,EAAE,IAAI,GAAG,MAAM,GAAG,SAAS,CAAC;IACzC;;;OAGG;IACH,QAAQ,CAAC,IAAI,EAAE,IAAI,GAAG,MAAM,GAAG,SAAS,CAAC;IACzC;;OAEG;IACH,OAAO,CAAC,IAAI,EAAE,IAAI,GAAG,OAAO,CAAC;IAC7B;;;;OAIG;IACH,aAAa,CAAC,IAAI,EAAE,IAAI,GAAG,OAAO,CAAC;CACpC;AAED,UAAU,gBAAgB;IACxB;;;OAGG;IACH,IAAI,EAAE,WAAW,CAAC;CACnB;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/type.js b/dist/src/experimental/typekit/kits/type.js
new file mode 100644
index 0000000000000000000000000000000000000000..81a5782038c346b1d7f04014bb0a568a2ae38d19
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/type.js
@@ -0,0 +1,150 @@
+import { ignoreDiagnostics } from "../../../core/diagnostics.js";
+import { getDiscriminatedUnion } from "../../../core/helpers/discriminator-utils.js";
+import { getLocationContext } from "../../../core/helpers/location-context.js";
+import { getDiscriminator, getMaxItems, getMaxLength, getMaxValue, getMaxValueExclusive, getMinItems, getMinLength, getMinValue, getMinValueExclusive, } from "../../../core/intrinsic-type-state.js";
+import { isErrorType, isNeverType } from "../../../core/type-utils.js";
+import { getDoc, getSummary } from "../../../lib/decorators.js";
+import { resolveEncodedName } from "../../../lib/encoded-names.js";
+import { defineKit } from "../define-kit.js";
+import { $ } from "../index.js";
+import { copyMap } from "../utils.js";
+import { getPlausibleName } from "../utils/get-plausible-name.js";
+defineKit({
+    type: {
+        finishType(type) {
+            this.program.checker.finishType(type);
+        },
+        clone(type) {
+            let clone;
+            switch (type.kind) {
+                case "Model":
+                    clone = this.program.checker.createType({
+                        ...type,
+                        decorators: [...type.decorators],
+                        derivedModels: [...type.derivedModels],
+                        sourceModels: type.sourceModels.map((x) => ({ ...x })),
+                        properties: copyMap(type.properties),
+                        indexer: type.indexer ? { ...type.indexer } : undefined,
+                    });
+                    break;
+                case "Union":
+                    clone = this.program.checker.createType({
+                        ...type,
+                        decorators: [...type.decorators],
+                        variants: copyMap(type.variants),
+                        get options() {
+                            return Array.from(this.variants.values()).map((v) => v.type);
+                        },
+                    });
+                    break;
+                case "Interface":
+                    clone = this.program.checker.createType({
+                        ...type,
+                        decorators: [...type.decorators],
+                        operations: copyMap(type.operations),
+                    });
+                    break;
+                case "Enum":
+                    clone = this.program.checker.createType({
+                        ...type,
+                        decorators: [...type.decorators],
+                        members: copyMap(type.members),
+                    });
+                    break;
+                case "Namespace":
+                    clone = this.program.checker.createType({
+                        ...type,
+                        decorators: [...type.decorators],
+                        instantiationParameters: type.instantiationParameters
+                            ? [...type.instantiationParameters]
+                            : undefined,
+                        models: copyMap(type.models),
+                        decoratorDeclarations: copyMap(type.decoratorDeclarations),
+                        enums: copyMap(type.enums),
+                        unions: copyMap(type.unions),
+                        operations: copyMap(type.operations),
+                        interfaces: copyMap(type.interfaces),
+                        namespaces: copyMap(type.namespaces),
+                        scalars: copyMap(type.scalars),
+                    });
+                    break;
+                case "Scalar":
+                    clone = this.program.checker.createType({
+                        ...type,
+                        decorators: [...type.decorators],
+                        derivedScalars: [...type.derivedScalars],
+                        constructors: copyMap(type.constructors),
+                    });
+                    break;
+                default:
+                    clone = this.program.checker.createType({
+                        ...type,
+                        ...("decorators" in type ? { decorators: [...type.decorators] } : {}),
+                    });
+                    break;
+            }
+            this.realm.addType(clone);
+            return clone;
+        },
+        isError(type) {
+            return isErrorType(type);
+        },
+        getEncodedName(type, encoding) {
+            return resolveEncodedName(this.program, type, encoding);
+        },
+        getSummary(type) {
+            return getSummary(this.program, type);
+        },
+        getDoc(type) {
+            return getDoc(this.program, type);
+        },
+        getPlausibleName(type) {
+            return getPlausibleName(type);
+        },
+        getDiscriminator(type) {
+            let discriminator;
+            if ($.model.is(type)) {
+                discriminator = getDiscriminator(this.program, type);
+            }
+            else {
+                const unionDiscriminator = ignoreDiagnostics(getDiscriminatedUnion(this.program, type));
+                const propertyName = unionDiscriminator?.options.discriminatorPropertyName;
+                if (propertyName) {
+                    discriminator = { propertyName };
+                }
+            }
+            return discriminator;
+        },
+        maxValue(type) {
+            return getMaxValue(this.program, type);
+        },
+        minValue(type) {
+            return getMinValue(this.program, type);
+        },
+        maxLength(type) {
+            return getMaxLength(this.program, type);
+        },
+        minLength(type) {
+            return getMinLength(this.program, type);
+        },
+        maxItems(type) {
+            return getMaxItems(this.program, type);
+        },
+        maxValueExclusive(type) {
+            return getMaxValueExclusive(this.program, type);
+        },
+        minValueExclusive(type) {
+            return getMinValueExclusive(this.program, type);
+        },
+        minItems(type) {
+            return getMinItems(this.program, type);
+        },
+        isNever(type) {
+            return isNeverType(type);
+        },
+        isUserDefined(type) {
+            return getLocationContext(this.program, type).type === "project";
+        },
+    },
+});
+//# sourceMappingURL=type.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/type.js.map b/dist/src/experimental/typekit/kits/type.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..3359b4740cb65fe8d0372b7b8390283880ae572f
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/type.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"type.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/type.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/union-variant.d.ts b/dist/src/experimental/typekit/kits/union-variant.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..6b3678511b7ce1c77e6abc63ebdbfd846b15d49e
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/union-variant.d.ts
@@ -0,0 +1,60 @@
+import type { Type, Union, UnionVariant } from "../../../core/types.js";
+import { DecoratorArgs } from "../utils.js";
+/**
+ * A descriptor for a union variant.
+ * @experimental
+ */
+export interface UnionVariantDescriptor {
+    /**
+     * The name of the union variant.
+     */
+    name?: string | symbol;
+    /**
+     * Decorators to apply to the union variant.
+     */
+    decorators?: DecoratorArgs[];
+    /**
+     * The type of the union variant.
+     */
+    type: Type;
+    /**
+     * The union that the variant belongs to. If not provided here, it is assumed
+     * that it will be set in `union.build`.
+     */
+    union?: Union;
+}
+/**
+ * Utilities for working with union variants.
+ *
+ * Union variants are types that represent a single value within a union that can be one of
+ * several types.
+ *
+ * @experimental
+ */
+export interface UnionVariantKit {
+    /**
+     * Create a union variant.
+     *
+     * @param desc The descriptor of the union variant.
+     */
+    create(desc: UnionVariantDescriptor): UnionVariant;
+    /**
+     * Check if the given `type` is a union.
+     *
+     * @param type The type to check.
+     */
+    is(type: Type): type is UnionVariant;
+}
+interface TypekitExtension {
+    /**
+     * Utilities for working with union variants.
+     * @experimental
+     */
+    unionVariant: UnionVariantKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=union-variant.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/union-variant.d.ts.map b/dist/src/experimental/typekit/kits/union-variant.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..e0cc190a6fa878a2968ce2e7325a37aa84550e25
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/union-variant.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"union-variant.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/union-variant.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,YAAY,EAAE,MAAM,wBAAwB,CAAC;AAExE,OAAO,EAAwB,aAAa,EAAE,MAAM,aAAa,CAAC;AAElE;;;GAGG;AACH,MAAM,WAAW,sBAAsB;IACrC;;OAEG;IACH,IAAI,CAAC,EAAE,MAAM,GAAG,MAAM,CAAC;IAEvB;;OAEG;IACH,UAAU,CAAC,EAAE,aAAa,EAAE,CAAC;IAE7B;;OAEG;IACH,IAAI,EAAE,IAAI,CAAC;IAEX;;;OAGG;IACH,KAAK,CAAC,EAAE,KAAK,CAAC;CACf;AAED;;;;;;;GAOG;AACH,MAAM,WAAW,eAAe;IAC9B;;;;OAIG;IACH,MAAM,CAAC,IAAI,EAAE,sBAAsB,GAAG,YAAY,CAAC;IAEnD;;;;OAIG;IACH,EAAE,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,IAAI,YAAY,CAAC;CACtC;AAED,UAAU,gBAAgB;IACxB;;;OAGG;IACH,YAAY,EAAE,eAAe,CAAC;CAC/B;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/union-variant.js b/dist/src/experimental/typekit/kits/union-variant.js
new file mode 100644
index 0000000000000000000000000000000000000000..2d5fade21827f2b2b9e89a5b1bc01bf020b65b51
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/union-variant.js
@@ -0,0 +1,22 @@
+import { defineKit } from "../define-kit.js";
+import { decoratorApplication } from "../utils.js";
+defineKit({
+    unionVariant: {
+        create(desc) {
+            const variant = this.program.checker.createType({
+                kind: "UnionVariant",
+                name: desc.name ?? Symbol("name"),
+                decorators: decoratorApplication(this, desc.decorators),
+                type: desc.type,
+                node: undefined,
+                union: desc.union,
+            });
+            this.program.checker.finishType(variant);
+            return variant;
+        },
+        is(type) {
+            return type.kind === "UnionVariant";
+        },
+    },
+});
+//# sourceMappingURL=union-variant.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/union-variant.js.map b/dist/src/experimental/typekit/kits/union-variant.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..dd824be140eb52174c99a57b3596f7997befe016
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/union-variant.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"union-variant.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/union-variant.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,SAAS,EAAE,MAAM,kBAAkB,CAAC;AAC7C,OAAO,EAAE,oBAAoB,EAAiB,MAAM,aAAa,CAAC;AAiElE,SAAS,CAAmB;IAC1B,YAAY,EAAE;QACZ,MAAM,CAAC,IAAI;YACT,MAAM,OAAO,GAAiB,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC;gBAC5D,IAAI,EAAE,cAAc;gBACpB,IAAI,EAAE,IAAI,CAAC,IAAI,IAAI,MAAM,CAAC,MAAM,CAAC;gBACjC,UAAU,EAAE,oBAAoB,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC;gBACvD,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,IAAI,EAAE,SAAgB;gBACtB,KAAK,EAAE,IAAI,CAAC,KAAY;aACzB,CAAC,CAAC;YACH,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;YACzC,OAAO,OAAO,CAAC;QACjB,CAAC;QAED,EAAE,CAAC,IAAI;YACL,OAAO,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC;QACtC,CAAC;KACF;CACF,CAAC,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/union.d.ts b/dist/src/experimental/typekit/kits/union.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..2f22697b3fb4c27be4e9a83b47429d95a7ce3da9
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/union.d.ts
@@ -0,0 +1,85 @@
+import { DiscriminatedUnion } from "../../../core/helpers/discriminator-utils.js";
+import type { Type, Union, UnionVariant } from "../../../core/types.js";
+import { DecoratorArgs } from "../utils.js";
+/**
+ * A descriptor for a union type.
+ * @experimental
+ */
+export interface UnionDescriptor {
+    /**
+     * The name of the union. If name is provided, it is a union declaration.
+     * Otherwise, it is a union expression.
+     */
+    name?: string;
+    /**
+     * Decorators to apply to the union.
+     */
+    decorators?: DecoratorArgs[];
+    /**
+     * The variants of the union. If a variant is a string, number, or boolean, it
+     * will be converted to a union variant with the same name and type.
+     */
+    variants?: Record<string | symbol, string | number> | UnionVariant[];
+}
+/**
+ * Utilities for working with unions.
+ * @experimental
+ */
+export interface UnionKit {
+    /**
+     * Creates a union type with filtered variants.
+     * @param filterFn Function to filter the union variants
+     */
+    filter(union: Union, filterFn: (variant: UnionVariant) => boolean): Union;
+    /**
+     * Create a union type.
+     *
+     * @param desc The descriptor of the union.
+     */
+    create(desc: UnionDescriptor): Union;
+    /**
+     * Check if the given `type` is a union.
+     *
+     * @param type The type to check.
+     */
+    is(type: Type): type is Union;
+    /**
+     * Check if the union is a valid enum. Specifically, this checks if the
+     * union has a name (since there are no enum expressions), and whether each
+     * of the variant types is a valid enum member value.
+     *
+     * @param type The union to check.
+     */
+    isValidEnum(type: Union): boolean;
+    /**
+     * Check if a union is extensible. Extensible unions are unions which contain a variant
+     * that is a supertype of all the other types. This means that the subtypes of the common
+     * supertype are known example values, but others may be present.
+     * @param type The union to check.
+     */
+    isExtensible(type: Union): boolean;
+    /**
+     * Checks if an union is an expression (anonymous) or declared.
+     * @param type Uniton to check if it is an expression
+     */
+    isExpression(type: Union): boolean;
+    /**
+     * Resolves a discriminated union for the given union.
+     * @param type Union to resolve the discriminated union for.
+     */
+    getDiscriminatedUnion(type: Union): DiscriminatedUnion | undefined;
+}
+interface TypekitExtension {
+    /**
+     * Utilities for working with unions.
+     * @experimental
+     */
+    union: UnionKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export declare const UnionKit: void;
+export {};
+//# sourceMappingURL=union.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/union.d.ts.map b/dist/src/experimental/typekit/kits/union.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..00a1d1f93209a051c5799737f31ff0bd39143d2f
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/union.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"union.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/union.ts"],"names":[],"mappings":"AACA,OAAO,EACL,kBAAkB,EAEnB,MAAM,8CAA8C,CAAC;AACtD,OAAO,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,YAAY,EAAE,MAAM,wBAAwB,CAAC;AAGxE,OAAO,EAAwB,aAAa,EAAE,MAAM,aAAa,CAAC;AAElE;;;GAGG;AACH,MAAM,WAAW,eAAe;IAC9B;;;OAGG;IACH,IAAI,CAAC,EAAE,MAAM,CAAC;IAEd;;OAEG;IACH,UAAU,CAAC,EAAE,aAAa,EAAE,CAAC;IAE7B;;;OAGG;IACH,QAAQ,CAAC,EAAE,MAAM,CAAC,MAAM,GAAG,MAAM,EAAE,MAAM,GAAG,MAAM,CAAC,GAAG,YAAY,EAAE,CAAC;CACtE;AAED;;;GAGG;AACH,MAAM,WAAW,QAAQ;IACvB;;;OAGG;IACH,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,CAAC,OAAO,EAAE,YAAY,KAAK,OAAO,GAAG,KAAK,CAAC;IAC1E;;;;OAIG;IACH,MAAM,CAAC,IAAI,EAAE,eAAe,GAAG,KAAK,CAAC;IAErC;;;;OAIG;IACH,EAAE,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,IAAI,KAAK,CAAC;IAE9B;;;;;;OAMG;IACH,WAAW,CAAC,IAAI,EAAE,KAAK,GAAG,OAAO,CAAC;IAElC;;;;;OAKG;IACH,YAAY,CAAC,IAAI,EAAE,KAAK,GAAG,OAAO,CAAC;IAEnC;;;OAGG;IACH,YAAY,CAAC,IAAI,EAAE,KAAK,GAAG,OAAO,CAAC;IACnC;;;OAGG;IACH,qBAAqB,CAAC,IAAI,EAAE,KAAK,GAAG,kBAAkB,GAAG,SAAS,CAAC;CACpE;AAED,UAAU,gBAAgB;IACxB;;;OAGG;IACH,KAAK,EAAE,QAAQ,CAAC;CACjB;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C;AAED,eAAO,MAAM,QAAQ,MAyFnB,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/union.js b/dist/src/experimental/typekit/kits/union.js
new file mode 100644
index 0000000000000000000000000000000000000000..f0d267224f2867c33d9333ffe60523440657fd48
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/union.js
@@ -0,0 +1,80 @@
+import { ignoreDiagnostics } from "../../../core/diagnostics.js";
+import { getDiscriminatedUnion, } from "../../../core/helpers/discriminator-utils.js";
+import { createRekeyableMap } from "../../../utils/misc.js";
+import { defineKit } from "../define-kit.js";
+import { decoratorApplication } from "../utils.js";
+export const UnionKit = defineKit({
+    union: {
+        filter(union, filterFn) {
+            const variants = Array.from(union.variants.values()).filter(filterFn);
+            return this.union.create({ variants });
+        },
+        create(desc) {
+            const union = this.program.checker.createType({
+                kind: "Union",
+                name: desc.name,
+                decorators: decoratorApplication(this, desc.decorators),
+                variants: createRekeyableMap(),
+                get options() {
+                    return Array.from(this.variants.values()).map((v) => v.type);
+                },
+                expression: desc.name === undefined,
+                node: undefined,
+            });
+            if (Array.isArray(desc.variants)) {
+                for (const variant of desc.variants) {
+                    union.variants.set(variant.name, variant);
+                    variant.union = union;
+                }
+            }
+            else if (desc.variants) {
+                for (const [name, value] of Object.entries(desc.variants)) {
+                    union.variants.set(name, this.unionVariant.create({ name, type: this.literal.create(value) }));
+                }
+            }
+            this.program.checker.finishType(union);
+            return union;
+        },
+        is(type) {
+            return type.kind === "Union";
+        },
+        isValidEnum(type) {
+            for (const variant of type.variants.values()) {
+                if (!this.literal.isString(variant.type) && !this.literal.isNumeric(variant.type)) {
+                    return false;
+                }
+            }
+            return true;
+        },
+        isExtensible(type) {
+            const variants = Array.from(type.variants.values());
+            if (variants.length === 0) {
+                return false;
+            }
+            for (let i = 0; i < variants.length; i++) {
+                let isCommon = true;
+                for (let j = 0; j < variants.length; j++) {
+                    if (i === j) {
+                        continue;
+                    }
+                    const assignable = ignoreDiagnostics(this.program.checker.isTypeAssignableTo(variants[j].type, variants[i].type, type));
+                    if (!assignable) {
+                        isCommon = false;
+                        break;
+                    }
+                }
+                if (isCommon) {
+                    return true;
+                }
+            }
+            return false;
+        },
+        isExpression(type) {
+            return type.name === undefined || type.name === "";
+        },
+        getDiscriminatedUnion(type) {
+            return ignoreDiagnostics(getDiscriminatedUnion(this.program, type));
+        },
+    },
+});
+//# sourceMappingURL=union.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/union.js.map b/dist/src/experimental/typekit/kits/union.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..a00ebbb96cf4c27b3dc07c91ef67ff3a7ae19fa2
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/union.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"union.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/union.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/value.d.ts b/dist/src/experimental/typekit/kits/value.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..8e73d9ffb989cc56d4efabcdb9049e9713d64132
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/value.d.ts
@@ -0,0 +1,84 @@
+import type { ArrayValue, BooleanValue, EnumValue, NullValue, NumericValue, ObjectValue, ScalarValue, StringValue, Value } from "../../../core/types.js";
+/** @experimental */
+export interface ValueKit {
+    /**
+     * Create a Value type from a JavaScript value.
+     *
+     * @param value The JavaScript value to turn into a TypeSpec Value type.
+     */
+    create(value: string | number | boolean): Value;
+    /**
+     * Create a string Value type from a JavaScript string value.
+     *
+     * @param value The string value.
+     */
+    createString(value: string): StringValue;
+    /**
+     * Create a numeric Value type from a JavaScript number value.
+     *
+     * @param value The numeric value.
+     */
+    createNumeric(value: number): NumericValue;
+    /**
+     * Create a boolean Value type from a JavaScript boolean value.
+     *
+     * @param value The boolean value.
+     */
+    createBoolean(value: boolean): BooleanValue;
+    /**
+     * Check if `type` is a string Value type.
+     *
+     * @param type The type to check.
+     */
+    isString(type: Value): type is StringValue;
+    /**
+     * Check if `type` is a numeric Value type.
+     *
+     * @param type The type to check.
+     */
+    isNumeric(type: Value): type is NumericValue;
+    /**
+     * Check if `type` is a scalar value type
+     * @param type The type to check.
+     */
+    isScalar(type: Value): type is ScalarValue;
+    /**
+     * Check if `type` is an object value type
+     * @param type The type to check.
+     */
+    isObject(type: Value): type is ObjectValue;
+    /**
+     * Check if `type` is an array value type
+     * @param type The type to check.
+     */
+    isArray(type: Value): type is ArrayValue;
+    /**
+     * Check if `type` is an enum value type
+     * @param type The type to check.
+     */
+    isEnum(type: Value): type is EnumValue;
+    /**
+     * Check if `type` is a null value Type.
+     * @param type The type to check.
+     */
+    isNull(type: Value): type is NullValue;
+    /**
+     * Check if `type` is a boolean Value type.
+     *
+     * @param type The type to check.
+     */
+    isBoolean(type: Value): type is BooleanValue;
+    is(type: {
+        valueKind: string;
+    }): type is Value;
+}
+interface TypekitExtension {
+    /** @experimental */
+    value: ValueKit;
+}
+declare module "../define-kit.js" {
+    interface Typekit extends TypekitExtension {
+    }
+}
+export {};
+//# sourceMappingURL=value.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/value.d.ts.map b/dist/src/experimental/typekit/kits/value.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..2193e4e30f81badffb2a33e89eb5e55eb1a4e349
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/value.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"value.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/value.ts"],"names":[],"mappings":"AACA,OAAO,KAAK,EACV,UAAU,EACV,YAAY,EACZ,SAAS,EACT,SAAS,EACT,YAAY,EACZ,WAAW,EACX,WAAW,EACX,WAAW,EACX,KAAK,EACN,MAAM,wBAAwB,CAAC;AAGhC,oBAAoB;AACpB,MAAM,WAAW,QAAQ;IACvB;;;;OAIG;IACH,MAAM,CAAC,KAAK,EAAE,MAAM,GAAG,MAAM,GAAG,OAAO,GAAG,KAAK,CAAC;IAEhD;;;;OAIG;IACH,YAAY,CAAC,KAAK,EAAE,MAAM,GAAG,WAAW,CAAC;IAEzC;;;;OAIG;IACH,aAAa,CAAC,KAAK,EAAE,MAAM,GAAG,YAAY,CAAC;IAE3C;;;;OAIG;IACH,aAAa,CAAC,KAAK,EAAE,OAAO,GAAG,YAAY,CAAC;IAE5C;;;;OAIG;IACH,QAAQ,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI,IAAI,WAAW,CAAC;IAE3C;;;;OAIG;IACH,SAAS,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI,IAAI,YAAY,CAAC;IAE7C;;;OAGG;IACH,QAAQ,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI,IAAI,WAAW,CAAC;IAE3C;;;OAGG;IACH,QAAQ,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI,IAAI,WAAW,CAAC;IAE3C;;;OAGG;IACH,OAAO,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI,IAAI,UAAU,CAAC;IAEzC;;;OAGG;IACH,MAAM,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI,IAAI,SAAS,CAAC;IAEvC;;;OAGG;IACH,MAAM,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI,IAAI,SAAS,CAAC;IAEvC;;;;OAIG;IACH,SAAS,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI,IAAI,YAAY,CAAC;IAE7C,EAAE,CAAC,IAAI,EAAE;QAAE,SAAS,EAAE,MAAM,CAAA;KAAE,GAAG,IAAI,IAAI,KAAK,CAAC;CAChD;AAED,UAAU,gBAAgB;IACxB,oBAAoB;IACpB,KAAK,EAAE,QAAQ,CAAC;CACjB;AAED,OAAO,QAAQ,kBAAkB,CAAC;IAChC,UAAU,OAAQ,SAAQ,gBAAgB;KAAG;CAC9C"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/value.js b/dist/src/experimental/typekit/kits/value.js
new file mode 100644
index 0000000000000000000000000000000000000000..18004b7edf4d10a6d191253eb7eba32d994dc10a
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/value.js
@@ -0,0 +1,81 @@
+import { Numeric } from "../../../core/numeric.js";
+import { defineKit } from "../define-kit.js";
+defineKit({
+    value: {
+        is(value) {
+            const type = value;
+            return (this.value.isString(type) ||
+                this.value.isNumeric(type) ||
+                this.value.isBoolean(type) ||
+                this.value.isArray(type) ||
+                this.value.isObject(type) ||
+                this.value.isEnum(type) ||
+                this.value.isNull(type) ||
+                this.value.isScalar(type));
+        },
+        create(value) {
+            if (typeof value === "string") {
+                return this.value.createString(value);
+            }
+            else if (typeof value === "number") {
+                return this.value.createNumeric(value);
+            }
+            else {
+                return this.value.createBoolean(value);
+            }
+        },
+        createString(value) {
+            return {
+                entityKind: "Value",
+                value: value,
+                valueKind: "StringValue",
+                type: this.literal.createString(value),
+                scalar: undefined,
+            };
+        },
+        createNumeric(value) {
+            const valueAsString = String(value);
+            return {
+                entityKind: "Value",
+                value: Numeric(valueAsString),
+                valueKind: "NumericValue",
+                type: this.literal.createNumeric(value),
+                scalar: undefined,
+            };
+        },
+        createBoolean(value) {
+            return {
+                entityKind: "Value",
+                value: value,
+                valueKind: "BooleanValue",
+                type: this.literal.createBoolean(value),
+                scalar: undefined,
+            };
+        },
+        isBoolean(type) {
+            return type.valueKind === "BooleanValue";
+        },
+        isString(type) {
+            return type.valueKind === "StringValue";
+        },
+        isNumeric(type) {
+            return type.valueKind === "NumericValue";
+        },
+        isArray(type) {
+            return type.valueKind === "ArrayValue";
+        },
+        isObject(type) {
+            return type.valueKind === "ObjectValue";
+        },
+        isEnum(type) {
+            return type.valueKind === "EnumValue";
+        },
+        isNull(type) {
+            return type.valueKind === "NullValue";
+        },
+        isScalar(type) {
+            return type.valueKind === "ScalarValue";
+        },
+    },
+});
+//# sourceMappingURL=value.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/kits/value.js.map b/dist/src/experimental/typekit/kits/value.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..9f9ab264d19d9c204639da454a92bef9a479b12a
--- /dev/null
+++ b/dist/src/experimental/typekit/kits/value.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"value.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/kits/value.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/utils/get-plausible-name.d.ts b/dist/src/experimental/typekit/utils/get-plausible-name.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..381d49f266cdcafa7e68773c96cfaf9898f0bfd7
--- /dev/null
+++ b/dist/src/experimental/typekit/utils/get-plausible-name.d.ts
@@ -0,0 +1,7 @@
+import { Enum, Interface, Model, Scalar, Union } from "../../../core/types.js";
+/**
+ * Get a plausible name for the given type.
+ * @experimental
+ */
+export declare function getPlausibleName(type: Model | Union | Enum | Scalar | Interface): string;
+//# sourceMappingURL=get-plausible-name.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/utils/get-plausible-name.d.ts.map b/dist/src/experimental/typekit/utils/get-plausible-name.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..0915b549b5948b539d6c1039a96862de7128fbc2
--- /dev/null
+++ b/dist/src/experimental/typekit/utils/get-plausible-name.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"get-plausible-name.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/utils/get-plausible-name.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,wBAAwB,CAAC;AAE/E;;;GAGG;AACH,wBAAgB,gBAAgB,CAAC,IAAI,EAAE,KAAK,GAAG,KAAK,GAAG,IAAI,GAAG,MAAM,GAAG,SAAS,UAa/E"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/utils/get-plausible-name.js b/dist/src/experimental/typekit/utils/get-plausible-name.js
new file mode 100644
index 0000000000000000000000000000000000000000..77a81d8443c4ce00de9770d9c182c6ff41247442
--- /dev/null
+++ b/dist/src/experimental/typekit/utils/get-plausible-name.js
@@ -0,0 +1,17 @@
+import { isTemplateInstance } from "../../../core/type-utils.js";
+/**
+ * Get a plausible name for the given type.
+ * @experimental
+ */
+export function getPlausibleName(type) {
+    let name = type.name;
+    if (!name) {
+        name = "TypeExpression"; // TODO: Implement automatic name generation based on the type context
+    }
+    if (isTemplateInstance(type)) {
+        const namePrefix = type.templateMapper.args.map((a) => ("name" in a && a.name) || "").join("_");
+        name = `${namePrefix}${name}`;
+    }
+    return name;
+}
+//# sourceMappingURL=get-plausible-name.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/utils/get-plausible-name.js.map b/dist/src/experimental/typekit/utils/get-plausible-name.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..97e356f4aaa299f91bbadab452bf0fe1b9514718
--- /dev/null
+++ b/dist/src/experimental/typekit/utils/get-plausible-name.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"get-plausible-name.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/utils/get-plausible-name.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,kBAAkB,EAAE,MAAM,6BAA6B,CAAC;AAGjE;;;GAGG;AACH,MAAM,UAAU,gBAAgB,CAAC,IAA+C;IAC9E,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;IAErB,IAAI,CAAC,IAAI,EAAE,CAAC;QACV,IAAI,GAAG,gBAAgB,CAAC,CAAC,sEAAsE;IACjG,CAAC;IAED,IAAI,kBAAkB,CAAC,IAAI,CAAC,EAAE,CAAC;QAC7B,MAAM,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAChG,IAAI,GAAG,GAAG,UAAU,GAAG,IAAI,EAAE,CAAC;IAChC,CAAC;IAED,OAAO,IAAI,CAAC;AACd,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/utils/index.d.ts b/dist/src/experimental/typekit/utils/index.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..660fa7fda153683d2a05d50de8771042ebfd04bc
--- /dev/null
+++ b/dist/src/experimental/typekit/utils/index.d.ts
@@ -0,0 +1,2 @@
+export * from "./get-plausible-name.js";
+//# sourceMappingURL=index.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/utils/index.d.ts.map b/dist/src/experimental/typekit/utils/index.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..cf9b3bb7155db394b65c4b404795fba95f3e25e3
--- /dev/null
+++ b/dist/src/experimental/typekit/utils/index.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.d.ts","sourceRoot":"","sources":["../../../../../src/experimental/typekit/utils/index.ts"],"names":[],"mappings":"AAAA,cAAc,yBAAyB,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/utils/index.js b/dist/src/experimental/typekit/utils/index.js
new file mode 100644
index 0000000000000000000000000000000000000000..304a615d6be370688abfb98f85fdcecc9f43bfaf
--- /dev/null
+++ b/dist/src/experimental/typekit/utils/index.js
@@ -0,0 +1,2 @@
+export * from "./get-plausible-name.js";
+//# sourceMappingURL=index.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/utils/index.js.map b/dist/src/experimental/typekit/utils/index.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..3d85c42e1beaad96006fb906f45b59774c7652d2
--- /dev/null
+++ b/dist/src/experimental/typekit/utils/index.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../../../src/experimental/typekit/utils/index.ts"],"names":[],"mappings":"AAAA,cAAc,yBAAyB,CAAC"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/utils.d.ts b/dist/src/experimental/typekit/utils.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..9d5791c566f2da9cf8a457c79abf121d1e9bb9df
--- /dev/null
+++ b/dist/src/experimental/typekit/utils.d.ts
@@ -0,0 +1,32 @@
+import type { DecoratorApplication, DecoratorFunction, RekeyableMap } from "../../core/types.js";
+import { Typekit } from "./define-kit.js";
+/**
+ * Creates a shallow copy of a rekeyable map.
+ *
+ * @experimental
+ */
+export declare function copyMap<T, U>(map: RekeyableMap<T, U>): RekeyableMap<T, U>;
+/**
+ * Decorator arguments can be either a single decorator (treated as a decorator with no arguments) or an array where the
+ * first element is the decorator and the rest of the elements are the JavaScript values of the arguments.
+ *
+ * @experimental
+ */
+export type DecoratorArgs = DecoratorFunction | [DecoratorFunction, ...any[]];
+/**
+ * Utility function for converting a list of decorators and arguments into structure decorator applications that are
+ * compatible with the TypeSpec type graph.
+ *
+ * Note: Not all JavaScript values can be converted faithfully to TypeSpec values. This function will attempt to convert
+ * the value to a literal TypeSpec value if it is a primitive value, otherwise it will be left as a JavaScript value.
+ * The `jsValue` property of the argument will always contain the original JavaScript value passed to the decorator.
+ *
+ * @param typekit - The Typekit instance to use for creating types and values.
+ * @param decorators - The list of decorators and arguments to apply.
+ *
+ * @see {@link DecoratorArgs}
+ *
+ * @experimental
+ */
+export declare function decoratorApplication(typekit: Typekit, decorators?: DecoratorArgs[]): DecoratorApplication[];
+//# sourceMappingURL=utils.d.ts.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/utils.d.ts.map b/dist/src/experimental/typekit/utils.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..afd234385ec8397d5dbeb9331c723de097fa8196
--- /dev/null
+++ b/dist/src/experimental/typekit/utils.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"utils.d.ts","sourceRoot":"","sources":["../../../../src/experimental/typekit/utils.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,oBAAoB,EAAE,iBAAiB,EAAE,YAAY,EAAE,MAAM,qBAAqB,CAAC;AAEjG,OAAO,EAAE,OAAO,EAAE,MAAM,iBAAiB,CAAC;AAE1C;;;;GAIG;AACH,wBAAgB,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC,CAEzE;AAED;;;;;GAKG;AACH,MAAM,MAAM,aAAa,GAAG,iBAAiB,GAAG,CAAC,iBAAiB,EAAE,GAAG,GAAG,EAAE,CAAC,CAAC;AAE9E;;;;;;;;;;;;;;GAcG;AACH,wBAAgB,oBAAoB,CAClC,OAAO,EAAE,OAAO,EAChB,UAAU,CAAC,EAAE,aAAa,EAAE,GAC3B,oBAAoB,EAAE,CAiBxB"}
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/utils.js b/dist/src/experimental/typekit/utils.js
new file mode 100644
index 0000000000000000000000000000000000000000..92bbf85ea022db2eee41ac8f8308b06840059cb7
--- /dev/null
+++ b/dist/src/experimental/typekit/utils.js
@@ -0,0 +1,39 @@
+import { createRekeyableMap } from "../../utils/misc.js";
+/**
+ * Creates a shallow copy of a rekeyable map.
+ *
+ * @experimental
+ */
+export function copyMap(map) {
+    return createRekeyableMap(map.entries());
+}
+/**
+ * Utility function for converting a list of decorators and arguments into structure decorator applications that are
+ * compatible with the TypeSpec type graph.
+ *
+ * Note: Not all JavaScript values can be converted faithfully to TypeSpec values. This function will attempt to convert
+ * the value to a literal TypeSpec value if it is a primitive value, otherwise it will be left as a JavaScript value.
+ * The `jsValue` property of the argument will always contain the original JavaScript value passed to the decorator.
+ *
+ * @param typekit - The Typekit instance to use for creating types and values.
+ * @param decorators - The list of decorators and arguments to apply.
+ *
+ * @see {@link DecoratorArgs}
+ *
+ * @experimental
+ */
+export function decoratorApplication(typekit, decorators) {
+    return (decorators?.map((arg) => {
+        const [decorator, args] = Array.isArray(arg) ? [arg[0], arg.slice(1)] : [arg, []];
+        return {
+            decorator,
+            args: args.map((rawValue) => ({
+                value: typeof rawValue === "object" && rawValue !== null
+                    ? rawValue
+                    : typekit.literal.create(rawValue),
+                jsValue: rawValue,
+            })),
+        };
+    }) ?? []);
+}
+//# sourceMappingURL=utils.js.map
\ No newline at end of file
diff --git a/dist/src/experimental/typekit/utils.js.map b/dist/src/experimental/typekit/utils.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..4da05bc2231e2f02e0b428e55c7c394ddd3adea9
--- /dev/null
+++ b/dist/src/experimental/typekit/utils.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../../../src/experimental/typekit/utils.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,kBAAkB,EAAE,MAAM,qBAAqB,CAAC;AAGzD;;;;GAIG;AACH,MAAM,UAAU,OAAO,CAAO,GAAuB;IACnD,OAAO,kBAAkB,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC;AAC3C,CAAC;AAUD;;;;;;;;;;;;;;GAcG;AACH,MAAM,UAAU,oBAAoB,CAClC,OAAgB,EAChB,UAA4B;IAE5B,OAAO,CACL,UAAU,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE;QACtB,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;QAElF,OAAO;YACL,SAAS;YACT,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,QAAa,EAAE,EAAE,CAAC,CAAC;gBACjC,KAAK,EACH,OAAO,QAAQ,KAAK,QAAQ,IAAI,QAAQ,KAAK,IAAI;oBAC/C,CAAC,CAAC,QAAQ;oBACV,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC;gBACtC,OAAO,EAAE,QAAQ;aAClB,CAAC,CAAC;SACJ,CAAC;IACJ,CAAC,CAAC,IAAI,EAAE,CACT,CAAC;AACJ,CAAC"}
\ No newline at end of file
diff --git a/dist/src/lib/examples.js b/dist/src/lib/examples.js
index fd13772428752ce89558f958cd01b52d751c7518..22252282100987e6479602416f77865a4fdae71f 100644
--- a/dist/src/lib/examples.js
+++ b/dist/src/lib/examples.js
@@ -54,6 +54,13 @@ function resolveUnions(program, value, type) {
     const exactValueType = program.checker.getValueExactType(value);
     for (const variant of type.variants.values()) {
         if (ignoreDiagnostics(program.checker.isTypeAssignableTo(exactValueType ?? value.type, variant.type, value))) {
+            // If the variant is itself a union, recursively resolve it
+            if (variant.type.kind === "Union") {
+                const resolvedNested = resolveUnions(program, value, variant.type);
+                if (resolvedNested && resolvedNested !== variant.type) {
+                    return resolvedNested;
+                }
+            }
             return variant.type;
         }
     }
@@ -70,6 +77,11 @@ function serializeObjectValueAsJson(program, value, type) {
                 : propValue.name;
             obj[name] = serializeValueAsJson(program, propValue.value, definition);
         }
+        else if (type.kind === "Union") {
+            // If the type is still a union (meaning resolveUnions failed to resolve it to a specific variant),
+            // we should still serialize all the properties from the value
+            obj[propValue.name] = serializeValueAsJson(program, propValue.value, program.checker.anyType);
+        }
     }
     return obj;
 }
diff --git a/dist/src/lib/examples.js.map b/dist/src/lib/examples.js.map
index ef290b084db27397f6c8de9f198f90ef1a8384d4..cfe613948d3249d2a798a92dfe484a52e933917b 100644
--- a/dist/src/lib/examples.js.map
+++ b/dist/src/lib/examples.js.map
@@ -1 +1 @@
-{"version":3,"file":"examples.js","sourceRoot":"","sources":["../../../src/lib/examples.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"examples.js","sourceRoot":"","sources":["../../../src/lib/examples.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/lib/intrinsic-decorators.d.ts b/dist/src/lib/intrinsic-decorators.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..fd2dcb543e802347ad317814d6e24afb7f627974
--- /dev/null
+++ b/dist/src/lib/intrinsic-decorators.d.ts
@@ -0,0 +1,6 @@
+import type { Program } from "../core/program.js";
+import type { DecoratorContext, ModelIndexer, Scalar, Type } from "../core/types.js";
+export declare const namespace = "TypeSpec";
+export declare const $indexer: (context: DecoratorContext, target: Type, key: Scalar, value: Type) => void;
+export declare function getIndexer(program: Program, target: Type): ModelIndexer | undefined;
+//# sourceMappingURL=intrinsic-decorators.d.ts.map
\ No newline at end of file
diff --git a/dist/src/lib/intrinsic-decorators.d.ts.map b/dist/src/lib/intrinsic-decorators.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..e48dab44010e590a0ee438a993d8f01d78586768
--- /dev/null
+++ b/dist/src/lib/intrinsic-decorators.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"intrinsic-decorators.d.ts","sourceRoot":"","sources":["../../../src/lib/intrinsic-decorators.ts"],"names":[],"mappings":"AACA,OAAO,KAAK,EAAE,OAAO,EAAE,MAAM,oBAAoB,CAAC;AAClD,OAAO,KAAK,EAAE,gBAAgB,EAAE,YAAY,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,kBAAkB,CAAC;AAErF,eAAO,MAAM,SAAS,aAAa,CAAC;AAGpC,eAAO,MAAM,QAAQ,YAAa,gBAAgB,UAAU,IAAI,OAAO,MAAM,SAAS,IAAI,SAGzF,CAAC;AAEF,wBAAgB,UAAU,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,IAAI,GAAG,YAAY,GAAG,SAAS,CAEnF"}
\ No newline at end of file
diff --git a/dist/src/lib/intrinsic-decorators.js b/dist/src/lib/intrinsic-decorators.js
new file mode 100644
index 0000000000000000000000000000000000000000..c8b5976ace5c00cd501428e62b5e52e89261a892
--- /dev/null
+++ b/dist/src/lib/intrinsic-decorators.js
@@ -0,0 +1,17 @@
+import { setDocData } from "../core/intrinsic-type-state.js";
+export const namespace = "TypeSpec";
+const indexTypeKey = Symbol.for(`TypeSpec.index`);
+export const $indexer = (context, target, key, value) => {
+    const indexer = { key, value };
+    context.program.stateMap(indexTypeKey).set(target, indexer);
+};
+export function getIndexer(program, target) {
+    return program.stateMap(indexTypeKey).get(target);
+}
+/**
+ * @internal to be used to set the `@doc` from doc comment.
+ */
+export const $docFromComment = (context, target, key, text) => {
+    setDocData(context.program, target, key, { value: text, source: "comment" });
+};
+//# sourceMappingURL=intrinsic-decorators.js.map
\ No newline at end of file
diff --git a/dist/src/lib/intrinsic-decorators.js.map b/dist/src/lib/intrinsic-decorators.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..1f1a736f3d7d82ee0140d79005517411f5344827
--- /dev/null
+++ b/dist/src/lib/intrinsic-decorators.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"intrinsic-decorators.js","sourceRoot":"","sources":["../../../src/lib/intrinsic-decorators.ts"],"names":[],"mappings":"AAAA,OAAO,EAAa,UAAU,EAAE,MAAM,iCAAiC,CAAC;AAIxE,MAAM,CAAC,MAAM,SAAS,GAAG,UAAU,CAAC;AAEpC,MAAM,YAAY,GAAG,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;AAClD,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAC,OAAyB,EAAE,MAAY,EAAE,GAAW,EAAE,KAAW,EAAE,EAAE;IAC5F,MAAM,OAAO,GAAiB,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC;IAC7C,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;AAC9D,CAAC,CAAC;AAEF,MAAM,UAAU,UAAU,CAAC,OAAgB,EAAE,MAAY;IACvD,OAAO,OAAO,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;AACpD,CAAC;AAED;;GAEG;AACH,MAAM,CAAC,MAAM,eAAe,GAAG,CAC7B,OAAyB,EACzB,MAAY,EACZ,GAAc,EACd,IAAY,EACZ,EAAE;IACF,UAAU,CAAC,OAAO,CAAC,OAAO,EAAE,MAAM,EAAE,GAAG,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,CAAC,CAAC;AAC/E,CAAC,CAAC"}
\ No newline at end of file
diff --git a/dist/src/server/compile-service.d.ts b/dist/src/server/compile-service.d.ts
index ae502e7cd7e354d97a9bcffcc3cac14239e43468..efbb4df1164646d3bb414ab85046616d7c7811d0 100644
--- a/dist/src/server/compile-service.d.ts
+++ b/dist/src/server/compile-service.d.ts
@@ -7,7 +7,7 @@ import { FileService } from "./file-service.js";
 import { FileSystemCache } from "./file-system-cache.js";
 import { ServerCompileOptions } from "./server-compile-manager.js";
 import { CompileResult, ServerHost, ServerLog } from "./types.js";
-import { UpdateManger, UpdateType } from "./update-manager.js";
+import { UpdateManager, UpdateType } from "./update-manager.js";
 /**
  * Service managing compilation/caching of different TypeSpec projects
  */
@@ -41,7 +41,7 @@ export interface CompileServiceOptions {
     readonly fileService: FileService;
     readonly serverHost: ServerHost;
     readonly compilerHost: CompilerHost;
-    readonly updateManager: UpdateManger;
+    readonly updateManager: UpdateManager;
     readonly log: (log: ServerLog) => void;
     readonly clientConfigsProvider?: ClientConfigProvider;
 }
diff --git a/dist/src/server/compile-service.d.ts.map b/dist/src/server/compile-service.d.ts.map
index a4290d99cf3f0d758e6356600c04b289dc72b911..a4e3788e5881ebe517a066f7cc3aa21f7a038445 100644
--- a/dist/src/server/compile-service.d.ts.map
+++ b/dist/src/server/compile-service.d.ts.map
@@ -1 +1 @@
-{"version":3,"file":"compile-service.d.ts","sourceRoot":"","sources":["../../../src/server/compile-service.ts"],"names":[],"mappings":"AAAA,OAAO,EAA6B,sBAAsB,EAAE,MAAM,uBAAuB,CAAC;AAC1F,OAAO,EAAE,YAAY,EAAE,MAAM,oCAAoC,CAAC;AAYlE,OAAO,EAAE,eAAe,EAAE,MAAM,oBAAoB,CAAC;AAGrD,OAAO,KAAK,EAAE,YAAY,EAAE,kBAAkB,EAAE,MAAM,kBAAkB,CAAC;AAIzE,OAAO,EAAE,oBAAoB,EAAE,MAAM,6BAA6B,CAAC;AAGnE,OAAO,EAAE,WAAW,EAAE,MAAM,mBAAmB,CAAC;AAChD,OAAO,EAAE,eAAe,EAAE,MAAM,wBAAwB,CAAC;AACzD,OAAO,EAGL,oBAAoB,EACrB,MAAM,6BAA6B,CAAC;AACrC,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,SAAS,EAAE,MAAM,YAAY,CAAC;AAClE,OAAO,EAAE,YAAY,EAAE,UAAU,EAAE,MAAM,qBAAqB,CAAC;AAE/D;;GAEG;AACH,MAAM,WAAW,cAAc;IAC7B;;;;;;;;OAQG;IACH,OAAO,CACL,QAAQ,EAAE,YAAY,GAAG,sBAAsB,EAC/C,iBAAiB,EAAE,eAAe,GAAG,SAAS,EAC9C,oBAAoB,EAAE,oBAAoB,GACzC,OAAO,CAAC,aAAa,GAAG,SAAS,CAAC,CAAC;IAEtC;;;OAGG;IACH,SAAS,CAAC,QAAQ,EAAE,YAAY,GAAG,sBAAsB,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;IAExF;;;;OAIG;IACH,YAAY,CAAC,QAAQ,EAAE,YAAY,GAAG,sBAAsB,EAAE,UAAU,EAAE,UAAU,GAAG,IAAI,CAAC;IAE5F,EAAE,CAAC,KAAK,EAAE,YAAY,EAAE,QAAQ,EAAE,CAAC,MAAM,EAAE,aAAa,KAAK,IAAI,GAAG,IAAI,CAAC;IAEzE,sBAAsB,CAAC,IAAI,EAAE,MAAM,GAAG,OAAO,CAAC,MAAM,GAAG,SAAS,CAAC,CAAC;CACnE;AAED,MAAM,WAAW,qBAAqB;IACpC,QAAQ,CAAC,eAAe,EAAE,eAAe,CAAC;IAC1C,QAAQ,CAAC,WAAW,EAAE,WAAW,CAAC;IAClC,QAAQ,CAAC,UAAU,EAAE,UAAU,CAAC;IAChC,QAAQ,CAAC,YAAY,EAAE,YAAY,CAAC;IACpC,QAAQ,CAAC,aAAa,EAAE,YAAY,CAAC;IACrC,QAAQ,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,SAAS,KAAK,IAAI,CAAC;IACvC,QAAQ,CAAC,qBAAqB,CAAC,EAAE,oBAAoB,CAAC;CACvD;AAED,wBAAgB,oBAAoB,CAAC,EACnC,YAAY,EACZ,UAAU,EACV,WAAW,EACX,eAAe,EACf,aAAa,EACb,GAAG,EACH,qBAAqB,GACtB,EAAE,qBAAqB,GAAG,cAAc,CAgQxC"}
\ No newline at end of file
+{"version":3,"file":"compile-service.d.ts","sourceRoot":"","sources":["../../../src/server/compile-service.ts"],"names":[],"mappings":"AAAA,OAAO,EAA6B,sBAAsB,EAAE,MAAM,uBAAuB,CAAC;AAC1F,OAAO,EAAE,YAAY,EAAE,MAAM,oCAAoC,CAAC;AAYlE,OAAO,EAAE,eAAe,EAAE,MAAM,oBAAoB,CAAC;AAGrD,OAAO,KAAK,EAAE,YAAY,EAAE,kBAAkB,EAAE,MAAM,kBAAkB,CAAC;AAIzE,OAAO,EAAE,oBAAoB,EAAE,MAAM,6BAA6B,CAAC;AAGnE,OAAO,EAAE,WAAW,EAAE,MAAM,mBAAmB,CAAC;AAChD,OAAO,EAAE,eAAe,EAAE,MAAM,wBAAwB,CAAC;AACzD,OAAO,EAGL,oBAAoB,EACrB,MAAM,6BAA6B,CAAC;AACrC,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,SAAS,EAAE,MAAM,YAAY,CAAC;AAClE,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,MAAM,qBAAqB,CAAC;AAEhE;;GAEG;AACH,MAAM,WAAW,cAAc;IAC7B;;;;;;;;OAQG;IACH,OAAO,CACL,QAAQ,EAAE,YAAY,GAAG,sBAAsB,EAC/C,iBAAiB,EAAE,eAAe,GAAG,SAAS,EAC9C,oBAAoB,EAAE,oBAAoB,GACzC,OAAO,CAAC,aAAa,GAAG,SAAS,CAAC,CAAC;IAEtC;;;OAGG;IACH,SAAS,CAAC,QAAQ,EAAE,YAAY,GAAG,sBAAsB,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;IAExF;;;;OAIG;IACH,YAAY,CAAC,QAAQ,EAAE,YAAY,GAAG,sBAAsB,EAAE,UAAU,EAAE,UAAU,GAAG,IAAI,CAAC;IAE5F,EAAE,CAAC,KAAK,EAAE,YAAY,EAAE,QAAQ,EAAE,CAAC,MAAM,EAAE,aAAa,KAAK,IAAI,GAAG,IAAI,CAAC;IAEzE,sBAAsB,CAAC,IAAI,EAAE,MAAM,GAAG,OAAO,CAAC,MAAM,GAAG,SAAS,CAAC,CAAC;CACnE;AAED,MAAM,WAAW,qBAAqB;IACpC,QAAQ,CAAC,eAAe,EAAE,eAAe,CAAC;IAC1C,QAAQ,CAAC,WAAW,EAAE,WAAW,CAAC;IAClC,QAAQ,CAAC,UAAU,EAAE,UAAU,CAAC;IAChC,QAAQ,CAAC,YAAY,EAAE,YAAY,CAAC;IACpC,QAAQ,CAAC,aAAa,EAAE,aAAa,CAAC;IACtC,QAAQ,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,SAAS,KAAK,IAAI,CAAC;IACvC,QAAQ,CAAC,qBAAqB,CAAC,EAAE,oBAAoB,CAAC;CACvD;AAED,wBAAgB,oBAAoB,CAAC,EACnC,YAAY,EACZ,UAAU,EACV,WAAW,EACX,eAAe,EACf,aAAa,EACb,GAAG,EACH,qBAAqB,GACtB,EAAE,qBAAqB,GAAG,cAAc,CAgQxC"}
\ No newline at end of file
diff --git a/dist/src/server/emitter-provider.d.ts b/dist/src/server/emitter-provider.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..e9926786fa1e1622973262c998b9858609d4cd19
--- /dev/null
+++ b/dist/src/server/emitter-provider.d.ts
@@ -0,0 +1,22 @@
+import { NpmPackage, NpmPackageProvider } from "./npm-package-provider.js";
+export declare class EmitterProvider {
+    private npmPackageProvider;
+    private isEmitterPackageCache;
+    constructor(npmPackageProvider: NpmPackageProvider);
+    /**
+     *
+     * @param startFolder folder starts to search for package.json with emitters defined as dependencies
+     * @returns
+     */
+    listEmitters(startFolder: string): Promise<Record<string, NpmPackage>>;
+    /**
+     *
+     * @param startFolder folder starts to search for package.json with emitters defined as dependencies
+     * @param emitterName
+     * @returns
+     */
+    getEmitter(startFolder: string, emitterName: string): Promise<NpmPackage | undefined>;
+    private isEmitter;
+    private getEmitterFromDep;
+}
+//# sourceMappingURL=emitter-provider.d.ts.map
\ No newline at end of file
diff --git a/dist/src/server/emitter-provider.d.ts.map b/dist/src/server/emitter-provider.d.ts.map
new file mode 100644
index 0000000000000000000000000000000000000000..c708db29c29cb8a2ef38a951f3ac4975f7c3f725
--- /dev/null
+++ b/dist/src/server/emitter-provider.d.ts.map
@@ -0,0 +1 @@
+{"version":3,"file":"emitter-provider.d.ts","sourceRoot":"","sources":["../../../src/server/emitter-provider.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,UAAU,EAAE,kBAAkB,EAAE,MAAM,2BAA2B,CAAC;AAE3E,qBAAa,eAAe;IAEd,OAAO,CAAC,kBAAkB;IADtC,OAAO,CAAC,qBAAqB,CAA8B;gBACvC,kBAAkB,EAAE,kBAAkB;IAE1D;;;;OAIG;IACG,YAAY,CAAC,WAAW,EAAE,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;IAsB5E;;;;;OAKG;IACG,UAAU,CAAC,WAAW,EAAE,MAAM,EAAE,WAAW,EAAE,MAAM,GAAG,OAAO,CAAC,UAAU,GAAG,SAAS,CAAC;YAQ7E,SAAS;YAwBT,iBAAiB;CAQhC"}
\ No newline at end of file
diff --git a/dist/src/server/emitter-provider.js b/dist/src/server/emitter-provider.js
new file mode 100644
index 0000000000000000000000000000000000000000..8313fc52bf7906bd87c04c17015e56600add7d4c
--- /dev/null
+++ b/dist/src/server/emitter-provider.js
@@ -0,0 +1,79 @@
+import { joinPaths } from "../core/path-utils.js";
+export class EmitterProvider {
+    npmPackageProvider;
+    isEmitterPackageCache = new Map();
+    constructor(npmPackageProvider) {
+        this.npmPackageProvider = npmPackageProvider;
+    }
+    /**
+     *
+     * @param startFolder folder starts to search for package.json with emitters defined as dependencies
+     * @returns
+     */
+    async listEmitters(startFolder) {
+        const packageJsonFolder = await this.npmPackageProvider.getPackageJsonFolder(startFolder);
+        if (!packageJsonFolder)
+            return {};
+        const pkg = await this.npmPackageProvider.get(packageJsonFolder);
+        const data = await pkg?.getPackageJsonData();
+        if (!data)
+            return {};
+        const emitters = {};
+        const allDep = {
+            ...(data.dependencies ?? {}),
+            ...(data.devDependencies ?? {}),
+        };
+        for (const dep of Object.keys(allDep)) {
+            const depPkg = await this.getEmitterFromDep(packageJsonFolder, dep);
+            if (depPkg) {
+                emitters[dep] = depPkg;
+            }
+        }
+        return emitters;
+    }
+    /**
+     *
+     * @param startFolder folder starts to search for package.json with emitters defined as dependencies
+     * @param emitterName
+     * @returns
+     */
+    async getEmitter(startFolder, emitterName) {
+        const packageJsonFolder = await this.npmPackageProvider.getPackageJsonFolder(startFolder);
+        if (!packageJsonFolder) {
+            return undefined;
+        }
+        return this.getEmitterFromDep(packageJsonFolder, emitterName);
+    }
+    async isEmitter(depName, pkg) {
+        if (this.isEmitterPackageCache.has(depName)) {
+            return this.isEmitterPackageCache.get(depName);
+        }
+        const data = await pkg.getPackageJsonData();
+        // don't add to cache when failing to load package.json which is unexpected
+        if (!data)
+            return false;
+        if ((data.devDependencies && data.devDependencies["@typespec/compiler"]) ||
+            (data.dependencies && data.dependencies["@typespec/compiler"])) {
+            const exports = await pkg.getModuleExports();
+            // don't add to cache when failing to load exports which is unexpected
+            if (!exports)
+                return false;
+            const isEmitter = exports.$onEmit !== undefined;
+            this.isEmitterPackageCache.set(depName, isEmitter);
+            return isEmitter;
+        }
+        else {
+            this.isEmitterPackageCache.set(depName, false);
+            return false;
+        }
+    }
+    async getEmitterFromDep(packageJsonFolder, depName) {
+        const depFolder = joinPaths(packageJsonFolder, "node_modules", depName);
+        const depPkg = await this.npmPackageProvider.get(depFolder);
+        if (depPkg && (await this.isEmitter(depName, depPkg))) {
+            return depPkg;
+        }
+        return undefined;
+    }
+}
+//# sourceMappingURL=emitter-provider.js.map
\ No newline at end of file
diff --git a/dist/src/server/emitter-provider.js.map b/dist/src/server/emitter-provider.js.map
new file mode 100644
index 0000000000000000000000000000000000000000..75875938f4ae63986642a2bbbb4e83b34101dd9a
--- /dev/null
+++ b/dist/src/server/emitter-provider.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"emitter-provider.js","sourceRoot":"","sources":["../../../src/server/emitter-provider.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/server/server-compile-manager.d.ts b/dist/src/server/server-compile-manager.d.ts
index c03ef66c6b93b902ca4af132e3ae286d7f938b99..b2b0453f02a60bee8e1b2d9c7717d94eb9238e75 100644
--- a/dist/src/server/server-compile-manager.d.ts
+++ b/dist/src/server/server-compile-manager.d.ts
@@ -1,5 +1,5 @@
 import { CompilerHost, CompilerOptions, Program, ServerLog } from "../index.js";
-import { UpdateManger } from "./update-manager.js";
+import { UpdateManager } from "./update-manager.js";
 /**
  * core: linter and emitter will be set to [] when trigger compilation
  * full: compile as it is
@@ -26,7 +26,7 @@ export declare class ServerCompileManager {
     private trackerCache;
     private compileId;
     private logDebug;
-    constructor(updateManager: UpdateManger, compilerHost: CompilerHost, log: (log: ServerLog) => void);
+    constructor(updateManager: UpdateManager, compilerHost: CompilerHost, log: (log: ServerLog) => void);
     compile(mainFile: string, compileOptions: CompilerOptions | undefined, serverCompileOptions: ServerCompileOptions): Promise<CompileTracker>;
 }
 export declare class CompileTracker {
@@ -39,7 +39,7 @@ export declare class CompileTracker {
     private mode;
     private logs;
     private endTime;
-    static compile(id: number, updateManager: UpdateManger, host: CompilerHost, mainFile: string, options: CompilerOptions | undefined, mode: ServerCompileMode, oldProgram: Program | undefined, log: (msg: string) => void): CompileTracker;
+    static compile(id: number, updateManager: UpdateManager, host: CompilerHost, mainFile: string, options: CompilerOptions | undefined, mode: ServerCompileMode, oldProgram: Program | undefined, log: (msg: string) => void): CompileTracker;
     private constructor();
     getCompileId(): number;
     getEntryPoint(): string;
diff --git a/dist/src/server/server-compile-manager.d.ts.map b/dist/src/server/server-compile-manager.d.ts.map
index 8c92a14dcb96a4849b86ca49c1e6f87a94b45f71..5d625d3461665a5d9b6e06e91094554dcaba5881 100644
--- a/dist/src/server/server-compile-manager.d.ts.map
+++ b/dist/src/server/server-compile-manager.d.ts.map
@@ -1 +1 @@
-{"version":3,"file":"server-compile-manager.d.ts","sourceRoot":"","sources":["../../../src/server/server-compile-manager.ts"],"names":[],"mappings":"AACA,OAAO,EAEL,YAAY,EACZ,eAAe,EAGf,OAAO,EACP,SAAS,EACV,MAAM,aAAa,CAAC;AAGrB,OAAO,EAAE,YAAY,EAAE,MAAM,qBAAqB,CAAC;AAEnD;;;GAGG;AACH,MAAM,MAAM,iBAAiB,GAAG,MAAM,GAAG,MAAM,CAAC;AAEhD,MAAM,WAAW,oBAAoB;IACnC,SAAS,CAAC,EAAE,OAAO,CAAC;IACpB,uBAAuB,CAAC,EAAE,OAAO,CAAC;IAClC,qHAAqH;IACrH,IAAI,EAAE,iBAAiB,CAAC;IACxB,oIAAoI;IACpI,WAAW,CAAC,EAAE,MAAM,OAAO,CAAC;CAC7B;AAED;;;;;GAKG;AACH,qBAAa,oBAAoB;IAO7B,OAAO,CAAC,aAAa;IACrB,OAAO,CAAC,YAAY;IACpB,OAAO,CAAC,GAAG;IAPb,OAAO,CAAC,YAAY,CAAiD;IACrE,OAAO,CAAC,SAAS,CAAK;IACtB,OAAO,CAAC,QAAQ,CAAwB;gBAG9B,aAAa,EAAE,YAAY,EAC3B,YAAY,EAAE,YAAY,EAC1B,GAAG,EAAE,CAAC,GAAG,EAAE,SAAS,KAAK,IAAI;IASjC,OAAO,CACX,QAAQ,EAAE,MAAM,EAChB,cAAc,EAAE,eAAe,YAAK,EACpC,oBAAoB,EAAE,oBAAoB,GACzC,OAAO,CAAC,cAAc,CAAC;CAwD3B;AAuID,qBAAa,cAAc;IAqDvB,OAAO,CAAC,EAAE;IACV,OAAO,CAAC,aAAa;IACrB,OAAO,CAAC,UAAU;IAClB,OAAO,CAAC,oBAAoB;IAC5B,OAAO,CAAC,OAAO;IACf,OAAO,CAAC,SAAS;IACjB,OAAO,CAAC,IAAI;IACZ,OAAO,CAAC,IAAI;IA3Dd,OAAO,CAAC,OAAO,CAAmB;IAElC,MAAM,CAAC,OAAO,CACZ,EAAE,EAAE,MAAM,EACV,aAAa,EAAE,YAAY,EAC3B,IAAI,EAAE,YAAY,EAClB,QAAQ,EAAE,MAAM,EAChB,OAAO,EAAE,eAAe,YAAK,EAC7B,IAAI,EAAE,iBAAiB,EACvB,UAAU,EAAE,OAAO,GAAG,SAAS,EAC/B,GAAG,EAAE,CAAC,GAAG,EAAE,MAAM,KAAK,IAAI;IAyC5B,OAAO;IA4BP,YAAY;IAIZ,aAAa;IAIP,gBAAgB;IAItB,UAAU;IAIV,YAAY,IAAI,IAAI;IAIpB,UAAU,IAAI,IAAI,GAAG,SAAS;IAI9B,WAAW,IAAI,OAAO;IAItB,UAAU,IAAI,OAAO;IAIrB,OAAO,IAAI,iBAAiB;IAI5B,OAAO,IAAI,SAAS,EAAE;CAGvB"}
\ No newline at end of file
+{"version":3,"file":"server-compile-manager.d.ts","sourceRoot":"","sources":["../../../src/server/server-compile-manager.ts"],"names":[],"mappings":"AACA,OAAO,EAEL,YAAY,EACZ,eAAe,EAGf,OAAO,EACP,SAAS,EACV,MAAM,aAAa,CAAC;AAGrB,OAAO,EAAE,aAAa,EAAE,MAAM,qBAAqB,CAAC;AAEpD;;;GAGG;AACH,MAAM,MAAM,iBAAiB,GAAG,MAAM,GAAG,MAAM,CAAC;AAEhD,MAAM,WAAW,oBAAoB;IACnC,SAAS,CAAC,EAAE,OAAO,CAAC;IACpB,uBAAuB,CAAC,EAAE,OAAO,CAAC;IAClC,qHAAqH;IACrH,IAAI,EAAE,iBAAiB,CAAC;IACxB,oIAAoI;IACpI,WAAW,CAAC,EAAE,MAAM,OAAO,CAAC;CAC7B;AAED;;;;;GAKG;AACH,qBAAa,oBAAoB;IAO7B,OAAO,CAAC,aAAa;IACrB,OAAO,CAAC,YAAY;IACpB,OAAO,CAAC,GAAG;IAPb,OAAO,CAAC,YAAY,CAAiD;IACrE,OAAO,CAAC,SAAS,CAAK;IACtB,OAAO,CAAC,QAAQ,CAAwB;gBAG9B,aAAa,EAAE,aAAa,EAC5B,YAAY,EAAE,YAAY,EAC1B,GAAG,EAAE,CAAC,GAAG,EAAE,SAAS,KAAK,IAAI;IASjC,OAAO,CACX,QAAQ,EAAE,MAAM,EAChB,cAAc,EAAE,eAAe,YAAK,EACpC,oBAAoB,EAAE,oBAAoB,GACzC,OAAO,CAAC,cAAc,CAAC;CAwD3B;AAuID,qBAAa,cAAc;IAqDvB,OAAO,CAAC,EAAE;IACV,OAAO,CAAC,aAAa;IACrB,OAAO,CAAC,UAAU;IAClB,OAAO,CAAC,oBAAoB;IAC5B,OAAO,CAAC,OAAO;IACf,OAAO,CAAC,SAAS;IACjB,OAAO,CAAC,IAAI;IACZ,OAAO,CAAC,IAAI;IA3Dd,OAAO,CAAC,OAAO,CAAmB;IAElC,MAAM,CAAC,OAAO,CACZ,EAAE,EAAE,MAAM,EACV,aAAa,EAAE,aAAa,EAC5B,IAAI,EAAE,YAAY,EAClB,QAAQ,EAAE,MAAM,EAChB,OAAO,EAAE,eAAe,YAAK,EAC7B,IAAI,EAAE,iBAAiB,EACvB,UAAU,EAAE,OAAO,GAAG,SAAS,EAC/B,GAAG,EAAE,CAAC,GAAG,EAAE,MAAM,KAAK,IAAI;IAyC5B,OAAO;IA4BP,YAAY;IAIZ,aAAa;IAIP,gBAAgB;IAItB,UAAU;IAIV,YAAY,IAAI,IAAI;IAIpB,UAAU,IAAI,IAAI,GAAG,SAAS;IAI9B,WAAW,IAAI,OAAO;IAItB,UAAU,IAAI,OAAO;IAIrB,OAAO,IAAI,iBAAiB;IAI5B,OAAO,IAAI,SAAS,EAAE;CAGvB"}
\ No newline at end of file
diff --git a/dist/src/server/server-compile-manager.js.map b/dist/src/server/server-compile-manager.js.map
index 0342f3f4bcc360bbb0af99fca845ca0be54098b6..6c361756825f11a8d410bdb9fe7621862af16446 100644
--- a/dist/src/server/server-compile-manager.js.map
+++ b/dist/src/server/server-compile-manager.js.map
@@ -1 +1 @@
-{"version":3,"file":"server-compile-manager.js","sourceRoot":"","sources":["../../../src/server/server-compile-manager.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"server-compile-manager.js","sourceRoot":"","sources":["../../../src/server/server-compile-manager.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,MAAM,yBAAyB,CAAC;AACpD,OAAO,EACL,OAAO,IAAI,cAAc,EAGzB,aAAa,GAId,MAAM,aAAa,CAAC;AACrB,OAAO,EAAE,6BAA6B,EAAE,MAAM,gBAAgB,CAAC;AAC/D,OAAO,EAAE,eAAe,EAAE,MAAM,+BAA+B,CAAC;AAkBhE;;;;;GAKG;AACH,MAAM,OAAO,oBAAoB;IAOrB;IACA;IACA;IARV,6BAA6B;IACrB,YAAY,GAAG,IAAI,YAAY,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;IAC7D,SAAS,GAAG,CAAC,CAAC;IACd,QAAQ,CAAwB;IAExC,YACU,aAA4B,EAC5B,YAA0B,EAC1B,GAA6B;QAF7B,kBAAa,GAAb,aAAa,CAAe;QAC5B,iBAAY,GAAZ,YAAY,CAAc;QAC1B,QAAG,GAAH,GAAG,CAA0B;QAErC,IAAI,CAAC,QAAQ;YACX,OAAO,OAAO,KAAK,WAAW;gBAC9B,OAAO,EAAE,GAAG,EAAE,CAAC,6BAA6B,CAAC,EAAE,WAAW,EAAE,KAAK,MAAM;gBACrE,CAAC,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC;gBACrD,CAAC,CAAC,GAAG,EAAE,GAAE,CAAC,CAAC;IACjB,CAAC;IAED,KAAK,CAAC,OAAO,CACX,QAAgB,EAChB,iBAAkC,EAAE,EACpC,oBAA0C;QAE1C,IAAI,KAAK,GAAG,SAAS,CAAC;QACtB,MAAM,KAAK,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QAC/B,MAAM,GAAG,GAAG,IAAI,KAAK,EAAE,CAAC;QACxB,MAAM,KAAK,GAAG,GAAG,CAAC,KAAK,EAAE,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;QAC3C,gGAAgG;QAChG,MAAM,UAAU,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAChD,IAAI,CAAC,QAAQ,CACX,mBAAmB,KAAK,wBAAwB,IAAI,CAAC,aAAa,CAAC,iBAAiB,UAAU,oBAAoB,CAAC,IAAI,cAAc,QAAQ,WAAW,UAAU,EAAE,CACrK,CAAC;QACF,IAAI,CAAC,oBAAoB,CAAC,SAAS,EAAE,CAAC;YACpC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAC3B,QAAQ,EACR,cAAc,EACd,KAAK,CAAC,gBAAgB,EACtB,oBAAoB,CAAC,IAAI,CAC1B,CAAC;YACF,IAAI,KAAK,IAAI,KAAK,CAAC,UAAU,EAAE,EAAE,CAAC;gBAChC,IAAI,CAAC,QAAQ,CACX,mBAAmB,KAAK,sBAAsB,KAAK,CAAC,YAAY,EAAE,IAAI,KAAK,CAAC,OAAO,EAAE,GAAG,CACzF,CAAC;gBACF,OAAO,KAAK,CAAC;YACf,CAAC;iBAAM,CAAC;gBACN,IAAI,CAAC,QAAQ,CACX,mBAAmB,KAAK,wBAAwB,KAAK,CAAC,CAAC,CAAC,8BAA8B,KAAK,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC,CAAC,oBAAoB,EAAE,CACpI,CAAC;YACJ,CAAC;QACH,CAAC;QACD,IAAI,UAAU,GAAG,SAAS,CAAC;QAC3B,IAAI,CAAC,oBAAoB,CAAC,uBAAuB,EAAE,CAAC;YAClD,MAAM,gBAAgB,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAC5C,QAAQ,EACR,cAAc,EACd,IAAI,CAAC,kBAAkB,EACvB,oBAAoB,CAAC,IAAI,CAC1B,CAAC;YACF,UAAU,GAAG,MAAM,gBAAgB,EAAE,gBAAgB,EAAE,CAAC;YACxD,IAAI,CAAC,QAAQ,CACX,mBAAmB,KAAK,iCAAiC,UAAU,CAAC,CAAC,CAAC,SAAS,gBAAgB,EAAE,YAAY,EAAE,IAAI,WAAW,EAAE,CAAC,CAAC,CAAC,KAAK,EAAE,CAC3I,CAAC;QACJ,CAAC;QAED,MAAM,OAAO,GAAG,cAAc,CAAC,OAAO,CACpC,KAAK,EACL,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,YAAY,EACjB,QAAQ,EACR,cAAc,EACd,oBAAoB,CAAC,IAAI,EACzB,UAAU,EACV,CAAC,GAAG,EAAE,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAC5B,CAAC;QACF,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,QAAQ,EAAE,cAAc,EAAE,OAAO,CAAC,CAAC;QAEzD,OAAO,OAAO,CAAC;IACjB,CAAC;CACF;AAED,MAAM,YAAY;IAII;IAHZ,SAAS,CAAuB;IAChC,SAAS,CAAuB;IAExC,YAAoB,GAA0B;QAA1B,QAAG,GAAH,GAAG,CAAuB;QAC5C,IAAI,CAAC,SAAS,GAAG,IAAI,oBAAoB,CAAC,GAAG,CAAC,CAAC;QAC/C,IAAI,CAAC,SAAS,GAAG,IAAI,oBAAoB,CAAC,GAAG,CAAC,CAAC;IACjD,CAAC;IAED,GAAG,CACD,UAAkB,EAClB,aAA8B,EAC9B,aAAsB,EACtB,IAAuB;QAEvB,QAAQ,IAAI,EAAE,CAAC;YACb,KAAK,MAAM;gBACT,mEAAmE;gBACnE,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,EAAE,aAAa,EAAE,aAAa,CAAC,CAAC;gBAC1E,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,EAAE,aAAa,EAAE,aAAa,CAAC,CAAC;gBAC1E,yGAAyG;gBACzG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC,WAAW,EAAE,EAAE,CAAC;oBACvC,IAAI,IAAI,CAAC,UAAU,EAAE,GAAG,IAAI,CAAC,UAAU,EAAE,EAAE,CAAC;wBAC1C,IAAI,CAAC,GAAG,CACN,6CAA6C,IAAI,CAAC,UAAU,EAAE,8BAA8B,IAAI,CAAC,UAAU,EAAE,GAAG,CACjH,CAAC;wBACF,OAAO,IAAI,CAAC;oBACd,CAAC;yBAAM,CAAC;wBACN,OAAO,IAAI,CAAC;oBACd,CAAC;gBACH,CAAC;qBAAM,IAAI,IAAI,EAAE,CAAC;oBAChB,OAAO,IAAI,CAAC;gBACd,CAAC;qBAAM,IAAI,IAAI,IAAI,IAAI,CAAC,WAAW,EAAE,EAAE,CAAC;oBACtC,IAAI,CAAC,GAAG,CACN,6CAA6C,IAAI,CAAC,UAAU,EAAE,wCAAwC,CACvG,CAAC;oBACF,OAAO,IAAI,CAAC;gBACd,CAAC;qBAAM,CAAC;oBACN,OAAO,SAAS,CAAC;gBACnB,CAAC;YACH,KAAK,MAAM;gBACT,OAAO,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,EAAE,aAAa,EAAE,aAAa,CAAC,CAAC;YACtE;gBACE,sFAAsF;gBACtF,IAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,aAAa,EAAE,CAAC;oBAC3C,MAAM,IAAI,KAAK,CAAC,4BAA4B,IAAI,EAAE,CAAC,CAAC;gBACtD,CAAC;gBACD,OAAO,SAAS,CAAC;QACrB,CAAC;IACH,CAAC;IAED,GAAG,CAAC,UAAkB,EAAE,aAA8B,EAAE,OAAuB;QAC7E,MAAM,IAAI,GAAG,OAAO,CAAC,OAAO,EAAE,CAAC;QAC/B,QAAQ,IAAI,EAAE,CAAC;YACb,KAAK,MAAM;gBACT,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,EAAE,aAAa,EAAE,OAAO,CAAC,CAAC;gBACvD,MAAM;YACR,KAAK,MAAM;gBACT,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,EAAE,aAAa,EAAE,OAAO,CAAC,CAAC;gBACvD,MAAM;YACR;gBACE,IAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,aAAa,EAAE,CAAC;oBAC3C,MAAM,IAAI,KAAK,CAAC,4BAA4B,IAAI,EAAE,CAAC,CAAC;gBACtD,CAAC;gBACD,OAAO,SAAS,CAAC;QACrB,CAAC;IACH,CAAC;CACF;AAED,MAAM,oBAAoB;IAKJ;IAJZ,WAAW,GAAG,IAAI,GAAG,EAA0B,CAAC;IACxD,0HAA0H;IAClH,cAAc,GAAG,IAAI,GAAG,EAA0B,CAAC;IAE3D,YAAoB,GAA0B;QAA1B,QAAG,GAAH,GAAG,CAAuB;IAAG,CAAC;IAE1C,WAAW,CAAC,UAAkB,EAAE,aAA8B;QACpE,MAAM,oBAAoB,GAAG,aAAa,CAAC,UAAU,CAAC,CAAC;QACvD,MAAM,iBAAiB,GAAoB;YACzC,GAAG,aAAa;YAChB,SAAS,EAAE,SAAS;SACrB,CAAC;QAEF,OAAO,GAAG,oBAAoB,KAAK,iBAAiB,EAAE,CAAC;IACzD,CAAC;IAED,2CAA2C;IAC3C,GAAG,CACD,UAAkB,EAClB,aAA8B;IAC9B;;OAEG;IACH,aAAsB;QAEtB,MAAM,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,aAAa,CAAC,CAAC;QACxD,MAAM,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,6GAA6G;QAC7G,IAAI,CAAC,aAAa,IAAI,CAAC,OAAO,EAAE,CAAC;YAC/B,OAAO,OAAO,CAAC;QACjB,CAAC;QACD,IAAI,OAAO,CAAC,WAAW,EAAE,KAAK,IAAI,EAAE,CAAC;YACnC,OAAO,OAAO,CAAC;QACjB,CAAC;QACD,OAAO,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IACtC,CAAC;IAED,GAAG,CAAC,UAAkB,EAAE,aAA8B,EAAE,OAAuB;QAC7E,MAAM,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,aAAa,CAAC,CAAC;QACxD,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;QACnC,MAAM,UAAU,GAAG,GAAG,EAAE;YACtB,MAAM,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACzC,IAAI,CAAC,GAAG,IAAI,GAAG,CAAC,UAAU,EAAE,GAAG,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC;gBACpD,sIAAsI;gBACtI,oIAAoI;gBACpI,0DAA0D;gBAC1D,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;gBACtC,IAAI,CAAC,GAAG,CACN,mBAAmB,OAAO,CAAC,YAAY,EAAE,+BAA+B,GAAG,EAAE,UAAU,EAAE,IAAI,KAAK,OAAO,OAAO,CAAC,UAAU,EAAE,IAAI,CAClI,CAAC;YACJ,CAAC;QACH,CAAC,CAAC;QACF,OAAO,CAAC,gBAAgB,EAAE,CAAC,IAAI,CAC7B,GAAG,EAAE;YACH,UAAU,EAAE,CAAC;QACf,CAAC,EACD,CAAC,GAAG,EAAE,EAAE;YACN,UAAU,EAAE,CAAC;QACf,CAAC,CACF,CAAC;IACJ,CAAC;CACF;AAED,MAAM,OAAO,cAAc;IAqDf;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IA3DF,OAAO,CAAmB;IAElC,MAAM,CAAC,OAAO,CACZ,EAAU,EACV,aAA4B,EAC5B,IAAkB,EAClB,QAAgB,EAChB,UAA2B,EAAE,EAC7B,IAAuB,EACvB,UAA+B,EAC/B,GAA0B;QAE1B,MAAM,KAAK,GAAgB,EAAE,CAAC;QAC9B,sFAAsF;QACtF,2CAA2C;QAC3C,6FAA6F;QAC7F,4FAA4F;QAC5F,MAAM,MAAM,GAAiB;YAC3B,GAAG,IAAI;YACP,OAAO,EAAE;gBACP,GAAG,EAAE,CAAC,GAAiB,EAAE,EAAE;oBACzB,MAAM,GAAG,GAAG,SAAS,CAAC,GAAG,EAAE,EAAE,eAAe,EAAE,IAAI,EAAE,CAAC,CAAC;oBACtD,MAAM,IAAI,GAAc;wBACtB,KAAK,EAAE,GAAG,CAAC,KAAK;wBAChB,OAAO,EAAE,GAAG;qBACb,CAAC;oBACF,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBACnB,CAAC;gBACD,WAAW,EAAE,CAAC,OAAO,EAAE,YAAY,EAAE,MAAM,EAAE,EAAE,CAC7C,eAAe,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,OAAO,EAAE,YAAY,EAAE,MAAM,CAAC;aAC3E;SACF,CAAC;QACF,MAAM,QAAQ,GACZ,IAAI,KAAK,MAAM;YACb,CAAC,CAAC;gBACE,GAAG,OAAO;gBACV,IAAI,EAAE,EAAE;gBACR,aAAa,EAAE,SAAS;aACzB;YACH,CAAC,CAAC;gBACE,GAAG,OAAO;aACX,CAAC;QACR,MAAM,OAAO,GAAG,aAAa,CAAC,iBAAiB,CAAC;QAChD,MAAM,SAAS,GAAG,IAAI,IAAI,EAAE,CAAC;QAC7B,MAAM,CAAC,GAAG,cAAc,CAAC,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,UAAU,CAAC,CAAC;QACjE,GAAG,CACD,mBAAmB,EAAE,0BAA0B,SAAS,CAAC,WAAW,EAAE,eAAe,OAAO,gBAAgB,QAAQ,YAAY,IAAI,EAAE,CACvI,CAAC;QACF,OAAO,IAAI,cAAc,CAAC,EAAE,EAAE,aAAa,EAAE,QAAQ,EAAE,CAAC,EAAE,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,CAAC,CAAC;IAClG,CAAC;IAED,YACU,EAAU,EACV,aAA4B,EAC5B,UAAkB,EAClB,oBAAsC,EACtC,OAAe,EACf,SAAe,EACf,IAAuB,EACvB,IAAiB,EACzB,GAA0B;QARlB,OAAE,GAAF,EAAE,CAAQ;QACV,kBAAa,GAAb,aAAa,CAAe;QAC5B,eAAU,GAAV,UAAU,CAAQ;QAClB,yBAAoB,GAApB,oBAAoB,CAAkB;QACtC,YAAO,GAAP,OAAO,CAAQ;QACf,cAAS,GAAT,SAAS,CAAM;QACf,SAAI,GAAJ,IAAI,CAAmB;QACvB,SAAI,GAAJ,IAAI,CAAa;QAGzB,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAC3B,MAAM,UAAU,GAAG,GAAG,EAAE;YACtB,IAAI,CAAC,OAAO,GAAG,IAAI,IAAI,EAAE,CAAC;YAC1B,GAAG,CACD,mBAAmB,IAAI,CAAC,YAAY,EAAE,6BAA6B,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,gBAAgB,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,IAAI,CACnK,CAAC;QACJ,CAAC,CAAC;QACF,oBAAoB,CAAC,IAAI,CACvB,CAAC,CAAC,EAAE,EAAE;YACJ,UAAU,EAAE,CAAC;QACf,CAAC,EACD,CAAC,GAAG,EAAE,EAAE;YACN,UAAU,EAAE,CAAC;QACf,CAAC,CACF,CAAC;IACJ,CAAC;IAED,YAAY;QACV,OAAO,IAAI,CAAC,EAAE,CAAC;IACjB,CAAC;IAED,aAAa;QACX,OAAO,IAAI,CAAC,UAAU,CAAC;IACzB,CAAC;IAED,KAAK,CAAC,gBAAgB;QACpB,OAAO,MAAM,IAAI,CAAC,oBAAoB,CAAC;IACzC,CAAC;IAED,UAAU;QACR,OAAO,IAAI,CAAC,OAAO,CAAC;IACtB,CAAC;IAED,YAAY;QACV,OAAO,IAAI,CAAC,SAAS,CAAC;IACxB,CAAC;IAED,UAAU;QACR,OAAO,IAAI,CAAC,OAAO,CAAC;IACtB,CAAC;IAED,WAAW;QACT,OAAO,IAAI,CAAC,OAAO,KAAK,SAAS,CAAC;IACpC,CAAC;IAED,UAAU;QACR,OAAO,IAAI,CAAC,OAAO,KAAK,IAAI,CAAC,aAAa,CAAC,iBAAiB,CAAC;IAC/D,CAAC;IAED,OAAO;QACL,OAAO,IAAI,CAAC,IAAI,CAAC;IACnB,CAAC;IAED,OAAO;QACL,OAAO,IAAI,CAAC,IAAI,CAAC;IACnB,CAAC;CACF"}
\ No newline at end of file
diff --git a/dist/src/server/serverlib.d.ts.map b/dist/src/server/serverlib.d.ts.map
index 1508abb1391b8bac23c5da2f7f0a79ef635db54f..d6e38daa27208d1f0a2680f65e6be52e8a09ae4a 100644
--- a/dist/src/server/serverlib.d.ts.map
+++ b/dist/src/server/serverlib.d.ts.map
@@ -1 +1 @@
-{"version":3,"file":"serverlib.d.ts","sourceRoot":"","sources":["../../../src/server/serverlib.ts"],"names":[],"mappings":"AAuGA,OAAO,EAAE,oBAAoB,EAAE,MAAM,6BAA6B,CAAC;AAkBnE,OAAO,EAML,MAAM,EAGN,UAAU,EAKX,MAAM,YAAY,CAAC;AAGpB,wBAAgB,YAAY,CAC1B,IAAI,EAAE,UAAU,EAChB,qBAAqB,CAAC,EAAE,oBAAoB,GAC3C,MAAM,CA4zCR"}
\ No newline at end of file
+{"version":3,"file":"serverlib.d.ts","sourceRoot":"","sources":["../../../src/server/serverlib.ts"],"names":[],"mappings":"AAuGA,OAAO,EAAE,oBAAoB,EAAE,MAAM,6BAA6B,CAAC;AAkBnE,OAAO,EAML,MAAM,EAGN,UAAU,EAKX,MAAM,YAAY,CAAC;AAGpB,wBAAgB,YAAY,CAC1B,IAAI,EAAE,UAAU,EAChB,qBAAqB,CAAC,EAAE,oBAAoB,GAC3C,MAAM,CA+zCR"}
\ No newline at end of file
diff --git a/dist/src/server/serverlib.js b/dist/src/server/serverlib.js
index 0ccc126300b9abc6c74db75fc3cd8b0865568aa5..0596563cbccf0264142f3d0beda54b1cf8ced756 100644
--- a/dist/src/server/serverlib.js
+++ b/dist/src/server/serverlib.js
@@ -35,7 +35,7 @@ import { getSymbolStructure } from "./symbol-structure.js";
 import { provideTspconfigCompletionItems } from "./tspconfig/completion.js";
 import { getParameterDocumentation, getSymbolDetails, getTemplateParameterDocumentation, } from "./type-details.js";
 import { SemanticTokenKind, } from "./types.js";
-import { UpdateManger } from "./update-manager.js";
+import { UpdateManager } from "./update-manager.js";
 export function createServer(host, clientConfigsProvider) {
     const fileService = createFileService({ serverHost: host });
     // Cache all file I/O. Only open documents are sent over the LSP pipe. When
@@ -50,7 +50,7 @@ export function createServer(host, clientConfigsProvider) {
     const npmPackageProvider = new NpmPackageProvider(compilerHost);
     const emitterProvider = new LibraryProvider(npmPackageProvider, (exports) => exports.$onEmit !== undefined);
     const linterProvider = new LibraryProvider(npmPackageProvider, (exports) => exports.$linter !== undefined);
-    const updateManager = new UpdateManger(log);
+    const updateManager = new UpdateManager(log);
     const compileService = createCompileService({
         fileService,
         fileSystemCache,
@@ -874,11 +874,14 @@ export function createServer(host, clientConfigsProvider) {
         };
         const resolved = await resolveModule(host, importPath, {
             baseDir: getDirectoryPath(currentFile.file.path),
+            directoryIndexFiles: ["main.tsp", "index.mjs", "index.js"],
             resolveMain(pkg) {
                 // this lets us follow node resolve semantics more-or-less exactly
                 // but using tspMain instead of main.
                 return resolveTspMain(pkg) ?? pkg.main;
             },
+            conditions: ["typespec"],
+            fallbackOnMissingCondition: true,
         });
         return {
             uri: fileService.getURL(resolved.type === "file" ? resolved.path : resolved.mainFile),
diff --git a/dist/src/server/serverlib.js.map b/dist/src/server/serverlib.js.map
index fc6c4a775cc9c4e5a9044a7147b5beb4c7004ee5..821e485a2d5dfb74e667cdd650cfbf0f44adab2d 100644
--- a/dist/src/server/serverlib.js.map
+++ b/dist/src/server/serverlib.js.map
@@ -1 +1 @@
-{"version":3,"file":"serverlib.js","sourceRoot":"","sources":["../../../src/server/serverlib.ts"],"names":[],"mappings":"AACA,OAAO,EACL,UAAU,EACV,cAAc,EAEd,cAAc,EAId,kBAAkB,EAClB,aAAa,EAIb,qBAAqB,EAKrB,cAAc,EAUd,UAAU,EAGV,KAAK,EAKL,qBAAqB,EASrB,oBAAoB,EACpB,QAAQ,GAIT,MAAM,+BAA+B,CAAC;AACvC,OAAO,EAAE,UAAU,EAAE,MAAM,mBAAmB,CAAC;AAE/C,OAAO,EAAE,cAAc,EAAE,MAAM,uBAAuB,CAAC;AACvD,OAAO,EAAE,cAAc,EAAE,iBAAiB,EAAE,MAAM,wBAAwB,CAAC;AAC3E,OAAO,EAAE,cAAc,EAAE,MAAM,sBAAsB,CAAC;AACtD,OAAO,EAAE,aAAa,EAAE,WAAW,EAAE,MAAM,oCAAoC,CAAC;AAChF,OAAO,EAAE,yCAAyC,EAAE,MAAM,wDAAwD,CAAC;AACnH,OAAO,EAAE,6BAA6B,EAAE,MAAM,2CAA2C,CAAC;AAC1F,OAAO,EAAE,wBAAwB,EAAE,MAAM,mBAAmB,CAAC;AAC7D,OAAO,EAAE,SAAS,EAAE,MAAM,yBAAyB,CAAC;AAEpD,OAAO,EAAE,uBAAuB,EAAE,MAAM,yBAAyB,CAAC;AAClE,OAAO,EAAE,iBAAiB,EAAE,uBAAuB,EAAE,aAAa,EAAE,MAAM,mBAAmB,CAAC;AAC9F,OAAO,EACL,gCAAgC,EAChC,gBAAgB,EAChB,SAAS,EACT,aAAa,EACb,WAAW,GACZ,MAAM,uBAAuB,CAAC;AAE/B,OAAO,EAAE,UAAU,EAAE,cAAc,EAAE,MAAM,oBAAoB,CAAC;AAChE,OAAO,EAAE,gBAAgB,EAAE,wBAAwB,EAAE,MAAM,wBAAwB,CAAC;AACpF,OAAO,EAUL,QAAQ,EAIR,UAAU,GAIX,MAAM,kBAAkB,CAAC;AAC1B,OAAO,EAAE,wBAAwB,EAAE,MAAM,2BAA2B,CAAC;AACrE,OAAO,EAAE,2BAA2B,EAAE,MAAM,mCAAmC,CAAC;AAEhF,OAAO,EAAE,kBAAkB,EAAE,MAAM,qBAAqB,CAAC;AACzD,OAAO,EAAE,eAAe,EAAE,MAAM,gBAAgB,CAAC;AACjD,OAAO,EAAE,aAAa,EAAqB,MAAM,6BAA6B,CAAC;AAC/E,OAAO,EAAE,iBAAiB,EAAE,MAAM,sBAAsB,CAAC;AACzD,OAAO,EAAE,qBAAqB,EAAE,cAAc,EAAE,MAAM,kBAAkB,CAAC;AACzE,OAAO,EAAE,iBAAiB,EAAE,MAAM,eAAe,CAAC;AAElD,OAAO,EAAE,oBAAoB,EAAE,MAAM,sBAAsB,CAAC;AAC5D,OAAO,EAAE,iBAAiB,EAAE,MAAM,iBAAiB,CAAC;AACpD,OAAO,EAAE,QAAQ,EAAE,MAAM,gBAAgB,CAAC;AAC1C,OAAO,EAAE,sBAAsB,EAAE,MAAM,kBAAkB,CAAC;AAC1D,OAAO,EAAE,iBAAiB,EAAE,MAAM,mBAAmB,CAAC;AACtD,OAAO,EAAE,qBAAqB,EAAE,MAAM,wBAAwB,CAAC;AAC/D,OAAO,EAAE,eAAe,EAAE,MAAM,mBAAmB,CAAC;AACpD,OAAO,EAAE,kBAAkB,EAAE,MAAM,2BAA2B,CAAC;AAC/D,OAAO,EAAE,mBAAmB,EAAE,qBAAqB,EAAE,MAAM,kBAAkB,CAAC;AAE9E,OAAO,EAAE,kBAAkB,EAAE,MAAM,uBAAuB,CAAC;AAC3D,OAAO,EAAE,+BAA+B,EAAE,MAAM,2BAA2B,CAAC;AAC5E,OAAO,EACL,yBAAyB,EACzB,gBAAgB,EAChB,iCAAiC,GAClC,MAAM,mBAAmB,CAAC;AAC3B,OAAO,EAKL,iBAAiB,GASlB,MAAM,YAAY,CAAC;AACpB,OAAO,EAAE,YAAY,EAAE,MAAM,qBAAqB,CAAC;AAEnD,MAAM,UAAU,YAAY,CAC1B,IAAgB,EAChB,qBAA4C;IAE5C,MAAM,WAAW,GAAG,iBAAiB,CAAC,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC;IAE5D,2EAA2E;IAC3E,wEAAwE;IACxE,2EAA2E;IAC3E,iBAAiB;IACjB,MAAM,eAAe,GAAG,qBAAqB,CAAC;QAC5C,WAAW;QACX,GAAG;KACJ,CAAC,CAAC;IACH,MAAM,YAAY,GAAG,kBAAkB,EAAE,CAAC;IAC1C,MAAM,kBAAkB,GAAG,IAAI,kBAAkB,CAAC,YAAY,CAAC,CAAC;IAChE,MAAM,eAAe,GAAG,IAAI,eAAe,CACzC,kBAAkB,EAClB,CAAC,OAAO,EAAE,EAAE,CAAC,OAAO,CAAC,OAAO,KAAK,SAAS,CAC3C,CAAC;IACF,MAAM,cAAc,GAAG,IAAI,eAAe,CACxC,kBAAkB,EAClB,CAAC,OAAO,EAAE,EAAE,CAAC,OAAO,CAAC,OAAO,KAAK,SAAS,CAC3C,CAAC;IAEF,MAAM,aAAa,GAAG,IAAI,YAAY,CAAC,GAAG,CAAC,CAAC;IAE5C,MAAM,cAAc,GAAG,oBAAoB,CAAC;QAC1C,WAAW;QACX,eAAe;QACf,YAAY;QACZ,UAAU,EAAE,IAAI;QAChB,aAAa;QACb,GAAG;QACH,qBAAqB;KACtB,CAAC,CAAC;IACH,MAAM,sBAAsB,GAAG,IAAI,GAAG,EAAsB,CAAC;IAC7D,IAAI,mBAAmB,GAAG,CAAC,CAAC;IAE5B,IAAI,gBAAgB,GAA4B,EAAE,CAAC;IACnD,IAAI,aAAa,GAAG,KAAK,CAAC;IAC1B,IAAI,eAAe,GAAgB,EAAE,CAAC;IAEtC,OAAO;QACL,IAAI,eAAe;YACjB,OAAO,eAAe,CAAC;QACzB,CAAC;QACD,IAAI,gBAAgB;YAClB,OAAO,gBAAgB,CAAC;QAC1B,CAAC;QACD,OAAO;QACP,UAAU;QACV,WAAW;QACX,uBAAuB;QACvB,mBAAmB;QACnB,cAAc;QACd,cAAc;QACd,cAAc;QACd,cAAc;QACd,QAAQ;QACR,cAAc;QACd,qBAAqB;QACrB,aAAa;QACb,MAAM;QACN,WAAW;QACX,iBAAiB,EAAE,4BAA4B;QAC/C,mBAAmB;QACnB,WAAW;QACX,gBAAgB;QAChB,QAAQ;QACR,gBAAgB;QAChB,kBAAkB;QAClB,cAAc;QACd,cAAc;QACd,GAAG;QACH,iBAAiB;QAEjB,qBAAqB;QACrB,2BAA2B;QAC3B,WAAW;QACX,eAAe;KAChB,CAAC;IAEF,KAAK,UAAU,UAAU,CAAC,MAAwB;QAChD,MAAM,WAAW,GAAyB;YACxC,UAAU,EAAE,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC;iBACvC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;iBACtC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,iBAAiB,EAAE,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAC7D,cAAc,EAAE,EAAE;SACnB,CAAC;QAEF,aAAa,CAAC,WAAW,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE;YAC1C,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;gBACzB,OAAO;YACT,CAAC;YACD,0GAA0G;YAC1G,MAAM,UAAU,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE;gBAC7C,OAAO,GAAG,CAAC,qBAAqB,GAAG,GAAG,CAAC,qBAAqB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC;YAC3E,CAAC,CAAC,CAAC;YACH,MAAM,UAAU,GAAG,aAAa,CAAC,iBAAiB,CAAC;YACnD,MAAM,MAAM,GAAG,MAAM,cAAc,CAAC,OAAO,CAAC,UAAU,CAAC,MAAM,EAAE,SAAS,EAAE;gBACxE,IAAI,EAAE,MAAM;gBACZ,2FAA2F;gBAC3F,yBAAyB;gBACzB,WAAW,EAAE,GAAG,EAAE,CAAC,aAAa,CAAC,iBAAiB,GAAG,UAAU;aAChE,CAAC,CAAC;YACH,IAAI,MAAM,IAAI,UAAU,KAAK,aAAa,CAAC,iBAAiB,EAAE,CAAC;gBAC7D,MAAM,iBAAiB,CAAC,MAAM,CAAC,CAAC;YAClC,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,MAAM,YAAY,GAAuB;YACvC,gBAAgB,EAAE,oBAAoB,CAAC,WAAW;YAClD,kBAAkB,EAAE,IAAI;YACxB,oBAAoB,EAAE,IAAI;YAC1B,aAAa,EAAE,IAAI;YACnB,sBAAsB,EAAE,IAAI;YAC5B,yBAAyB,EAAE,IAAI;YAC/B,kBAAkB,EAAE;gBAClB,eAAe,EAAE,KAAK;gBACtB,iBAAiB,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;aACnC;YACD,sBAAsB,EAAE;gBACtB,IAAI,EAAE,IAAI;gBACV,MAAM,EAAE,WAAW;aACpB;YACD,kBAAkB,EAAE,IAAI;YACxB,cAAc,EAAE;gBACd,eAAe,EAAE,IAAI;aACtB;YACD,0BAA0B,EAAE,IAAI;YAChC,qBAAqB,EAAE;gBACrB,iBAAiB,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAClC,mBAAmB,EAAE,CAAC,GAAG,CAAC;aAC3B;YACD,kBAAkB,EAAE;gBAClB,eAAe,EAAE,CAAC,UAAU,CAAC;aAC9B;YACD,sBAAsB,EAAE;gBACtB,QAAQ,EAAE,CAAC,QAAQ,CAAC,cAAc,CAAC;aACpC;SACF,CAAC;QAEF,IAAI,MAAM,CAAC,YAAY,CAAC,SAAS,EAAE,gBAAgB,EAAE,CAAC;YACpD,KAAK,MAAM,CAAC,IAAI,MAAM,CAAC,gBAAgB,IAAI,EAAE,EAAE,CAAC;gBAC9C,gBAAgB,CAAC,IAAI,CAAC;oBACpB,GAAG,CAAC;oBACJ,IAAI,EAAE,gCAAgC,CAAC,MAAM,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;iBACnF,CAAC,CAAC;YACL,CAAC;YACD,YAAY,CAAC,SAAS,GAAG;gBACvB,gBAAgB,EAAE;oBAChB,SAAS,EAAE,IAAI;oBACf,mBAAmB,EAAE,IAAI;iBAC1B;gBACD,cAAc,EAAE;oBACd,SAAS,EAAE;wBACT,OAAO,EAAE;4BACP;gCACE,MAAM,EAAE,MAAM;gCACd,OAAO,EAAE,EAAE,IAAI,EAAE,UAAU,EAAE,OAAO,EAAE,MAAM,EAAE;6BAC/C;4BACD;gCACE,MAAM,EAAE,MAAM;gCACd,OAAO,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE;6BAC7C;yBACF;qBACF;iBACF;aACF,CAAC;YACF,4DAA4D;QAC9D,CAAC;aAAM,IAAI,MAAM,CAAC,OAAO,EAAE,CAAC;YAC1B,gBAAgB,GAAG;gBACjB;oBACE,IAAI,EAAE,QAAQ;oBACd,4DAA4D;oBAC5D,GAAG,EAAE,MAAM,CAAC,OAAO;oBACnB,IAAI,EAAE,gCAAgC;oBACpC,4DAA4D;oBAC5D,MAAM,WAAW,CAAC,iBAAiB,CAAC,MAAM,CAAC,OAAO,CAAC,CACpD;iBACF;aACF,CAAC;YACF,4DAA4D;QAC9D,CAAC;aAAM,IAAI,MAAM,CAAC,QAAQ,EAAE,CAAC;YAC3B,gBAAgB,GAAG;gBACjB;oBACE,IAAI,EAAE,QAAQ;oBACd,4DAA4D;oBAC5D,GAAG,EAAE,YAAY,CAAC,aAAa,CAAC,MAAM,CAAC,QAAQ,CAAC;oBAChD,IAAI,EAAE,gCAAgC;oBACpC,4DAA4D;oBAC5D,MAAM,qBAAqB,CAAC,YAAY,EAAE,MAAM,CAAC,QAAQ,CAAC,CAC3D;iBACF;aACF,CAAC;QACJ,CAAC;QAED,GAAG,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,mBAAmB,EAAE,MAAM,EAAE,gBAAgB,EAAE,CAAC,CAAC;QAC/E,MAAM,gBAAgB,GAA2B;YAC/C,qBAAqB,EAAE,IAAI;YAC3B,WAAW,EAAE,IAAI;YACjB,2BAA2B,EAAE,IAAI;YACjC,eAAe,EAAE,IAAI;SACtB,CAAC;QACF,sFAAsF;QACtF,MAAM,OAAO,GAAG,aAAa,CAAC,YAAY,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;QAC3E,MAAM,sBAAsB,GAAG,+BAA+B,CAAC;QAC/D,IAAI,kBAAkB,GAAG,SAAS,CAAC;QACnC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,sBAAsB,CAAC,EAAE,CAAC;YAC9C,wDAAwD;QAC1D,CAAC;aAAM,CAAC;YACN,kBAAkB,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,OAAO,CAAC,MAAM,GAAG,sBAAsB,CAAC,MAAM,CAAC,CAAC;QACxF,CAAC;QACD,MAAM,MAAM,GAA2B;YACrC,UAAU,EAAE;gBACV,IAAI,EAAE,0BAA0B;gBAChC,OAAO,EAAE,eAAe;aACzB;YACD,YAAY;YACZ,gBAAgB;YAChB,kBAAkB;YAClB,iBAAiB,EAAE,kBAAkB;gBACnC,CAAC,CAAC,SAAS,CAAC,kBAAkB,EAAE,KAAK,EAAE,QAAQ,CAAC;gBAChD,CAAC,CAAC,SAAS;SACd,CAAC;QACF,OAAO,MAAM,CAAC;IAChB,CAAC;IAED,SAAS,WAAW,CAAC,MAAyB;QAC5C,aAAa,GAAG,IAAI,CAAC;QACrB,GAAG,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,0BAA0B,EAAE,CAAC,CAAC;IAC9D,CAAC;IAED,KAAK,UAAU,qBAAqB;QAClC,OAAO;YACL,iBAAiB,EAAE,MAAM,wBAAwB,CAAC,IAAI,CAAC,YAAY,CAAC;SACrE,CAAC;IACJ,CAAC;IAED,KAAK,UAAU,OAAO,CACpB,QAA+C,EAC/C,iBAA8C,EAC9C,oBAA0C;QAE1C,OAAO,cAAc,CAAC,OAAO,CAAC,QAAQ,EAAE,iBAAiB,EAAE,oBAAoB,CAAC,CAAC;IACnF,CAAC;IAED,KAAK,UAAU,iBAAiB,CAC9B,QAA+C;QAE/C,OAAO,OAAO,CAAC,QAAQ,EAAE,SAAS,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC;IACxD,CAAC;IAED,KAAK,UAAU,2BAA2B,CAAC,KAAiC;QAC1E,MAAM,EAAE,QAAQ,EAAE,GAAG,KAAK,CAAC;QAC3B,yFAAyF;QACzF,8CAA8C;QAC9C,MAAM,gBAAgB,GAAG,2BAA2B,CAAC,QAAQ,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;QAChF,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,CAAC;YAC5B,KAAK,MAAM,IAAI,IAAI,gBAAgB,CAAC,WAAW,EAAE,CAAC;gBAChD,GAAG,CAAC;oBACF,KAAK,EAAE,IAAI,CAAC,QAAQ;oBACpB,OAAO,EAAE,IAAI,CAAC,OAAO;oBACrB,MAAM,EAAE;wBACN,IAAI,EAAE,IAAI,CAAC,IAAI;wBACf,GAAG,EAAE,IAAI,CAAC,GAAG;qBACd;iBACF,CAAC,CAAC;YACL,CAAC;QACH,CAAC;QACD,OAAO,gBAAgB,CAAC,KAAK,CAAC;IAChC,CAAC;IAED,KAAK,UAAU,WAAW,CAAC,KAAoC;QAC7D,IAAI,CAAC;YACH,MAAM,kBAAkB,CAAC,YAAY,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC;YACrD,OAAO,IAAI,CAAC;QACd,CAAC;QAAC,OAAO,CAAC,EAAE,CAAC;YACX,GAAG,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,4CAA4C,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;YAC1F,OAAO,KAAK,CAAC;QACf,CAAC;IACH,CAAC;IAED,KAAK,UAAU,eAAe,CAAC,KAG9B;QACC,MAAM,MAAM,GAAoB;YAC9B,GAAG,KAAK,CAAC,OAAO;SACjB,CAAC;QAEF,MAAM,MAAM,GAAG,MAAM,cAAc,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,EAAE,MAAM,EAAE;YAC7D,SAAS,EAAE,IAAI;YACf,uBAAuB,EAAE,IAAI;YAC7B,IAAI,EAAE,MAAM;SACb,CAAC,CAAC;QACH,IAAI,MAAM,KAAK,SAAS,EAAE,CAAC;YACzB,OAAO;gBACL,QAAQ,EAAE,IAAI;gBACd,WAAW,EAAE;oBACX;wBACE,IAAI,EAAE,gBAAgB;wBACtB,OAAO,EACL,gFAAgF;wBAClF,QAAQ,EAAE,OAAO;wBACjB,MAAM,EAAE,QAAQ;wBAChB,GAAG,EAAE,SAAS;qBACf;iBACF;gBACD,UAAU,EAAE,SAAS;gBACrB,OAAO,EAAE,SAAS;aACnB,CAAC;QACJ,CAAC;aAAM,CAAC;YACN,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;YACjE,OAAO;gBACL,QAAQ,EAAE,MAAM,CAAC,OAAO,CAAC,QAAQ,EAAE;gBACnC,WAAW,EAAE,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,UAAU,EAAE,EAAE;oBACzD,MAAM,MAAM,GAAG,iBAAiB,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC;oBACxE,IAAI,QAAQ,GAAG,SAAS,CAAC;oBACzB,IAAI,MAAM,EAAE,IAAI,EAAE,CAAC;wBACjB,MAAM,gBAAgB,GAAG,MAAM,CAAC,IAAI,CAAC,6BAA6B,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;wBAC/E,QAAQ,GAAG;4BACT,IAAI,EAAE,gBAAgB,CAAC,IAAI,GAAG,CAAC;4BAC/B,MAAM,EAAE,gBAAgB,CAAC,SAAS,GAAG,CAAC;yBACvC,CAAC;oBACJ,CAAC;oBACD,OAAO;wBACL,IAAI,EAAE,UAAU,CAAC,IAAI;wBACrB,OAAO,EAAE,UAAU,CAAC,OAAO;wBAC3B,QAAQ,EAAE,UAAU,CAAC,QAAQ;wBAC7B,MAAM,EAAE,EAAE,GAAG,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE;wBACzC,GAAG,EAAE,UAAU,CAAC,GAAG;qBACA,CAAC;gBACxB,CAAC,CAAC;gBACF,UAAU,EAAE,MAAM,CAAC,QAAQ,EAAE,GAAG;gBAChC,OAAO,EAAE,MAAM,CAAC,OAAO,CAAC,eAAe;aACxC,CAAC;QACJ,CAAC;IACH,CAAC;IAED,KAAK,UAAU,WAAW,CAAC,MAAyB;QAClD,MAAM,aAAa,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACtC,IAAI,CAAC,aAAa,EAAE,CAAC;YACnB,OAAO;QACT,CAAC;QAED,oCAAoC;QACpC,KAAK,MAAM,IAAI,IAAI,MAAM,CAAC,KAAK,EAAE,CAAC;YAChC,MAAM,WAAW,GAAG,MAAM,WAAW,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;YACpE,MAAM,WAAW,GAAG,MAAM,WAAW,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;YACpE,MAAM,WAAW,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YAElD,IAAI,WAAW,EAAE,CAAC;gBAChB,MAAM,KAAK,GAAG,MAAM,iBAAiB,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC;gBACjE,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE,CAAC;oBACzB,MAAM,OAAO,GAAG,WAAW,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;oBAE/C,eAAe,CAAC,MAAM,CAAC;wBACrB,EAAE,GAAG,EAAE,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,cAAc,CAAC,OAAO,EAAE;qBACnE,CAAC,CAAC;gBACL,CAAC;YACH,CAAC;QACH,CAAC;QAED,MAAM,QAAQ,GAAG,MAAM,cAAc,CAAC,sBAAsB,CAC1D,MAAM,WAAW,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,aAAa,CAAC,MAAM,EAAE,CAAC,CACzD,CAAC;QAEF,IAAI,QAAQ,KAAK,SAAS,EAAE,CAAC;YAC3B,GAAG,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,mCAAmC,aAAa,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;YAC5F,OAAO;QACT,CAAC;QAED,2GAA2G;QAC3G,6GAA6G;QAC7G,yDAAyD;QACzD,aAAa,CAAC,cAAc,CAAC,EAAE,GAAG,EAAE,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC;QAE/E,+EAA+E;QAC/E,mEAAmE;QACnE,+CAA+C;QAC/C,MAAM,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,UAAU,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC;QACzD,MAAM,MAAM,GAAG,MAAM,iBAAiB,CAAC,EAAE,GAAG,EAAE,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QAC9E,IAAI,CAAC,MAAM,EAAE,CAAC;YACZ,GAAG,CAAC;gBACF,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,sBAAsB,QAAQ,qEAAqE;aAC7G,CAAC,CAAC;YACH,OAAO;QACT,CAAC;QAED,KAAK,MAAM,IAAI,IAAI,MAAM,CAAC,KAAK,EAAE,CAAC;YAChC,MAAM,WAAW,GAAG,MAAM,WAAW,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;YACpE,MAAM,WAAW,GAAG,MAAM,WAAW,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;YACpE,MAAM,WAAW,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YAElD,KAAK,MAAM,UAAU,IAAI,MAAM,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;gBACpD,IAAI,UAAU,CAAC,IAAI,KAAK,kBAAkB;oBAAE,SAAS;gBACrD,MAAM,MAAM,GAAG,UAAU,CAAC,MAAc,CAAC;gBACzC,IAAI,MAAM,CAAC,IAAI,KAAK,UAAU,CAAC,eAAe,EAAE,CAAC;oBAC/C,MAAM,MAAM,GAAG,qBAAqB,CAAC,MAAM,EAAE;wBAC3C,OAAO,EAAE,WAAW;wBACpB,OAAO,EAAE,WAAW;wBACpB,WAAW;qBACZ,CAAC,CAAC;oBAEH,IAAI,MAAM,EAAE,CAAC;wBACX,GAAG,CAAC;4BACF,KAAK,EAAE,MAAM;4BACb,OAAO,EAAE,wBAAwB,MAAM,CAAC,IAAI,CAAC,KAAK,uCAAuC,MAAM,CAAC,QAAQ,SAAS,MAAM,CAAC,QAAQ,GAAG;yBACpI,CAAC,CAAC;wBAEH,MAAM,IAAI,GAAG,mBAAmB,CAAC,MAAM,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC;wBAC1D,MAAM,IAAI,CAAC,SAAS,CAAC,EAAE,OAAO,EAAE,EAAE,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC;oBACvF,CAAC;gBACH,CAAC;YACH,CAAC;QACH,CAAC;IACH,CAAC;IAED,KAAK,UAAU,uBAAuB,CAAC,CAA8B;QACnE,GAAG,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,2BAA2B,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;QACxE,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7D,KAAK,MAAM,MAAM,IAAI,CAAC,CAAC,OAAO,EAAE,CAAC;YAC/B,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QACzB,CAAC;QACD,KAAK,MAAM,MAAM,IAAI,CAAC,CAAC,KAAK,EAAE,CAAC;YAC7B,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,EAAE;gBAClB,GAAG,MAAM;gBACT,IAAI,EAAE,gCAAgC,CAAC,MAAM,WAAW,CAAC,iBAAiB,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;aACxF,CAAC,CAAC;QACL,CAAC;QACD,gBAAgB,GAAG,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC;QAC5C,GAAG,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,mBAAmB,EAAE,MAAM,EAAE,gBAAgB,EAAE,CAAC,CAAC;IACjF,CAAC;IAED,SAAS,mBAAmB,CAAC,MAAmC;QAC9D,eAAe,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QACvC,kBAAkB,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;IAC5C,CAAC;IAED,SAAS,eAAe,CAAC,GAA0C;QACjE,OAAO,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;IAC5C,CAAC;IAED,KAAK,UAAU,gBAAgB,CAAC,MAA0B;QACxD,IAAI,eAAe,CAAC,MAAM,CAAC,YAAY,CAAC;YAAE,OAAO,EAAE,CAAC;QAEpD,MAAM,GAAG,GAAG,MAAM,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAChE,IAAI,CAAC,GAAG,EAAE,CAAC;YACT,OAAO,EAAE,CAAC;QACZ,CAAC;QACD,MAAM,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;QACtB,MAAM,MAAM,GAAmB,EAAE,CAAC;QAClC,IAAI,qBAAqB,GAAG,CAAC,CAAC,CAAC;QAC/B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YAC7C,MAAM,OAAO,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YAChC,IACE,OAAO,CAAC,IAAI,KAAK,UAAU,CAAC,WAAW;gBACvC,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,QAAQ,CAAC,MAAM;gBAC3B,GAAG,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,KAAK,UAAU,CAAC,WAAW;gBACnD,GAAG,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,KAAK,cAAc,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,EAClE,CAAC;gBACD,IAAI,qBAAqB,KAAK,CAAC,CAAC,EAAE,CAAC;oBACjC,qBAAqB,GAAG,OAAO,CAAC,GAAG,CAAC;gBACtC,CAAC;YACH,CAAC;iBAAM,IAAI,qBAAqB,KAAK,CAAC,CAAC,EAAE,CAAC;gBACxC,QAAQ,CAAC,qBAAqB,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;gBAC7C,qBAAqB,GAAG,CAAC,CAAC,CAAC;YAC7B,CAAC;iBAAM,CAAC;gBACN,QAAQ,CAAC,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;YACrC,CAAC;QACH,CAAC;QACD,aAAa,CAAC,GAAG,EAAE,gBAAgB,CAAC,CAAC;QACrC,SAAS,gBAAgB,CAAC,IAAU;YAClC,IAAI,IAAI,CAAC,IAAI,KAAK,UAAU,CAAC,GAAG,EAAE,CAAC;gBACjC,OAAO,CAAC,wCAAwC;YAClD,CAAC;YACD,IAAI,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC;YACzB,IAAI,YAAY,IAAI,IAAI,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBACvD,MAAM,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC;gBACrE,QAAQ,CAAC,SAAS,EAAE,YAAY,CAAC,CAAC;gBAClC,SAAS,GAAG,UAAU,CAAC,IAAI,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;YAClD,CAAC;YAED,QAAQ,CAAC,SAAS,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;YAC9B,aAAa,CAAC,IAAI,EAAE,gBAAgB,CAAC,CAAC;QACxC,CAAC;QACD,OAAO,MAAM,CAAC;QACd,SAAS,QAAQ,CAAC,QAAgB,EAAE,MAAc;YAChD,MAAM,KAAK,GAAG,IAAI,CAAC,6BAA6B,CAAC,QAAQ,CAAC,CAAC;YAC3D,MAAM,GAAG,GAAG,IAAI,CAAC,6BAA6B,CAAC,MAAM,CAAC,CAAC;YACvD,IAAI,KAAK,CAAC,IAAI,KAAK,GAAG,CAAC,IAAI,EAAE,CAAC;gBAC5B,MAAM,CAAC,IAAI,CAAC;oBACV,SAAS,EAAE,KAAK,CAAC,IAAI;oBACrB,cAAc,EAAE,KAAK,CAAC,SAAS;oBAC/B,OAAO,EAAE,GAAG,CAAC,IAAI;oBACjB,YAAY,EAAE,GAAG,CAAC,SAAS;iBAC5B,CAAC,CAAC;YACL,CAAC;QACH,CAAC;IACH,CAAC;IAED,KAAK,UAAU,kBAAkB,CAAC,MAA4B;QAC5D,IAAI,eAAe,CAAC,MAAM,CAAC,YAAY,CAAC;YAAE,OAAO,EAAE,CAAC;QAEpD,MAAM,GAAG,GAAG,MAAM,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAChE,IAAI,CAAC,GAAG,EAAE,CAAC;YACT,OAAO,EAAE,CAAC;QACZ,CAAC;QAED,OAAO,kBAAkB,CAAC,GAAG,CAAC,CAAC;IACjC,CAAC;IAED,KAAK,UAAU,qBAAqB,CAClC,MAA+B;QAE/B,IAAI,eAAe,CAAC,MAAM,CAAC,YAAY,CAAC;YAAE,OAAO,EAAE,CAAC;QAEpD,MAAM,MAAM,GAAG,MAAM,iBAAiB,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAC5D,IAAI,MAAM,KAAK,SAAS,EAAE,CAAC;YACzB,OAAO,EAAE,CAAC;QACZ,CAAC;QACD,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,EAAE,GAAG,MAAM,CAAC;QAC7C,IAAI,CAAC,QAAQ,IAAI,CAAC,MAAM,EAAE,CAAC;YACzB,OAAO,EAAE,CAAC;QACZ,CAAC;QAED,MAAM,WAAW,GAAG,wBAAwB,CAC1C,OAAO,EACP,MAAM,EACN,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,EAClC,CAAC,MAAM,CAAC,CACT,CAAC;QACF,OAAO,WAAW,CAAC,GAAG,CAAC,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;YACtC,KAAK,EAAE,QAAQ,CAAC,UAAU,EAAE,MAAM,CAAC,IAAI,CAAC;YACxC,IAAI,EAAE,qBAAqB,CAAC,IAAI;SACjC,CAAC,CAAC,CAAC;IACN,CAAC;IAED,SAAS,WAAW,CAAC,MAA6C;QAChE,MAAM,WAAW,GAAG,WAAW,CAAC,0BAA0B,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;QAChF,IAAI,CAAC,WAAW,EAAE,CAAC;YACjB,kDAAkD;YAClD,GAAG,CAAC;gBACF,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,kEAAkE;gBAC3E,MAAM,EAAE,MAAM,CAAC,QAAQ,CAAC,GAAG;aAC5B,CAAC,CAAC;YACH,cAAc,CAAC,MAAM,CAAC,CAAC;QACzB,CAAC;aAAM,IAAI,WAAW,GAAG,MAAM,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;YACjD,cAAc,CAAC,YAAY,CAAC,MAAM,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;QAC1D,CAAC;aAAM,CAAC;YACN,yGAAyG;QAC3G,CAAC;IACH,CAAC;IAED,SAAS,cAAc,CAAC,MAA6C;QACnE,WAAW,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC;QACzC,cAAc,CAAC,YAAY,CAAC,MAAM,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;IACzD,CAAC;IAED,KAAK,UAAU,iBAAiB,CAAC,EAAE,OAAO,EAAE,QAAQ,EAAE,iBAAiB,EAAiB;QACtF,IAAI,CAAC,QAAQ;YAAE,OAAO,SAAS,CAAC;QAChC,IAAI,eAAe,CAAC,QAAQ,CAAC;YAAE,OAAO,SAAS,CAAC;QAEhD,sBAAsB,CAAC,KAAK,EAAE,CAAC;QAC/B,6BAA6B;QAC7B,EAAE;QACF,wEAAwE;QACxE,wEAAwE;QACxE,sEAAsE;QACtE,EAAE;QACF,MAAM,aAAa,GAAsC,IAAI,GAAG,EAAE,CAAC;QACnE,aAAa,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;QAChC,KAAK,MAAM,IAAI,IAAI,OAAO,CAAC,WAAW,CAAC,MAAM,EAAE,EAAE,CAAC;YAChD,MAAM,KAAK,GAAI,IAAI,CAAC,IAAyB,EAAE,QAAQ,CAAC;YACxD,IAAI,KAAK,EAAE,CAAC;gBACV,aAAa,CAAC,GAAG,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;YAC/B,CAAC;iBAAM,CAAC;gBACN,8DAA8D;gBAC9D,6DAA6D;gBAC7D,kEAAkE;gBAClE,gEAAgE;gBAChE,MAAM,MAAM,GAAG,WAAW,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBAC3D,IAAI,MAAM,EAAE,CAAC;oBACX,aAAa,CAAC,GAAG,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;gBAChC,CAAC;YACH,CAAC;QACH,CAAC;QAED,KAAK,MAAM,IAAI,IAAI,OAAO,CAAC,WAAW,EAAE,CAAC;YACvC,MAAM,OAAO,GAAG,sBAAsB,CAAC,WAAW,EAAE,OAAO,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC;YAC7E,KAAK,MAAM,MAAM,IAAI,OAAO,EAAE,CAAC;gBAC7B,MAAM,CAAC,UAAU,EAAE,YAAY,CAAC,GAAG,MAAM,CAAC;gBAC1C,IAAI,IAAI,CAAC,GAAG,EAAE,CAAC;oBACb,UAAU,CAAC,eAAe,GAAG;wBAC3B,IAAI,EAAE,IAAI,CAAC,GAAG;qBACf,CAAC;gBACJ,CAAC;gBACD,MAAM,eAAe,GAAG,GAAG,wBAAwB,IAAI,6BAA6B,EAAE,CAAC;gBACvF,MAAM,0BAA0B,GAAG,GAAG,wBAAwB,IAAI,yCAAyC,EAAE,CAAC;gBAC9G,IAAI,IAAI,CAAC,IAAI,KAAK,YAAY,EAAE,CAAC;oBAC/B,UAAU,CAAC,IAAI,GAAG,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;gBAC/C,CAAC;qBAAM,IAAI,IAAI,CAAC,IAAI,KAAK,eAAe,EAAE,CAAC;oBACzC,sHAAsH;oBACtH,4EAA4E;oBAC5E,sIAAsI;oBACtI,UAAU,CAAC,IAAI,GAAG,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;oBAC9C,IACE,iBAAiB,CAAC,aAAa,EAAE,MAAM,EAAE,CAAC,eAAe,CAAC,KAAK,SAAS;wBACxE,iBAAiB,CAAC,aAAa,EAAE,OAAO,EAAE,CAAC,eAAe,CAAC,KAAK,SAAS,EACzE,CAAC;wBACD,yFAAyF;wBACzF,UAAU,CAAC,QAAQ,GAAG,kBAAkB,CAAC,IAAI,CAAC;oBAChD,CAAC;gBACH,CAAC;qBAAM,IAAI,IAAI,CAAC,IAAI,KAAK,0BAA0B,EAAE,CAAC;oBACpD,sHAAsH;oBACtH,4EAA4E;oBAC5E,sIAAsI;oBACtI,UAAU,CAAC,IAAI,GAAG,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;oBAC9C,IACE,iBAAiB,CAAC,aAAa,EAAE,MAAM,EAAE,CAAC,0BAA0B,CAAC,KAAK,SAAS;wBACnF,iBAAiB,CAAC,aAAa,EAAE,OAAO,EAAE,CAAC,0BAA0B,CAAC,KAAK,SAAS,EACpF,CAAC;wBACD,sGAAsG;wBACtG,UAAU,CAAC,QAAQ,GAAG,kBAAkB,CAAC,IAAI,CAAC;oBAChD,CAAC;gBACH,CAAC;gBACD,UAAU,CAAC,IAAI,GAAG;oBAChB,EAAE,EAAE,mBAAmB,EAAE;oBACzB,IAAI,EAAE,YAAY,CAAC,GAAG;iBACvB,CAAC;gBACF,MAAM,WAAW,GAAG,aAAa,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;gBACpD,cAAc,CACZ,WAAW,EACX,8EAA8E,CAC/E,CAAC;gBACF,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gBAC7B,sBAAsB,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;YACvD,CAAC;QACH,CAAC;QAED,KAAK,MAAM,CAAC,QAAQ,EAAE,WAAW,CAAC,IAAI,aAAa,EAAE,CAAC;YACpD,eAAe,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC;QACzC,CAAC;IACH,CAAC;IAED,KAAK,UAAU,QAAQ,CAAC,MAAmB;QACzC,IAAI,eAAe,CAAC,MAAM,CAAC,YAAY,CAAC;YAAE,OAAO,EAAE,QAAQ,EAAE,EAAE,EAAE,CAAC;QAElE,MAAM,MAAM,GAAG,MAAM,iBAAiB,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAC5D,IAAI,MAAM,KAAK,SAAS,EAAE,CAAC;YACzB,OAAO,EAAE,QAAQ,EAAE,EAAE,EAAE,CAAC;QAC1B,CAAC;QACD,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,EAAE,GAAG,MAAM,CAAC;QAE7C,IAAI,CAAC,QAAQ,IAAI,CAAC,MAAM,EAAE,CAAC;YACzB,OAAO,EAAE,QAAQ,EAAE,EAAE,EAAE,CAAC;QAC1B,CAAC;QAED,MAAM,EAAE,GAAG,iBAAiB,CAAC,MAAM,EAAE,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;QACzE,MAAM,GAAG,GACP,EAAE,EAAE,IAAI,KAAK,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,qBAAqB,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;QAE7F,IAAI,CAAC,GAAG,IAAI,GAAG,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YAC7B,OAAO,EAAE,QAAQ,EAAE,EAAE,IAAI,EAAE,UAAU,CAAC,QAAQ,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,CAAC;QAChE,CAAC;aAAM,CAAC;YACN,kGAAkG;YAClG,gFAAgF;YAChF,IAAI,yBAAyB,GAAG,KAAK,CAAC;YACtC,MAAM,EAAE,GAAG,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YAC9B,IAAI,EAAE,CAAC,IAAI,KAAK,UAAU,CAAC,cAAc,EAAE,CAAC;gBAC1C,MAAM,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,qBAAqB,CAAC,EAAE,CAAC,CAAC;gBACtE,IAAI,IAAI,IAAI,MAAM,IAAI,IAAI,EAAE,CAAC;oBAC3B,MAAM,kBAAkB,GACtB,IAAI,CAAC,IAAI,KAAK,OAAO;wBACrB,CAAC,IAAI,CAAC,SAAS,KAAK,SAAS;4BAC3B,IAAI,CAAC,WAAW,KAAK,SAAS;4BAC9B,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;oBAClC,MAAM,kBAAkB,GACtB,IAAI,CAAC,IAAI,KAAK,WAAW,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAC;oBAChE,yBAAyB,GAAG,kBAAkB,IAAI,kBAAkB,CAAC;gBACvE,CAAC;YACH,CAAC;YAED,MAAM,QAAQ,GAAkB;gBAC9B,IAAI,EAAE,UAAU,CAAC,QAAQ;gBACzB,KAAK,EACH,GAAG,IAAI,GAAG,CAAC,MAAM,GAAG,CAAC;oBACnB,CAAC,CAAC,MAAM,gBAAgB,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE;wBACtC,gBAAgB,EAAE,IAAI;wBACtB,oBAAoB,EAAE,IAAI;wBAC1B,yBAAyB;qBAC1B,CAAC;oBACJ,CAAC,CAAC,EAAE;aACT,CAAC;YACF,OAAO;gBACL,QAAQ,EAAE,QAAQ;aACnB,CAAC;QACJ,CAAC;IACH,CAAC;IAED,KAAK,UAAU,gBAAgB,CAAC,MAA2B;QACzD,IAAI,eAAe,CAAC,MAAM,CAAC,YAAY,CAAC;YAAE,OAAO,SAAS,CAAC;QAE3D,MAAM,MAAM,GAAG,MAAM,iBAAiB,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAC5D,IAAI,MAAM,KAAK,SAAS,EAAE,CAAC;YACzB,OAAO,SAAS,CAAC;QACnB,CAAC;QACD,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,GAAG,MAAM,CAAC;QAC7C,IAAI,CAAC,QAAQ,IAAI,CAAC,MAAM,EAAE,CAAC;YACzB,OAAO,SAAS,CAAC;QACnB,CAAC;QACD,MAAM,IAAI,GAAG,8BAA8B,CAAC,MAAM,EAAE,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;QACxF,IAAI,IAAI,KAAK,SAAS,EAAE,CAAC;YACvB,OAAO,SAAS,CAAC;QACnB,CAAC;QACD,MAAM,EAAE,IAAI,EAAE,aAAa,EAAE,GAAG,IAAI,CAAC;QACrC,QAAQ,IAAI,CAAC,IAAI,EAAE,CAAC;YAClB,KAAK,UAAU,CAAC,aAAa;gBAC3B,OAAO,2BAA2B,CAAC,OAAO,EAAE,IAAI,EAAE,aAAa,CAAC,CAAC;YACnE,KAAK,UAAU,CAAC,mBAAmB,CAAC;YACpC,KAAK,UAAU,CAAC,yBAAyB;gBACvC,OAAO,4BAA4B,CAAC,OAAO,EAAE,IAAI,EAAE,aAAa,CAAC,CAAC;YACpE;gBACE,MAAM,YAAY,GAAU,IAAI,CAAC;gBACjC,cAAc,CAAC,KAAK,EAAE,aAAa,CAAC,CAAC;QACzC,CAAC;IACH,CAAC;IAED,KAAK,UAAU,2BAA2B,CACxC,OAAgB,EAChB,IAAuB,EACvB,aAAqB;QAErB,MAAM,GAAG,GAAG,OAAO,CAAC,OAAO,CAAC,qBAAqB,CAC/C,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,UAAU,CAAC,gBAAgB,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAChF,CAAC;QACF,IAAI,CAAC,GAAG,IAAI,GAAG,CAAC,MAAM,IAAI,CAAC,EAAE,CAAC;YAC5B,OAAO,SAAS,CAAC;QACnB,CAAC;QACD,MAAM,gBAAgB,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;QAChD,IACE,CAAC,gBAAgB;YACjB,CAAC,CAAC,oBAAoB,IAAI,gBAAgB,CAAC;YAC3C,gBAAgB,CAAC,kBAAkB,CAAC,MAAM,KAAK,CAAC,EAChD,CAAC;YACD,OAAO,SAAS,CAAC;QACnB,CAAC;QAED,MAAM,aAAa,GAAG,iCAAiC,CAAC,gBAAgB,CAAC,CAAC;QAC1E,MAAM,UAAU,GAAG,gBAAgB,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE;YAC/D,MAAM,IAAI,GAAyB,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;YACtD,MAAM,GAAG,GAAG,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;YACvC,IAAI,GAAG,EAAE,CAAC;gBACR,IAAI,CAAC,aAAa,GAAG,EAAE,IAAI,EAAE,UAAU,CAAC,QAAQ,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC;YACjE,CAAC;YACD,OAAO,IAAI,CAAC;QACd,CAAC,CAAC,CAAC;QAEH,MAAM,IAAI,GAAkB;YAC1B,UAAU,EAAE;gBACV;oBACE,KAAK,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG;oBACrE,UAAU;oBACV,eAAe,EAAE,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,aAAa,CAAC;iBAChE;aACF;YACD,eAAe,EAAE,CAAC;YAClB,eAAe,EAAE,CAAC;SACnB,CAAC;QAEF,MAAM,GAAG,GAAG,MAAM,gBAAgB,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE;YAClD,gBAAgB,EAAE,KAAK;YACvB,oBAAoB,EAAE,KAAK;SAC5B,CAAC,CAAC;QACH,IAAI,GAAG,EAAE,CAAC;YACR,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,aAAa,GAAG,EAAE,IAAI,EAAE,UAAU,CAAC,QAAQ,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC;QAC/E,CAAC;QAED,OAAO,IAAI,CAAC;IACd,CAAC;IAED,KAAK,UAAU,4BAA4B,CACzC,OAAgB,EAChB,IAA6D,EAC7D,aAAqB;QAErB,MAAM,GAAG,GAAG,OAAO,CAAC,OAAO,CAAC,qBAAqB,CAC/C,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,UAAU,CAAC,gBAAgB,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAChF,CAAC;QACF,IAAI,CAAC,GAAG,IAAI,GAAG,CAAC,MAAM,IAAI,CAAC,EAAE,CAAC;YAC5B,OAAO,SAAS,CAAC;QACnB,CAAC;QAED,MAAM,iBAAiB,GACrB,GAAG,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,IAAI,CACtB,CAAC,CAAC,EAA0C,EAAE,CAC5C,CAAC,CAAC,IAAI,KAAK,UAAU,CAAC,6BAA6B,CACtD,CAAC;QACJ,IAAI,iBAAiB,KAAK,SAAS,EAAE,CAAC;YACpC,OAAO,SAAS,CAAC;QACnB,CAAC;QAED,MAAM,IAAI,GAAG,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC;QAC/D,cAAc,CAAC,IAAI,CAAC,IAAI,KAAK,WAAW,EAAE,kCAAkC,CAAC,CAAC;QAE9E,MAAM,aAAa,GAAG,yBAAyB,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;QAC/D,IAAI,WAAW,GAAG,EAAE,CAAC;QACrB,MAAM,UAAU,GAA2B,EAAE,CAAC;QAC9C,IAAI,IAAI,CAAC,IAAI,KAAK,UAAU,CAAC,yBAAyB,EAAE,CAAC;YACvD,MAAM,UAAU,GAAG,iBAAiB,CAAC,MAAM,CAAC,IAAI;gBAC9C,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,iBAAiB,CAAC,MAAM,CAAC,IAAI,CAAC;gBAC/D,CAAC,CAAC,SAAS,CAAC;YAEd,UAAU,CAAC,IAAI,CAAC;gBACd,KAAK,EAAE,GAAG,iBAAiB,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,KACtC,UAAU,CAAC,CAAC,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,SACzC,EAAE;aACH,CAAC,CAAC;YAEH,WAAW,GAAG,GAAG,CAAC;QACpB,CAAC;QAED,UAAU,CAAC,IAAI,CACb,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE;YAC3B,MAAM,IAAI,GAAyB;gBACjC,kBAAkB;gBAClB,KAAK,EAAE,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,KAAK,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;aAC3F,CAAC;YACF,MAAM,GAAG,GAAG,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;YACtC,IAAI,GAAG,EAAE,CAAC;gBACR,IAAI,CAAC,aAAa,GAAG,EAAE,IAAI,EAAE,UAAU,CAAC,QAAQ,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC;YACjE,CAAC;YACD,OAAO,IAAI,CAAC;QACd,CAAC,CAAC,CACH,CAAC;QAEF,MAAM,IAAI,GAAkB;YAC1B,UAAU,EAAE;gBACV;oBACE,KAAK,EAAE,GAAG,WAAW,GAAG,IAAI,CAAC,IAAI,IAAI,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG;oBACjF,UAAU;oBACV,eAAe,EAAE,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,aAAa,CAAC;iBAChE;aACF;YACD,eAAe,EAAE,CAAC;YAClB,eAAe,EAAE,CAAC;SACnB,CAAC;QAEF,MAAM,GAAG,GAAG,MAAM,gBAAgB,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE;YAClD,gBAAgB,EAAE,KAAK;YACvB,oBAAoB,EAAE,KAAK;SAC5B,CAAC,CAAC;QACH,IAAI,GAAG,EAAE,CAAC;YACR,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,aAAa,GAAG,EAAE,IAAI,EAAE,UAAU,CAAC,QAAQ,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC;QAC/E,CAAC;QAED,OAAO,IAAI,CAAC;IACd,CAAC;IAED,KAAK,UAAU,cAAc,CAAC,MAAgC;QAC5D,IAAI,eAAe,CAAC,MAAM,CAAC,YAAY,CAAC;YAAE,OAAO,EAAE,CAAC;QAEpD,MAAM,QAAQ,GAAG,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;QACpE,IAAI,QAAQ,KAAK,SAAS,EAAE,CAAC;YAC3B,OAAO,EAAE,CAAC;QACZ,CAAC;QACD,MAAM,IAAI,GAAG,MAAM,WAAW,CAAC,iBAAiB,CAAC,MAAM,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;QAC1E,MAAM,cAAc,GAAG,MAAM,qBAAqB,CAAC,IAAI,CAAC,CAAC;QACzD,MAAM,cAAc,GAAG,cAAc,IAAI;YACvC,QAAQ,EAAE,MAAM,CAAC,OAAO,CAAC,OAAO;YAChC,OAAO,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,YAAY;SACtC,CAAC;QACF,GAAG,CAAC;YACF,KAAK,EAAE,MAAM;YACb,OAAO,EAAE,iCAAiC,IAAI,CAAC,SAAS,CAAC,EAAE,OAAO,EAAE,MAAM,CAAC,YAAY,CAAC,GAAG,EAAE,aAAa,EAAE,MAAM,CAAC,OAAO,EAAE,cAAc,EAAE,cAAc,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC,EAAE;SACzK,CAAC,CAAC;QACH,IAAI,CAAC;YACH,MAAM,aAAa,GAAG,MAAM,cAAc,CAAC,QAAQ,CAAC,OAAO,EAAE,EAAE,cAAc,CAAC,CAAC;YAC/E,OAAO,CAAC,WAAW,CAAC,QAAQ,EAAE,aAAa,CAAC,CAAC,CAAC;QAChD,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,GAAG,CAAC;gBACF,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,uCAAuC,MAAM,CAAC,YAAY,CAAC,GAAG,EAAE;gBACzE,MAAM,EAAE,KAAK;aACd,CAAC,CAAC;YACH,OAAO,EAAE,CAAC;QACZ,CAAC;IACH,CAAC;IAED,KAAK,UAAU,qBAAqB,CAAC,IAAY;QAC/C,IAAI,CAAC;YACH,uCAAuC;YACvC,MAAM,QAAQ,GAAG,MAAM,MAAM,CAAC,UAAU,CAAC,CAAC;YAC1C,OAAO,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;QACtC,CAAC;QAAC,OAAO,CAAC,EAAE,CAAC;YACX,OAAO,IAAI,CAAC;QACd,CAAC;IACH,CAAC;IAED,SAAS,WAAW,CAAC,QAAsB,EAAE,OAAe;QAC1D,MAAM,OAAO,GAAG,QAAQ,CAAC,OAAO,EAAE,CAAC;QACnC,0BAA0B;QAC1B,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,OAAO,CAAC,GAAG,OAAO,CAAC,MAAM,IAAI,CAAC,GAAG,OAAO,CAAC,MAAM,IAAI,OAAO,CAAC,CAAC,CAAC,KAAK,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC;YAC7E,EAAE,CAAC,CAAC;QACN,CAAC;QACD,0BAA0B;QAC1B,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,OACE,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC,MAAM;YACtB,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC,MAAM;YACtB,OAAO,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,GAAG,CAAC,CAAC,KAAK,OAAO,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,GAAG,CAAC,CAAC,EACnE,CAAC;YACD,EAAE,CAAC,CAAC;QACN,CAAC;QACD,MAAM,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QACzD,MAAM,IAAI,GAAG,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QACpC,MAAM,IAAI,GAAG,QAAQ,CAAC,UAAU,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QAErD,OAAO,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE,OAAO,CAAC,CAAC;IAC7D,CAAC;IAED,KAAK,UAAU,cAAc,CAAC,MAAwB;QACpD,IAAI,eAAe,CAAC,MAAM,CAAC,YAAY,CAAC;YAAE,OAAO,EAAE,CAAC;QAEpD,MAAM,MAAM,GAAG,MAAM,iBAAiB,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAC5D,IAAI,MAAM,KAAK,SAAS,IAAI,MAAM,CAAC,QAAQ,KAAK,SAAS,IAAI,MAAM,CAAC,MAAM,KAAK,SAAS,EAAE,CAAC;YACzF,OAAO,EAAE,CAAC;QACZ,CAAC;QACD,MAAM,IAAI,GAAG,iBAAiB,CAAC,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;QACzF,QAAQ,IAAI,EAAE,IAAI,EAAE,CAAC;YACnB,KAAK,UAAU,CAAC,UAAU;gBACxB,MAAM,GAAG,GAAG,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;gBAC/D,OAAO,YAAY,CAAC,GAAG,IAAI,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;YAC/E,KAAK,UAAU,CAAC,aAAa;gBAC3B,IAAI,IAAI,CAAC,MAAM,EAAE,IAAI,KAAK,UAAU,CAAC,eAAe,EAAE,CAAC;oBACrD,OAAO,CAAC,MAAM,iBAAiB,CAAC,IAAI,CAAC,KAAK,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;gBAC9D,CAAC;qBAAM,CAAC;oBACN,OAAO,EAAE,CAAC;gBACZ,CAAC;QACL,CAAC;QACD,OAAO,EAAE,CAAC;IACZ,CAAC;IAED,KAAK,UAAU,iBAAiB,CAC9B,UAAkB,EAClB,WAA+B;QAE/B,MAAM,IAAI,GAAsB;YAC9B,QAAQ,EAAE,YAAY,CAAC,QAAQ;YAC/B,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,EAAE;gBACvB,MAAM,IAAI,GAAG,MAAM,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;gBAC/C,OAAO,IAAI,CAAC,IAAI,CAAC;YACnB,CAAC;YACD,IAAI,EAAE,YAAY,CAAC,IAAI;SACxB,CAAC;QACF,MAAM,QAAQ,GAAG,MAAM,aAAa,CAAC,IAAI,EAAE,UAAU,EAAE;YACrD,OAAO,EAAE,gBAAgB,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC;YAChD,WAAW,CAAC,GAAG;gBACb,kEAAkE;gBAClE,qCAAqC;gBACrC,OAAO,cAAc,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC;YACzC,CAAC;SACF,CAAC,CAAC;QACH,OAAO;YACL,GAAG,EAAE,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC;YACrF,KAAK,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;SAChC,CAAC;IACJ,CAAC;IAED,KAAK,UAAU,QAAQ,CAAC,MAAwB;QAC9C,IAAI,eAAe,CAAC,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC;YACzC,MAAM,GAAG,GAAG,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;YAC/D,IAAI,GAAG,EAAE,CAAC;gBACR,MAAM,KAAK,GAAG,MAAM,+BAA+B,CAAC,GAAG,EAAE,MAAM,CAAC,QAAQ,EAAE;oBACxE,WAAW;oBACX,YAAY;oBACZ,eAAe;oBACf,cAAc;oBACd,GAAG;iBACJ,CAAC,CAAC;gBACH,OAAO,cAAc,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACtC,CAAC;YACD,OAAO,cAAc,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QACnC,CAAC;QAED,MAAM,WAAW,GAAmB;YAClC,YAAY,EAAE,KAAK;YACnB,KAAK,EAAE,EAAE;SACV,CAAC;QACF,MAAM,MAAM,GAAG,MAAM,iBAAiB,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAC5D,IAAI,MAAM,EAAE,CAAC;YACX,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,GAAG,MAAM,CAAC;YAC7C,IAAI,CAAC,QAAQ,IAAI,CAAC,MAAM,EAAE,CAAC;gBACzB,OAAO,WAAW,CAAC;YACrB,CAAC;YACD,MAAM,SAAS,GAAG,2BAA2B,CAAC,MAAM,EAAE,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;YAE1F,OAAO,MAAM,iBAAiB,CAC5B;gBACE,OAAO;gBACP,IAAI,EAAE,MAAM;gBACZ,WAAW;gBACX,MAAM;aACP,EACD,SAAS,CACV,CAAC;QACJ,CAAC;QAED,OAAO,WAAW,CAAC;IACrB,CAAC;IAED,KAAK,UAAU,cAAc,CAAC,MAAuB;QACnD,IAAI,eAAe,CAAC,MAAM,CAAC,YAAY,CAAC;YAAE,OAAO,EAAE,CAAC;QAEpD,MAAM,MAAM,GAAG,MAAM,iBAAiB,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAC5D,IAAI,MAAM,KAAK,SAAS,IAAI,MAAM,CAAC,QAAQ,KAAK,SAAS,IAAI,MAAM,CAAC,MAAM,KAAK,SAAS,EAAE,CAAC;YACzF,OAAO,EAAE,CAAC;QACZ,CAAC;QACD,MAAM,WAAW,GAAG,wBAAwB,CAC1C,MAAM,CAAC,OAAO,EACd,MAAM,CAAC,MAAM,EACb,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,CAC1C,CAAC;QACF,OAAO,YAAY,CAAC,WAAW,CAAC,CAAC;IACnC,CAAC;IAED,KAAK,UAAU,aAAa,CAAC,MAA2B;QACtD,IAAI,eAAe,CAAC,MAAM,CAAC,YAAY,CAAC;YAAE,OAAO,SAAS,CAAC;QAE3D,MAAM,MAAM,GAAG,MAAM,iBAAiB,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAC5D,IAAI,MAAM,KAAK,SAAS,IAAI,MAAM,CAAC,QAAQ,KAAK,SAAS,IAAI,MAAM,CAAC,MAAM,KAAK,SAAS,EAAE,CAAC;YACzF,OAAO,SAAS,CAAC;QACnB,CAAC;QACD,MAAM,EAAE,GAAG,iBAAiB,CAAC,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;QACvF,OAAO,EAAE,EAAE,IAAI,KAAK,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,WAAW,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,SAAS,CAAC;IACjF,CAAC;IAED,KAAK,UAAU,MAAM,CAAC,MAAoB;QACxC,IAAI,eAAe,CAAC,MAAM,CAAC,YAAY,CAAC;YAAE,OAAO,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC;QAEjE,MAAM,OAAO,GAA+B,EAAE,CAAC;QAC/C,MAAM,MAAM,GAAG,MAAM,iBAAiB,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAC5D,IAAI,MAAM,IAAI,MAAM,CAAC,QAAQ,IAAI,MAAM,CAAC,MAAM,EAAE,CAAC;YAC/C,MAAM,WAAW,GAAG,wBAAwB,CAC1C,MAAM,CAAC,OAAO,EACd,MAAM,CAAC,MAAM,EACb,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,CAC1C,CAAC;YACF,KAAK,MAAM,EAAE,IAAI,WAAW,EAAE,CAAC;gBAC7B,MAAM,QAAQ,GAAG,WAAW,CAAC,EAAE,CAAC,CAAC;gBACjC,IAAI,CAAC,QAAQ,EAAE,CAAC;oBACd,SAAS;gBACX,CAAC;gBACD,MAAM,MAAM,GAAG,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC;gBAChE,IAAI,QAAQ,CAAC,GAAG,IAAI,OAAO,EAAE,CAAC;oBAC5B,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBACrC,CAAC;qBAAM,CAAC;oBACN,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;gBACnC,CAAC;YACH,CAAC;QACH,CAAC;QACD,OAAO,EAAE,OAAO,EAAE,CAAC;IACrB,CAAC;IAED,SAAS,wBAAwB,CAC/B,OAAgB,EAChB,IAAwB,EACxB,GAAW,EACX,cAA4C,OAAO,CAAC,WAAW,CAAC,MAAM,EAAE;QAExE,MAAM,EAAE,GAAG,iBAAiB,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QACxC,IAAI,EAAE,EAAE,IAAI,KAAK,UAAU,CAAC,UAAU,EAAE,CAAC;YACvC,OAAO,EAAE,CAAC;QACZ,CAAC;QAED,MAAM,GAAG,GAAG,OAAO,CAAC,OAAO,CAAC,qBAAqB,CAAC,EAAE,CAAC,CAAC;QACtD,IAAI,CAAC,GAAG,IAAI,GAAG,CAAC,MAAM,IAAI,CAAC,EAAE,CAAC;YAC5B,OAAO,CAAC,EAAE,CAAC,CAAC;QACd,CAAC;QAED,MAAM,UAAU,GAAqB,EAAE,CAAC;QACxC,KAAK,MAAM,UAAU,IAAI,WAAW,EAAE,CAAC;YACrC,aAAa,CAAC,UAAU,EAAE,SAAS,KAAK,CAAC,IAAI;gBAC3C,IAAI,IAAI,CAAC,IAAI,KAAK,UAAU,CAAC,UAAU,EAAE,CAAC;oBACxC,MAAM,CAAC,GAAG,OAAO,CAAC,OAAO,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;oBACtD,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,IAAI,CAAC,EAAE,CAAC;wBACxB,OAAO;oBACT,CAAC;oBACD,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC;wBAClE,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACxB,CAAC;gBACH,CAAC;gBACD,aAAa,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;YAC7B,CAAC,CAAC,CAAC;QACL,CAAC;QACD,OAAO,UAAU,CAAC;IACpB,CAAC;IAED,KAAK,UAAU,4BAA4B,CAAC,MAA4B;QACtE,IAAI,eAAe,CAAC,MAAM,CAAC,YAAY,CAAC;YAAE,OAAO,EAAE,CAAC;QAEpD,MAAM,GAAG,GAAG,MAAM,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAChE,IAAI,CAAC,GAAG,EAAE,CAAC;YACT,OAAO,EAAE,CAAC;QACZ,CAAC;QAED,OAAO,iBAAiB,CAAC,GAAG,CAAC,CAAC;IAChC,CAAC;IAED,KAAK,UAAU,mBAAmB,CAAC,MAA4B;QAC7D,IAAI,eAAe,CAAC,MAAM,CAAC,YAAY,CAAC;YAAE,OAAO,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC;QAE9D,MAAM,OAAO,GAAG,IAAI,qBAAqB,EAAE,CAAC;QAC5C,MAAM,MAAM,GAAG,MAAM,4BAA4B,CAAC,MAAM,CAAC,CAAC;QAC1D,MAAM,IAAI,GAAG,MAAM,YAAY,CAAC,QAAQ,CAAC,MAAM,WAAW,CAAC,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC;QACzF,MAAM,MAAM,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QAEpC,KAAK,MAAM,KAAK,IAAI,MAAM,EAAE,CAAC;YAC3B,MAAM,KAAK,GAAG,IAAI,CAAC,6BAA6B,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAC5D,MAAM,GAAG,GAAG,IAAI,CAAC,6BAA6B,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAE1D,KAAK,IAAI,GAAG,GAAG,KAAK,CAAC,GAAG,EAAE,IAAI,GAAG,KAAK,CAAC,IAAI,EAAE,IAAI,IAAI,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,EAAE,CAAC;gBACtE,MAAM,MAAM,GAAG,IAAI,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;gBAChE,MAAM,SAAS,GAAG,IAAI,KAAK,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC5D,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,SAAS,EAAE,MAAM,GAAG,GAAG,EAAE,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;gBAC3D,GAAG,GAAG,MAAM,CAAC;YACf,CAAC;QACH,CAAC;QAED,OAAO,OAAO,CAAC,KAAK,EAAE,CAAC;IACzB,CAAC;IAED,KAAK,UAAU,cAAc,CAAC,MAAwB;QACpD,IAAI,eAAe,CAAC,MAAM,CAAC,YAAY,CAAC;YAAE,OAAO,EAAE,CAAC;QAEpD,MAAM,OAAO,GAAG,EAAE,CAAC;QACnB,KAAK,MAAM,MAAM,IAAI,MAAM,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;YAChD,MAAM,OAAO,GAAG,sBAAsB,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;YAC5D,IAAI,OAAO,KAAK,SAAS,IAAI,OAAO,CAAC,SAAS,KAAK,SAAS;gBAAE,SAAS;YAEvE,KAAK,MAAM,GAAG,IAAI,OAAO,CAAC,SAAS,IAAI,EAAE,EAAE,CAAC;gBAC1C,MAAM,UAAU,GAAe;oBAC7B,GAAG,UAAU,CAAC,MAAM,CAClB,GAAG,CAAC,KAAK,EACT;wBACE,KAAK,EAAE,GAAG,CAAC,KAAK;wBAChB,OAAO,EAAE,QAAQ,CAAC,cAAc;wBAChC,SAAS,EAAE,CAAC,MAAM,CAAC,YAAY,CAAC,GAAG,EAAE,MAAM,CAAC,IAAI,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,CAAC;qBAC9D,EACD,cAAc,CAAC,QAAQ,CACxB;oBACD,WAAW,EAAE,CAAC,MAAM,CAAC;iBACtB,CAAC;gBACF,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YAC3B,CAAC;QACH,CAAC;QAED,OAAO,OAAO,CAAC;IACjB,CAAC;IAED,KAAK,UAAU,cAAc,CAAC,MAA4B;QACxD,IAAI,MAAM,CAAC,OAAO,KAAK,QAAQ,CAAC,cAAc,EAAE,CAAC;YAC/C,MAAM,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,GAAG,MAAM,CAAC,SAAS,IAAI,EAAE,CAAC;YACjD,IAAI,MAAM,IAAI,KAAK,EAAE,CAAC;gBACpB,MAAM,IAAI,GAAG,sBAAsB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;gBAChD,MAAM,OAAO,GAAG,IAAI,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,KAAK,CAAC,CAAC;gBAC7D,IAAI,OAAO,EAAE,CAAC;oBACZ,MAAM,KAAK,GAAG,MAAM,cAAc,CAAC,OAAO,CAAC,CAAC;oBAC5C,MAAM,OAAO,GAAG,mBAAmB,CAAC,KAAK,CAAC,CAAC;oBAC3C,MAAM,IAAI,CAAC,SAAS,CAAC,EAAE,eAAe,EAAE,OAAO,EAAE,CAAC,CAAC;gBACrD,CAAC;YACH,CAAC;QACH,CAAC;IACH,CAAC;IAED,SAAS,mBAAmB,CAAC,KAAoB;QAC/C,sDAAsD;QACtD,MAAM,WAAW,GAAG,IAAI,GAAG,EAAsB,CAAC;QAClD,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE,CAAC;YACzB,sGAAsG;YACtG,MAAM,GAAG,GAAG,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC/C,MAAM,SAAS,GAAG,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;YAC7C,SAAS,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC;YACzC,WAAW,CAAC,GAAG,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;QAClC,CAAC;QAED,kDAAkD;QAClD,MAAM,eAAe,GAAyC,EAAE,CAAC;QACjE,KAAK,MAAM,CAAC,GAAG,EAAE,OAAO,CAAC,IAAI,WAAW,EAAE,CAAC;YACzC,oFAAoF;YACpF,eAAe,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE,OAAO,EAAE,EAAE,cAAc,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;YACjF,MAAM,QAAQ,GAAG,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,CAAC;YAChD,eAAe,CAAC,IAAI,CAAC;gBACnB,YAAY,EAAE,EAAE,GAAG,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,EAAE;gBAClE,KAAK,EAAE,OAAO;aACf,CAAC,CAAC;QACL,CAAC;QAED,OAAO,eAAe,CAAC;IACzB,CAAC;IAED,SAAS,kBAAkB,CAAC,IAAiB;QAC3C,QAAQ,IAAI,CAAC,IAAI,EAAE,CAAC;YAClB,KAAK,aAAa;gBAChB,OAAO,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,6BAA6B,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YACvF,KAAK,cAAc;gBACjB,OAAO,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QAClE,CAAC;IACH,CAAC;IAED,SAAS,cAAc,CAAC,MAA6C;QACnE,WAAW,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC;QACzC,kCAAkC;QAClC,eAAe,CAAC,MAAM,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;IACvC,CAAC;IAED,SAAS,YAAY,CAAC,OAAgD;QACpE,OAAO,OAAO,EAAE,GAAG,CAAC,WAAW,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAiB,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;IAC3E,CAAC;IAED,SAAS,WAAW,CAAC,MAAwB;QAC3C,MAAM,QAAQ,GAAG,iBAAiB,CAAC,MAAM,CAAC,CAAC;QAC3C,IAAI,QAAQ,CAAC,WAAW,EAAE,CAAC;YACzB,OAAO,SAAS,CAAC;QACnB,CAAC;QAED,OAAO;YACL,GAAG,EAAE,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC;YAC3C,KAAK,EAAE,QAAQ,CAAC,QAAQ,EAAE,QAAQ,CAAC,IAAI,CAAC;SACzC,CAAC;IACJ,CAAC;IAED,SAAS,QAAQ,CAAC,QAAmB,EAAE,IAAgB;QACrD,MAAM,KAAK,GAAG,IAAI,CAAC,6BAA6B,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;QAC/D,MAAM,GAAG,GAAG,IAAI,CAAC,6BAA6B,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;QAC7D,OAAO,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;IAClC,CAAC;IAED,SAAS,GAAG,CAAC,GAAc;QACzB,IAAI,CAAC,aAAa,EAAE,CAAC;YACnB,eAAe,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAC1B,OAAO;QACT,CAAC;QAED,KAAK,MAAM,OAAO,IAAI,eAAe,EAAE,CAAC;YACtC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACpB,CAAC;QAED,eAAe,GAAG,EAAE,CAAC;QACrB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IAChB,CAAC;IAED,SAAS,eAAe,CAAC,QAAsB,EAAE,WAA2B;QAC1E,IAAI,CAAC,eAAe,CAAC;YACnB,GAAG,EAAE,QAAQ,CAAC,GAAG;YACjB,OAAO,EAAE,QAAQ,CAAC,OAAO;YACzB,WAAW;SACZ,CAAC,CAAC;IACL,CAAC;IAED,SAAS,kBAAkB;QACzB,MAAM,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC;QAC/B,OAAO;YACL,GAAG,IAAI;YACP,UAAU,EAAE,IAAI,OAAO,EAAE;YACzB,QAAQ;YACR,IAAI;YACJ,iBAAiB;YACjB,OAAO,EAAE;gBACP,GAAG,EAAE,CAAC,GAAiB,EAAE,EAAE;oBACzB,MAAM,GAAG,GAAG,SAAS,CAAC,GAAG,EAAE,EAAE,eAAe,EAAE,IAAI,EAAE,CAAC,CAAC;oBACtD,MAAM,IAAI,GAAc;wBACtB,KAAK,EAAE,GAAG,CAAC,KAAK;wBAChB,OAAO,EAAE,GAAG;qBACb,CAAC;oBACF,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;gBACjB,CAAC;aACF;SACF,CAAC;QAEF,KAAK,UAAU,QAAQ,CAAC,IAAY;YAClC,MAAM,QAAQ,GAAG,WAAW,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;YACnD,MAAM,MAAM,GAAG,MAAM,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YAE/C,YAAY;YACZ,IAAI,MAAM,IAAI,CAAC,CAAC,QAAQ,IAAI,QAAQ,CAAC,OAAO,KAAK,MAAM,CAAC,OAAO,CAAC,EAAE,CAAC;gBACjE,IAAI,MAAM,CAAC,IAAI,KAAK,OAAO,EAAE,CAAC;oBAC5B,MAAM,MAAM,CAAC,KAAK,CAAC;gBACrB,CAAC;gBACD,OAAO,MAAM,CAAC,IAAI,CAAC;YACrB,CAAC;YAED,sEAAsE;YACtE,sEAAsE;YACtE,IAAI,QAAQ,EAAE,CAAC;gBACb,MAAM,IAAI,GAAG;oBACX,QAAQ;oBACR,GAAG,gBAAgB,CAAC,QAAQ,CAAC,OAAO,EAAE,EAAE,IAAI,CAAC;iBAC9C,CAAC;gBACF,eAAe,CAAC,GAAG,CAAC,IAAI,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;gBAC7E,OAAO,IAAI,CAAC;YACd,CAAC;YAED,yBAAyB;YACzB,IAAI,CAAC;gBACH,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;gBACvC,eAAe,CAAC,GAAG,CAAC,IAAI,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;gBAClD,OAAO,IAAI,CAAC;YACd,CAAC;YAAC,OAAO,KAAK,EAAE,CAAC;gBACf,eAAe,CAAC,GAAG,CAAC,IAAI,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;gBACpD,MAAM,KAAK,CAAC;YACd,CAAC;QACH,CAAC;QAED,KAAK,UAAU,IAAI,CAAC,IAAY;YAC9B,0EAA0E;YAC1E,4DAA4D;YAC5D,IAAI,WAAW,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,KAAK,MAAM,EAAE,CAAC;gBAC5F,OAAO;oBACL,MAAM;wBACJ,OAAO,IAAI,CAAC;oBACd,CAAC;oBACD,WAAW;wBACT,OAAO,KAAK,CAAC;oBACf,CAAC;iBACF,CAAC;YACJ,CAAC;YACD,OAAO,MAAM,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/B,CAAC;QAED,SAAS,iBAAiB,CAAC,IAAY;YACrC,MAAM,QAAQ,GAAG,WAAW,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;YACnD,IAAI,QAAQ,EAAE,UAAU,KAAK,UAAU,EAAE,CAAC;gBACxC,OAAO,UAAU,CAAC;YACpB,CAAC;YACD,OAAO,wBAAwB,CAAC,IAAI,CAAC,CAAC;QACxC,CAAC;IACH,CAAC;AACH,CAAC;AAOD,SAAS,8BAA8B,CACrC,MAA0B,EAC1B,QAAgB;IAEhB,gEAAgE;IAChE,yEAAyE;IACzE,gDAAgD;IAChD,QAAQ,GAAG,uBAAuB,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;IAErD,MAAM,IAAI,GAAG,iBAAiB,CAC5B,MAAM,EACN,QAAQ,EACR,CAAC,CAAC,EAA0B,EAAE;QAC5B,QAAQ,CAAC,CAAC,IAAI,EAAE,CAAC;YACf,KAAK,UAAU,CAAC,mBAAmB,CAAC;YACpC,KAAK,UAAU,CAAC,yBAAyB,CAAC;YAC1C,KAAK,UAAU,CAAC,aAAa;gBAC3B,+DAA+D;gBAC/D,+DAA+D;gBAC/D,iEAAiE;gBACjE,iEAAiE;gBACjE,IAAI,QAAQ,IAAI,CAAC,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC;oBAC7B,OAAO,KAAK,CAAC;gBACf,CAAC;gBAED,qEAAqE;gBACrE,yCAAyC;gBACzC,IAAI,QAAQ,KAAK,CAAC,CAAC,GAAG,EAAE,CAAC;oBACvB,MAAM,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;oBAC1D,MAAM,SAAS,GACb,CAAC,CAAC,IAAI,KAAK,UAAU,CAAC,aAAa,CAAC,CAAC,+BAAsB,CAAC,6BAAoB,CAAC;oBACnF,IAAI,OAAO,KAAK,SAAS,EAAE,CAAC;wBAC1B,OAAO,KAAK,CAAC;oBACf,CAAC;gBACH,CAAC;gBACD,OAAO,IAAI,CAAC;YACd;gBACE,OAAO,KAAK,CAAC;QACjB,CAAC;IACH,CAAC,CACF,CAAC;IAEF,IAAI,CAAC,IAAI,EAAE,CAAC;QACV,OAAO,SAAS,CAAC;IACnB,CAAC;IAED,MAAM,aAAa,GAAG,6BAA6B,CAAC,MAAM,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC;IAC5E,IAAI,aAAa,GAAG,CAAC,EAAE,CAAC;QACtB,OAAO,SAAS,CAAC;IACnB,CAAC;IAED,OAAO,EAAE,IAAI,EAAE,aAAa,EAAE,CAAC;AACjC,CAAC;AAED,SAAS,6BAA6B,CACpC,MAA0B,EAC1B,IAAuB,EACvB,QAAgB;IAEhB,mEAAmE;IACnE,sBAAsB;IACtB,MAAM,IAAI,GACR,IAAI,CAAC,IAAI,KAAK,UAAU,CAAC,yBAAyB;QAChD,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC;QACtC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC;IAErB,yEAAyE;IACzE,mEAAmE;IACnE,wEAAwE;IACxE,gDAAgD;IAChD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;QACrC,IAAI,QAAQ,IAAI,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC;YAC1D,OAAO,CAAC,CAAC;QACX,CAAC;IACH,CAAC;IAED,0EAA0E;IAC1E,yEAAyE;IACzE,kEAAkE;IAClE,oCAAoC;IACpC,OAAO,IAAI,CAAC,MAAM,CAAC;AACrB,CAAC;AAED;;;;GAIG;AACH,MAAM,UAAU,2BAA2B,CACzC,MAA0B,EAC1B,QAAgB,EAChB,SAAkC,CAAC,IAAU,EAAE,EAAE,CAAC,IAAI;IAEtD,OAAO,uBAAuB,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAC;AAC3D,CAAC"}
\ No newline at end of file
+{"version":3,"file":"serverlib.js","sourceRoot":"","sources":["../../../src/server/serverlib.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/dist/src/server/update-manager.d.ts b/dist/src/server/update-manager.d.ts
index 2cf14cc6f2abe97e67b539576501743ff0457659..0694e514a04a5b225d8de34de9f732bcfb2dc8cc 100644
--- a/dist/src/server/update-manager.d.ts
+++ b/dist/src/server/update-manager.d.ts
@@ -10,7 +10,7 @@ type UpdateCallback = (updates: PendingUpdate[]) => Promise<void>;
 /**
  * Track file updates and recompile the affected files after some debounce time.
  */
-export declare class UpdateManger {
+export declare class UpdateManager {
     #private;
     private _log;
     constructor(log: (sl: ServerLog) => void);
diff --git a/dist/src/server/update-manager.d.ts.map b/dist/src/server/update-manager.d.ts.map
index 9749435e10671f87d3b3efa23e5c7a2c1a538e58..006f5cc44b5e13dc595aed3152cd57a05fed06a1 100644
--- a/dist/src/server/update-manager.d.ts.map
+++ b/dist/src/server/update-manager.d.ts.map
@@ -1 +1 @@
-{"version":3,"file":"update-manager.d.ts","sourceRoot":"","sources":["../../../src/server/update-manager.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,sBAAsB,EAAE,MAAM,uBAAuB,CAAC;AAC/D,OAAO,EAAE,YAAY,EAAE,MAAM,oCAAoC,CAAC;AAElE,OAAO,EAAE,SAAS,EAAE,MAAM,YAAY,CAAC;AAEvC,UAAU,aAAa;IACrB,MAAM,EAAE,YAAY,GAAG,sBAAsB,CAAC;IAC9C,qBAAqB,EAAE,MAAM,CAAC;CAC/B;AAED,MAAM,MAAM,UAAU,GAAG,QAAQ,GAAG,SAAS,GAAG,QAAQ,GAAG,SAAS,CAAC;AAErE,KAAK,cAAc,GAAG,CAAC,OAAO,EAAE,aAAa,EAAE,KAAK,OAAO,CAAC,IAAI,CAAC,CAAC;AAClE;;GAEG;AACH,qBAAa,YAAY;;IAQvB,OAAO,CAAC,IAAI,CAA0B;gBAE1B,GAAG,EAAE,CAAC,EAAE,EAAE,SAAS,KAAK,IAAI;IAsBjC,WAAW,CAAC,QAAQ,EAAE,cAAc;IAI3C,IAAW,iBAAiB,WAE3B;IAED,OAAO,CAAC,qBAAqB;IAI7B,OAAO,CAAC,uBAAuB;IAK/B,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAQ;IAC/B,OAAO,CAAC,QAAQ,CAAC,aAAa,CAAO;IAGrC,OAAO,CAAC,QAAQ,CAAC,gBAAgB,CAiB/B;IAEF,OAAO,CAAC,8BAA8B;IAQtC,OAAO,CAAC,wBAAwB,CAS9B;IAEK,cAAc,CAAC,QAAQ,EAAE,YAAY,GAAG,sBAAsB,EAAE,UAAU,EAAE,UAAU;CAuB9F;AAED;;;;;;;GAOG;AACH,wBAAgB,gBAAgB,CAC9B,EAAE,EAAE,MAAM,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC,EAC9B,QAAQ,EAAE,MAAM,MAAM,EACtB,GAAG,EAAE,CAAC,EAAE,EAAE,SAAS,KAAK,IAAI,GAC3B,MAAM,IAAI,CAwCZ"}
\ No newline at end of file
+{"version":3,"file":"update-manager.d.ts","sourceRoot":"","sources":["../../../src/server/update-manager.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,sBAAsB,EAAE,MAAM,uBAAuB,CAAC;AAC/D,OAAO,EAAE,YAAY,EAAE,MAAM,oCAAoC,CAAC;AAElE,OAAO,EAAE,SAAS,EAAE,MAAM,YAAY,CAAC;AAEvC,UAAU,aAAa;IACrB,MAAM,EAAE,YAAY,GAAG,sBAAsB,CAAC;IAC9C,qBAAqB,EAAE,MAAM,CAAC;CAC/B;AAED,MAAM,MAAM,UAAU,GAAG,QAAQ,GAAG,SAAS,GAAG,QAAQ,GAAG,SAAS,CAAC;AAErE,KAAK,cAAc,GAAG,CAAC,OAAO,EAAE,aAAa,EAAE,KAAK,OAAO,CAAC,IAAI,CAAC,CAAC;AAClE;;GAEG;AACH,qBAAa,aAAa;;IAQxB,OAAO,CAAC,IAAI,CAA0B;gBAE1B,GAAG,EAAE,CAAC,EAAE,EAAE,SAAS,KAAK,IAAI;IAsBjC,WAAW,CAAC,QAAQ,EAAE,cAAc;IAI3C,IAAW,iBAAiB,WAE3B;IAED,OAAO,CAAC,qBAAqB;IAI7B,OAAO,CAAC,uBAAuB;IAK/B,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAQ;IAC/B,OAAO,CAAC,QAAQ,CAAC,aAAa,CAAO;IAGrC,OAAO,CAAC,QAAQ,CAAC,gBAAgB,CAiB/B;IAEF,OAAO,CAAC,8BAA8B;IAQtC,OAAO,CAAC,wBAAwB,CAS9B;IAEK,cAAc,CAAC,QAAQ,EAAE,YAAY,GAAG,sBAAsB,EAAE,UAAU,EAAE,UAAU;CAuB9F;AAED;;;;;;;GAOG;AACH,wBAAgB,gBAAgB,CAC9B,EAAE,EAAE,MAAM,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC,EAC9B,QAAQ,EAAE,MAAM,MAAM,EACtB,GAAG,EAAE,CAAC,EAAE,EAAE,SAAS,KAAK,IAAI,GAC3B,MAAM,IAAI,CAwCZ"}
\ No newline at end of file
diff --git a/dist/src/server/update-manager.js b/dist/src/server/update-manager.js
index 4ee0c09a64028fef9f8fb49c3eedd1c8664dd021..1a720e9ecda77d7f8221d1cc1a33fc720b4b317d 100644
--- a/dist/src/server/update-manager.js
+++ b/dist/src/server/update-manager.js
@@ -2,7 +2,7 @@ import { ENABLE_UPDATE_MANAGER_LOGGING } from "./constants.js";
 /**
  * Track file updates and recompile the affected files after some debounce time.
  */
-export class UpdateManger {
+export class UpdateManager {
     #pendingUpdates = new Map();
     #updateCb;
     // overall version which should be bumped for any actual doc change
diff --git a/dist/src/server/update-manager.js.map b/dist/src/server/update-manager.js.map
index 528ab37ff317fa51191536e1e0b006ba3f4c0c84..823875d0c7a14e63e8795a28e34e76c1c28d76f8 100644
--- a/dist/src/server/update-manager.js.map
+++ b/dist/src/server/update-manager.js.map
@@ -1 +1 @@
-{"version":3,"file":"update-manager.js","sourceRoot":"","sources":["../../../src/server/update-manager.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"update-manager.js","sourceRoot":"","sources":["../../../src/server/update-manager.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/package.json b/package.json
index 670c118707a71bd03cd91cda470b6244ee5c0c38..1c06b508974e2831ab908285c3888d4b6d2b4b53 100644
--- a/package.json
+++ b/package.json
@@ -118,8 +118,8 @@
     "vitest": "^3.1.2",
     "vscode-oniguruma": "~2.0.1",
     "vscode-textmate": "~9.2.0",
-    "@typespec/internal-build-utils": "^0.75.0",
-    "tmlanguage-generator": "^0.6.4"
+    "tmlanguage-generator": "^0.6.4",
+    "@typespec/internal-build-utils": "^0.75.0"
   },
   "scripts": {
     "clean": "rimraf ./dist ./temp",

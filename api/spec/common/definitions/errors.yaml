components:
  responses:
    ErrorResponse:
      description: api error response
      content:
        application/problem+json:
          schema:
            oneOf:
              - $ref: '#/components/responses/BadRequest'
              - $ref: '#/components/responses/Unauthorized'
              - $ref: '#/components/responses/Forbidden'
              - $ref: '#/components/responses/NotFound'
              - $ref: '#/components/responses/Conflict'
              - $ref: '#/components/responses/Gone'
              - $ref: '#/components/responses/Internal'
              - $ref: '#/components/responses/NotAvailable'
            discriminator:
              propertyName: status
              mapping:
                '400': '#/components/responses/BadRequest'
                '401': '#/components/responses/Unauthorized'
                '403': '#/components/responses/Forbidden'
                '404': '#/components/responses/NotFound'
                '409': '#/components/responses/Conflict'
                '410': '#/components/responses/Gone'
                '500': '#/components/responses/Internal'
                '503': '#/components/responses/NotAvailable'
    # 400
    BadRequest:
      description: Bad Request
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/BadRequestError'
    KonnectCPLegacyBadRequest:
      description: Forbidden
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/KonnectCPLegacyBadRequestError'
          examples:
            UnauthorizedExample:
              $ref: '#/components/examples/KonnectCPLegacyBadRequestExample'
    # 401
    Unauthorized:
      description: Unauthorized
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/UnauthorizedError'
          examples:
            UnauthorizedExample:
              $ref: '#/components/examples/UnauthorizedExample'
    KonnectCPLegacyUnauthorized:
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/KonnectCPLegacyUnauthorizedError'
          examples:
            UnauthorizedExample:
              $ref: '#/components/examples/KonnectCPLegacyUnauthorizedExample'
    # 403
    Forbidden:
      description: Forbidden
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ForbiddenError'
          examples:
            UnauthorizedExample:
              $ref: '#/components/examples/ForbiddenExample'
    KonnectCPLegacyForbidden:
      description: Forbidden
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/KonnectCPLegacyForbiddenError'
          examples:
            UnauthorizedExample:
              $ref: '#/components/examples/KonnectCPLegacyForbiddenExample'
    # 404
    NotFound:
      description: Not Found
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/NotFoundError'
          examples:
            NotFoundExample:
              $ref: '#/components/examples/NotFoundExample'
    KonnectCPLegacyNotFound:
      description: Forbidden
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/KonnectCPLegacyNotFoundError'
          examples:
            UnauthorizedExample:
              $ref: '#/components/examples/KonnectCPLegacyNotFoundExample'
    # 409
    Conflict:
      description: Conflict
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ConflictError'
    KonnectCPLegacyConflict:
      description: Forbidden
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/KonnectCPLegacyConflictError'
          examples:
            UnauthorizedExample:
              $ref: '#/components/examples/KonnectCPLegacyConflictExample'
    # 410
    Gone:
      description: Gone
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/GoneError'
    # 415
    UnsupportedMediaType:
      description: Unsupported Media Type
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/UnsupportedMediaTypeError'
          examples:
            UnsupportedMediaTypeExample:
              $ref: '#/components/examples/UnsupportedMediaTypeExample'
    UnprocessableContent:
      description: Unprocessable Content
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/UnprocessableContentError'
          examples:
            UnprocessableContentExample:
              $ref: '#/components/examples/UnprocessableContentExample'
    # 429
    TooManyRequests:
      description: Too Many Requests
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/TooManyRequestsError'
    # 500
    Internal:
      description: Internal
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/InternalError'
    # 503
    NotAvailable:
      description: Service not available
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/NotAvailableError'
    NotImplemented:
      description: Not Implemented
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/NotImplementedError'
  schemas:
    InvalidRules:
      description: invalid parameters rules
      type: string
      readOnly: true
      nullable: true
      enum:
        - required
        - is_array
        - is_base64
        - is_boolean
        - is_date_time
        - is_integer
        - is_null
        - is_number
        - is_object
        - is_string
        - is_uuid
        - is_fqdn
        - is_arn
        - unknown_property
        - missing_reference
        - is_label
        - matches_regex
        - invalid
        - is_supported_network_availability_zone_list
        - is_supported_network_cidr_block
        - is_supported_provider_region
        - type
    InvalidParameters:
      type: array
      nullable: false
      uniqueItems: true
      minItems: 1
      description: invalid parameters
      items:
        oneOf:
          - $ref: '#/components/schemas/InvalidParameterStandard'
          - $ref: '#/components/schemas/InvalidParameterMinimumLength'
          - $ref: '#/components/schemas/InvalidParameterMaximumLength'
          - $ref: '#/components/schemas/InvalidParameterChoiceItem'
          - $ref: '#/components/schemas/InvalidParameterDependentItem'
    InvalidParameterStandard:
      type: object
      additionalProperties: false
      properties:
        field:
          type: string
          example: name
          readOnly: true
        rule:
          $ref: '#/components/schemas/InvalidRules'
        source:
          type: string
          example: body
        reason:
          type: string
          example: is a required field
          readOnly: true
      required:
        - field
        - reason
    InvalidParameterMinimumLength:
      type: object
      additionalProperties: false
      properties:
        field:
          type: string
          example: name
          readOnly: true
        rule:
          description: invalid parameters rules
          type: string
          readOnly: true
          nullable: false
          enum:
            - min_length
            - min_digits
            - min_lowercase
            - min_uppercase
            - min_symbols
            - min_items
            - min
        minimum:
          type: integer
          example: 8
        source:
          type: string
          example: body
        reason:
          type: string
          example: must have at least 8 characters
          readOnly: true
      required:
        - field
        - reason
        - rule
        - minimum
    InvalidParameterMaximumLength:
      type: object
      additionalProperties: false
      properties:
        field:
          type: string
          example: name
          readOnly: true
        rule:
          description: invalid parameters rules
          type: string
          readOnly: true
          nullable: false
          enum:
            - max_length
            - max_items
            - max
        maximum:
          type: integer
          example: 8
        source:
          type: string
          example: body
        reason:
          type: string
          example: must not have more than 8 characters
          readOnly: true
      required:
        - field
        - reason
        - rule
        - maximum
    InvalidParameterChoiceItem:
      type: object
      additionalProperties: false
      properties:
        field:
          type: string
          example: name
          readOnly: true
        rule:
          description: invalid parameters rules
          type: string
          readOnly: true
          nullable: false
          enum:
            - enum
        reason:
          type: string
          example: is a required field
          readOnly: true
        choices:
          type: array
          uniqueItems: true
          readOnly: true
          nullable: false
          minItems: 1
          items: {}
        source:
          type: string
          example: body
      required:
        - field
        - reason
        - rule
        - choices
    InvalidParameterDependentItem:
      type: object
      additionalProperties: false
      properties:
        field:
          type: string
          example: name
          readOnly: true
        rule:
          description: invalid parameters rules
          type: string
          readOnly: true
          nullable: true
          enum:
            - dependent_fields
        reason:
          type: string
          example: is a required field
          readOnly: true
        dependents:
          type: array
          uniqueItems: true
          nullable: true
          items: {}
          readOnly: true
        source:
          type: string
          example: body
      required:
        - field
        - rule
        - reason
        - dependents
    KonnectCPLegacyBaseError:
      type: object
      title: Error
      description: standard error
      properties:
        message:
          type: string
          description: |
            A short summary of the problem.
          readOnly: true
    BaseError:
      type: object
      title: Error
      description: standard error
      required:
        - status
        - title
        - instance
        - detail
      properties:
        status:
          type: integer
          description: |
            The HTTP status code of the error. Useful when passing the response
            body to child properties in a frontend UI. Must be returned as an integer.
          readOnly: true
        title:
          type: string
          description: |
            A short, human-readable summary of the problem. It should not
            change between occurences of a problem, except for localization.
            Should be provided as "Sentence case" for direct use in the UI.
          readOnly: true
        type:
          type: string
          description: The error type.
          readOnly: true
        instance:
          type: string
          description: |
            Used to return the correlation ID back to the user, in the format
            kong:trace:<correlation_id>. This helps us find the relevant logs
            when a customer reports an issue.
          readOnly: true
        detail:
          type: string
          description: |
            A human readable explanation specific to this occurence of the problem.
            This field may contain request/entity data to help the user understand
            what went wrong. Enclose variable values in square brackets. Should be
            provided as "Sentence case" for direct use in the UI.
          readOnly: true
    BadRequestError:
      allOf:
        - $ref: '#/components/schemas/BaseError'
        - type: object
          required:
            - invalid_parameters
          properties:
            invalid_parameters:
              $ref: '#/components/schemas/InvalidParameters'
    KonnectCPLegacyBadRequestError:
      allOf:
        - $ref: '#/components/schemas/KonnectCPLegacyBaseError'
        - type: object
          properties:
            message:
              example: Bad Request
    UnauthorizedError:
      allOf:
        - $ref: '#/components/schemas/BaseError'
        - type: object
          properties:
            status:
              example: 401
            title:
              example: Unauthorized
            type:
              example: https://httpstatuses.com/401
            instance:
              example: kong:trace:1234567890
            detail:
              example: Invalid credentials

    KonnectCPLegacyUnauthorizedError:
      allOf:
        - $ref: '#/components/schemas/KonnectCPLegacyBaseError'
        - type: object
          properties:
            message:
              example: Unauthorized
    KonnectCPLegacyForbiddenError:
      allOf:
        - $ref: '#/components/schemas/KonnectCPLegacyBaseError'
        - type: object
          properties:
            message:
              example: Forbidden
    KonnectCPLegacyNotFoundError:
      allOf:
        - $ref: '#/components/schemas/KonnectCPLegacyBaseError'
        - type: object
          properties:
            message:
              example: Not Found
    ForbiddenError:
      allOf:
        - $ref: '#/components/schemas/BaseError'
        - type: object
          properties:
            status:
              example: 403
            title:
              example: Forbidden
            type:
              example: https://httpstatuses.com/403
            instance:
              example: kong:trace:1234567890
            detail:
              example: Forbidden
    NotFoundError:
      allOf:
        - $ref: '#/components/schemas/BaseError'
        - type: object
          properties:
            status:
              example: 404
            title:
              example: Not Found
            type:
              example: https://httpstatuses.com/404
            instance:
              example: kong:trace:1234567890
            detail:
              example: Not found
    NotImplementedError:
      allOf:
        - $ref: '#/components/schemas/BaseError'
        - type: object
          properties:
            status:
              example: 501
            title:
              example: Not Implemented
            type:
              example: https://httpstatuses.com/501
            instance:
              example: kong:trace:1234567890
            detail:
              example: Not Implemented
    ConflictError:
      allOf:
        - $ref: '#/components/schemas/BaseError'
        - type: object
          properties:
            status:
              example: 409
            title:
              example: Conflict
            type:
              example: https://httpstatuses.com/409
            instance:
              example: kong:trace:1234567890
            detail:
              example: Conflict
    KonnectCPLegacyConflictError:
      allOf:
        - $ref: '#/components/schemas/KonnectCPLegacyBaseError'
        - type: object
          properties:
            message:
              example: Conflict
    UnsupportedMediaTypeError:
      allOf:
        - $ref: '#/components/schemas/BaseError'
        - type: object
          properties:
            status:
              example: 415
            title:
              example: UnsupportedMediaType
            type:
              example: https://httpstatuses.com/415
            instance:
              example: kong:trace:1234567890
            detail:
              example: UnsupportedMediaType
    UnprocessableContentError:
      allOf:
        - $ref: '#/components/schemas/BaseError'
        - type: object
          properties:
            status:
              example: 422
            title:
              example: Unprocessable Content
            type:
              example: https://httpstatuses.com/422
            instance:
              example: kong:trace:1234567891
            detail:
              example: Unprocessable Content
    TooManyRequestsError:
      allOf:
        - $ref: '#/components/schemas/BaseError'
        - type: object
          properties:
            status:
              example: 429
            title:
              example: Too Many Requests
            type:
              example: https://httpstatuses.com/429
            instance:
              example: kong:trace:1234567890
            detail:
              example: Too Many Requests
    GoneError:
      allOf:
        - $ref: '#/components/schemas/BaseError'
        - type: object
          properties:
            status:
              example: 410
            title:
              example: Gone
            type:
              example: https://httpstatuses.com/410
            instance:
              example: kong:trace:1234567890
            detail:
              example: Gone
    InternalError:
      $ref: '#/components/schemas/BaseError'
    NotAvailableError:
      $ref: '#/components/schemas/BaseError'
  examples:
    ForbiddenExample:
      value:
        status: 403
        title: Forbidden
        instance: kong:trace:2723154947768991354
        detail: You do not have permission to perform this action
    KonnectCPLegacyBadRequestExample:
      value:
        message: Bad Request
    KonnectCPLegacyUnauthorizedExample:
      value:
        message: Unauthorized
    KonnectCPLegacyForbiddenExample:
      value:
        message: Forbidden
    KonnectCPLegacyNotFoundExample:
      value:
        message: Not Found
    KonnectCPLegacyConflictExample:
      value:
        message: Conflict
    NotFoundExample:
      value:
        status: 404
        title: Not Found
        instance: kong:trace:6816496025408232265
        detail: Not Found
    UnsupportedMediaTypeExample:
      value:
        status: 415
        title: Unsupported Media Type
        instance: kong:trace:8347343766220159418
        detail: 'This API only supports requests with `Content-Type: application/json`'
    UnprocessableContentExample:
      value:
        status: 422
        title: Unprocessable Content
        instance: kong:trace:8347343766220159419
        detail: 'The requested operation cannot be performed with the provided data'
    UnauthorizedExample:
      value:
        status: 401
        title: Unauthorized
        instance: kong:trace:8347343766220159418
        detail: Unauthorized
